Version,Commit Message
release-0.8.40,from Cython.Distutils import build_ext
release-0.8.40,"Import numpy here, only when headers are needed"
release-0.8.40,Add numpy headers to include_dirs
release-0.8.40,Call original build_ext command
release-0.8.40,The dependencies are the same as the contents of requirements.txt
release-0.8.40,"A little ""fancy"" we select from the flattened array reshape back"
release-0.8.40,(Fortran format to get indexing right) and take the product to do an and
release-0.8.40,then convert back to boolean type.
release-0.8.40,Density sparseness is not well defined if there are no
release-0.8.40,internal edges (as per the referenced paper). However
release-0.8.40,MATLAB code from the original authors simply selects the
release-0.8.40,largest of *all* the edges in the case that there are
release-0.8.40,"no internal edges, so we do the same here"
release-0.8.40,"If there are any internal edges, then subselect them out"
release-0.8.40,If there are no internal edges then we want to take the
release-0.8.40,"max over all the edges that exist in the MST, so we simply"
release-0.8.40,do nothing and return all the edges in the MST.
release-0.8.40,-*- coding: utf-8 -*-
release-0.8.40,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.40,Steve Astels <sastels@gmail.com>
release-0.8.40,John Healy <jchealy@gmail.com>
release-0.8.40,
release-0.8.40,License: BSD 3 clause
release-0.8.40,"Treating this case explicitly, instead of letting"
release-0.8.40,"sklearn.metrics.pairwise_distances handle it,"
release-0.8.40,enables the usage of numpy.inf in the distance
release-0.8.40,matrix to indicate missing distance information.
release-0.8.40,TODO: Check if copying is necessary
release-0.8.40,raise TypeError('Sparse distance matrices not yet supported')
release-0.8.40,Warn if the MST couldn't be constructed around the missing distances
release-0.8.40,mst_linkage_core does not generate a full minimal spanning tree
release-0.8.40,If a tree is required then we must build the edges from the information
release-0.8.40,returned by mst_linkage_core (i.e. just the order of points to be merged)
release-0.8.40,Sort edges of the min_spanning_tree by weight
release-0.8.40,Convert edge list into standard hierarchical clustering format
release-0.8.40,Check for connected component on X
release-0.8.40,Compute sparse mutual reachability graph
release-0.8.40,"if max_dist > 0, max distance to use when the reachability is infinite"
release-0.8.40,Check connected component on mutual reachability
release-0.8.40,"If more than one component, it means that even if the distance matrix X"
release-0.8.40,"has one component, there exists with less than `min_samples` neighbors"
release-0.8.40,Compute the minimum spanning tree for the sparse graph
release-0.8.40,Convert the graph to scipy cluster array format
release-0.8.40,Sort edges of the min_spanning_tree by weight
release-0.8.40,Convert edge list into standard hierarchical clustering format
release-0.8.40,The Cython routines used require contiguous arrays
release-0.8.40,TO DO: Deal with p for minkowski appropriately
release-0.8.40,Get distance to kth nearest neighbour
release-0.8.40,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.40,Sort edges of the min_spanning_tree by weight
release-0.8.40,Convert edge list into standard hierarchical clustering format
release-0.8.40,The Cython routines used require contiguous arrays
release-0.8.40,Get distance to kth nearest neighbour
release-0.8.40,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.40,Sort edges of the min_spanning_tree by weight
release-0.8.40,Convert edge list into standard hierarchical clustering format
release-0.8.40,Sort edges of the min_spanning_tree by weight
release-0.8.40,Convert edge list into standard hierarchical clustering format
release-0.8.40,Sort edges of the min_spanning_tree by weight
release-0.8.40,Convert edge list into standard hierarchical clustering format
release-0.8.40,Checks input and converts to an nd-array where possible
release-0.8.40,"Only non-sparse, precomputed distance matrices are handled here"
release-0.8.40,and thereby allowed to contain numpy.inf for missing distances
release-0.8.40,Python 2 and 3 compliant string_type checking
release-0.8.40,We can't do much with sparse matrices ...
release-0.8.40,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.40,still debugging for now
release-0.8.40,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.40,still debugging for now
release-0.8.40,Inherits from sklearn
release-0.8.40,Non-precomputed matrices may contain non-finite values.
release-0.8.40,Rows with these values
release-0.8.40,Pass only the purely finite indices into hdbscan
release-0.8.40,We will later assign all non-finite points to the background -1 cluster
release-0.8.40,Handle sparse precomputed distance matrices separately
release-0.8.40,"Only non-sparse, precomputed distance matrices are allowed"
release-0.8.40,to have numpy.inf values indicating missing distances
release-0.8.40,"prediction data only applies to the persistent model, so remove"
release-0.8.40,it from the keyword args we pass on the the function
release-0.8.40,remap indices to align with original data in the case of non-finite entries.
release-0.8.40,"Unltimately, for each Ci, we only require the"
release-0.8.40,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
release-0.8.40,"So let's call this value DSPC_wrt(Ci), i.e."
release-0.8.40,density separation 'with respect to' Ci.
release-0.8.40,If exactly one of the points is noise
release-0.8.40,Set the density sparseness of the cluster
release-0.8.40,to the sparsest value seen so far.
release-0.8.40,Check whether density separations with
release-0.8.40,respect to each of these clusters can
release-0.8.40,be reduced.
release-0.8.40,"In case min_outlier_sep is still np.inf, we assign a new value to it."
release-0.8.40,This only makes sense if num_clusters = 1 since it has turned out
release-0.8.40,that the MR-MST has no edges between a noise point and a core point.
release-0.8.40,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
release-0.8.40,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
release-0.8.40,MR-MST might contain an edge with one point in Cj and ther other one
release-0.8.40,"in Ck. Here, we replace the infinite density separation of Ci by"
release-0.8.40,another large enough value.
release-0.8.40,
release-0.8.40,TODO: Think of a better yet efficient way to handle this.
release-0.8.40,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
release-0.8.40,Use a previously initialized/trained HDBSCAN
release-0.8.40,Handle the trivial case first.
release-0.8.40,Always generate prediction_data to avoid later woes
release-0.8.40,This will later be chosen according to n_clusters
release-0.8.40,Initialize and train clusterer if one was not previously supplied.
release-0.8.40,Always generate prediction data
release-0.8.40,We do not pass cluster_selection_epsilon here.
release-0.8.40,"While this adds unnecessary computation, it makes the code"
release-0.8.40,easier to read and debug.
release-0.8.40,"Train on 'X'. Do this even if the supplied clusterer was trained,"
release-0.8.40,because we want to make sure it fits 'X'.
release-0.8.40,"Pick an epsilon value right after a split produces n_clusters,"
release-0.8.40,and the don't split further for smaller epsilon (larger lambda)
release-0.8.40,Or use the specified cluster_selection_epsilon
release-0.8.40,"Extract tree related stuff, in order to re-assign labels"
release-0.8.40,Get labels according to the required cluster_selection_epsilon
release-0.8.40,Reflect the related changes in HDBSCAN.
release-0.8.40,PredictionData attached to HDBSCAN should also change.
release-0.8.40,A function re_init is defined in this module to handle this.
release-0.8.40,"From a fitted HDBSCAN model, predict for n_clusters=5"
release-0.8.40,Store prediciton data for later use.
release-0.8.40,and use this prediction data to predict on new points
release-0.8.40,Get number of fitted clusters for later use.
release-0.8.40,We'll need the condensed tree later...
release-0.8.40,"If none of the three arguments: prediction_data, n_clusters,"
release-0.8.40,"and cluster_selection_epsilon are supplied,"
release-0.8.40,then use clusterer's prediciton data directly
release-0.8.40,"If either of n_clusters or cluster_selection_epsilon were supplied,"
release-0.8.40,then build prediction data from these by modifying clusterer's
release-0.8.40,Get prediction data from clusterer
release-0.8.40,Modify prediction_data to reflect new n_clusters
release-0.8.40,"First, make a copy of prediction data to avoid modifying source"
release-0.8.40,Cluster selection method is hold by condensed_tree.
release-0.8.40,Change from 'eom' to 'leaf' if n_clusters is too large.
release-0.8.40,This change does not affect the tree associated with 'clusterer'
release-0.8.40,Re-initialize prediction_data for the specified n_clusters or epsilon
release-0.8.40,============================================================
release-0.8.40,Now we're ready to use prediction_data
release-0.8.40,"The rest of the code is copied from HDBSCAN's approximate_predict,"
release-0.8.40,but modified to use prediction_data instead of clusterer's attribute
release-0.8.40,Extract condensed tree for later use
release-0.8.40,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.40,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.40,Use the same prediction_data as clusterer's
release-0.8.40,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.40,produces a specified number of n_clusters
release-0.8.40,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.40,Create another instance of prediction_data that is consistent
release-0.8.40,with the selected value of epsilon.
release-0.8.40,Flat clustering from prediction data
release-0.8.40,Initialize probabilities
release-0.8.40,k-NN for prediciton points to training set
release-0.8.40,Loop over prediction points to compute probabilities
release-0.8.40,We need to find where in the tree the new point would go
release-0.8.40,for the purposes of outlier membership approximation
release-0.8.40,"Find row in tree where nearest neighbor drops out,"
release-0.8.40,so we can get a lambda value for the nearest neighbor
release-0.8.40,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
release-0.8.40,"Equivalently, this assigns core distance for prediction point as"
release-0.8.40,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
release-0.8.40,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.40,Use new prediction_data that points to exemplars that are specific
release-0.8.40,to the choice of n_clusters
release-0.8.40,Probabilities based on how long the nearest exemplar persists in
release-0.8.40,each cluster (with respect to most persistent exemplar)
release-0.8.40,Use new clusters that are defined by the choice of n_clusters.
release-0.8.40,Merge the two probabilities to produce a single set of probabilities
release-0.8.40,Include probability that the nearest neighbor belongs to a cluster
release-0.8.40,Rename variable so it's easy to understand what's being returned
release-0.8.40,Extract condensed tree for later use
release-0.8.40,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.40,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.40,Use the same prediction_data as clusterer's
release-0.8.40,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.40,produces a specified number of n_clusters
release-0.8.40,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.40,Create another instance of prediction_data that is consistent
release-0.8.40,with the selected value of epsilon.
release-0.8.40,Flat clustering at the chosen epsilon from prediction_data
release-0.8.40,"When no clusters found, return array of 0's"
release-0.8.40,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.40,Use new prediction_data that points to exemplars that are specific
release-0.8.40,to the choice of n_clusters
release-0.8.40,Probabilities based on how long the point persists in
release-0.8.40,each cluster (with respect to most persistent exemplar)
release-0.8.40,Use new clusters that are defined by the choice of n_clusters.
release-0.8.40,Include probability that the point belongs to a cluster
release-0.8.40,Aggregate the three probabilities to produce membership vectors
release-0.8.40,Re-name variable to clarify what's being returned.
release-0.8.40,"With method 'eom', max clusters are produced for epsilon=0,"
release-0.8.40,as computed by
release-0.8.40,Increasing epsilon can only reduce the number of ouput clusters.
release-0.8.40,"To select epsilon, consider all values where clusters are split"
release-0.8.40,Subtract the extra e-12 to avoid numerical errors in comparison
release-0.8.40,"Then, we avoid splitting for all epsilon below this."
release-0.8.40,Use an epsilon value that produces the right number of clusters.
release-0.8.40,The condensed tree of HDBSCAN has this information.
release-0.8.40,Extract the lambda levels (=1/distance) from the condensed tree
release-0.8.40,We don't want values that produce a large cluster and
release-0.8.40,just one or two individual points.
release-0.8.40,Keep only those lambda values corresponding to cluster separation;
release-0.8.40,"i.e., with child_sizes > 1"
release-0.8.40,"Get the unique values, because when two clusters fall out of one,"
release-0.8.40,the entry with lambda is repeated.
release-0.8.40,lambda values are sorted by np.unique.
release-0.8.40,"Now, get epsilon (distance threshold) as 1/lambda"
release-0.8.40,"At this epsilon, n_clusters have been split."
release-0.8.40,Stop splits at epsilons smaller than this.
release-0.8.40,"To allow for numerical errors,"
release-0.8.40,predData must be a pre-trained PredictionData instance from hdbscan
release-0.8.40,"If n_clusters is specified, compute cluster_selection_epsilon;"
release-0.8.40,This is the key modification:
release-0.8.40,Select clusters according to selection method and epsilon.
release-0.8.40,_new_select_clusters is a modification of get_clusters
release-0.8.40,from hdbscan._hdbscan_tree
release-0.8.40,"raw tree, used later to get exemplars and lambda values"
release-0.8.40,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
release-0.8.40,to the cluster labels produced as output
release-0.8.40,Re-compute lambdas and exemplars for selected clusters;
release-0.8.40,max_lambda <=> smallest distance <=> most persistent point(s)
release-0.8.40,Map all sub-clusters of selected cluster to the selected cluster's
release-0.8.40,label in output.
release-0.8.40,Map lambdas too...
release-0.8.40,Create set of exemplar points for later use.
release-0.8.40,Novel points are assigned based on cluster of closest exemplar.
release-0.8.40,"For each selected cluster, get all of its leaves,"
release-0.8.40,"and leaves of leaves, and so on..."
release-0.8.40,Largest lambda => Most persistent points
release-0.8.40,Get the most persistent points
release-0.8.40,Add most persistent points as exemplars
release-0.8.40,Add exemplars for each leaf of each selected cluster.
release-0.8.40,(exclude root)
release-0.8.40,-*- coding: utf-8 -*-
release-0.8.40,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.40,
release-0.8.40,License: BSD 3 clause
release-0.8.40,"Return the only cluster, the root"
release-0.8.40,We want to get the x and y coordinates for the start of each cluster
release-0.8.40,"Initialize the leaves, since we know where they go, the iterate"
release-0.8.40,"through everything from the leaves back, setting coords as we go"
release-0.8.40,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
release-0.8.40,bottoms and widths for each rectangle. We can go through each cluster
release-0.8.40,and do this for each in turn.
release-0.8.40,Ensure we don't try to take log of zero
release-0.8.40,Finally we need the horizontal lines that occur at cluster splits.
release-0.8.40,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
release-0.8.40,"axis.plot(xs, ys, color='black', linewidth=1)"
release-0.8.40,Extract the chosen cluster bounds. If enough duplicate data points exist in the
release-0.8.40,data the lambda value might be infinite. This breaks labeling and highlighting
release-0.8.40,the chosen clusters.
release-0.8.40,Extract the plot range of the y-axis and set default center and height values for ellipses.
release-0.8.40,Extremly dense clusters might result in near infinite lambda values. Setting max_height
release-0.8.40,based on the percentile should alleviate the impact on plotting.
release-0.8.40,Set center and height to default values if necessary
release-0.8.40,Ensure the ellipse is visible
release-0.8.40,Get a 2D projection; if we have a lot of dimensions use PCA first
release-0.8.40,Use PCA to get down to 32 dimension
release-0.8.40,"node_desat=None,"
release-0.8.40,Extract node color data
release-0.8.40,Extract edge color data
release-0.8.40,Compute or extract layout
release-0.8.40,Add edges
release-0.8.40,Add FLASC features
release-0.8.40,Add raw data features
release-0.8.40,-*- coding: utf-8 -*-
release-0.8.40,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.40,
release-0.8.40,License: BSD 3 clause
release-0.8.40,The Cython routines used require contiguous arrays
release-0.8.40,The Cython routines used require contiguous arrays
release-0.8.40,We can't do much with sparse matrices ...
release-0.8.40,Need heuristic to decide when to go to boruvka;
release-0.8.40,still debugging for now
release-0.8.40,Need heuristic to decide when to go to boruvka;
release-0.8.40,still debugging for now
release-0.8.40,Support various prediction methods for predicting cluster membership
release-0.8.40,of new or unseen points. There are several ways to interpret how
release-0.8.40,"to do this correctly, so we provide several methods for"
release-0.8.40,the different use cases that may arise.
release-0.8.40,raw_condensed_tree = condensed_tree.to_numpy()
release-0.8.40,New point departs with the old
release-0.8.40,Find appropriate cluster based on lambda of new point
release-0.8.40,Find appropriate cluster based on lambda of new point
release-0.8.40,"the point is in the dataset, fix lambda for rounding errors"
release-0.8.40,We need to find where in the tree the new point would go
release-0.8.40,for the purposes of outlier membership approximation
release-0.8.40,"When no clusters found, return array of 0's"
release-0.8.40,Support branch detection within clusters.
release-0.8.40,Select finite data points
release-0.8.40,Construct tree
release-0.8.40,Allocate to maintain data point indices
release-0.8.40,Find neighbours for non-noise points
release-0.8.40,Check clusterer state
release-0.8.40,Validate parameters
release-0.8.40,Extract state
release-0.8.40,Configure parallelization
release-0.8.40,Detect branches
release-0.8.40,Maintain data indices for non-finite data
release-0.8.40,Combined result
release-0.8.40,Branching result
release-0.8.40,Clusters to branches
release-0.8.40,List points within cluster
release-0.8.40,Extract MST edges within cluster
release-0.8.40,Compute in cluster centrality
release-0.8.40,Construct cluster approximation graph
release-0.8.40,Extract centrality MST and compute single linkage
release-0.8.40,Re-label edges with data ids
release-0.8.40,Return values
release-0.8.40,Allocate output (won't be filled completely)
release-0.8.40,Fill (undirected) MST edges with within-cluster-ids
release-0.8.40,Fill neighbors with within-cluster-ids
release-0.8.40,Fill mutual reachabilities
release-0.8.40,Extract unique edges that stay within the cluster
release-0.8.40,Query KDTree/BallTree for neighours within the distance
release-0.8.40,Count number of returned edges per point
release-0.8.40,Create full edge list
release-0.8.40,Create output
release-0.8.40,Reset noise labels to k-cluster
release-0.8.40,Allocate output
release-0.8.40,Compute the labels and probabilities
release-0.8.40,Reorder other parts
release-0.8.40,import pickle
release-0.8.40,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.40,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.40,"number of clusters, ignoring noise if present"
release-0.8.40,"metric is the function reference, not the string key."
release-0.8.40,def test_rsl_unavailable_hierarchy():
release-0.8.40,clusterer = RobustSingleLinkage()
release-0.8.40,with warnings.catch_warnings(record=True) as w:
release-0.8.40,tree = clusterer.cluster_hierarchy_
release-0.8.40,assert len(w) > 0
release-0.8.40,assert tree is None
release-0.8.40,"H, y = shuffle(X, y, random_state=7)"
release-0.8.40,Disable for now -- need to refactor to meet newer standards
release-0.8.40,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.40,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.40,this fails if no $DISPLAY specified
release-0.8.40,"number of clusters, ignoring noise if present"
release-0.8.40,"number of clusters, ignoring noise if present"
release-0.8.40,"H, y = shuffle(X, y, random_state=7)"
release-0.8.40,"metric is the function reference, not the string key."
release-0.8.40,def test_hdbscan_unavailable_attributes():
release-0.8.40,clusterer = HDBSCAN(gen_min_span_tree=False)
release-0.8.40,with warnings.catch_warnings(record=True) as w:
release-0.8.40,tree = clusterer.condensed_tree_
release-0.8.40,assert len(w) > 0
release-0.8.40,assert tree is None
release-0.8.40,with warnings.catch_warnings(record=True) as w:
release-0.8.40,tree = clusterer.single_linkage_tree_
release-0.8.40,assert len(w) > 0
release-0.8.40,assert tree is None
release-0.8.40,with warnings.catch_warnings(record=True) as w:
release-0.8.40,scores = clusterer.outlier_scores_
release-0.8.40,assert len(w) > 0
release-0.8.40,assert scores is None
release-0.8.40,with warnings.catch_warnings(record=True) as w:
release-0.8.40,tree = clusterer.minimum_spanning_tree_
release-0.8.40,assert len(w) > 0
release-0.8.40,assert tree is None
release-0.8.40,def test_hdbscan_min_span_tree_availability():
release-0.8.40,clusterer = HDBSCAN().fit(X)
release-0.8.40,tree = clusterer.minimum_spanning_tree_
release-0.8.40,assert tree is None
release-0.8.40,D = distance.squareform(distance.pdist(X))
release-0.8.40,D /= np.max(D)
release-0.8.40,HDBSCAN(metric='precomputed').fit(D)
release-0.8.40,tree = clusterer.minimum_spanning_tree_
release-0.8.40,assert tree is None
release-0.8.40,no prediction data error
release-0.8.40,wrong dimensions error
release-0.8.40,no clusters warning
release-0.8.40,def test_hdbscan_membership_vector():
release-0.8.40,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.40,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
release-0.8.40,assert_array_almost_equal(
release-0.8.40,"vector,"
release-0.8.40,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
release-0.8.40,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
release-0.8.40,assert_array_almost_equal(
release-0.8.40,"vector,"
release-0.8.40,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
release-0.8.40,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
release-0.8.40,assert_array_almost_equal(
release-0.8.40,"vector,"
release-0.8.40,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
release-0.8.40,
release-0.8.40,def test_hdbscan_all_points_membership_vectors():
release-0.8.40,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.40,vects = all_points_membership_vectors(clusterer)
release-0.8.40,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
release-0.8.40,"2.52734246e-001,"
release-0.8.40,8.38299608e-002]))
release-0.8.40,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
release-0.8.40,"8.35882503e-002,"
release-0.8.40,1.07356406e-001]))
release-0.8.40,without epsilon we should see many noise points as children of root.
release-0.8.40,for this random seed an epsilon of 0.2 will produce exactly 2 noise
release-0.8.40,points at that cut in single linkage.
release-0.8.40,"If the following line does not raise an error, the test passes"
release-0.8.40,"If the following line does not raise an error, the test passes"
release-0.8.40,Disable for now -- need to refactor to meet newer standards
release-0.8.40,Probably not applicable now #
release-0.8.40,def test_dbscan_sparse():
release-0.8.40,def test_dbscan_balltree():
release-0.8.40,def test_pickle():
release-0.8.40,def test_dbscan_core_samples_toy():
release-0.8.40,def test_boundaries():
release-0.8.40,"Given negative, zero and positive denominator and positive numerator"
release-0.8.40,Make sure safe division is always positive and doesn't raise ZeroDivision error
release-0.8.40,--- Branch Detection Data
release-0.8.40,There are no fast metrics that are not supported by KDTree or BallTree!
release-0.8.40,"Cosine and arccoss both crash HDBSCAN. They go down the BallTree path, but"
release-0.8.40,the implementation does not support them.
release-0.8.40,Distance matrix
release-0.8.40,Sparse matrix
release-0.8.40,--- Detecting Branches
release-0.8.40,Generate single-cluster data
release-0.8.40,"Without persistence, find 6 branches"
release-0.8.40,"Mac & Windows give 71, Linux gives 72. Probably different random values."
release-0.8.40,Adding presistence removes some branches
release-0.8.40,--- Branch Detector Functionality
release-0.8.40,A point on a branch (not noise) exact labels change per run
release-0.8.40,A point in a cluster
release-0.8.40,A noise point
release-0.8.40,--- Attribute Output Formats
release-0.8.40,--- Attribute plots
release-0.8.40,Ignore future warnings thrown by sklearn
release-0.8.40,Create a nice dataset with 6 circular clusters and 2 moons
release-0.8.40,"Given, the base HDBSCAN with method 'eom'"
release-0.8.40,"When we ask for flat clustering with same n_clusters,"
release-0.8.40,"Then, the labels and probabilities should match"
release-0.8.40,"Given, the base HDBSCAN with method 'leaf'"
release-0.8.40,"When we ask for flat clustering with same n_clusters,"
release-0.8.40,"Then, the labels and probabilities should match"
release-0.8.40,Method 'eom'...
release-0.8.40,"Given, a flat clustering for required n_clusters,"
release-0.8.40,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.40,"Then, the labels and probabilities should match"
release-0.8.40,Method 'leaf'...
release-0.8.40,"Given, a flat clustering for required n_clusters,"
release-0.8.40,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.40,"Then, the labels and probabilities should match"
release-0.8.40,"Given the max number of clusters that can be produced by 'eom',"
release-0.8.40,(these are produced for epsilon=0) (??? Needs verification)
release-0.8.40,"When we try flat clustering with 'eom' method for more n_clusters,"
release-0.8.40,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.40,"assert ""Cannot predict"" in str(w[-1].message)"
release-0.8.40,"the resulting clusterer switches to using method 'leaf',"
release-0.8.40,and the resulting probabilities and labels must match
release-0.8.40,"Given the base HDBSCAN trained on some data,"
release-0.8.40,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.40,"Then, the clustering should match that due to approximate_predict,"
release-0.8.40,"Given a flat clustering trained for some n_clusters,"
release-0.8.40,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.40,"Then, the number of clusters produced must match the original n_clusters"
release-0.8.40,and all probabilities are <= 1.
release-0.8.40,"Given a flat clustering trained for some n_clusters,"
release-0.8.40,"When using approximate_predict_flat with specified n_clusters,"
release-0.8.40,"Then, the requested number of clusters must be produced"
release-0.8.40,and all probabilities are <= 1.
release-0.8.40,When using approximate_predict_flat with more clusters
release-0.8.40,"than 'eom' can handle,"
release-0.8.40,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.40,But the requested number of clusters must still be produced using 'leaf'
release-0.8.40,and all probabilities are <= 1.
release-0.8.40,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.40,"When membership_vector_flat is called with new data,"
release-0.8.40,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.40,and the number of points should equal those in the test set
release-0.8.40,and all probabilities are <= 1.
release-0.8.40,========================================
release-0.8.40,"Given a flat clustering for a specified n_clusters,"
release-0.8.40,"When membership_vector_flat is called with new data,"
release-0.8.40,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.40,and the number of points should equal those in the test set
release-0.8.40,and all probabilities are <= 1.
release-0.8.40,Ignore user warnings in this function
release-0.8.40,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.40,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.40,"Then the number of clusters in memberships should be as requested,"
release-0.8.40,and the number of points should equal those in the test set
release-0.8.40,and all probabilities are <= 1.
release-0.8.40,========================================
release-0.8.40,"Given a flat clustering for a specified n_clusters,"
release-0.8.40,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.40,"Then the number of clusters in memberships should be as requested,"
release-0.8.40,and the number of points should equal those in the test set
release-0.8.40,and all probabilities are <= 1.
release-0.8.40,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.40,"When all_points_membership_vectors_flat is called,"
release-0.8.40,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.40,and the number of points should equal those in the training set
release-0.8.40,and all probabilities are <= 1.
release-0.8.40,========================================
release-0.8.40,"Given a flat clustering for a specified n_clusters,"
release-0.8.40,"When all_points_membership_vectors_flat is called,"
release-0.8.40,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.40,and the number of points should equal those in the training set
release-0.8.40,and all probabilities are <= 1.
release-0.8.40,Ignore user warnings in this function
release-0.8.40,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.40,"When all_points_membership_vectors_flat is called for some n_clusters,"
release-0.8.40,"Then the number of clusters in memberships should be as requested,"
release-0.8.40,and the number of points should equal those in the training set
release-0.8.40,and all probabilities are <= 1.
release-0.8.40,========================================
release-0.8.40,"Given a flat clustering for a specified n_clusters,"
release-0.8.40,"When membership_vector_flat is called for some n_clusters,"
release-0.8.40,"Then the number of clusters in memberships should be as requested,"
release-0.8.40,and the number of points should equal those in the training set
release-0.8.40,and all probabilities are <= 1.
release-0.8.40,Generate datasets. We choose the size big enough to see the scalability
release-0.8.40,"of the algorithms, but not too big to avoid too long running times"
release-0.8.40,normalize dataset for easier parameter selection
release-0.8.40,estimate bandwidth for mean shift
release-0.8.40,connectivity matrix for structured Ward
release-0.8.40,make connectivity symmetric
release-0.8.40,create clustering estimators
release-0.8.40,predict cluster memberships
release-0.8.40,plot
release-0.8.40,-*- coding: utf-8 -*-
release-0.8.40,#############################################################################
release-0.8.40,Generate sample data
release-0.8.40,#############################################################################
release-0.8.40,Compute DBSCAN
release-0.8.40,"Number of clusters in labels, ignoring noise if present."
release-0.8.40,#############################################################################
release-0.8.40,Plot result
release-0.8.40,Black removed and is used for noise instead.
release-0.8.40,Black used for noise.
release-0.8.40,Black used for noise.
release-0.8.40,-*- coding: utf-8 -*-
release-0.8.40,
release-0.8.40,"hdbscan documentation build configuration file, created by"
release-0.8.40,sphinx-quickstart on Sat May 28 10:34:44 2016.
release-0.8.40,
release-0.8.40,This file is execfile()d with the current directory set to its
release-0.8.40,containing dir.
release-0.8.40,
release-0.8.40,Note that not all possible configuration values are present in this
release-0.8.40,autogenerated file.
release-0.8.40,
release-0.8.40,All configuration values have a default; values that are commented out
release-0.8.40,serve to show the default.
release-0.8.40,"If extensions (or modules to document with autodoc) are in another directory,"
release-0.8.40,add these directories to sys.path here. If the directory is relative to the
release-0.8.40,"documentation root, use os.path.abspath to make it absolute, like shown here."
release-0.8.40,"## We now install the package in a virtualenv to build docs, so this is not needed"
release-0.8.40,"sys.path.insert(0, os.path.abspath('../'))"
release-0.8.40,-- General configuration ------------------------------------------------
release-0.8.40,"If your documentation needs a minimal Sphinx version, state it here."
release-0.8.40,needs_sphinx = '1.0'
release-0.8.40,"Add any Sphinx extension module names here, as strings. They can be"
release-0.8.40,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
release-0.8.40,ones.
release-0.8.40,"'sphinx.ext.napoleon',"
release-0.8.40,'numpy_ext.numpydoc'
release-0.8.40,napoleon_google_docstring = False
release-0.8.40,napoleon_numpy_docstring = True
release-0.8.40,"Add any paths that contain templates here, relative to this directory."
release-0.8.40,The suffix(es) of source filenames.
release-0.8.40,You can specify multiple suffix as a list of string:
release-0.8.40,"source_suffix = ['.rst', '.md']"
release-0.8.40,The encoding of source files.
release-0.8.40,source_encoding = 'utf-8-sig'
release-0.8.40,The master toctree document.
release-0.8.40,General information about the project.
release-0.8.40,"The version info for the project you're documenting, acts as replacement for"
release-0.8.40,"|version| and |release|, also used in various other places throughout the"
release-0.8.40,built documents.
release-0.8.40,
release-0.8.40,The short X.Y version.
release-0.8.40,"The full version, including alpha/beta/rc tags."
release-0.8.40,The language for content autogenerated by Sphinx. Refer to documentation
release-0.8.40,for a list of supported languages.
release-0.8.40,
release-0.8.40,This is also used if you do content translation via gettext catalogs.
release-0.8.40,"Usually you set ""language"" from the command line for these cases."
release-0.8.40,"There are two options for replacing |today|: either, you set today to some"
release-0.8.40,"non-false value, then it is used:"
release-0.8.40,today = ''
release-0.8.40,"Else, today_fmt is used as the format for a strftime call."
release-0.8.40,"today_fmt = '%B %d, %Y'"
release-0.8.40,"List of patterns, relative to source directory, that match files and"
release-0.8.40,directories to ignore when looking for source files.
release-0.8.40,The reST default role (used for this markup: `text`) to use for all
release-0.8.40,documents.
release-0.8.40,default_role = None
release-0.8.40,"If true, '()' will be appended to :func: etc. cross-reference text."
release-0.8.40,add_function_parentheses = True
release-0.8.40,"If true, the current module name will be prepended to all description"
release-0.8.40,unit titles (such as .. function::).
release-0.8.40,add_module_names = True
release-0.8.40,"If true, sectionauthor and moduleauthor directives will be shown in the"
release-0.8.40,output. They are ignored by default.
release-0.8.40,show_authors = False
release-0.8.40,The name of the Pygments (syntax highlighting) style to use.
release-0.8.40,A list of ignored prefixes for module index sorting.
release-0.8.40,modindex_common_prefix = []
release-0.8.40,"If true, keep warnings as ""system message"" paragraphs in the built documents."
release-0.8.40,keep_warnings = False
release-0.8.40,"If true, `todo` and `todoList` produce output, else they produce nothing."
release-0.8.40,-- Options for HTML output ----------------------------------------------
release-0.8.40,The theme to use for HTML and HTML Help pages.  See the documentation for
release-0.8.40,a list of builtin themes.
release-0.8.40,html_theme = 'alabaster'
release-0.8.40,Theme options are theme-specific and customize the look and feel of a theme
release-0.8.40,"further.  For a list of options available for each theme, see the"
release-0.8.40,documentation.
release-0.8.40,html_theme_options = {}
release-0.8.40,"Add any paths that contain custom themes here, relative to this directory."
release-0.8.40,html_theme_path = []
release-0.8.40,"The name for this set of Sphinx documents.  If None, it defaults to"
release-0.8.40,"""<project> v<release> documentation""."
release-0.8.40,html_title = None
release-0.8.40,A shorter title for the navigation bar.  Default is the same as html_title.
release-0.8.40,html_short_title = None
release-0.8.40,The name of an image file (relative to this directory) to place at the top
release-0.8.40,of the sidebar.
release-0.8.40,html_logo = None
release-0.8.40,The name of an image file (within the static path) to use as favicon of the
release-0.8.40,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
release-0.8.40,pixels large.
release-0.8.40,html_favicon = None
release-0.8.40,"Add any paths that contain custom static files (such as style sheets) here,"
release-0.8.40,"relative to this directory. They are copied after the builtin static files,"
release-0.8.40,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
release-0.8.40,Add any extra paths that contain custom files (such as robots.txt or
release-0.8.40,".htaccess) here, relative to this directory. These files are copied"
release-0.8.40,directly to the root of the documentation.
release-0.8.40,html_extra_path = []
release-0.8.40,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
release-0.8.40,using the given strftime format.
release-0.8.40,"html_last_updated_fmt = '%b %d, %Y'"
release-0.8.40,"If true, SmartyPants will be used to convert quotes and dashes to"
release-0.8.40,typographically correct entities.
release-0.8.40,html_use_smartypants = True
release-0.8.40,"Custom sidebar templates, maps document names to template names."
release-0.8.40,html_sidebars = {}
release-0.8.40,"Additional templates that should be rendered to pages, maps page names to"
release-0.8.40,template names.
release-0.8.40,html_additional_pages = {}
release-0.8.40,"If false, no module index is generated."
release-0.8.40,html_domain_indices = True
release-0.8.40,"If false, no index is generated."
release-0.8.40,html_use_index = True
release-0.8.40,"If true, the index is split into individual pages for each letter."
release-0.8.40,html_split_index = False
release-0.8.40,"If true, links to the reST sources are added to the pages."
release-0.8.40,html_show_sourcelink = True
release-0.8.40,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
release-0.8.40,html_show_sphinx = True
release-0.8.40,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
release-0.8.40,html_show_copyright = True
release-0.8.40,"If true, an OpenSearch description file will be output, and all pages will"
release-0.8.40,contain a <link> tag referring to it.  The value of this option must be the
release-0.8.40,base URL from which the finished HTML is served.
release-0.8.40,html_use_opensearch = ''
release-0.8.40,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
release-0.8.40,html_file_suffix = None
release-0.8.40,Language to be used for generating the HTML full-text search index.
release-0.8.40,Sphinx supports the following languages:
release-0.8.40,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
release-0.8.40,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
release-0.8.40,html_search_language = 'en'
release-0.8.40,"A dictionary with options for the search language support, empty by default."
release-0.8.40,Now only 'ja' uses this config value
release-0.8.40,html_search_options = {'type': 'default'}
release-0.8.40,The name of a javascript file (relative to the configuration directory) that
release-0.8.40,"implements a search results scorer. If empty, the default will be used."
release-0.8.40,html_search_scorer = 'scorer.js'
release-0.8.40,Output file base name for HTML help builder.
release-0.8.40,-- Options for LaTeX output ---------------------------------------------
release-0.8.40,The paper size ('letterpaper' or 'a4paper').
release-0.8.40,"'papersize': 'letterpaper',"
release-0.8.40,"The font size ('10pt', '11pt' or '12pt')."
release-0.8.40,"'pointsize': '10pt',"
release-0.8.40,Additional stuff for the LaTeX preamble.
release-0.8.40,"'preamble': '',"
release-0.8.40,Latex figure (float) alignment
release-0.8.40,"'figure_align': 'htbp',"
release-0.8.40,Grouping the document tree into LaTeX files. List of tuples
release-0.8.40,"(source start file, target name, title,"
release-0.8.40,"author, documentclass [howto, manual, or own class])."
release-0.8.40,The name of an image file (relative to this directory) to place at the top of
release-0.8.40,the title page.
release-0.8.40,latex_logo = None
release-0.8.40,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
release-0.8.40,not chapters.
release-0.8.40,latex_use_parts = False
release-0.8.40,"If true, show page references after internal links."
release-0.8.40,latex_show_pagerefs = False
release-0.8.40,"If true, show URL addresses after external links."
release-0.8.40,latex_show_urls = False
release-0.8.40,Documents to append as an appendix to all manuals.
release-0.8.40,latex_appendices = []
release-0.8.40,"If false, no module index is generated."
release-0.8.40,latex_domain_indices = True
release-0.8.40,-- Options for manual page output ---------------------------------------
release-0.8.40,One entry per manual page. List of tuples
release-0.8.40,"(source start file, name, description, authors, manual section)."
release-0.8.40,"If true, show URL addresses after external links."
release-0.8.40,man_show_urls = False
release-0.8.40,-- Options for Texinfo output -------------------------------------------
release-0.8.40,Grouping the document tree into Texinfo files. List of tuples
release-0.8.40,"(source start file, target name, title, author,"
release-0.8.40,"dir menu entry, description, category)"
release-0.8.40,Documents to append as an appendix to all manuals.
release-0.8.40,texinfo_appendices = []
release-0.8.40,"If false, no module index is generated."
release-0.8.40,texinfo_domain_indices = True
release-0.8.40,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.40,texinfo_show_urls = 'footnote'
release-0.8.40,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
release-0.8.40,texinfo_no_detailmenu = False
release-0.8.40,-- Options for Epub output ----------------------------------------------
release-0.8.40,Bibliographic Dublin Core info.
release-0.8.40,The basename for the epub file. It defaults to the project name.
release-0.8.40,epub_basename = project
release-0.8.40,The HTML theme for the epub output. Since the default themes are not
release-0.8.40,"optimized for small screen space, using the same theme for HTML and epub"
release-0.8.40,"output is usually not wise. This defaults to 'epub', a theme designed to save"
release-0.8.40,visual space.
release-0.8.40,epub_theme = 'epub'
release-0.8.40,The language of the text. It defaults to the language option
release-0.8.40,or 'en' if the language is not set.
release-0.8.40,epub_language = ''
release-0.8.40,The scheme of the identifier. Typical schemes are ISBN or URL.
release-0.8.40,epub_scheme = ''
release-0.8.40,The unique identifier of the text. This can be a ISBN number
release-0.8.40,or the project homepage.
release-0.8.40,epub_identifier = ''
release-0.8.40,A unique identification for the text.
release-0.8.40,epub_uid = ''
release-0.8.40,A tuple containing the cover image and cover page html template filenames.
release-0.8.40,epub_cover = ()
release-0.8.40,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
release-0.8.40,epub_guide = ()
release-0.8.40,HTML files that should be inserted before the pages created by sphinx.
release-0.8.40,The format is a list of tuples containing the path and title.
release-0.8.40,epub_pre_files = []
release-0.8.40,HTML files that should be inserted after the pages created by sphinx.
release-0.8.40,The format is a list of tuples containing the path and title.
release-0.8.40,epub_post_files = []
release-0.8.40,A list of files that should not be packed into the epub file.
release-0.8.40,The depth of the table of contents in toc.ncx.
release-0.8.40,epub_tocdepth = 3
release-0.8.40,Allow duplicate toc entries.
release-0.8.40,epub_tocdup = True
release-0.8.40,Choose between 'default' and 'includehidden'.
release-0.8.40,epub_tocscope = 'default'
release-0.8.40,Fix unsupported image types using the Pillow.
release-0.8.40,epub_fix_images = False
release-0.8.40,Scale large images.
release-0.8.40,epub_max_image_width = 0
release-0.8.40,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.40,epub_show_urls = 'inline'
release-0.8.40,"If false, no index is generated."
release-0.8.40,epub_use_index = True
release-0.8.39,from Cython.Distutils import build_ext
release-0.8.39,"Import numpy here, only when headers are needed"
release-0.8.39,Add numpy headers to include_dirs
release-0.8.39,Call original build_ext command
release-0.8.39,The dependencies are the same as the contents of requirements.txt
release-0.8.39,"A little ""fancy"" we select from the flattened array reshape back"
release-0.8.39,(Fortran format to get indexing right) and take the product to do an and
release-0.8.39,then convert back to boolean type.
release-0.8.39,Density sparseness is not well defined if there are no
release-0.8.39,internal edges (as per the referenced paper). However
release-0.8.39,MATLAB code from the original authors simply selects the
release-0.8.39,largest of *all* the edges in the case that there are
release-0.8.39,"no internal edges, so we do the same here"
release-0.8.39,"If there are any internal edges, then subselect them out"
release-0.8.39,If there are no internal edges then we want to take the
release-0.8.39,"max over all the edges that exist in the MST, so we simply"
release-0.8.39,do nothing and return all the edges in the MST.
release-0.8.39,-*- coding: utf-8 -*-
release-0.8.39,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.39,Steve Astels <sastels@gmail.com>
release-0.8.39,John Healy <jchealy@gmail.com>
release-0.8.39,
release-0.8.39,License: BSD 3 clause
release-0.8.39,"Treating this case explicitly, instead of letting"
release-0.8.39,"sklearn.metrics.pairwise_distances handle it,"
release-0.8.39,enables the usage of numpy.inf in the distance
release-0.8.39,matrix to indicate missing distance information.
release-0.8.39,TODO: Check if copying is necessary
release-0.8.39,raise TypeError('Sparse distance matrices not yet supported')
release-0.8.39,Warn if the MST couldn't be constructed around the missing distances
release-0.8.39,mst_linkage_core does not generate a full minimal spanning tree
release-0.8.39,If a tree is required then we must build the edges from the information
release-0.8.39,returned by mst_linkage_core (i.e. just the order of points to be merged)
release-0.8.39,Sort edges of the min_spanning_tree by weight
release-0.8.39,Convert edge list into standard hierarchical clustering format
release-0.8.39,Check for connected component on X
release-0.8.39,Compute sparse mutual reachability graph
release-0.8.39,"if max_dist > 0, max distance to use when the reachability is infinite"
release-0.8.39,Check connected component on mutual reachability
release-0.8.39,"If more than one component, it means that even if the distance matrix X"
release-0.8.39,"has one component, there exists with less than `min_samples` neighbors"
release-0.8.39,Compute the minimum spanning tree for the sparse graph
release-0.8.39,Convert the graph to scipy cluster array format
release-0.8.39,Sort edges of the min_spanning_tree by weight
release-0.8.39,Convert edge list into standard hierarchical clustering format
release-0.8.39,The Cython routines used require contiguous arrays
release-0.8.39,TO DO: Deal with p for minkowski appropriately
release-0.8.39,Get distance to kth nearest neighbour
release-0.8.39,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.39,Sort edges of the min_spanning_tree by weight
release-0.8.39,Convert edge list into standard hierarchical clustering format
release-0.8.39,The Cython routines used require contiguous arrays
release-0.8.39,Get distance to kth nearest neighbour
release-0.8.39,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.39,Sort edges of the min_spanning_tree by weight
release-0.8.39,Convert edge list into standard hierarchical clustering format
release-0.8.39,Sort edges of the min_spanning_tree by weight
release-0.8.39,Convert edge list into standard hierarchical clustering format
release-0.8.39,Sort edges of the min_spanning_tree by weight
release-0.8.39,Convert edge list into standard hierarchical clustering format
release-0.8.39,Checks input and converts to an nd-array where possible
release-0.8.39,"Only non-sparse, precomputed distance matrices are handled here"
release-0.8.39,and thereby allowed to contain numpy.inf for missing distances
release-0.8.39,Python 2 and 3 compliant string_type checking
release-0.8.39,We can't do much with sparse matrices ...
release-0.8.39,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.39,still debugging for now
release-0.8.39,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.39,still debugging for now
release-0.8.39,Inherits from sklearn
release-0.8.39,Non-precomputed matrices may contain non-finite values.
release-0.8.39,Rows with these values
release-0.8.39,Pass only the purely finite indices into hdbscan
release-0.8.39,We will later assign all non-finite points to the background -1 cluster
release-0.8.39,Handle sparse precomputed distance matrices separately
release-0.8.39,"Only non-sparse, precomputed distance matrices are allowed"
release-0.8.39,to have numpy.inf values indicating missing distances
release-0.8.39,"prediction data only applies to the persistent model, so remove"
release-0.8.39,it from the keyword args we pass on the the function
release-0.8.39,remap indices to align with original data in the case of non-finite entries.
release-0.8.39,"Unltimately, for each Ci, we only require the"
release-0.8.39,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
release-0.8.39,"So let's call this value DSPC_wrt(Ci), i.e."
release-0.8.39,density separation 'with respect to' Ci.
release-0.8.39,If exactly one of the points is noise
release-0.8.39,Set the density sparseness of the cluster
release-0.8.39,to the sparsest value seen so far.
release-0.8.39,Check whether density separations with
release-0.8.39,respect to each of these clusters can
release-0.8.39,be reduced.
release-0.8.39,"In case min_outlier_sep is still np.inf, we assign a new value to it."
release-0.8.39,This only makes sense if num_clusters = 1 since it has turned out
release-0.8.39,that the MR-MST has no edges between a noise point and a core point.
release-0.8.39,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
release-0.8.39,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
release-0.8.39,MR-MST might contain an edge with one point in Cj and ther other one
release-0.8.39,"in Ck. Here, we replace the infinite density separation of Ci by"
release-0.8.39,another large enough value.
release-0.8.39,
release-0.8.39,TODO: Think of a better yet efficient way to handle this.
release-0.8.39,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
release-0.8.39,Use a previously initialized/trained HDBSCAN
release-0.8.39,Handle the trivial case first.
release-0.8.39,Always generate prediction_data to avoid later woes
release-0.8.39,This will later be chosen according to n_clusters
release-0.8.39,Initialize and train clusterer if one was not previously supplied.
release-0.8.39,Always generate prediction data
release-0.8.39,We do not pass cluster_selection_epsilon here.
release-0.8.39,"While this adds unnecessary computation, it makes the code"
release-0.8.39,easier to read and debug.
release-0.8.39,"Train on 'X'. Do this even if the supplied clusterer was trained,"
release-0.8.39,because we want to make sure it fits 'X'.
release-0.8.39,"Pick an epsilon value right after a split produces n_clusters,"
release-0.8.39,and the don't split further for smaller epsilon (larger lambda)
release-0.8.39,Or use the specified cluster_selection_epsilon
release-0.8.39,"Extract tree related stuff, in order to re-assign labels"
release-0.8.39,Get labels according to the required cluster_selection_epsilon
release-0.8.39,Reflect the related changes in HDBSCAN.
release-0.8.39,PredictionData attached to HDBSCAN should also change.
release-0.8.39,A function re_init is defined in this module to handle this.
release-0.8.39,"From a fitted HDBSCAN model, predict for n_clusters=5"
release-0.8.39,Store prediciton data for later use.
release-0.8.39,and use this prediction data to predict on new points
release-0.8.39,Get number of fitted clusters for later use.
release-0.8.39,We'll need the condensed tree later...
release-0.8.39,"If none of the three arguments: prediction_data, n_clusters,"
release-0.8.39,"and cluster_selection_epsilon are supplied,"
release-0.8.39,then use clusterer's prediciton data directly
release-0.8.39,"If either of n_clusters or cluster_selection_epsilon were supplied,"
release-0.8.39,then build prediction data from these by modifying clusterer's
release-0.8.39,Get prediction data from clusterer
release-0.8.39,Modify prediction_data to reflect new n_clusters
release-0.8.39,"First, make a copy of prediction data to avoid modifying source"
release-0.8.39,Cluster selection method is hold by condensed_tree.
release-0.8.39,Change from 'eom' to 'leaf' if n_clusters is too large.
release-0.8.39,This change does not affect the tree associated with 'clusterer'
release-0.8.39,Re-initialize prediction_data for the specified n_clusters or epsilon
release-0.8.39,============================================================
release-0.8.39,Now we're ready to use prediction_data
release-0.8.39,"The rest of the code is copied from HDBSCAN's approximate_predict,"
release-0.8.39,but modified to use prediction_data instead of clusterer's attribute
release-0.8.39,Extract condensed tree for later use
release-0.8.39,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.39,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.39,Use the same prediction_data as clusterer's
release-0.8.39,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.39,produces a specified number of n_clusters
release-0.8.39,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.39,Create another instance of prediction_data that is consistent
release-0.8.39,with the selected value of epsilon.
release-0.8.39,Flat clustering from prediction data
release-0.8.39,Initialize probabilities
release-0.8.39,k-NN for prediciton points to training set
release-0.8.39,Loop over prediction points to compute probabilities
release-0.8.39,We need to find where in the tree the new point would go
release-0.8.39,for the purposes of outlier membership approximation
release-0.8.39,"Find row in tree where nearest neighbor drops out,"
release-0.8.39,so we can get a lambda value for the nearest neighbor
release-0.8.39,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
release-0.8.39,"Equivalently, this assigns core distance for prediction point as"
release-0.8.39,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
release-0.8.39,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.39,Use new prediction_data that points to exemplars that are specific
release-0.8.39,to the choice of n_clusters
release-0.8.39,Probabilities based on how long the nearest exemplar persists in
release-0.8.39,each cluster (with respect to most persistent exemplar)
release-0.8.39,Use new clusters that are defined by the choice of n_clusters.
release-0.8.39,Merge the two probabilities to produce a single set of probabilities
release-0.8.39,Include probability that the nearest neighbor belongs to a cluster
release-0.8.39,Rename variable so it's easy to understand what's being returned
release-0.8.39,Extract condensed tree for later use
release-0.8.39,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.39,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.39,Use the same prediction_data as clusterer's
release-0.8.39,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.39,produces a specified number of n_clusters
release-0.8.39,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.39,Create another instance of prediction_data that is consistent
release-0.8.39,with the selected value of epsilon.
release-0.8.39,Flat clustering at the chosen epsilon from prediction_data
release-0.8.39,"When no clusters found, return array of 0's"
release-0.8.39,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.39,Use new prediction_data that points to exemplars that are specific
release-0.8.39,to the choice of n_clusters
release-0.8.39,Probabilities based on how long the point persists in
release-0.8.39,each cluster (with respect to most persistent exemplar)
release-0.8.39,Use new clusters that are defined by the choice of n_clusters.
release-0.8.39,Include probability that the point belongs to a cluster
release-0.8.39,Aggregate the three probabilities to produce membership vectors
release-0.8.39,Re-name variable to clarify what's being returned.
release-0.8.39,"With method 'eom', max clusters are produced for epsilon=0,"
release-0.8.39,as computed by
release-0.8.39,Increasing epsilon can only reduce the number of ouput clusters.
release-0.8.39,"To select epsilon, consider all values where clusters are split"
release-0.8.39,Subtract the extra e-12 to avoid numerical errors in comparison
release-0.8.39,"Then, we avoid splitting for all epsilon below this."
release-0.8.39,Use an epsilon value that produces the right number of clusters.
release-0.8.39,The condensed tree of HDBSCAN has this information.
release-0.8.39,Extract the lambda levels (=1/distance) from the condensed tree
release-0.8.39,We don't want values that produce a large cluster and
release-0.8.39,just one or two individual points.
release-0.8.39,Keep only those lambda values corresponding to cluster separation;
release-0.8.39,"i.e., with child_sizes > 1"
release-0.8.39,"Get the unique values, because when two clusters fall out of one,"
release-0.8.39,the entry with lambda is repeated.
release-0.8.39,lambda values are sorted by np.unique.
release-0.8.39,"Now, get epsilon (distance threshold) as 1/lambda"
release-0.8.39,"At this epsilon, n_clusters have been split."
release-0.8.39,Stop splits at epsilons smaller than this.
release-0.8.39,"To allow for numerical errors,"
release-0.8.39,predData must be a pre-trained PredictionData instance from hdbscan
release-0.8.39,"If n_clusters is specified, compute cluster_selection_epsilon;"
release-0.8.39,This is the key modification:
release-0.8.39,Select clusters according to selection method and epsilon.
release-0.8.39,_new_select_clusters is a modification of get_clusters
release-0.8.39,from hdbscan._hdbscan_tree
release-0.8.39,"raw tree, used later to get exemplars and lambda values"
release-0.8.39,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
release-0.8.39,to the cluster labels produced as output
release-0.8.39,Re-compute lambdas and exemplars for selected clusters;
release-0.8.39,max_lambda <=> smallest distance <=> most persistent point(s)
release-0.8.39,Map all sub-clusters of selected cluster to the selected cluster's
release-0.8.39,label in output.
release-0.8.39,Map lambdas too...
release-0.8.39,Create set of exemplar points for later use.
release-0.8.39,Novel points are assigned based on cluster of closest exemplar.
release-0.8.39,"For each selected cluster, get all of its leaves,"
release-0.8.39,"and leaves of leaves, and so on..."
release-0.8.39,Largest lambda => Most persistent points
release-0.8.39,Get the most persistent points
release-0.8.39,Add most persistent points as exemplars
release-0.8.39,Add exemplars for each leaf of each selected cluster.
release-0.8.39,(exclude root)
release-0.8.39,-*- coding: utf-8 -*-
release-0.8.39,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.39,
release-0.8.39,License: BSD 3 clause
release-0.8.39,"Return the only cluster, the root"
release-0.8.39,We want to get the x and y coordinates for the start of each cluster
release-0.8.39,"Initialize the leaves, since we know where they go, the iterate"
release-0.8.39,"through everything from the leaves back, setting coords as we go"
release-0.8.39,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
release-0.8.39,bottoms and widths for each rectangle. We can go through each cluster
release-0.8.39,and do this for each in turn.
release-0.8.39,Ensure we don't try to take log of zero
release-0.8.39,Finally we need the horizontal lines that occur at cluster splits.
release-0.8.39,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
release-0.8.39,"axis.plot(xs, ys, color='black', linewidth=1)"
release-0.8.39,Extract the chosen cluster bounds. If enough duplicate data points exist in the
release-0.8.39,data the lambda value might be infinite. This breaks labeling and highlighting
release-0.8.39,the chosen clusters.
release-0.8.39,Extract the plot range of the y-axis and set default center and height values for ellipses.
release-0.8.39,Extremly dense clusters might result in near infinite lambda values. Setting max_height
release-0.8.39,based on the percentile should alleviate the impact on plotting.
release-0.8.39,Set center and height to default values if necessary
release-0.8.39,Ensure the ellipse is visible
release-0.8.39,Get a 2D projection; if we have a lot of dimensions use PCA first
release-0.8.39,Use PCA to get down to 32 dimension
release-0.8.39,"node_desat=None,"
release-0.8.39,Extract node color data
release-0.8.39,Extract edge color data
release-0.8.39,Compute or extract layout
release-0.8.39,Add edges
release-0.8.39,Add FLASC features
release-0.8.39,Add raw data features
release-0.8.39,-*- coding: utf-8 -*-
release-0.8.39,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.39,
release-0.8.39,License: BSD 3 clause
release-0.8.39,The Cython routines used require contiguous arrays
release-0.8.39,The Cython routines used require contiguous arrays
release-0.8.39,We can't do much with sparse matrices ...
release-0.8.39,Need heuristic to decide when to go to boruvka;
release-0.8.39,still debugging for now
release-0.8.39,Need heuristic to decide when to go to boruvka;
release-0.8.39,still debugging for now
release-0.8.39,Support various prediction methods for predicting cluster membership
release-0.8.39,of new or unseen points. There are several ways to interpret how
release-0.8.39,"to do this correctly, so we provide several methods for"
release-0.8.39,the different use cases that may arise.
release-0.8.39,raw_condensed_tree = condensed_tree.to_numpy()
release-0.8.39,New point departs with the old
release-0.8.39,Find appropriate cluster based on lambda of new point
release-0.8.39,Find appropriate cluster based on lambda of new point
release-0.8.39,"the point is in the dataset, fix lambda for rounding errors"
release-0.8.39,We need to find where in the tree the new point would go
release-0.8.39,for the purposes of outlier membership approximation
release-0.8.39,"When no clusters found, return array of 0's"
release-0.8.39,Support branch detection within clusters.
release-0.8.39,Select finite data points
release-0.8.39,Construct tree
release-0.8.39,Allocate to maintain data point indices
release-0.8.39,Find neighbours for non-noise points
release-0.8.39,Check clusterer state
release-0.8.39,Validate parameters
release-0.8.39,Extract state
release-0.8.39,Configure parallelization
release-0.8.39,Detect branches
release-0.8.39,Maintain data indices for non-finite data
release-0.8.39,Combined result
release-0.8.39,Branching result
release-0.8.39,Clusters to branches
release-0.8.39,List points within cluster
release-0.8.39,Extract MST edges within cluster
release-0.8.39,Compute in cluster centrality
release-0.8.39,Construct cluster approximation graph
release-0.8.39,Extract centrality MST and compute single linkage
release-0.8.39,Re-label edges with data ids
release-0.8.39,Return values
release-0.8.39,Allocate output (won't be filled completely)
release-0.8.39,Fill (undirected) MST edges with within-cluster-ids
release-0.8.39,Fill neighbors with within-cluster-ids
release-0.8.39,Fill mutual reachabilities
release-0.8.39,Extract unique edges that stay within the cluster
release-0.8.39,Query KDTree/BallTree for neighours within the distance
release-0.8.39,Count number of returned edges per point
release-0.8.39,Create full edge list
release-0.8.39,Create output
release-0.8.39,Reset noise labels to k-cluster
release-0.8.39,Allocate output
release-0.8.39,Compute the labels and probabilities
release-0.8.39,Reorder other parts
release-0.8.39,import pickle
release-0.8.39,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.39,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.39,"number of clusters, ignoring noise if present"
release-0.8.39,"metric is the function reference, not the string key."
release-0.8.39,def test_rsl_unavailable_hierarchy():
release-0.8.39,clusterer = RobustSingleLinkage()
release-0.8.39,with warnings.catch_warnings(record=True) as w:
release-0.8.39,tree = clusterer.cluster_hierarchy_
release-0.8.39,assert len(w) > 0
release-0.8.39,assert tree is None
release-0.8.39,"H, y = shuffle(X, y, random_state=7)"
release-0.8.39,Disable for now -- need to refactor to meet newer standards
release-0.8.39,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.39,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.39,this fails if no $DISPLAY specified
release-0.8.39,"number of clusters, ignoring noise if present"
release-0.8.39,"number of clusters, ignoring noise if present"
release-0.8.39,"H, y = shuffle(X, y, random_state=7)"
release-0.8.39,"metric is the function reference, not the string key."
release-0.8.39,def test_hdbscan_unavailable_attributes():
release-0.8.39,clusterer = HDBSCAN(gen_min_span_tree=False)
release-0.8.39,with warnings.catch_warnings(record=True) as w:
release-0.8.39,tree = clusterer.condensed_tree_
release-0.8.39,assert len(w) > 0
release-0.8.39,assert tree is None
release-0.8.39,with warnings.catch_warnings(record=True) as w:
release-0.8.39,tree = clusterer.single_linkage_tree_
release-0.8.39,assert len(w) > 0
release-0.8.39,assert tree is None
release-0.8.39,with warnings.catch_warnings(record=True) as w:
release-0.8.39,scores = clusterer.outlier_scores_
release-0.8.39,assert len(w) > 0
release-0.8.39,assert scores is None
release-0.8.39,with warnings.catch_warnings(record=True) as w:
release-0.8.39,tree = clusterer.minimum_spanning_tree_
release-0.8.39,assert len(w) > 0
release-0.8.39,assert tree is None
release-0.8.39,def test_hdbscan_min_span_tree_availability():
release-0.8.39,clusterer = HDBSCAN().fit(X)
release-0.8.39,tree = clusterer.minimum_spanning_tree_
release-0.8.39,assert tree is None
release-0.8.39,D = distance.squareform(distance.pdist(X))
release-0.8.39,D /= np.max(D)
release-0.8.39,HDBSCAN(metric='precomputed').fit(D)
release-0.8.39,tree = clusterer.minimum_spanning_tree_
release-0.8.39,assert tree is None
release-0.8.39,no prediction data error
release-0.8.39,wrong dimensions error
release-0.8.39,no clusters warning
release-0.8.39,def test_hdbscan_membership_vector():
release-0.8.39,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.39,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
release-0.8.39,assert_array_almost_equal(
release-0.8.39,"vector,"
release-0.8.39,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
release-0.8.39,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
release-0.8.39,assert_array_almost_equal(
release-0.8.39,"vector,"
release-0.8.39,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
release-0.8.39,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
release-0.8.39,assert_array_almost_equal(
release-0.8.39,"vector,"
release-0.8.39,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
release-0.8.39,
release-0.8.39,def test_hdbscan_all_points_membership_vectors():
release-0.8.39,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.39,vects = all_points_membership_vectors(clusterer)
release-0.8.39,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
release-0.8.39,"2.52734246e-001,"
release-0.8.39,8.38299608e-002]))
release-0.8.39,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
release-0.8.39,"8.35882503e-002,"
release-0.8.39,1.07356406e-001]))
release-0.8.39,without epsilon we should see many noise points as children of root.
release-0.8.39,for this random seed an epsilon of 0.2 will produce exactly 2 noise
release-0.8.39,points at that cut in single linkage.
release-0.8.39,Disable for now -- need to refactor to meet newer standards
release-0.8.39,Probably not applicable now #
release-0.8.39,def test_dbscan_sparse():
release-0.8.39,def test_dbscan_balltree():
release-0.8.39,def test_pickle():
release-0.8.39,def test_dbscan_core_samples_toy():
release-0.8.39,def test_boundaries():
release-0.8.39,"Given negative, zero and positive denominator and positive numerator"
release-0.8.39,Make sure safe division is always positive and doesn't raise ZeroDivision error
release-0.8.39,--- Branch Detection Data
release-0.8.39,There are no fast metrics that are not supported by KDTree or BallTree!
release-0.8.39,"Cosine and arccoss both crash HDBSCAN. They go down the BallTree path, but"
release-0.8.39,the implementation does not support them.
release-0.8.39,Distance matrix
release-0.8.39,Sparse matrix
release-0.8.39,--- Detecting Branches
release-0.8.39,Generate single-cluster data
release-0.8.39,"Without persistence, find 6 branches"
release-0.8.39,"Mac & Windows give 71, Linux gives 72. Probably different random values."
release-0.8.39,Adding presistence removes some branches
release-0.8.39,--- Branch Detector Functionality
release-0.8.39,A point on a branch (not noise) exact labels change per run
release-0.8.39,A point in a cluster
release-0.8.39,A noise point
release-0.8.39,--- Attribute Output Formats
release-0.8.39,--- Attribute plots
release-0.8.39,Ignore future warnings thrown by sklearn
release-0.8.39,Create a nice dataset with 6 circular clusters and 2 moons
release-0.8.39,"Given, the base HDBSCAN with method 'eom'"
release-0.8.39,"When we ask for flat clustering with same n_clusters,"
release-0.8.39,"Then, the labels and probabilities should match"
release-0.8.39,"Given, the base HDBSCAN with method 'leaf'"
release-0.8.39,"When we ask for flat clustering with same n_clusters,"
release-0.8.39,"Then, the labels and probabilities should match"
release-0.8.39,Method 'eom'...
release-0.8.39,"Given, a flat clustering for required n_clusters,"
release-0.8.39,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.39,"Then, the labels and probabilities should match"
release-0.8.39,Method 'leaf'...
release-0.8.39,"Given, a flat clustering for required n_clusters,"
release-0.8.39,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.39,"Then, the labels and probabilities should match"
release-0.8.39,"Given the max number of clusters that can be produced by 'eom',"
release-0.8.39,(these are produced for epsilon=0) (??? Needs verification)
release-0.8.39,"When we try flat clustering with 'eom' method for more n_clusters,"
release-0.8.39,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.39,"assert ""Cannot predict"" in str(w[-1].message)"
release-0.8.39,"the resulting clusterer switches to using method 'leaf',"
release-0.8.39,and the resulting probabilities and labels must match
release-0.8.39,"Given the base HDBSCAN trained on some data,"
release-0.8.39,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.39,"Then, the clustering should match that due to approximate_predict,"
release-0.8.39,"Given a flat clustering trained for some n_clusters,"
release-0.8.39,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.39,"Then, the number of clusters produced must match the original n_clusters"
release-0.8.39,and all probabilities are <= 1.
release-0.8.39,"Given a flat clustering trained for some n_clusters,"
release-0.8.39,"When using approximate_predict_flat with specified n_clusters,"
release-0.8.39,"Then, the requested number of clusters must be produced"
release-0.8.39,and all probabilities are <= 1.
release-0.8.39,When using approximate_predict_flat with more clusters
release-0.8.39,"than 'eom' can handle,"
release-0.8.39,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.39,But the requested number of clusters must still be produced using 'leaf'
release-0.8.39,and all probabilities are <= 1.
release-0.8.39,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.39,"When membership_vector_flat is called with new data,"
release-0.8.39,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.39,and the number of points should equal those in the test set
release-0.8.39,and all probabilities are <= 1.
release-0.8.39,========================================
release-0.8.39,"Given a flat clustering for a specified n_clusters,"
release-0.8.39,"When membership_vector_flat is called with new data,"
release-0.8.39,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.39,and the number of points should equal those in the test set
release-0.8.39,and all probabilities are <= 1.
release-0.8.39,Ignore user warnings in this function
release-0.8.39,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.39,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.39,"Then the number of clusters in memberships should be as requested,"
release-0.8.39,and the number of points should equal those in the test set
release-0.8.39,and all probabilities are <= 1.
release-0.8.39,========================================
release-0.8.39,"Given a flat clustering for a specified n_clusters,"
release-0.8.39,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.39,"Then the number of clusters in memberships should be as requested,"
release-0.8.39,and the number of points should equal those in the test set
release-0.8.39,and all probabilities are <= 1.
release-0.8.39,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.39,"When all_points_membership_vectors_flat is called,"
release-0.8.39,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.39,and the number of points should equal those in the training set
release-0.8.39,and all probabilities are <= 1.
release-0.8.39,========================================
release-0.8.39,"Given a flat clustering for a specified n_clusters,"
release-0.8.39,"When all_points_membership_vectors_flat is called,"
release-0.8.39,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.39,and the number of points should equal those in the training set
release-0.8.39,and all probabilities are <= 1.
release-0.8.39,Ignore user warnings in this function
release-0.8.39,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.39,"When all_points_membership_vectors_flat is called for some n_clusters,"
release-0.8.39,"Then the number of clusters in memberships should be as requested,"
release-0.8.39,and the number of points should equal those in the training set
release-0.8.39,and all probabilities are <= 1.
release-0.8.39,========================================
release-0.8.39,"Given a flat clustering for a specified n_clusters,"
release-0.8.39,"When membership_vector_flat is called for some n_clusters,"
release-0.8.39,"Then the number of clusters in memberships should be as requested,"
release-0.8.39,and the number of points should equal those in the training set
release-0.8.39,and all probabilities are <= 1.
release-0.8.39,Generate datasets. We choose the size big enough to see the scalability
release-0.8.39,"of the algorithms, but not too big to avoid too long running times"
release-0.8.39,normalize dataset for easier parameter selection
release-0.8.39,estimate bandwidth for mean shift
release-0.8.39,connectivity matrix for structured Ward
release-0.8.39,make connectivity symmetric
release-0.8.39,create clustering estimators
release-0.8.39,predict cluster memberships
release-0.8.39,plot
release-0.8.39,-*- coding: utf-8 -*-
release-0.8.39,#############################################################################
release-0.8.39,Generate sample data
release-0.8.39,#############################################################################
release-0.8.39,Compute DBSCAN
release-0.8.39,"Number of clusters in labels, ignoring noise if present."
release-0.8.39,#############################################################################
release-0.8.39,Plot result
release-0.8.39,Black removed and is used for noise instead.
release-0.8.39,Black used for noise.
release-0.8.39,Black used for noise.
release-0.8.39,-*- coding: utf-8 -*-
release-0.8.39,
release-0.8.39,"hdbscan documentation build configuration file, created by"
release-0.8.39,sphinx-quickstart on Sat May 28 10:34:44 2016.
release-0.8.39,
release-0.8.39,This file is execfile()d with the current directory set to its
release-0.8.39,containing dir.
release-0.8.39,
release-0.8.39,Note that not all possible configuration values are present in this
release-0.8.39,autogenerated file.
release-0.8.39,
release-0.8.39,All configuration values have a default; values that are commented out
release-0.8.39,serve to show the default.
release-0.8.39,"If extensions (or modules to document with autodoc) are in another directory,"
release-0.8.39,add these directories to sys.path here. If the directory is relative to the
release-0.8.39,"documentation root, use os.path.abspath to make it absolute, like shown here."
release-0.8.39,"## We now install the package in a virtualenv to build docs, so this is not needed"
release-0.8.39,"sys.path.insert(0, os.path.abspath('../'))"
release-0.8.39,-- General configuration ------------------------------------------------
release-0.8.39,"If your documentation needs a minimal Sphinx version, state it here."
release-0.8.39,needs_sphinx = '1.0'
release-0.8.39,"Add any Sphinx extension module names here, as strings. They can be"
release-0.8.39,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
release-0.8.39,ones.
release-0.8.39,"'sphinx.ext.napoleon',"
release-0.8.39,'numpy_ext.numpydoc'
release-0.8.39,napoleon_google_docstring = False
release-0.8.39,napoleon_numpy_docstring = True
release-0.8.39,"Add any paths that contain templates here, relative to this directory."
release-0.8.39,The suffix(es) of source filenames.
release-0.8.39,You can specify multiple suffix as a list of string:
release-0.8.39,"source_suffix = ['.rst', '.md']"
release-0.8.39,The encoding of source files.
release-0.8.39,source_encoding = 'utf-8-sig'
release-0.8.39,The master toctree document.
release-0.8.39,General information about the project.
release-0.8.39,"The version info for the project you're documenting, acts as replacement for"
release-0.8.39,"|version| and |release|, also used in various other places throughout the"
release-0.8.39,built documents.
release-0.8.39,
release-0.8.39,The short X.Y version.
release-0.8.39,"The full version, including alpha/beta/rc tags."
release-0.8.39,The language for content autogenerated by Sphinx. Refer to documentation
release-0.8.39,for a list of supported languages.
release-0.8.39,
release-0.8.39,This is also used if you do content translation via gettext catalogs.
release-0.8.39,"Usually you set ""language"" from the command line for these cases."
release-0.8.39,"There are two options for replacing |today|: either, you set today to some"
release-0.8.39,"non-false value, then it is used:"
release-0.8.39,today = ''
release-0.8.39,"Else, today_fmt is used as the format for a strftime call."
release-0.8.39,"today_fmt = '%B %d, %Y'"
release-0.8.39,"List of patterns, relative to source directory, that match files and"
release-0.8.39,directories to ignore when looking for source files.
release-0.8.39,The reST default role (used for this markup: `text`) to use for all
release-0.8.39,documents.
release-0.8.39,default_role = None
release-0.8.39,"If true, '()' will be appended to :func: etc. cross-reference text."
release-0.8.39,add_function_parentheses = True
release-0.8.39,"If true, the current module name will be prepended to all description"
release-0.8.39,unit titles (such as .. function::).
release-0.8.39,add_module_names = True
release-0.8.39,"If true, sectionauthor and moduleauthor directives will be shown in the"
release-0.8.39,output. They are ignored by default.
release-0.8.39,show_authors = False
release-0.8.39,The name of the Pygments (syntax highlighting) style to use.
release-0.8.39,A list of ignored prefixes for module index sorting.
release-0.8.39,modindex_common_prefix = []
release-0.8.39,"If true, keep warnings as ""system message"" paragraphs in the built documents."
release-0.8.39,keep_warnings = False
release-0.8.39,"If true, `todo` and `todoList` produce output, else they produce nothing."
release-0.8.39,-- Options for HTML output ----------------------------------------------
release-0.8.39,The theme to use for HTML and HTML Help pages.  See the documentation for
release-0.8.39,a list of builtin themes.
release-0.8.39,html_theme = 'alabaster'
release-0.8.39,Theme options are theme-specific and customize the look and feel of a theme
release-0.8.39,"further.  For a list of options available for each theme, see the"
release-0.8.39,documentation.
release-0.8.39,html_theme_options = {}
release-0.8.39,"Add any paths that contain custom themes here, relative to this directory."
release-0.8.39,html_theme_path = []
release-0.8.39,"The name for this set of Sphinx documents.  If None, it defaults to"
release-0.8.39,"""<project> v<release> documentation""."
release-0.8.39,html_title = None
release-0.8.39,A shorter title for the navigation bar.  Default is the same as html_title.
release-0.8.39,html_short_title = None
release-0.8.39,The name of an image file (relative to this directory) to place at the top
release-0.8.39,of the sidebar.
release-0.8.39,html_logo = None
release-0.8.39,The name of an image file (within the static path) to use as favicon of the
release-0.8.39,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
release-0.8.39,pixels large.
release-0.8.39,html_favicon = None
release-0.8.39,"Add any paths that contain custom static files (such as style sheets) here,"
release-0.8.39,"relative to this directory. They are copied after the builtin static files,"
release-0.8.39,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
release-0.8.39,Add any extra paths that contain custom files (such as robots.txt or
release-0.8.39,".htaccess) here, relative to this directory. These files are copied"
release-0.8.39,directly to the root of the documentation.
release-0.8.39,html_extra_path = []
release-0.8.39,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
release-0.8.39,using the given strftime format.
release-0.8.39,"html_last_updated_fmt = '%b %d, %Y'"
release-0.8.39,"If true, SmartyPants will be used to convert quotes and dashes to"
release-0.8.39,typographically correct entities.
release-0.8.39,html_use_smartypants = True
release-0.8.39,"Custom sidebar templates, maps document names to template names."
release-0.8.39,html_sidebars = {}
release-0.8.39,"Additional templates that should be rendered to pages, maps page names to"
release-0.8.39,template names.
release-0.8.39,html_additional_pages = {}
release-0.8.39,"If false, no module index is generated."
release-0.8.39,html_domain_indices = True
release-0.8.39,"If false, no index is generated."
release-0.8.39,html_use_index = True
release-0.8.39,"If true, the index is split into individual pages for each letter."
release-0.8.39,html_split_index = False
release-0.8.39,"If true, links to the reST sources are added to the pages."
release-0.8.39,html_show_sourcelink = True
release-0.8.39,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
release-0.8.39,html_show_sphinx = True
release-0.8.39,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
release-0.8.39,html_show_copyright = True
release-0.8.39,"If true, an OpenSearch description file will be output, and all pages will"
release-0.8.39,contain a <link> tag referring to it.  The value of this option must be the
release-0.8.39,base URL from which the finished HTML is served.
release-0.8.39,html_use_opensearch = ''
release-0.8.39,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
release-0.8.39,html_file_suffix = None
release-0.8.39,Language to be used for generating the HTML full-text search index.
release-0.8.39,Sphinx supports the following languages:
release-0.8.39,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
release-0.8.39,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
release-0.8.39,html_search_language = 'en'
release-0.8.39,"A dictionary with options for the search language support, empty by default."
release-0.8.39,Now only 'ja' uses this config value
release-0.8.39,html_search_options = {'type': 'default'}
release-0.8.39,The name of a javascript file (relative to the configuration directory) that
release-0.8.39,"implements a search results scorer. If empty, the default will be used."
release-0.8.39,html_search_scorer = 'scorer.js'
release-0.8.39,Output file base name for HTML help builder.
release-0.8.39,-- Options for LaTeX output ---------------------------------------------
release-0.8.39,The paper size ('letterpaper' or 'a4paper').
release-0.8.39,"'papersize': 'letterpaper',"
release-0.8.39,"The font size ('10pt', '11pt' or '12pt')."
release-0.8.39,"'pointsize': '10pt',"
release-0.8.39,Additional stuff for the LaTeX preamble.
release-0.8.39,"'preamble': '',"
release-0.8.39,Latex figure (float) alignment
release-0.8.39,"'figure_align': 'htbp',"
release-0.8.39,Grouping the document tree into LaTeX files. List of tuples
release-0.8.39,"(source start file, target name, title,"
release-0.8.39,"author, documentclass [howto, manual, or own class])."
release-0.8.39,The name of an image file (relative to this directory) to place at the top of
release-0.8.39,the title page.
release-0.8.39,latex_logo = None
release-0.8.39,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
release-0.8.39,not chapters.
release-0.8.39,latex_use_parts = False
release-0.8.39,"If true, show page references after internal links."
release-0.8.39,latex_show_pagerefs = False
release-0.8.39,"If true, show URL addresses after external links."
release-0.8.39,latex_show_urls = False
release-0.8.39,Documents to append as an appendix to all manuals.
release-0.8.39,latex_appendices = []
release-0.8.39,"If false, no module index is generated."
release-0.8.39,latex_domain_indices = True
release-0.8.39,-- Options for manual page output ---------------------------------------
release-0.8.39,One entry per manual page. List of tuples
release-0.8.39,"(source start file, name, description, authors, manual section)."
release-0.8.39,"If true, show URL addresses after external links."
release-0.8.39,man_show_urls = False
release-0.8.39,-- Options for Texinfo output -------------------------------------------
release-0.8.39,Grouping the document tree into Texinfo files. List of tuples
release-0.8.39,"(source start file, target name, title, author,"
release-0.8.39,"dir menu entry, description, category)"
release-0.8.39,Documents to append as an appendix to all manuals.
release-0.8.39,texinfo_appendices = []
release-0.8.39,"If false, no module index is generated."
release-0.8.39,texinfo_domain_indices = True
release-0.8.39,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.39,texinfo_show_urls = 'footnote'
release-0.8.39,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
release-0.8.39,texinfo_no_detailmenu = False
release-0.8.39,-- Options for Epub output ----------------------------------------------
release-0.8.39,Bibliographic Dublin Core info.
release-0.8.39,The basename for the epub file. It defaults to the project name.
release-0.8.39,epub_basename = project
release-0.8.39,The HTML theme for the epub output. Since the default themes are not
release-0.8.39,"optimized for small screen space, using the same theme for HTML and epub"
release-0.8.39,"output is usually not wise. This defaults to 'epub', a theme designed to save"
release-0.8.39,visual space.
release-0.8.39,epub_theme = 'epub'
release-0.8.39,The language of the text. It defaults to the language option
release-0.8.39,or 'en' if the language is not set.
release-0.8.39,epub_language = ''
release-0.8.39,The scheme of the identifier. Typical schemes are ISBN or URL.
release-0.8.39,epub_scheme = ''
release-0.8.39,The unique identifier of the text. This can be a ISBN number
release-0.8.39,or the project homepage.
release-0.8.39,epub_identifier = ''
release-0.8.39,A unique identification for the text.
release-0.8.39,epub_uid = ''
release-0.8.39,A tuple containing the cover image and cover page html template filenames.
release-0.8.39,epub_cover = ()
release-0.8.39,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
release-0.8.39,epub_guide = ()
release-0.8.39,HTML files that should be inserted before the pages created by sphinx.
release-0.8.39,The format is a list of tuples containing the path and title.
release-0.8.39,epub_pre_files = []
release-0.8.39,HTML files that should be inserted after the pages created by sphinx.
release-0.8.39,The format is a list of tuples containing the path and title.
release-0.8.39,epub_post_files = []
release-0.8.39,A list of files that should not be packed into the epub file.
release-0.8.39,The depth of the table of contents in toc.ncx.
release-0.8.39,epub_tocdepth = 3
release-0.8.39,Allow duplicate toc entries.
release-0.8.39,epub_tocdup = True
release-0.8.39,Choose between 'default' and 'includehidden'.
release-0.8.39,epub_tocscope = 'default'
release-0.8.39,Fix unsupported image types using the Pillow.
release-0.8.39,epub_fix_images = False
release-0.8.39,Scale large images.
release-0.8.39,epub_max_image_width = 0
release-0.8.39,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.39,epub_show_urls = 'inline'
release-0.8.39,"If false, no index is generated."
release-0.8.39,epub_use_index = True
release-0.8.38.post2,"Import numpy here, only when headers are needed"
release-0.8.38.post2,Add numpy headers to include_dirs
release-0.8.38.post2,Call original build_ext command
release-0.8.38.post2,The dependencies are the same as the contents of requirements.txt
release-0.8.38.post2,"A little ""fancy"" we select from the flattened array reshape back"
release-0.8.38.post2,(Fortran format to get indexing right) and take the product to do an and
release-0.8.38.post2,then convert back to boolean type.
release-0.8.38.post2,Density sparseness is not well defined if there are no
release-0.8.38.post2,internal edges (as per the referenced paper). However
release-0.8.38.post2,MATLAB code from the original authors simply selects the
release-0.8.38.post2,largest of *all* the edges in the case that there are
release-0.8.38.post2,"no internal edges, so we do the same here"
release-0.8.38.post2,"If there are any internal edges, then subselect them out"
release-0.8.38.post2,If there are no internal edges then we want to take the
release-0.8.38.post2,"max over all the edges that exist in the MST, so we simply"
release-0.8.38.post2,do nothing and return all the edges in the MST.
release-0.8.38.post2,-*- coding: utf-8 -*-
release-0.8.38.post2,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38.post2,Steve Astels <sastels@gmail.com>
release-0.8.38.post2,John Healy <jchealy@gmail.com>
release-0.8.38.post2,
release-0.8.38.post2,License: BSD 3 clause
release-0.8.38.post2,"Treating this case explicitly, instead of letting"
release-0.8.38.post2,"sklearn.metrics.pairwise_distances handle it,"
release-0.8.38.post2,enables the usage of numpy.inf in the distance
release-0.8.38.post2,matrix to indicate missing distance information.
release-0.8.38.post2,TODO: Check if copying is necessary
release-0.8.38.post2,raise TypeError('Sparse distance matrices not yet supported')
release-0.8.38.post2,Warn if the MST couldn't be constructed around the missing distances
release-0.8.38.post2,mst_linkage_core does not generate a full minimal spanning tree
release-0.8.38.post2,If a tree is required then we must build the edges from the information
release-0.8.38.post2,returned by mst_linkage_core (i.e. just the order of points to be merged)
release-0.8.38.post2,Sort edges of the min_spanning_tree by weight
release-0.8.38.post2,Convert edge list into standard hierarchical clustering format
release-0.8.38.post2,Check for connected component on X
release-0.8.38.post2,Compute sparse mutual reachability graph
release-0.8.38.post2,"if max_dist > 0, max distance to use when the reachability is infinite"
release-0.8.38.post2,Check connected component on mutual reachability
release-0.8.38.post2,"If more than one component, it means that even if the distance matrix X"
release-0.8.38.post2,"has one component, there exists with less than `min_samples` neighbors"
release-0.8.38.post2,Compute the minimum spanning tree for the sparse graph
release-0.8.38.post2,Convert the graph to scipy cluster array format
release-0.8.38.post2,Sort edges of the min_spanning_tree by weight
release-0.8.38.post2,Convert edge list into standard hierarchical clustering format
release-0.8.38.post2,The Cython routines used require contiguous arrays
release-0.8.38.post2,TO DO: Deal with p for minkowski appropriately
release-0.8.38.post2,Get distance to kth nearest neighbour
release-0.8.38.post2,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.38.post2,Sort edges of the min_spanning_tree by weight
release-0.8.38.post2,Convert edge list into standard hierarchical clustering format
release-0.8.38.post2,The Cython routines used require contiguous arrays
release-0.8.38.post2,Get distance to kth nearest neighbour
release-0.8.38.post2,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.38.post2,Sort edges of the min_spanning_tree by weight
release-0.8.38.post2,Convert edge list into standard hierarchical clustering format
release-0.8.38.post2,Sort edges of the min_spanning_tree by weight
release-0.8.38.post2,Convert edge list into standard hierarchical clustering format
release-0.8.38.post2,Sort edges of the min_spanning_tree by weight
release-0.8.38.post2,Convert edge list into standard hierarchical clustering format
release-0.8.38.post2,Checks input and converts to an nd-array where possible
release-0.8.38.post2,"Only non-sparse, precomputed distance matrices are handled here"
release-0.8.38.post2,and thereby allowed to contain numpy.inf for missing distances
release-0.8.38.post2,Python 2 and 3 compliant string_type checking
release-0.8.38.post2,We can't do much with sparse matrices ...
release-0.8.38.post2,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.38.post2,still debugging for now
release-0.8.38.post2,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.38.post2,still debugging for now
release-0.8.38.post2,Inherits from sklearn
release-0.8.38.post2,Non-precomputed matrices may contain non-finite values.
release-0.8.38.post2,Rows with these values
release-0.8.38.post2,Pass only the purely finite indices into hdbscan
release-0.8.38.post2,We will later assign all non-finite points to the background -1 cluster
release-0.8.38.post2,Handle sparse precomputed distance matrices separately
release-0.8.38.post2,"Only non-sparse, precomputed distance matrices are allowed"
release-0.8.38.post2,to have numpy.inf values indicating missing distances
release-0.8.38.post2,"prediction data only applies to the persistent model, so remove"
release-0.8.38.post2,it from the keyword args we pass on the the function
release-0.8.38.post2,remap indices to align with original data in the case of non-finite entries.
release-0.8.38.post2,"Unltimately, for each Ci, we only require the"
release-0.8.38.post2,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
release-0.8.38.post2,"So let's call this value DSPC_wrt(Ci), i.e."
release-0.8.38.post2,density separation 'with respect to' Ci.
release-0.8.38.post2,If exactly one of the points is noise
release-0.8.38.post2,Set the density sparseness of the cluster
release-0.8.38.post2,to the sparsest value seen so far.
release-0.8.38.post2,Check whether density separations with
release-0.8.38.post2,respect to each of these clusters can
release-0.8.38.post2,be reduced.
release-0.8.38.post2,"In case min_outlier_sep is still np.inf, we assign a new value to it."
release-0.8.38.post2,This only makes sense if num_clusters = 1 since it has turned out
release-0.8.38.post2,that the MR-MST has no edges between a noise point and a core point.
release-0.8.38.post2,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
release-0.8.38.post2,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
release-0.8.38.post2,MR-MST might contain an edge with one point in Cj and ther other one
release-0.8.38.post2,"in Ck. Here, we replace the infinite density separation of Ci by"
release-0.8.38.post2,another large enough value.
release-0.8.38.post2,
release-0.8.38.post2,TODO: Think of a better yet efficient way to handle this.
release-0.8.38.post2,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
release-0.8.38.post2,Use a previously initialized/trained HDBSCAN
release-0.8.38.post2,Handle the trivial case first.
release-0.8.38.post2,Always generate prediction_data to avoid later woes
release-0.8.38.post2,This will later be chosen according to n_clusters
release-0.8.38.post2,Initialize and train clusterer if one was not previously supplied.
release-0.8.38.post2,Always generate prediction data
release-0.8.38.post2,We do not pass cluster_selection_epsilon here.
release-0.8.38.post2,"While this adds unnecessary computation, it makes the code"
release-0.8.38.post2,easier to read and debug.
release-0.8.38.post2,"Train on 'X'. Do this even if the supplied clusterer was trained,"
release-0.8.38.post2,because we want to make sure it fits 'X'.
release-0.8.38.post2,"Pick an epsilon value right after a split produces n_clusters,"
release-0.8.38.post2,and the don't split further for smaller epsilon (larger lambda)
release-0.8.38.post2,Or use the specified cluster_selection_epsilon
release-0.8.38.post2,"Extract tree related stuff, in order to re-assign labels"
release-0.8.38.post2,Get labels according to the required cluster_selection_epsilon
release-0.8.38.post2,Reflect the related changes in HDBSCAN.
release-0.8.38.post2,PredictionData attached to HDBSCAN should also change.
release-0.8.38.post2,A function re_init is defined in this module to handle this.
release-0.8.38.post2,"From a fitted HDBSCAN model, predict for n_clusters=5"
release-0.8.38.post2,Store prediciton data for later use.
release-0.8.38.post2,and use this prediction data to predict on new points
release-0.8.38.post2,Get number of fitted clusters for later use.
release-0.8.38.post2,We'll need the condensed tree later...
release-0.8.38.post2,"If none of the three arguments: prediction_data, n_clusters,"
release-0.8.38.post2,"and cluster_selection_epsilon are supplied,"
release-0.8.38.post2,then use clusterer's prediciton data directly
release-0.8.38.post2,"If either of n_clusters or cluster_selection_epsilon were supplied,"
release-0.8.38.post2,then build prediction data from these by modifying clusterer's
release-0.8.38.post2,Get prediction data from clusterer
release-0.8.38.post2,Modify prediction_data to reflect new n_clusters
release-0.8.38.post2,"First, make a copy of prediction data to avoid modifying source"
release-0.8.38.post2,Cluster selection method is hold by condensed_tree.
release-0.8.38.post2,Change from 'eom' to 'leaf' if n_clusters is too large.
release-0.8.38.post2,This change does not affect the tree associated with 'clusterer'
release-0.8.38.post2,Re-initialize prediction_data for the specified n_clusters or epsilon
release-0.8.38.post2,============================================================
release-0.8.38.post2,Now we're ready to use prediction_data
release-0.8.38.post2,"The rest of the code is copied from HDBSCAN's approximate_predict,"
release-0.8.38.post2,but modified to use prediction_data instead of clusterer's attribute
release-0.8.38.post2,Extract condensed tree for later use
release-0.8.38.post2,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.38.post2,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.38.post2,Use the same prediction_data as clusterer's
release-0.8.38.post2,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.38.post2,produces a specified number of n_clusters
release-0.8.38.post2,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.38.post2,Create another instance of prediction_data that is consistent
release-0.8.38.post2,with the selected value of epsilon.
release-0.8.38.post2,Flat clustering from prediction data
release-0.8.38.post2,Initialize probabilities
release-0.8.38.post2,k-NN for prediciton points to training set
release-0.8.38.post2,Loop over prediction points to compute probabilities
release-0.8.38.post2,We need to find where in the tree the new point would go
release-0.8.38.post2,for the purposes of outlier membership approximation
release-0.8.38.post2,"Find row in tree where nearest neighbor drops out,"
release-0.8.38.post2,so we can get a lambda value for the nearest neighbor
release-0.8.38.post2,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
release-0.8.38.post2,"Equivalently, this assigns core distance for prediction point as"
release-0.8.38.post2,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
release-0.8.38.post2,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.38.post2,Use new prediction_data that points to exemplars that are specific
release-0.8.38.post2,to the choice of n_clusters
release-0.8.38.post2,Probabilities based on how long the nearest exemplar persists in
release-0.8.38.post2,each cluster (with respect to most persistent exemplar)
release-0.8.38.post2,Use new clusters that are defined by the choice of n_clusters.
release-0.8.38.post2,Merge the two probabilities to produce a single set of probabilities
release-0.8.38.post2,Include probability that the nearest neighbor belongs to a cluster
release-0.8.38.post2,Rename variable so it's easy to understand what's being returned
release-0.8.38.post2,Extract condensed tree for later use
release-0.8.38.post2,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.38.post2,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.38.post2,Use the same prediction_data as clusterer's
release-0.8.38.post2,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.38.post2,produces a specified number of n_clusters
release-0.8.38.post2,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.38.post2,Create another instance of prediction_data that is consistent
release-0.8.38.post2,with the selected value of epsilon.
release-0.8.38.post2,Flat clustering at the chosen epsilon from prediction_data
release-0.8.38.post2,"When no clusters found, return array of 0's"
release-0.8.38.post2,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.38.post2,Use new prediction_data that points to exemplars that are specific
release-0.8.38.post2,to the choice of n_clusters
release-0.8.38.post2,Probabilities based on how long the point persists in
release-0.8.38.post2,each cluster (with respect to most persistent exemplar)
release-0.8.38.post2,Use new clusters that are defined by the choice of n_clusters.
release-0.8.38.post2,Include probability that the point belongs to a cluster
release-0.8.38.post2,Aggregate the three probabilities to produce membership vectors
release-0.8.38.post2,Re-name variable to clarify what's being returned.
release-0.8.38.post2,"With method 'eom', max clusters are produced for epsilon=0,"
release-0.8.38.post2,as computed by
release-0.8.38.post2,Increasing epsilon can only reduce the number of ouput clusters.
release-0.8.38.post2,"To select epsilon, consider all values where clusters are split"
release-0.8.38.post2,Subtract the extra e-12 to avoid numerical errors in comparison
release-0.8.38.post2,"Then, we avoid splitting for all epsilon below this."
release-0.8.38.post2,Use an epsilon value that produces the right number of clusters.
release-0.8.38.post2,The condensed tree of HDBSCAN has this information.
release-0.8.38.post2,Extract the lambda levels (=1/distance) from the condensed tree
release-0.8.38.post2,We don't want values that produce a large cluster and
release-0.8.38.post2,just one or two individual points.
release-0.8.38.post2,Keep only those lambda values corresponding to cluster separation;
release-0.8.38.post2,"i.e., with child_sizes > 1"
release-0.8.38.post2,"Get the unique values, because when two clusters fall out of one,"
release-0.8.38.post2,the entry with lambda is repeated.
release-0.8.38.post2,lambda values are sorted by np.unique.
release-0.8.38.post2,"Now, get epsilon (distance threshold) as 1/lambda"
release-0.8.38.post2,"At this epsilon, n_clusters have been split."
release-0.8.38.post2,Stop splits at epsilons smaller than this.
release-0.8.38.post2,"To allow for numerical errors,"
release-0.8.38.post2,predData must be a pre-trained PredictionData instance from hdbscan
release-0.8.38.post2,"If n_clusters is specified, compute cluster_selection_epsilon;"
release-0.8.38.post2,This is the key modification:
release-0.8.38.post2,Select clusters according to selection method and epsilon.
release-0.8.38.post2,_new_select_clusters is a modification of get_clusters
release-0.8.38.post2,from hdbscan._hdbscan_tree
release-0.8.38.post2,"raw tree, used later to get exemplars and lambda values"
release-0.8.38.post2,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
release-0.8.38.post2,to the cluster labels produced as output
release-0.8.38.post2,Re-compute lambdas and exemplars for selected clusters;
release-0.8.38.post2,max_lambda <=> smallest distance <=> most persistent point(s)
release-0.8.38.post2,Map all sub-clusters of selected cluster to the selected cluster's
release-0.8.38.post2,label in output.
release-0.8.38.post2,Map lambdas too...
release-0.8.38.post2,Create set of exemplar points for later use.
release-0.8.38.post2,Novel points are assigned based on cluster of closest exemplar.
release-0.8.38.post2,"For each selected cluster, get all of its leaves,"
release-0.8.38.post2,"and leaves of leaves, and so on..."
release-0.8.38.post2,Largest lambda => Most persistent points
release-0.8.38.post2,Get the most persistent points
release-0.8.38.post2,Add most persistent points as exemplars
release-0.8.38.post2,Add exemplars for each leaf of each selected cluster.
release-0.8.38.post2,(exclude root)
release-0.8.38.post2,-*- coding: utf-8 -*-
release-0.8.38.post2,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38.post2,
release-0.8.38.post2,License: BSD 3 clause
release-0.8.38.post2,"Return the only cluster, the root"
release-0.8.38.post2,We want to get the x and y coordinates for the start of each cluster
release-0.8.38.post2,"Initialize the leaves, since we know where they go, the iterate"
release-0.8.38.post2,"through everything from the leaves back, setting coords as we go"
release-0.8.38.post2,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
release-0.8.38.post2,bottoms and widths for each rectangle. We can go through each cluster
release-0.8.38.post2,and do this for each in turn.
release-0.8.38.post2,Ensure we don't try to take log of zero
release-0.8.38.post2,Finally we need the horizontal lines that occur at cluster splits.
release-0.8.38.post2,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
release-0.8.38.post2,"axis.plot(xs, ys, color='black', linewidth=1)"
release-0.8.38.post2,Extract the chosen cluster bounds. If enough duplicate data points exist in the
release-0.8.38.post2,data the lambda value might be infinite. This breaks labeling and highlighting
release-0.8.38.post2,the chosen clusters.
release-0.8.38.post2,Extract the plot range of the y-axis and set default center and height values for ellipses.
release-0.8.38.post2,Extremly dense clusters might result in near infinite lambda values. Setting max_height
release-0.8.38.post2,based on the percentile should alleviate the impact on plotting.
release-0.8.38.post2,Set center and height to default values if necessary
release-0.8.38.post2,Ensure the ellipse is visible
release-0.8.38.post2,Get a 2D projection; if we have a lot of dimensions use PCA first
release-0.8.38.post2,Use PCA to get down to 32 dimension
release-0.8.38.post2,"node_desat=None,"
release-0.8.38.post2,Extract node color data
release-0.8.38.post2,Extract edge color data
release-0.8.38.post2,Compute or extract layout
release-0.8.38.post2,Add edges
release-0.8.38.post2,Add FLASC features
release-0.8.38.post2,Add raw data features
release-0.8.38.post2,-*- coding: utf-8 -*-
release-0.8.38.post2,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38.post2,
release-0.8.38.post2,License: BSD 3 clause
release-0.8.38.post2,The Cython routines used require contiguous arrays
release-0.8.38.post2,The Cython routines used require contiguous arrays
release-0.8.38.post2,We can't do much with sparse matrices ...
release-0.8.38.post2,Need heuristic to decide when to go to boruvka;
release-0.8.38.post2,still debugging for now
release-0.8.38.post2,Need heuristic to decide when to go to boruvka;
release-0.8.38.post2,still debugging for now
release-0.8.38.post2,Support various prediction methods for predicting cluster membership
release-0.8.38.post2,of new or unseen points. There are several ways to interpret how
release-0.8.38.post2,"to do this correctly, so we provide several methods for"
release-0.8.38.post2,the different use cases that may arise.
release-0.8.38.post2,raw_condensed_tree = condensed_tree.to_numpy()
release-0.8.38.post2,New point departs with the old
release-0.8.38.post2,Find appropriate cluster based on lambda of new point
release-0.8.38.post2,Find appropriate cluster based on lambda of new point
release-0.8.38.post2,"the point is in the dataset, fix lambda for rounding errors"
release-0.8.38.post2,We need to find where in the tree the new point would go
release-0.8.38.post2,for the purposes of outlier membership approximation
release-0.8.38.post2,"When no clusters found, return array of 0's"
release-0.8.38.post2,Support branch detection within clusters.
release-0.8.38.post2,Select finite data points
release-0.8.38.post2,Construct tree
release-0.8.38.post2,Allocate to maintain data point indices
release-0.8.38.post2,Find neighbours for non-noise points
release-0.8.38.post2,Check clusterer state
release-0.8.38.post2,Validate parameters
release-0.8.38.post2,Extract state
release-0.8.38.post2,Configure parallelization
release-0.8.38.post2,Detect branches
release-0.8.38.post2,Maintain data indices for non-finite data
release-0.8.38.post2,Combined result
release-0.8.38.post2,Branching result
release-0.8.38.post2,Clusters to branches
release-0.8.38.post2,List points within cluster
release-0.8.38.post2,Extract MST edges within cluster
release-0.8.38.post2,Compute in cluster centrality
release-0.8.38.post2,Construct cluster approximation graph
release-0.8.38.post2,Extract centrality MST and compute single linkage
release-0.8.38.post2,Re-label edges with data ids
release-0.8.38.post2,Return values
release-0.8.38.post2,Allocate output (won't be filled completely)
release-0.8.38.post2,Fill (undirected) MST edges with within-cluster-ids
release-0.8.38.post2,Fill neighbors with within-cluster-ids
release-0.8.38.post2,Fill mutual reachabilities
release-0.8.38.post2,Extract unique edges that stay within the cluster
release-0.8.38.post2,Query KDTree/BallTree for neighours within the distance
release-0.8.38.post2,Count number of returned edges per point
release-0.8.38.post2,Create full edge list
release-0.8.38.post2,Create output
release-0.8.38.post2,Reset noise labels to k-cluster
release-0.8.38.post2,Allocate output
release-0.8.38.post2,Compute the labels and probabilities
release-0.8.38.post2,Reorder other parts
release-0.8.38.post2,import pickle
release-0.8.38.post2,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.38.post2,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.38.post2,"number of clusters, ignoring noise if present"
release-0.8.38.post2,"metric is the function reference, not the string key."
release-0.8.38.post2,def test_rsl_unavailable_hierarchy():
release-0.8.38.post2,clusterer = RobustSingleLinkage()
release-0.8.38.post2,with warnings.catch_warnings(record=True) as w:
release-0.8.38.post2,tree = clusterer.cluster_hierarchy_
release-0.8.38.post2,assert len(w) > 0
release-0.8.38.post2,assert tree is None
release-0.8.38.post2,"H, y = shuffle(X, y, random_state=7)"
release-0.8.38.post2,Disable for now -- need to refactor to meet newer standards
release-0.8.38.post2,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.38.post2,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.38.post2,this fails if no $DISPLAY specified
release-0.8.38.post2,"number of clusters, ignoring noise if present"
release-0.8.38.post2,"number of clusters, ignoring noise if present"
release-0.8.38.post2,"H, y = shuffle(X, y, random_state=7)"
release-0.8.38.post2,"metric is the function reference, not the string key."
release-0.8.38.post2,def test_hdbscan_unavailable_attributes():
release-0.8.38.post2,clusterer = HDBSCAN(gen_min_span_tree=False)
release-0.8.38.post2,with warnings.catch_warnings(record=True) as w:
release-0.8.38.post2,tree = clusterer.condensed_tree_
release-0.8.38.post2,assert len(w) > 0
release-0.8.38.post2,assert tree is None
release-0.8.38.post2,with warnings.catch_warnings(record=True) as w:
release-0.8.38.post2,tree = clusterer.single_linkage_tree_
release-0.8.38.post2,assert len(w) > 0
release-0.8.38.post2,assert tree is None
release-0.8.38.post2,with warnings.catch_warnings(record=True) as w:
release-0.8.38.post2,scores = clusterer.outlier_scores_
release-0.8.38.post2,assert len(w) > 0
release-0.8.38.post2,assert scores is None
release-0.8.38.post2,with warnings.catch_warnings(record=True) as w:
release-0.8.38.post2,tree = clusterer.minimum_spanning_tree_
release-0.8.38.post2,assert len(w) > 0
release-0.8.38.post2,assert tree is None
release-0.8.38.post2,def test_hdbscan_min_span_tree_availability():
release-0.8.38.post2,clusterer = HDBSCAN().fit(X)
release-0.8.38.post2,tree = clusterer.minimum_spanning_tree_
release-0.8.38.post2,assert tree is None
release-0.8.38.post2,D = distance.squareform(distance.pdist(X))
release-0.8.38.post2,D /= np.max(D)
release-0.8.38.post2,HDBSCAN(metric='precomputed').fit(D)
release-0.8.38.post2,tree = clusterer.minimum_spanning_tree_
release-0.8.38.post2,assert tree is None
release-0.8.38.post2,no prediction data error
release-0.8.38.post2,wrong dimensions error
release-0.8.38.post2,no clusters warning
release-0.8.38.post2,def test_hdbscan_membership_vector():
release-0.8.38.post2,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.38.post2,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
release-0.8.38.post2,assert_array_almost_equal(
release-0.8.38.post2,"vector,"
release-0.8.38.post2,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
release-0.8.38.post2,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
release-0.8.38.post2,assert_array_almost_equal(
release-0.8.38.post2,"vector,"
release-0.8.38.post2,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
release-0.8.38.post2,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
release-0.8.38.post2,assert_array_almost_equal(
release-0.8.38.post2,"vector,"
release-0.8.38.post2,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
release-0.8.38.post2,
release-0.8.38.post2,def test_hdbscan_all_points_membership_vectors():
release-0.8.38.post2,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.38.post2,vects = all_points_membership_vectors(clusterer)
release-0.8.38.post2,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
release-0.8.38.post2,"2.52734246e-001,"
release-0.8.38.post2,8.38299608e-002]))
release-0.8.38.post2,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
release-0.8.38.post2,"8.35882503e-002,"
release-0.8.38.post2,1.07356406e-001]))
release-0.8.38.post2,without epsilon we should see many noise points as children of root.
release-0.8.38.post2,for this random seed an epsilon of 0.2 will produce exactly 2 noise
release-0.8.38.post2,points at that cut in single linkage.
release-0.8.38.post2,Disable for now -- need to refactor to meet newer standards
release-0.8.38.post2,Probably not applicable now #
release-0.8.38.post2,def test_dbscan_sparse():
release-0.8.38.post2,def test_dbscan_balltree():
release-0.8.38.post2,def test_pickle():
release-0.8.38.post2,def test_dbscan_core_samples_toy():
release-0.8.38.post2,def test_boundaries():
release-0.8.38.post2,"Given negative, zero and positive denominator and positive numerator"
release-0.8.38.post2,Make sure safe division is always positive and doesn't raise ZeroDivision error
release-0.8.38.post2,--- Branch Detection Data
release-0.8.38.post2,There are no fast metrics that are not supported by KDTree or BallTree!
release-0.8.38.post2,"Cosine and arccoss both crash HDBSCAN. They go down the BallTree path, but"
release-0.8.38.post2,the implementation does not support them.
release-0.8.38.post2,Distance matrix
release-0.8.38.post2,Sparse matrix
release-0.8.38.post2,--- Detecting Branches
release-0.8.38.post2,Generate single-cluster data
release-0.8.38.post2,"Without persistence, find 6 branches"
release-0.8.38.post2,"Mac & Windows give 71, Linux gives 72. Probably different random values."
release-0.8.38.post2,Adding presistence removes some branches
release-0.8.38.post2,--- Branch Detector Functionality
release-0.8.38.post2,A point on a branch (not noise) exact labels change per run
release-0.8.38.post2,A point in a cluster
release-0.8.38.post2,A noise point
release-0.8.38.post2,--- Attribute Output Formats
release-0.8.38.post2,--- Attribute plots
release-0.8.38.post2,Ignore future warnings thrown by sklearn
release-0.8.38.post2,Create a nice dataset with 6 circular clusters and 2 moons
release-0.8.38.post2,"Given, the base HDBSCAN with method 'eom'"
release-0.8.38.post2,"When we ask for flat clustering with same n_clusters,"
release-0.8.38.post2,"Then, the labels and probabilities should match"
release-0.8.38.post2,"Given, the base HDBSCAN with method 'leaf'"
release-0.8.38.post2,"When we ask for flat clustering with same n_clusters,"
release-0.8.38.post2,"Then, the labels and probabilities should match"
release-0.8.38.post2,Method 'eom'...
release-0.8.38.post2,"Given, a flat clustering for required n_clusters,"
release-0.8.38.post2,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.38.post2,"Then, the labels and probabilities should match"
release-0.8.38.post2,Method 'leaf'...
release-0.8.38.post2,"Given, a flat clustering for required n_clusters,"
release-0.8.38.post2,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.38.post2,"Then, the labels and probabilities should match"
release-0.8.38.post2,"Given the max number of clusters that can be produced by 'eom',"
release-0.8.38.post2,(these are produced for epsilon=0) (??? Needs verification)
release-0.8.38.post2,"When we try flat clustering with 'eom' method for more n_clusters,"
release-0.8.38.post2,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.38.post2,"assert ""Cannot predict"" in str(w[-1].message)"
release-0.8.38.post2,"the resulting clusterer switches to using method 'leaf',"
release-0.8.38.post2,and the resulting probabilities and labels must match
release-0.8.38.post2,"Given the base HDBSCAN trained on some data,"
release-0.8.38.post2,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.38.post2,"Then, the clustering should match that due to approximate_predict,"
release-0.8.38.post2,"Given a flat clustering trained for some n_clusters,"
release-0.8.38.post2,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.38.post2,"Then, the number of clusters produced must match the original n_clusters"
release-0.8.38.post2,and all probabilities are <= 1.
release-0.8.38.post2,"Given a flat clustering trained for some n_clusters,"
release-0.8.38.post2,"When using approximate_predict_flat with specified n_clusters,"
release-0.8.38.post2,"Then, the requested number of clusters must be produced"
release-0.8.38.post2,and all probabilities are <= 1.
release-0.8.38.post2,When using approximate_predict_flat with more clusters
release-0.8.38.post2,"than 'eom' can handle,"
release-0.8.38.post2,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.38.post2,But the requested number of clusters must still be produced using 'leaf'
release-0.8.38.post2,and all probabilities are <= 1.
release-0.8.38.post2,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38.post2,"When membership_vector_flat is called with new data,"
release-0.8.38.post2,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38.post2,and the number of points should equal those in the test set
release-0.8.38.post2,and all probabilities are <= 1.
release-0.8.38.post2,========================================
release-0.8.38.post2,"Given a flat clustering for a specified n_clusters,"
release-0.8.38.post2,"When membership_vector_flat is called with new data,"
release-0.8.38.post2,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38.post2,and the number of points should equal those in the test set
release-0.8.38.post2,and all probabilities are <= 1.
release-0.8.38.post2,Ignore user warnings in this function
release-0.8.38.post2,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38.post2,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.38.post2,"Then the number of clusters in memberships should be as requested,"
release-0.8.38.post2,and the number of points should equal those in the test set
release-0.8.38.post2,and all probabilities are <= 1.
release-0.8.38.post2,========================================
release-0.8.38.post2,"Given a flat clustering for a specified n_clusters,"
release-0.8.38.post2,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.38.post2,"Then the number of clusters in memberships should be as requested,"
release-0.8.38.post2,and the number of points should equal those in the test set
release-0.8.38.post2,and all probabilities are <= 1.
release-0.8.38.post2,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38.post2,"When all_points_membership_vectors_flat is called,"
release-0.8.38.post2,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38.post2,and the number of points should equal those in the training set
release-0.8.38.post2,and all probabilities are <= 1.
release-0.8.38.post2,========================================
release-0.8.38.post2,"Given a flat clustering for a specified n_clusters,"
release-0.8.38.post2,"When all_points_membership_vectors_flat is called,"
release-0.8.38.post2,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38.post2,and the number of points should equal those in the training set
release-0.8.38.post2,and all probabilities are <= 1.
release-0.8.38.post2,Ignore user warnings in this function
release-0.8.38.post2,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38.post2,"When all_points_membership_vectors_flat is called for some n_clusters,"
release-0.8.38.post2,"Then the number of clusters in memberships should be as requested,"
release-0.8.38.post2,and the number of points should equal those in the training set
release-0.8.38.post2,and all probabilities are <= 1.
release-0.8.38.post2,========================================
release-0.8.38.post2,"Given a flat clustering for a specified n_clusters,"
release-0.8.38.post2,"When membership_vector_flat is called for some n_clusters,"
release-0.8.38.post2,"Then the number of clusters in memberships should be as requested,"
release-0.8.38.post2,and the number of points should equal those in the training set
release-0.8.38.post2,and all probabilities are <= 1.
release-0.8.38.post2,Generate datasets. We choose the size big enough to see the scalability
release-0.8.38.post2,"of the algorithms, but not too big to avoid too long running times"
release-0.8.38.post2,normalize dataset for easier parameter selection
release-0.8.38.post2,estimate bandwidth for mean shift
release-0.8.38.post2,connectivity matrix for structured Ward
release-0.8.38.post2,make connectivity symmetric
release-0.8.38.post2,create clustering estimators
release-0.8.38.post2,predict cluster memberships
release-0.8.38.post2,plot
release-0.8.38.post2,-*- coding: utf-8 -*-
release-0.8.38.post2,#############################################################################
release-0.8.38.post2,Generate sample data
release-0.8.38.post2,#############################################################################
release-0.8.38.post2,Compute DBSCAN
release-0.8.38.post2,"Number of clusters in labels, ignoring noise if present."
release-0.8.38.post2,#############################################################################
release-0.8.38.post2,Plot result
release-0.8.38.post2,Black removed and is used for noise instead.
release-0.8.38.post2,Black used for noise.
release-0.8.38.post2,Black used for noise.
release-0.8.38.post2,-*- coding: utf-8 -*-
release-0.8.38.post2,
release-0.8.38.post2,"hdbscan documentation build configuration file, created by"
release-0.8.38.post2,sphinx-quickstart on Sat May 28 10:34:44 2016.
release-0.8.38.post2,
release-0.8.38.post2,This file is execfile()d with the current directory set to its
release-0.8.38.post2,containing dir.
release-0.8.38.post2,
release-0.8.38.post2,Note that not all possible configuration values are present in this
release-0.8.38.post2,autogenerated file.
release-0.8.38.post2,
release-0.8.38.post2,All configuration values have a default; values that are commented out
release-0.8.38.post2,serve to show the default.
release-0.8.38.post2,"If extensions (or modules to document with autodoc) are in another directory,"
release-0.8.38.post2,add these directories to sys.path here. If the directory is relative to the
release-0.8.38.post2,"documentation root, use os.path.abspath to make it absolute, like shown here."
release-0.8.38.post2,"## We now install the package in a virtualenv to build docs, so this is not needed"
release-0.8.38.post2,"sys.path.insert(0, os.path.abspath('../'))"
release-0.8.38.post2,-- General configuration ------------------------------------------------
release-0.8.38.post2,"If your documentation needs a minimal Sphinx version, state it here."
release-0.8.38.post2,needs_sphinx = '1.0'
release-0.8.38.post2,"Add any Sphinx extension module names here, as strings. They can be"
release-0.8.38.post2,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
release-0.8.38.post2,ones.
release-0.8.38.post2,"'sphinx.ext.napoleon',"
release-0.8.38.post2,'numpy_ext.numpydoc'
release-0.8.38.post2,napoleon_google_docstring = False
release-0.8.38.post2,napoleon_numpy_docstring = True
release-0.8.38.post2,"Add any paths that contain templates here, relative to this directory."
release-0.8.38.post2,The suffix(es) of source filenames.
release-0.8.38.post2,You can specify multiple suffix as a list of string:
release-0.8.38.post2,"source_suffix = ['.rst', '.md']"
release-0.8.38.post2,The encoding of source files.
release-0.8.38.post2,source_encoding = 'utf-8-sig'
release-0.8.38.post2,The master toctree document.
release-0.8.38.post2,General information about the project.
release-0.8.38.post2,"The version info for the project you're documenting, acts as replacement for"
release-0.8.38.post2,"|version| and |release|, also used in various other places throughout the"
release-0.8.38.post2,built documents.
release-0.8.38.post2,
release-0.8.38.post2,The short X.Y version.
release-0.8.38.post2,"The full version, including alpha/beta/rc tags."
release-0.8.38.post2,The language for content autogenerated by Sphinx. Refer to documentation
release-0.8.38.post2,for a list of supported languages.
release-0.8.38.post2,
release-0.8.38.post2,This is also used if you do content translation via gettext catalogs.
release-0.8.38.post2,"Usually you set ""language"" from the command line for these cases."
release-0.8.38.post2,"There are two options for replacing |today|: either, you set today to some"
release-0.8.38.post2,"non-false value, then it is used:"
release-0.8.38.post2,today = ''
release-0.8.38.post2,"Else, today_fmt is used as the format for a strftime call."
release-0.8.38.post2,"today_fmt = '%B %d, %Y'"
release-0.8.38.post2,"List of patterns, relative to source directory, that match files and"
release-0.8.38.post2,directories to ignore when looking for source files.
release-0.8.38.post2,The reST default role (used for this markup: `text`) to use for all
release-0.8.38.post2,documents.
release-0.8.38.post2,default_role = None
release-0.8.38.post2,"If true, '()' will be appended to :func: etc. cross-reference text."
release-0.8.38.post2,add_function_parentheses = True
release-0.8.38.post2,"If true, the current module name will be prepended to all description"
release-0.8.38.post2,unit titles (such as .. function::).
release-0.8.38.post2,add_module_names = True
release-0.8.38.post2,"If true, sectionauthor and moduleauthor directives will be shown in the"
release-0.8.38.post2,output. They are ignored by default.
release-0.8.38.post2,show_authors = False
release-0.8.38.post2,The name of the Pygments (syntax highlighting) style to use.
release-0.8.38.post2,A list of ignored prefixes for module index sorting.
release-0.8.38.post2,modindex_common_prefix = []
release-0.8.38.post2,"If true, keep warnings as ""system message"" paragraphs in the built documents."
release-0.8.38.post2,keep_warnings = False
release-0.8.38.post2,"If true, `todo` and `todoList` produce output, else they produce nothing."
release-0.8.38.post2,-- Options for HTML output ----------------------------------------------
release-0.8.38.post2,The theme to use for HTML and HTML Help pages.  See the documentation for
release-0.8.38.post2,a list of builtin themes.
release-0.8.38.post2,html_theme = 'alabaster'
release-0.8.38.post2,Theme options are theme-specific and customize the look and feel of a theme
release-0.8.38.post2,"further.  For a list of options available for each theme, see the"
release-0.8.38.post2,documentation.
release-0.8.38.post2,html_theme_options = {}
release-0.8.38.post2,"Add any paths that contain custom themes here, relative to this directory."
release-0.8.38.post2,html_theme_path = []
release-0.8.38.post2,"The name for this set of Sphinx documents.  If None, it defaults to"
release-0.8.38.post2,"""<project> v<release> documentation""."
release-0.8.38.post2,html_title = None
release-0.8.38.post2,A shorter title for the navigation bar.  Default is the same as html_title.
release-0.8.38.post2,html_short_title = None
release-0.8.38.post2,The name of an image file (relative to this directory) to place at the top
release-0.8.38.post2,of the sidebar.
release-0.8.38.post2,html_logo = None
release-0.8.38.post2,The name of an image file (within the static path) to use as favicon of the
release-0.8.38.post2,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
release-0.8.38.post2,pixels large.
release-0.8.38.post2,html_favicon = None
release-0.8.38.post2,"Add any paths that contain custom static files (such as style sheets) here,"
release-0.8.38.post2,"relative to this directory. They are copied after the builtin static files,"
release-0.8.38.post2,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
release-0.8.38.post2,Add any extra paths that contain custom files (such as robots.txt or
release-0.8.38.post2,".htaccess) here, relative to this directory. These files are copied"
release-0.8.38.post2,directly to the root of the documentation.
release-0.8.38.post2,html_extra_path = []
release-0.8.38.post2,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
release-0.8.38.post2,using the given strftime format.
release-0.8.38.post2,"html_last_updated_fmt = '%b %d, %Y'"
release-0.8.38.post2,"If true, SmartyPants will be used to convert quotes and dashes to"
release-0.8.38.post2,typographically correct entities.
release-0.8.38.post2,html_use_smartypants = True
release-0.8.38.post2,"Custom sidebar templates, maps document names to template names."
release-0.8.38.post2,html_sidebars = {}
release-0.8.38.post2,"Additional templates that should be rendered to pages, maps page names to"
release-0.8.38.post2,template names.
release-0.8.38.post2,html_additional_pages = {}
release-0.8.38.post2,"If false, no module index is generated."
release-0.8.38.post2,html_domain_indices = True
release-0.8.38.post2,"If false, no index is generated."
release-0.8.38.post2,html_use_index = True
release-0.8.38.post2,"If true, the index is split into individual pages for each letter."
release-0.8.38.post2,html_split_index = False
release-0.8.38.post2,"If true, links to the reST sources are added to the pages."
release-0.8.38.post2,html_show_sourcelink = True
release-0.8.38.post2,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
release-0.8.38.post2,html_show_sphinx = True
release-0.8.38.post2,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
release-0.8.38.post2,html_show_copyright = True
release-0.8.38.post2,"If true, an OpenSearch description file will be output, and all pages will"
release-0.8.38.post2,contain a <link> tag referring to it.  The value of this option must be the
release-0.8.38.post2,base URL from which the finished HTML is served.
release-0.8.38.post2,html_use_opensearch = ''
release-0.8.38.post2,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
release-0.8.38.post2,html_file_suffix = None
release-0.8.38.post2,Language to be used for generating the HTML full-text search index.
release-0.8.38.post2,Sphinx supports the following languages:
release-0.8.38.post2,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
release-0.8.38.post2,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
release-0.8.38.post2,html_search_language = 'en'
release-0.8.38.post2,"A dictionary with options for the search language support, empty by default."
release-0.8.38.post2,Now only 'ja' uses this config value
release-0.8.38.post2,html_search_options = {'type': 'default'}
release-0.8.38.post2,The name of a javascript file (relative to the configuration directory) that
release-0.8.38.post2,"implements a search results scorer. If empty, the default will be used."
release-0.8.38.post2,html_search_scorer = 'scorer.js'
release-0.8.38.post2,Output file base name for HTML help builder.
release-0.8.38.post2,-- Options for LaTeX output ---------------------------------------------
release-0.8.38.post2,The paper size ('letterpaper' or 'a4paper').
release-0.8.38.post2,"'papersize': 'letterpaper',"
release-0.8.38.post2,"The font size ('10pt', '11pt' or '12pt')."
release-0.8.38.post2,"'pointsize': '10pt',"
release-0.8.38.post2,Additional stuff for the LaTeX preamble.
release-0.8.38.post2,"'preamble': '',"
release-0.8.38.post2,Latex figure (float) alignment
release-0.8.38.post2,"'figure_align': 'htbp',"
release-0.8.38.post2,Grouping the document tree into LaTeX files. List of tuples
release-0.8.38.post2,"(source start file, target name, title,"
release-0.8.38.post2,"author, documentclass [howto, manual, or own class])."
release-0.8.38.post2,The name of an image file (relative to this directory) to place at the top of
release-0.8.38.post2,the title page.
release-0.8.38.post2,latex_logo = None
release-0.8.38.post2,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
release-0.8.38.post2,not chapters.
release-0.8.38.post2,latex_use_parts = False
release-0.8.38.post2,"If true, show page references after internal links."
release-0.8.38.post2,latex_show_pagerefs = False
release-0.8.38.post2,"If true, show URL addresses after external links."
release-0.8.38.post2,latex_show_urls = False
release-0.8.38.post2,Documents to append as an appendix to all manuals.
release-0.8.38.post2,latex_appendices = []
release-0.8.38.post2,"If false, no module index is generated."
release-0.8.38.post2,latex_domain_indices = True
release-0.8.38.post2,-- Options for manual page output ---------------------------------------
release-0.8.38.post2,One entry per manual page. List of tuples
release-0.8.38.post2,"(source start file, name, description, authors, manual section)."
release-0.8.38.post2,"If true, show URL addresses after external links."
release-0.8.38.post2,man_show_urls = False
release-0.8.38.post2,-- Options for Texinfo output -------------------------------------------
release-0.8.38.post2,Grouping the document tree into Texinfo files. List of tuples
release-0.8.38.post2,"(source start file, target name, title, author,"
release-0.8.38.post2,"dir menu entry, description, category)"
release-0.8.38.post2,Documents to append as an appendix to all manuals.
release-0.8.38.post2,texinfo_appendices = []
release-0.8.38.post2,"If false, no module index is generated."
release-0.8.38.post2,texinfo_domain_indices = True
release-0.8.38.post2,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.38.post2,texinfo_show_urls = 'footnote'
release-0.8.38.post2,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
release-0.8.38.post2,texinfo_no_detailmenu = False
release-0.8.38.post2,-- Options for Epub output ----------------------------------------------
release-0.8.38.post2,Bibliographic Dublin Core info.
release-0.8.38.post2,The basename for the epub file. It defaults to the project name.
release-0.8.38.post2,epub_basename = project
release-0.8.38.post2,The HTML theme for the epub output. Since the default themes are not
release-0.8.38.post2,"optimized for small screen space, using the same theme for HTML and epub"
release-0.8.38.post2,"output is usually not wise. This defaults to 'epub', a theme designed to save"
release-0.8.38.post2,visual space.
release-0.8.38.post2,epub_theme = 'epub'
release-0.8.38.post2,The language of the text. It defaults to the language option
release-0.8.38.post2,or 'en' if the language is not set.
release-0.8.38.post2,epub_language = ''
release-0.8.38.post2,The scheme of the identifier. Typical schemes are ISBN or URL.
release-0.8.38.post2,epub_scheme = ''
release-0.8.38.post2,The unique identifier of the text. This can be a ISBN number
release-0.8.38.post2,or the project homepage.
release-0.8.38.post2,epub_identifier = ''
release-0.8.38.post2,A unique identification for the text.
release-0.8.38.post2,epub_uid = ''
release-0.8.38.post2,A tuple containing the cover image and cover page html template filenames.
release-0.8.38.post2,epub_cover = ()
release-0.8.38.post2,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
release-0.8.38.post2,epub_guide = ()
release-0.8.38.post2,HTML files that should be inserted before the pages created by sphinx.
release-0.8.38.post2,The format is a list of tuples containing the path and title.
release-0.8.38.post2,epub_pre_files = []
release-0.8.38.post2,HTML files that should be inserted after the pages created by sphinx.
release-0.8.38.post2,The format is a list of tuples containing the path and title.
release-0.8.38.post2,epub_post_files = []
release-0.8.38.post2,A list of files that should not be packed into the epub file.
release-0.8.38.post2,The depth of the table of contents in toc.ncx.
release-0.8.38.post2,epub_tocdepth = 3
release-0.8.38.post2,Allow duplicate toc entries.
release-0.8.38.post2,epub_tocdup = True
release-0.8.38.post2,Choose between 'default' and 'includehidden'.
release-0.8.38.post2,epub_tocscope = 'default'
release-0.8.38.post2,Fix unsupported image types using the Pillow.
release-0.8.38.post2,epub_fix_images = False
release-0.8.38.post2,Scale large images.
release-0.8.38.post2,epub_max_image_width = 0
release-0.8.38.post2,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.38.post2,epub_show_urls = 'inline'
release-0.8.38.post2,"If false, no index is generated."
release-0.8.38.post2,epub_use_index = True
release-0.8.38-2,"Import numpy here, only when headers are needed"
release-0.8.38-2,Add numpy headers to include_dirs
release-0.8.38-2,Call original build_ext command
release-0.8.38-2,The dependencies are the same as the contents of requirements.txt
release-0.8.38-2,"A little ""fancy"" we select from the flattened array reshape back"
release-0.8.38-2,(Fortran format to get indexing right) and take the product to do an and
release-0.8.38-2,then convert back to boolean type.
release-0.8.38-2,Density sparseness is not well defined if there are no
release-0.8.38-2,internal edges (as per the referenced paper). However
release-0.8.38-2,MATLAB code from the original authors simply selects the
release-0.8.38-2,largest of *all* the edges in the case that there are
release-0.8.38-2,"no internal edges, so we do the same here"
release-0.8.38-2,"If there are any internal edges, then subselect them out"
release-0.8.38-2,If there are no internal edges then we want to take the
release-0.8.38-2,"max over all the edges that exist in the MST, so we simply"
release-0.8.38-2,do nothing and return all the edges in the MST.
release-0.8.38-2,-*- coding: utf-8 -*-
release-0.8.38-2,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38-2,Steve Astels <sastels@gmail.com>
release-0.8.38-2,John Healy <jchealy@gmail.com>
release-0.8.38-2,
release-0.8.38-2,License: BSD 3 clause
release-0.8.38-2,"Treating this case explicitly, instead of letting"
release-0.8.38-2,"sklearn.metrics.pairwise_distances handle it,"
release-0.8.38-2,enables the usage of numpy.inf in the distance
release-0.8.38-2,matrix to indicate missing distance information.
release-0.8.38-2,TODO: Check if copying is necessary
release-0.8.38-2,raise TypeError('Sparse distance matrices not yet supported')
release-0.8.38-2,Warn if the MST couldn't be constructed around the missing distances
release-0.8.38-2,mst_linkage_core does not generate a full minimal spanning tree
release-0.8.38-2,If a tree is required then we must build the edges from the information
release-0.8.38-2,returned by mst_linkage_core (i.e. just the order of points to be merged)
release-0.8.38-2,Sort edges of the min_spanning_tree by weight
release-0.8.38-2,Convert edge list into standard hierarchical clustering format
release-0.8.38-2,Check for connected component on X
release-0.8.38-2,Compute sparse mutual reachability graph
release-0.8.38-2,"if max_dist > 0, max distance to use when the reachability is infinite"
release-0.8.38-2,Check connected component on mutual reachability
release-0.8.38-2,"If more than one component, it means that even if the distance matrix X"
release-0.8.38-2,"has one component, there exists with less than `min_samples` neighbors"
release-0.8.38-2,Compute the minimum spanning tree for the sparse graph
release-0.8.38-2,Convert the graph to scipy cluster array format
release-0.8.38-2,Sort edges of the min_spanning_tree by weight
release-0.8.38-2,Convert edge list into standard hierarchical clustering format
release-0.8.38-2,The Cython routines used require contiguous arrays
release-0.8.38-2,TO DO: Deal with p for minkowski appropriately
release-0.8.38-2,Get distance to kth nearest neighbour
release-0.8.38-2,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.38-2,Sort edges of the min_spanning_tree by weight
release-0.8.38-2,Convert edge list into standard hierarchical clustering format
release-0.8.38-2,The Cython routines used require contiguous arrays
release-0.8.38-2,Get distance to kth nearest neighbour
release-0.8.38-2,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.38-2,Sort edges of the min_spanning_tree by weight
release-0.8.38-2,Convert edge list into standard hierarchical clustering format
release-0.8.38-2,Sort edges of the min_spanning_tree by weight
release-0.8.38-2,Convert edge list into standard hierarchical clustering format
release-0.8.38-2,Sort edges of the min_spanning_tree by weight
release-0.8.38-2,Convert edge list into standard hierarchical clustering format
release-0.8.38-2,Checks input and converts to an nd-array where possible
release-0.8.38-2,"Only non-sparse, precomputed distance matrices are handled here"
release-0.8.38-2,and thereby allowed to contain numpy.inf for missing distances
release-0.8.38-2,Python 2 and 3 compliant string_type checking
release-0.8.38-2,We can't do much with sparse matrices ...
release-0.8.38-2,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.38-2,still debugging for now
release-0.8.38-2,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.38-2,still debugging for now
release-0.8.38-2,Inherits from sklearn
release-0.8.38-2,Non-precomputed matrices may contain non-finite values.
release-0.8.38-2,Rows with these values
release-0.8.38-2,Pass only the purely finite indices into hdbscan
release-0.8.38-2,We will later assign all non-finite points to the background -1 cluster
release-0.8.38-2,Handle sparse precomputed distance matrices separately
release-0.8.38-2,"Only non-sparse, precomputed distance matrices are allowed"
release-0.8.38-2,to have numpy.inf values indicating missing distances
release-0.8.38-2,"prediction data only applies to the persistent model, so remove"
release-0.8.38-2,it from the keyword args we pass on the the function
release-0.8.38-2,remap indices to align with original data in the case of non-finite entries.
release-0.8.38-2,"Unltimately, for each Ci, we only require the"
release-0.8.38-2,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
release-0.8.38-2,"So let's call this value DSPC_wrt(Ci), i.e."
release-0.8.38-2,density separation 'with respect to' Ci.
release-0.8.38-2,If exactly one of the points is noise
release-0.8.38-2,Set the density sparseness of the cluster
release-0.8.38-2,to the sparsest value seen so far.
release-0.8.38-2,Check whether density separations with
release-0.8.38-2,respect to each of these clusters can
release-0.8.38-2,be reduced.
release-0.8.38-2,"In case min_outlier_sep is still np.inf, we assign a new value to it."
release-0.8.38-2,This only makes sense if num_clusters = 1 since it has turned out
release-0.8.38-2,that the MR-MST has no edges between a noise point and a core point.
release-0.8.38-2,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
release-0.8.38-2,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
release-0.8.38-2,MR-MST might contain an edge with one point in Cj and ther other one
release-0.8.38-2,"in Ck. Here, we replace the infinite density separation of Ci by"
release-0.8.38-2,another large enough value.
release-0.8.38-2,
release-0.8.38-2,TODO: Think of a better yet efficient way to handle this.
release-0.8.38-2,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
release-0.8.38-2,Use a previously initialized/trained HDBSCAN
release-0.8.38-2,Handle the trivial case first.
release-0.8.38-2,Always generate prediction_data to avoid later woes
release-0.8.38-2,This will later be chosen according to n_clusters
release-0.8.38-2,Initialize and train clusterer if one was not previously supplied.
release-0.8.38-2,Always generate prediction data
release-0.8.38-2,We do not pass cluster_selection_epsilon here.
release-0.8.38-2,"While this adds unnecessary computation, it makes the code"
release-0.8.38-2,easier to read and debug.
release-0.8.38-2,"Train on 'X'. Do this even if the supplied clusterer was trained,"
release-0.8.38-2,because we want to make sure it fits 'X'.
release-0.8.38-2,"Pick an epsilon value right after a split produces n_clusters,"
release-0.8.38-2,and the don't split further for smaller epsilon (larger lambda)
release-0.8.38-2,Or use the specified cluster_selection_epsilon
release-0.8.38-2,"Extract tree related stuff, in order to re-assign labels"
release-0.8.38-2,Get labels according to the required cluster_selection_epsilon
release-0.8.38-2,Reflect the related changes in HDBSCAN.
release-0.8.38-2,PredictionData attached to HDBSCAN should also change.
release-0.8.38-2,A function re_init is defined in this module to handle this.
release-0.8.38-2,"From a fitted HDBSCAN model, predict for n_clusters=5"
release-0.8.38-2,Store prediciton data for later use.
release-0.8.38-2,and use this prediction data to predict on new points
release-0.8.38-2,Get number of fitted clusters for later use.
release-0.8.38-2,We'll need the condensed tree later...
release-0.8.38-2,"If none of the three arguments: prediction_data, n_clusters,"
release-0.8.38-2,"and cluster_selection_epsilon are supplied,"
release-0.8.38-2,then use clusterer's prediciton data directly
release-0.8.38-2,"If either of n_clusters or cluster_selection_epsilon were supplied,"
release-0.8.38-2,then build prediction data from these by modifying clusterer's
release-0.8.38-2,Get prediction data from clusterer
release-0.8.38-2,Modify prediction_data to reflect new n_clusters
release-0.8.38-2,"First, make a copy of prediction data to avoid modifying source"
release-0.8.38-2,Cluster selection method is hold by condensed_tree.
release-0.8.38-2,Change from 'eom' to 'leaf' if n_clusters is too large.
release-0.8.38-2,This change does not affect the tree associated with 'clusterer'
release-0.8.38-2,Re-initialize prediction_data for the specified n_clusters or epsilon
release-0.8.38-2,============================================================
release-0.8.38-2,Now we're ready to use prediction_data
release-0.8.38-2,"The rest of the code is copied from HDBSCAN's approximate_predict,"
release-0.8.38-2,but modified to use prediction_data instead of clusterer's attribute
release-0.8.38-2,Extract condensed tree for later use
release-0.8.38-2,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.38-2,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.38-2,Use the same prediction_data as clusterer's
release-0.8.38-2,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.38-2,produces a specified number of n_clusters
release-0.8.38-2,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.38-2,Create another instance of prediction_data that is consistent
release-0.8.38-2,with the selected value of epsilon.
release-0.8.38-2,Flat clustering from prediction data
release-0.8.38-2,Initialize probabilities
release-0.8.38-2,k-NN for prediciton points to training set
release-0.8.38-2,Loop over prediction points to compute probabilities
release-0.8.38-2,We need to find where in the tree the new point would go
release-0.8.38-2,for the purposes of outlier membership approximation
release-0.8.38-2,"Find row in tree where nearest neighbor drops out,"
release-0.8.38-2,so we can get a lambda value for the nearest neighbor
release-0.8.38-2,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
release-0.8.38-2,"Equivalently, this assigns core distance for prediction point as"
release-0.8.38-2,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
release-0.8.38-2,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.38-2,Use new prediction_data that points to exemplars that are specific
release-0.8.38-2,to the choice of n_clusters
release-0.8.38-2,Probabilities based on how long the nearest exemplar persists in
release-0.8.38-2,each cluster (with respect to most persistent exemplar)
release-0.8.38-2,Use new clusters that are defined by the choice of n_clusters.
release-0.8.38-2,Merge the two probabilities to produce a single set of probabilities
release-0.8.38-2,Include probability that the nearest neighbor belongs to a cluster
release-0.8.38-2,Rename variable so it's easy to understand what's being returned
release-0.8.38-2,Extract condensed tree for later use
release-0.8.38-2,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.38-2,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.38-2,Use the same prediction_data as clusterer's
release-0.8.38-2,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.38-2,produces a specified number of n_clusters
release-0.8.38-2,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.38-2,Create another instance of prediction_data that is consistent
release-0.8.38-2,with the selected value of epsilon.
release-0.8.38-2,Flat clustering at the chosen epsilon from prediction_data
release-0.8.38-2,"When no clusters found, return array of 0's"
release-0.8.38-2,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.38-2,Use new prediction_data that points to exemplars that are specific
release-0.8.38-2,to the choice of n_clusters
release-0.8.38-2,Probabilities based on how long the point persists in
release-0.8.38-2,each cluster (with respect to most persistent exemplar)
release-0.8.38-2,Use new clusters that are defined by the choice of n_clusters.
release-0.8.38-2,Include probability that the point belongs to a cluster
release-0.8.38-2,Aggregate the three probabilities to produce membership vectors
release-0.8.38-2,Re-name variable to clarify what's being returned.
release-0.8.38-2,"With method 'eom', max clusters are produced for epsilon=0,"
release-0.8.38-2,as computed by
release-0.8.38-2,Increasing epsilon can only reduce the number of ouput clusters.
release-0.8.38-2,"To select epsilon, consider all values where clusters are split"
release-0.8.38-2,Subtract the extra e-12 to avoid numerical errors in comparison
release-0.8.38-2,"Then, we avoid splitting for all epsilon below this."
release-0.8.38-2,Use an epsilon value that produces the right number of clusters.
release-0.8.38-2,The condensed tree of HDBSCAN has this information.
release-0.8.38-2,Extract the lambda levels (=1/distance) from the condensed tree
release-0.8.38-2,We don't want values that produce a large cluster and
release-0.8.38-2,just one or two individual points.
release-0.8.38-2,Keep only those lambda values corresponding to cluster separation;
release-0.8.38-2,"i.e., with child_sizes > 1"
release-0.8.38-2,"Get the unique values, because when two clusters fall out of one,"
release-0.8.38-2,the entry with lambda is repeated.
release-0.8.38-2,lambda values are sorted by np.unique.
release-0.8.38-2,"Now, get epsilon (distance threshold) as 1/lambda"
release-0.8.38-2,"At this epsilon, n_clusters have been split."
release-0.8.38-2,Stop splits at epsilons smaller than this.
release-0.8.38-2,"To allow for numerical errors,"
release-0.8.38-2,predData must be a pre-trained PredictionData instance from hdbscan
release-0.8.38-2,"If n_clusters is specified, compute cluster_selection_epsilon;"
release-0.8.38-2,This is the key modification:
release-0.8.38-2,Select clusters according to selection method and epsilon.
release-0.8.38-2,_new_select_clusters is a modification of get_clusters
release-0.8.38-2,from hdbscan._hdbscan_tree
release-0.8.38-2,"raw tree, used later to get exemplars and lambda values"
release-0.8.38-2,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
release-0.8.38-2,to the cluster labels produced as output
release-0.8.38-2,Re-compute lambdas and exemplars for selected clusters;
release-0.8.38-2,max_lambda <=> smallest distance <=> most persistent point(s)
release-0.8.38-2,Map all sub-clusters of selected cluster to the selected cluster's
release-0.8.38-2,label in output.
release-0.8.38-2,Map lambdas too...
release-0.8.38-2,Create set of exemplar points for later use.
release-0.8.38-2,Novel points are assigned based on cluster of closest exemplar.
release-0.8.38-2,"For each selected cluster, get all of its leaves,"
release-0.8.38-2,"and leaves of leaves, and so on..."
release-0.8.38-2,Largest lambda => Most persistent points
release-0.8.38-2,Get the most persistent points
release-0.8.38-2,Add most persistent points as exemplars
release-0.8.38-2,Add exemplars for each leaf of each selected cluster.
release-0.8.38-2,(exclude root)
release-0.8.38-2,-*- coding: utf-8 -*-
release-0.8.38-2,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38-2,
release-0.8.38-2,License: BSD 3 clause
release-0.8.38-2,"Return the only cluster, the root"
release-0.8.38-2,We want to get the x and y coordinates for the start of each cluster
release-0.8.38-2,"Initialize the leaves, since we know where they go, the iterate"
release-0.8.38-2,"through everything from the leaves back, setting coords as we go"
release-0.8.38-2,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
release-0.8.38-2,bottoms and widths for each rectangle. We can go through each cluster
release-0.8.38-2,and do this for each in turn.
release-0.8.38-2,Ensure we don't try to take log of zero
release-0.8.38-2,Finally we need the horizontal lines that occur at cluster splits.
release-0.8.38-2,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
release-0.8.38-2,"axis.plot(xs, ys, color='black', linewidth=1)"
release-0.8.38-2,Extract the chosen cluster bounds. If enough duplicate data points exist in the
release-0.8.38-2,data the lambda value might be infinite. This breaks labeling and highlighting
release-0.8.38-2,the chosen clusters.
release-0.8.38-2,Extract the plot range of the y-axis and set default center and height values for ellipses.
release-0.8.38-2,Extremly dense clusters might result in near infinite lambda values. Setting max_height
release-0.8.38-2,based on the percentile should alleviate the impact on plotting.
release-0.8.38-2,Set center and height to default values if necessary
release-0.8.38-2,Ensure the ellipse is visible
release-0.8.38-2,Get a 2D projection; if we have a lot of dimensions use PCA first
release-0.8.38-2,Use PCA to get down to 32 dimension
release-0.8.38-2,"node_desat=None,"
release-0.8.38-2,Extract node color data
release-0.8.38-2,Extract edge color data
release-0.8.38-2,Compute or extract layout
release-0.8.38-2,Add edges
release-0.8.38-2,Add FLASC features
release-0.8.38-2,Add raw data features
release-0.8.38-2,-*- coding: utf-8 -*-
release-0.8.38-2,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38-2,
release-0.8.38-2,License: BSD 3 clause
release-0.8.38-2,The Cython routines used require contiguous arrays
release-0.8.38-2,The Cython routines used require contiguous arrays
release-0.8.38-2,We can't do much with sparse matrices ...
release-0.8.38-2,Need heuristic to decide when to go to boruvka;
release-0.8.38-2,still debugging for now
release-0.8.38-2,Need heuristic to decide when to go to boruvka;
release-0.8.38-2,still debugging for now
release-0.8.38-2,Support various prediction methods for predicting cluster membership
release-0.8.38-2,of new or unseen points. There are several ways to interpret how
release-0.8.38-2,"to do this correctly, so we provide several methods for"
release-0.8.38-2,the different use cases that may arise.
release-0.8.38-2,raw_condensed_tree = condensed_tree.to_numpy()
release-0.8.38-2,New point departs with the old
release-0.8.38-2,Find appropriate cluster based on lambda of new point
release-0.8.38-2,Find appropriate cluster based on lambda of new point
release-0.8.38-2,"the point is in the dataset, fix lambda for rounding errors"
release-0.8.38-2,We need to find where in the tree the new point would go
release-0.8.38-2,for the purposes of outlier membership approximation
release-0.8.38-2,"When no clusters found, return array of 0's"
release-0.8.38-2,Support branch detection within clusters.
release-0.8.38-2,Select finite data points
release-0.8.38-2,Construct tree
release-0.8.38-2,Allocate to maintain data point indices
release-0.8.38-2,Find neighbours for non-noise points
release-0.8.38-2,Check clusterer state
release-0.8.38-2,Validate parameters
release-0.8.38-2,Extract state
release-0.8.38-2,Configure parallelization
release-0.8.38-2,Detect branches
release-0.8.38-2,Maintain data indices for non-finite data
release-0.8.38-2,Combined result
release-0.8.38-2,Branching result
release-0.8.38-2,Clusters to branches
release-0.8.38-2,List points within cluster
release-0.8.38-2,Extract MST edges within cluster
release-0.8.38-2,Compute in cluster centrality
release-0.8.38-2,Construct cluster approximation graph
release-0.8.38-2,Extract centrality MST and compute single linkage
release-0.8.38-2,Re-label edges with data ids
release-0.8.38-2,Return values
release-0.8.38-2,Allocate output (won't be filled completely)
release-0.8.38-2,Fill (undirected) MST edges with within-cluster-ids
release-0.8.38-2,Fill neighbors with within-cluster-ids
release-0.8.38-2,Fill mutual reachabilities
release-0.8.38-2,Extract unique edges that stay within the cluster
release-0.8.38-2,Query KDTree/BallTree for neighours within the distance
release-0.8.38-2,Count number of returned edges per point
release-0.8.38-2,Create full edge list
release-0.8.38-2,Create output
release-0.8.38-2,Reset noise labels to k-cluster
release-0.8.38-2,Allocate output
release-0.8.38-2,Compute the labels and probabilities
release-0.8.38-2,Reorder other parts
release-0.8.38-2,import pickle
release-0.8.38-2,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.38-2,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.38-2,"number of clusters, ignoring noise if present"
release-0.8.38-2,"metric is the function reference, not the string key."
release-0.8.38-2,def test_rsl_unavailable_hierarchy():
release-0.8.38-2,clusterer = RobustSingleLinkage()
release-0.8.38-2,with warnings.catch_warnings(record=True) as w:
release-0.8.38-2,tree = clusterer.cluster_hierarchy_
release-0.8.38-2,assert len(w) > 0
release-0.8.38-2,assert tree is None
release-0.8.38-2,"H, y = shuffle(X, y, random_state=7)"
release-0.8.38-2,Disable for now -- need to refactor to meet newer standards
release-0.8.38-2,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.38-2,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.38-2,this fails if no $DISPLAY specified
release-0.8.38-2,"number of clusters, ignoring noise if present"
release-0.8.38-2,"number of clusters, ignoring noise if present"
release-0.8.38-2,"H, y = shuffle(X, y, random_state=7)"
release-0.8.38-2,"metric is the function reference, not the string key."
release-0.8.38-2,def test_hdbscan_unavailable_attributes():
release-0.8.38-2,clusterer = HDBSCAN(gen_min_span_tree=False)
release-0.8.38-2,with warnings.catch_warnings(record=True) as w:
release-0.8.38-2,tree = clusterer.condensed_tree_
release-0.8.38-2,assert len(w) > 0
release-0.8.38-2,assert tree is None
release-0.8.38-2,with warnings.catch_warnings(record=True) as w:
release-0.8.38-2,tree = clusterer.single_linkage_tree_
release-0.8.38-2,assert len(w) > 0
release-0.8.38-2,assert tree is None
release-0.8.38-2,with warnings.catch_warnings(record=True) as w:
release-0.8.38-2,scores = clusterer.outlier_scores_
release-0.8.38-2,assert len(w) > 0
release-0.8.38-2,assert scores is None
release-0.8.38-2,with warnings.catch_warnings(record=True) as w:
release-0.8.38-2,tree = clusterer.minimum_spanning_tree_
release-0.8.38-2,assert len(w) > 0
release-0.8.38-2,assert tree is None
release-0.8.38-2,def test_hdbscan_min_span_tree_availability():
release-0.8.38-2,clusterer = HDBSCAN().fit(X)
release-0.8.38-2,tree = clusterer.minimum_spanning_tree_
release-0.8.38-2,assert tree is None
release-0.8.38-2,D = distance.squareform(distance.pdist(X))
release-0.8.38-2,D /= np.max(D)
release-0.8.38-2,HDBSCAN(metric='precomputed').fit(D)
release-0.8.38-2,tree = clusterer.minimum_spanning_tree_
release-0.8.38-2,assert tree is None
release-0.8.38-2,no prediction data error
release-0.8.38-2,wrong dimensions error
release-0.8.38-2,no clusters warning
release-0.8.38-2,def test_hdbscan_membership_vector():
release-0.8.38-2,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.38-2,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
release-0.8.38-2,assert_array_almost_equal(
release-0.8.38-2,"vector,"
release-0.8.38-2,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
release-0.8.38-2,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
release-0.8.38-2,assert_array_almost_equal(
release-0.8.38-2,"vector,"
release-0.8.38-2,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
release-0.8.38-2,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
release-0.8.38-2,assert_array_almost_equal(
release-0.8.38-2,"vector,"
release-0.8.38-2,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
release-0.8.38-2,
release-0.8.38-2,def test_hdbscan_all_points_membership_vectors():
release-0.8.38-2,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.38-2,vects = all_points_membership_vectors(clusterer)
release-0.8.38-2,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
release-0.8.38-2,"2.52734246e-001,"
release-0.8.38-2,8.38299608e-002]))
release-0.8.38-2,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
release-0.8.38-2,"8.35882503e-002,"
release-0.8.38-2,1.07356406e-001]))
release-0.8.38-2,without epsilon we should see many noise points as children of root.
release-0.8.38-2,for this random seed an epsilon of 0.2 will produce exactly 2 noise
release-0.8.38-2,points at that cut in single linkage.
release-0.8.38-2,Disable for now -- need to refactor to meet newer standards
release-0.8.38-2,Probably not applicable now #
release-0.8.38-2,def test_dbscan_sparse():
release-0.8.38-2,def test_dbscan_balltree():
release-0.8.38-2,def test_pickle():
release-0.8.38-2,def test_dbscan_core_samples_toy():
release-0.8.38-2,def test_boundaries():
release-0.8.38-2,"Given negative, zero and positive denominator and positive numerator"
release-0.8.38-2,Make sure safe division is always positive and doesn't raise ZeroDivision error
release-0.8.38-2,--- Branch Detection Data
release-0.8.38-2,There are no fast metrics that are not supported by KDTree or BallTree!
release-0.8.38-2,"Cosine and arccoss both crash HDBSCAN. They go down the BallTree path, but"
release-0.8.38-2,the implementation does not support them.
release-0.8.38-2,Distance matrix
release-0.8.38-2,Sparse matrix
release-0.8.38-2,--- Detecting Branches
release-0.8.38-2,Generate single-cluster data
release-0.8.38-2,"Without persistence, find 6 branches"
release-0.8.38-2,"Mac & Windows give 71, Linux gives 72. Probably different random values."
release-0.8.38-2,Adding presistence removes some branches
release-0.8.38-2,--- Branch Detector Functionality
release-0.8.38-2,A point on a branch (not noise) exact labels change per run
release-0.8.38-2,A point in a cluster
release-0.8.38-2,A noise point
release-0.8.38-2,--- Attribute Output Formats
release-0.8.38-2,--- Attribute plots
release-0.8.38-2,Ignore future warnings thrown by sklearn
release-0.8.38-2,Create a nice dataset with 6 circular clusters and 2 moons
release-0.8.38-2,"Given, the base HDBSCAN with method 'eom'"
release-0.8.38-2,"When we ask for flat clustering with same n_clusters,"
release-0.8.38-2,"Then, the labels and probabilities should match"
release-0.8.38-2,"Given, the base HDBSCAN with method 'leaf'"
release-0.8.38-2,"When we ask for flat clustering with same n_clusters,"
release-0.8.38-2,"Then, the labels and probabilities should match"
release-0.8.38-2,Method 'eom'...
release-0.8.38-2,"Given, a flat clustering for required n_clusters,"
release-0.8.38-2,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.38-2,"Then, the labels and probabilities should match"
release-0.8.38-2,Method 'leaf'...
release-0.8.38-2,"Given, a flat clustering for required n_clusters,"
release-0.8.38-2,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.38-2,"Then, the labels and probabilities should match"
release-0.8.38-2,"Given the max number of clusters that can be produced by 'eom',"
release-0.8.38-2,(these are produced for epsilon=0) (??? Needs verification)
release-0.8.38-2,"When we try flat clustering with 'eom' method for more n_clusters,"
release-0.8.38-2,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.38-2,"assert ""Cannot predict"" in str(w[-1].message)"
release-0.8.38-2,"the resulting clusterer switches to using method 'leaf',"
release-0.8.38-2,and the resulting probabilities and labels must match
release-0.8.38-2,"Given the base HDBSCAN trained on some data,"
release-0.8.38-2,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.38-2,"Then, the clustering should match that due to approximate_predict,"
release-0.8.38-2,"Given a flat clustering trained for some n_clusters,"
release-0.8.38-2,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.38-2,"Then, the number of clusters produced must match the original n_clusters"
release-0.8.38-2,and all probabilities are <= 1.
release-0.8.38-2,"Given a flat clustering trained for some n_clusters,"
release-0.8.38-2,"When using approximate_predict_flat with specified n_clusters,"
release-0.8.38-2,"Then, the requested number of clusters must be produced"
release-0.8.38-2,and all probabilities are <= 1.
release-0.8.38-2,When using approximate_predict_flat with more clusters
release-0.8.38-2,"than 'eom' can handle,"
release-0.8.38-2,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.38-2,But the requested number of clusters must still be produced using 'leaf'
release-0.8.38-2,and all probabilities are <= 1.
release-0.8.38-2,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38-2,"When membership_vector_flat is called with new data,"
release-0.8.38-2,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38-2,and the number of points should equal those in the test set
release-0.8.38-2,and all probabilities are <= 1.
release-0.8.38-2,========================================
release-0.8.38-2,"Given a flat clustering for a specified n_clusters,"
release-0.8.38-2,"When membership_vector_flat is called with new data,"
release-0.8.38-2,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38-2,and the number of points should equal those in the test set
release-0.8.38-2,and all probabilities are <= 1.
release-0.8.38-2,Ignore user warnings in this function
release-0.8.38-2,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38-2,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.38-2,"Then the number of clusters in memberships should be as requested,"
release-0.8.38-2,and the number of points should equal those in the test set
release-0.8.38-2,and all probabilities are <= 1.
release-0.8.38-2,========================================
release-0.8.38-2,"Given a flat clustering for a specified n_clusters,"
release-0.8.38-2,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.38-2,"Then the number of clusters in memberships should be as requested,"
release-0.8.38-2,and the number of points should equal those in the test set
release-0.8.38-2,and all probabilities are <= 1.
release-0.8.38-2,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38-2,"When all_points_membership_vectors_flat is called,"
release-0.8.38-2,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38-2,and the number of points should equal those in the training set
release-0.8.38-2,and all probabilities are <= 1.
release-0.8.38-2,========================================
release-0.8.38-2,"Given a flat clustering for a specified n_clusters,"
release-0.8.38-2,"When all_points_membership_vectors_flat is called,"
release-0.8.38-2,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38-2,and the number of points should equal those in the training set
release-0.8.38-2,and all probabilities are <= 1.
release-0.8.38-2,Ignore user warnings in this function
release-0.8.38-2,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38-2,"When all_points_membership_vectors_flat is called for some n_clusters,"
release-0.8.38-2,"Then the number of clusters in memberships should be as requested,"
release-0.8.38-2,and the number of points should equal those in the training set
release-0.8.38-2,and all probabilities are <= 1.
release-0.8.38-2,========================================
release-0.8.38-2,"Given a flat clustering for a specified n_clusters,"
release-0.8.38-2,"When membership_vector_flat is called for some n_clusters,"
release-0.8.38-2,"Then the number of clusters in memberships should be as requested,"
release-0.8.38-2,and the number of points should equal those in the training set
release-0.8.38-2,and all probabilities are <= 1.
release-0.8.38-2,Generate datasets. We choose the size big enough to see the scalability
release-0.8.38-2,"of the algorithms, but not too big to avoid too long running times"
release-0.8.38-2,normalize dataset for easier parameter selection
release-0.8.38-2,estimate bandwidth for mean shift
release-0.8.38-2,connectivity matrix for structured Ward
release-0.8.38-2,make connectivity symmetric
release-0.8.38-2,create clustering estimators
release-0.8.38-2,predict cluster memberships
release-0.8.38-2,plot
release-0.8.38-2,-*- coding: utf-8 -*-
release-0.8.38-2,#############################################################################
release-0.8.38-2,Generate sample data
release-0.8.38-2,#############################################################################
release-0.8.38-2,Compute DBSCAN
release-0.8.38-2,"Number of clusters in labels, ignoring noise if present."
release-0.8.38-2,#############################################################################
release-0.8.38-2,Plot result
release-0.8.38-2,Black removed and is used for noise instead.
release-0.8.38-2,Black used for noise.
release-0.8.38-2,Black used for noise.
release-0.8.38-2,-*- coding: utf-8 -*-
release-0.8.38-2,
release-0.8.38-2,"hdbscan documentation build configuration file, created by"
release-0.8.38-2,sphinx-quickstart on Sat May 28 10:34:44 2016.
release-0.8.38-2,
release-0.8.38-2,This file is execfile()d with the current directory set to its
release-0.8.38-2,containing dir.
release-0.8.38-2,
release-0.8.38-2,Note that not all possible configuration values are present in this
release-0.8.38-2,autogenerated file.
release-0.8.38-2,
release-0.8.38-2,All configuration values have a default; values that are commented out
release-0.8.38-2,serve to show the default.
release-0.8.38-2,"If extensions (or modules to document with autodoc) are in another directory,"
release-0.8.38-2,add these directories to sys.path here. If the directory is relative to the
release-0.8.38-2,"documentation root, use os.path.abspath to make it absolute, like shown here."
release-0.8.38-2,"## We now install the package in a virtualenv to build docs, so this is not needed"
release-0.8.38-2,"sys.path.insert(0, os.path.abspath('../'))"
release-0.8.38-2,-- General configuration ------------------------------------------------
release-0.8.38-2,"If your documentation needs a minimal Sphinx version, state it here."
release-0.8.38-2,needs_sphinx = '1.0'
release-0.8.38-2,"Add any Sphinx extension module names here, as strings. They can be"
release-0.8.38-2,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
release-0.8.38-2,ones.
release-0.8.38-2,"'sphinx.ext.napoleon',"
release-0.8.38-2,'numpy_ext.numpydoc'
release-0.8.38-2,napoleon_google_docstring = False
release-0.8.38-2,napoleon_numpy_docstring = True
release-0.8.38-2,"Add any paths that contain templates here, relative to this directory."
release-0.8.38-2,The suffix(es) of source filenames.
release-0.8.38-2,You can specify multiple suffix as a list of string:
release-0.8.38-2,"source_suffix = ['.rst', '.md']"
release-0.8.38-2,The encoding of source files.
release-0.8.38-2,source_encoding = 'utf-8-sig'
release-0.8.38-2,The master toctree document.
release-0.8.38-2,General information about the project.
release-0.8.38-2,"The version info for the project you're documenting, acts as replacement for"
release-0.8.38-2,"|version| and |release|, also used in various other places throughout the"
release-0.8.38-2,built documents.
release-0.8.38-2,
release-0.8.38-2,The short X.Y version.
release-0.8.38-2,"The full version, including alpha/beta/rc tags."
release-0.8.38-2,The language for content autogenerated by Sphinx. Refer to documentation
release-0.8.38-2,for a list of supported languages.
release-0.8.38-2,
release-0.8.38-2,This is also used if you do content translation via gettext catalogs.
release-0.8.38-2,"Usually you set ""language"" from the command line for these cases."
release-0.8.38-2,"There are two options for replacing |today|: either, you set today to some"
release-0.8.38-2,"non-false value, then it is used:"
release-0.8.38-2,today = ''
release-0.8.38-2,"Else, today_fmt is used as the format for a strftime call."
release-0.8.38-2,"today_fmt = '%B %d, %Y'"
release-0.8.38-2,"List of patterns, relative to source directory, that match files and"
release-0.8.38-2,directories to ignore when looking for source files.
release-0.8.38-2,The reST default role (used for this markup: `text`) to use for all
release-0.8.38-2,documents.
release-0.8.38-2,default_role = None
release-0.8.38-2,"If true, '()' will be appended to :func: etc. cross-reference text."
release-0.8.38-2,add_function_parentheses = True
release-0.8.38-2,"If true, the current module name will be prepended to all description"
release-0.8.38-2,unit titles (such as .. function::).
release-0.8.38-2,add_module_names = True
release-0.8.38-2,"If true, sectionauthor and moduleauthor directives will be shown in the"
release-0.8.38-2,output. They are ignored by default.
release-0.8.38-2,show_authors = False
release-0.8.38-2,The name of the Pygments (syntax highlighting) style to use.
release-0.8.38-2,A list of ignored prefixes for module index sorting.
release-0.8.38-2,modindex_common_prefix = []
release-0.8.38-2,"If true, keep warnings as ""system message"" paragraphs in the built documents."
release-0.8.38-2,keep_warnings = False
release-0.8.38-2,"If true, `todo` and `todoList` produce output, else they produce nothing."
release-0.8.38-2,-- Options for HTML output ----------------------------------------------
release-0.8.38-2,The theme to use for HTML and HTML Help pages.  See the documentation for
release-0.8.38-2,a list of builtin themes.
release-0.8.38-2,html_theme = 'alabaster'
release-0.8.38-2,Theme options are theme-specific and customize the look and feel of a theme
release-0.8.38-2,"further.  For a list of options available for each theme, see the"
release-0.8.38-2,documentation.
release-0.8.38-2,html_theme_options = {}
release-0.8.38-2,"Add any paths that contain custom themes here, relative to this directory."
release-0.8.38-2,html_theme_path = []
release-0.8.38-2,"The name for this set of Sphinx documents.  If None, it defaults to"
release-0.8.38-2,"""<project> v<release> documentation""."
release-0.8.38-2,html_title = None
release-0.8.38-2,A shorter title for the navigation bar.  Default is the same as html_title.
release-0.8.38-2,html_short_title = None
release-0.8.38-2,The name of an image file (relative to this directory) to place at the top
release-0.8.38-2,of the sidebar.
release-0.8.38-2,html_logo = None
release-0.8.38-2,The name of an image file (within the static path) to use as favicon of the
release-0.8.38-2,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
release-0.8.38-2,pixels large.
release-0.8.38-2,html_favicon = None
release-0.8.38-2,"Add any paths that contain custom static files (such as style sheets) here,"
release-0.8.38-2,"relative to this directory. They are copied after the builtin static files,"
release-0.8.38-2,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
release-0.8.38-2,Add any extra paths that contain custom files (such as robots.txt or
release-0.8.38-2,".htaccess) here, relative to this directory. These files are copied"
release-0.8.38-2,directly to the root of the documentation.
release-0.8.38-2,html_extra_path = []
release-0.8.38-2,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
release-0.8.38-2,using the given strftime format.
release-0.8.38-2,"html_last_updated_fmt = '%b %d, %Y'"
release-0.8.38-2,"If true, SmartyPants will be used to convert quotes and dashes to"
release-0.8.38-2,typographically correct entities.
release-0.8.38-2,html_use_smartypants = True
release-0.8.38-2,"Custom sidebar templates, maps document names to template names."
release-0.8.38-2,html_sidebars = {}
release-0.8.38-2,"Additional templates that should be rendered to pages, maps page names to"
release-0.8.38-2,template names.
release-0.8.38-2,html_additional_pages = {}
release-0.8.38-2,"If false, no module index is generated."
release-0.8.38-2,html_domain_indices = True
release-0.8.38-2,"If false, no index is generated."
release-0.8.38-2,html_use_index = True
release-0.8.38-2,"If true, the index is split into individual pages for each letter."
release-0.8.38-2,html_split_index = False
release-0.8.38-2,"If true, links to the reST sources are added to the pages."
release-0.8.38-2,html_show_sourcelink = True
release-0.8.38-2,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
release-0.8.38-2,html_show_sphinx = True
release-0.8.38-2,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
release-0.8.38-2,html_show_copyright = True
release-0.8.38-2,"If true, an OpenSearch description file will be output, and all pages will"
release-0.8.38-2,contain a <link> tag referring to it.  The value of this option must be the
release-0.8.38-2,base URL from which the finished HTML is served.
release-0.8.38-2,html_use_opensearch = ''
release-0.8.38-2,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
release-0.8.38-2,html_file_suffix = None
release-0.8.38-2,Language to be used for generating the HTML full-text search index.
release-0.8.38-2,Sphinx supports the following languages:
release-0.8.38-2,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
release-0.8.38-2,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
release-0.8.38-2,html_search_language = 'en'
release-0.8.38-2,"A dictionary with options for the search language support, empty by default."
release-0.8.38-2,Now only 'ja' uses this config value
release-0.8.38-2,html_search_options = {'type': 'default'}
release-0.8.38-2,The name of a javascript file (relative to the configuration directory) that
release-0.8.38-2,"implements a search results scorer. If empty, the default will be used."
release-0.8.38-2,html_search_scorer = 'scorer.js'
release-0.8.38-2,Output file base name for HTML help builder.
release-0.8.38-2,-- Options for LaTeX output ---------------------------------------------
release-0.8.38-2,The paper size ('letterpaper' or 'a4paper').
release-0.8.38-2,"'papersize': 'letterpaper',"
release-0.8.38-2,"The font size ('10pt', '11pt' or '12pt')."
release-0.8.38-2,"'pointsize': '10pt',"
release-0.8.38-2,Additional stuff for the LaTeX preamble.
release-0.8.38-2,"'preamble': '',"
release-0.8.38-2,Latex figure (float) alignment
release-0.8.38-2,"'figure_align': 'htbp',"
release-0.8.38-2,Grouping the document tree into LaTeX files. List of tuples
release-0.8.38-2,"(source start file, target name, title,"
release-0.8.38-2,"author, documentclass [howto, manual, or own class])."
release-0.8.38-2,The name of an image file (relative to this directory) to place at the top of
release-0.8.38-2,the title page.
release-0.8.38-2,latex_logo = None
release-0.8.38-2,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
release-0.8.38-2,not chapters.
release-0.8.38-2,latex_use_parts = False
release-0.8.38-2,"If true, show page references after internal links."
release-0.8.38-2,latex_show_pagerefs = False
release-0.8.38-2,"If true, show URL addresses after external links."
release-0.8.38-2,latex_show_urls = False
release-0.8.38-2,Documents to append as an appendix to all manuals.
release-0.8.38-2,latex_appendices = []
release-0.8.38-2,"If false, no module index is generated."
release-0.8.38-2,latex_domain_indices = True
release-0.8.38-2,-- Options for manual page output ---------------------------------------
release-0.8.38-2,One entry per manual page. List of tuples
release-0.8.38-2,"(source start file, name, description, authors, manual section)."
release-0.8.38-2,"If true, show URL addresses after external links."
release-0.8.38-2,man_show_urls = False
release-0.8.38-2,-- Options for Texinfo output -------------------------------------------
release-0.8.38-2,Grouping the document tree into Texinfo files. List of tuples
release-0.8.38-2,"(source start file, target name, title, author,"
release-0.8.38-2,"dir menu entry, description, category)"
release-0.8.38-2,Documents to append as an appendix to all manuals.
release-0.8.38-2,texinfo_appendices = []
release-0.8.38-2,"If false, no module index is generated."
release-0.8.38-2,texinfo_domain_indices = True
release-0.8.38-2,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.38-2,texinfo_show_urls = 'footnote'
release-0.8.38-2,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
release-0.8.38-2,texinfo_no_detailmenu = False
release-0.8.38-2,-- Options for Epub output ----------------------------------------------
release-0.8.38-2,Bibliographic Dublin Core info.
release-0.8.38-2,The basename for the epub file. It defaults to the project name.
release-0.8.38-2,epub_basename = project
release-0.8.38-2,The HTML theme for the epub output. Since the default themes are not
release-0.8.38-2,"optimized for small screen space, using the same theme for HTML and epub"
release-0.8.38-2,"output is usually not wise. This defaults to 'epub', a theme designed to save"
release-0.8.38-2,visual space.
release-0.8.38-2,epub_theme = 'epub'
release-0.8.38-2,The language of the text. It defaults to the language option
release-0.8.38-2,or 'en' if the language is not set.
release-0.8.38-2,epub_language = ''
release-0.8.38-2,The scheme of the identifier. Typical schemes are ISBN or URL.
release-0.8.38-2,epub_scheme = ''
release-0.8.38-2,The unique identifier of the text. This can be a ISBN number
release-0.8.38-2,or the project homepage.
release-0.8.38-2,epub_identifier = ''
release-0.8.38-2,A unique identification for the text.
release-0.8.38-2,epub_uid = ''
release-0.8.38-2,A tuple containing the cover image and cover page html template filenames.
release-0.8.38-2,epub_cover = ()
release-0.8.38-2,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
release-0.8.38-2,epub_guide = ()
release-0.8.38-2,HTML files that should be inserted before the pages created by sphinx.
release-0.8.38-2,The format is a list of tuples containing the path and title.
release-0.8.38-2,epub_pre_files = []
release-0.8.38-2,HTML files that should be inserted after the pages created by sphinx.
release-0.8.38-2,The format is a list of tuples containing the path and title.
release-0.8.38-2,epub_post_files = []
release-0.8.38-2,A list of files that should not be packed into the epub file.
release-0.8.38-2,The depth of the table of contents in toc.ncx.
release-0.8.38-2,epub_tocdepth = 3
release-0.8.38-2,Allow duplicate toc entries.
release-0.8.38-2,epub_tocdup = True
release-0.8.38-2,Choose between 'default' and 'includehidden'.
release-0.8.38-2,epub_tocscope = 'default'
release-0.8.38-2,Fix unsupported image types using the Pillow.
release-0.8.38-2,epub_fix_images = False
release-0.8.38-2,Scale large images.
release-0.8.38-2,epub_max_image_width = 0
release-0.8.38-2,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.38-2,epub_show_urls = 'inline'
release-0.8.38-2,"If false, no index is generated."
release-0.8.38-2,epub_use_index = True
release-0.8.38-1,"Import numpy here, only when headers are needed"
release-0.8.38-1,Add numpy headers to include_dirs
release-0.8.38-1,Call original build_ext command
release-0.8.38-1,The dependencies are the same as the contents of requirements.txt
release-0.8.38-1,"A little ""fancy"" we select from the flattened array reshape back"
release-0.8.38-1,(Fortran format to get indexing right) and take the product to do an and
release-0.8.38-1,then convert back to boolean type.
release-0.8.38-1,Density sparseness is not well defined if there are no
release-0.8.38-1,internal edges (as per the referenced paper). However
release-0.8.38-1,MATLAB code from the original authors simply selects the
release-0.8.38-1,largest of *all* the edges in the case that there are
release-0.8.38-1,"no internal edges, so we do the same here"
release-0.8.38-1,"If there are any internal edges, then subselect them out"
release-0.8.38-1,If there are no internal edges then we want to take the
release-0.8.38-1,"max over all the edges that exist in the MST, so we simply"
release-0.8.38-1,do nothing and return all the edges in the MST.
release-0.8.38-1,-*- coding: utf-8 -*-
release-0.8.38-1,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38-1,Steve Astels <sastels@gmail.com>
release-0.8.38-1,John Healy <jchealy@gmail.com>
release-0.8.38-1,
release-0.8.38-1,License: BSD 3 clause
release-0.8.38-1,"Treating this case explicitly, instead of letting"
release-0.8.38-1,"sklearn.metrics.pairwise_distances handle it,"
release-0.8.38-1,enables the usage of numpy.inf in the distance
release-0.8.38-1,matrix to indicate missing distance information.
release-0.8.38-1,TODO: Check if copying is necessary
release-0.8.38-1,raise TypeError('Sparse distance matrices not yet supported')
release-0.8.38-1,Warn if the MST couldn't be constructed around the missing distances
release-0.8.38-1,mst_linkage_core does not generate a full minimal spanning tree
release-0.8.38-1,If a tree is required then we must build the edges from the information
release-0.8.38-1,returned by mst_linkage_core (i.e. just the order of points to be merged)
release-0.8.38-1,Sort edges of the min_spanning_tree by weight
release-0.8.38-1,Convert edge list into standard hierarchical clustering format
release-0.8.38-1,Check for connected component on X
release-0.8.38-1,Compute sparse mutual reachability graph
release-0.8.38-1,"if max_dist > 0, max distance to use when the reachability is infinite"
release-0.8.38-1,Check connected component on mutual reachability
release-0.8.38-1,"If more than one component, it means that even if the distance matrix X"
release-0.8.38-1,"has one component, there exists with less than `min_samples` neighbors"
release-0.8.38-1,Compute the minimum spanning tree for the sparse graph
release-0.8.38-1,Convert the graph to scipy cluster array format
release-0.8.38-1,Sort edges of the min_spanning_tree by weight
release-0.8.38-1,Convert edge list into standard hierarchical clustering format
release-0.8.38-1,The Cython routines used require contiguous arrays
release-0.8.38-1,TO DO: Deal with p for minkowski appropriately
release-0.8.38-1,Get distance to kth nearest neighbour
release-0.8.38-1,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.38-1,Sort edges of the min_spanning_tree by weight
release-0.8.38-1,Convert edge list into standard hierarchical clustering format
release-0.8.38-1,The Cython routines used require contiguous arrays
release-0.8.38-1,Get distance to kth nearest neighbour
release-0.8.38-1,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.38-1,Sort edges of the min_spanning_tree by weight
release-0.8.38-1,Convert edge list into standard hierarchical clustering format
release-0.8.38-1,Sort edges of the min_spanning_tree by weight
release-0.8.38-1,Convert edge list into standard hierarchical clustering format
release-0.8.38-1,Sort edges of the min_spanning_tree by weight
release-0.8.38-1,Convert edge list into standard hierarchical clustering format
release-0.8.38-1,Checks input and converts to an nd-array where possible
release-0.8.38-1,"Only non-sparse, precomputed distance matrices are handled here"
release-0.8.38-1,and thereby allowed to contain numpy.inf for missing distances
release-0.8.38-1,Python 2 and 3 compliant string_type checking
release-0.8.38-1,We can't do much with sparse matrices ...
release-0.8.38-1,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.38-1,still debugging for now
release-0.8.38-1,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.38-1,still debugging for now
release-0.8.38-1,Inherits from sklearn
release-0.8.38-1,Non-precomputed matrices may contain non-finite values.
release-0.8.38-1,Rows with these values
release-0.8.38-1,Pass only the purely finite indices into hdbscan
release-0.8.38-1,We will later assign all non-finite points to the background -1 cluster
release-0.8.38-1,Handle sparse precomputed distance matrices separately
release-0.8.38-1,"Only non-sparse, precomputed distance matrices are allowed"
release-0.8.38-1,to have numpy.inf values indicating missing distances
release-0.8.38-1,"prediction data only applies to the persistent model, so remove"
release-0.8.38-1,it from the keyword args we pass on the the function
release-0.8.38-1,remap indices to align with original data in the case of non-finite entries.
release-0.8.38-1,"Unltimately, for each Ci, we only require the"
release-0.8.38-1,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
release-0.8.38-1,"So let's call this value DSPC_wrt(Ci), i.e."
release-0.8.38-1,density separation 'with respect to' Ci.
release-0.8.38-1,If exactly one of the points is noise
release-0.8.38-1,Set the density sparseness of the cluster
release-0.8.38-1,to the sparsest value seen so far.
release-0.8.38-1,Check whether density separations with
release-0.8.38-1,respect to each of these clusters can
release-0.8.38-1,be reduced.
release-0.8.38-1,"In case min_outlier_sep is still np.inf, we assign a new value to it."
release-0.8.38-1,This only makes sense if num_clusters = 1 since it has turned out
release-0.8.38-1,that the MR-MST has no edges between a noise point and a core point.
release-0.8.38-1,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
release-0.8.38-1,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
release-0.8.38-1,MR-MST might contain an edge with one point in Cj and ther other one
release-0.8.38-1,"in Ck. Here, we replace the infinite density separation of Ci by"
release-0.8.38-1,another large enough value.
release-0.8.38-1,
release-0.8.38-1,TODO: Think of a better yet efficient way to handle this.
release-0.8.38-1,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
release-0.8.38-1,Use a previously initialized/trained HDBSCAN
release-0.8.38-1,Handle the trivial case first.
release-0.8.38-1,Always generate prediction_data to avoid later woes
release-0.8.38-1,This will later be chosen according to n_clusters
release-0.8.38-1,Initialize and train clusterer if one was not previously supplied.
release-0.8.38-1,Always generate prediction data
release-0.8.38-1,We do not pass cluster_selection_epsilon here.
release-0.8.38-1,"While this adds unnecessary computation, it makes the code"
release-0.8.38-1,easier to read and debug.
release-0.8.38-1,"Train on 'X'. Do this even if the supplied clusterer was trained,"
release-0.8.38-1,because we want to make sure it fits 'X'.
release-0.8.38-1,"Pick an epsilon value right after a split produces n_clusters,"
release-0.8.38-1,and the don't split further for smaller epsilon (larger lambda)
release-0.8.38-1,Or use the specified cluster_selection_epsilon
release-0.8.38-1,"Extract tree related stuff, in order to re-assign labels"
release-0.8.38-1,Get labels according to the required cluster_selection_epsilon
release-0.8.38-1,Reflect the related changes in HDBSCAN.
release-0.8.38-1,PredictionData attached to HDBSCAN should also change.
release-0.8.38-1,A function re_init is defined in this module to handle this.
release-0.8.38-1,"From a fitted HDBSCAN model, predict for n_clusters=5"
release-0.8.38-1,Store prediciton data for later use.
release-0.8.38-1,and use this prediction data to predict on new points
release-0.8.38-1,Get number of fitted clusters for later use.
release-0.8.38-1,We'll need the condensed tree later...
release-0.8.38-1,"If none of the three arguments: prediction_data, n_clusters,"
release-0.8.38-1,"and cluster_selection_epsilon are supplied,"
release-0.8.38-1,then use clusterer's prediciton data directly
release-0.8.38-1,"If either of n_clusters or cluster_selection_epsilon were supplied,"
release-0.8.38-1,then build prediction data from these by modifying clusterer's
release-0.8.38-1,Get prediction data from clusterer
release-0.8.38-1,Modify prediction_data to reflect new n_clusters
release-0.8.38-1,"First, make a copy of prediction data to avoid modifying source"
release-0.8.38-1,Cluster selection method is hold by condensed_tree.
release-0.8.38-1,Change from 'eom' to 'leaf' if n_clusters is too large.
release-0.8.38-1,This change does not affect the tree associated with 'clusterer'
release-0.8.38-1,Re-initialize prediction_data for the specified n_clusters or epsilon
release-0.8.38-1,============================================================
release-0.8.38-1,Now we're ready to use prediction_data
release-0.8.38-1,"The rest of the code is copied from HDBSCAN's approximate_predict,"
release-0.8.38-1,but modified to use prediction_data instead of clusterer's attribute
release-0.8.38-1,Extract condensed tree for later use
release-0.8.38-1,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.38-1,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.38-1,Use the same prediction_data as clusterer's
release-0.8.38-1,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.38-1,produces a specified number of n_clusters
release-0.8.38-1,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.38-1,Create another instance of prediction_data that is consistent
release-0.8.38-1,with the selected value of epsilon.
release-0.8.38-1,Flat clustering from prediction data
release-0.8.38-1,Initialize probabilities
release-0.8.38-1,k-NN for prediciton points to training set
release-0.8.38-1,Loop over prediction points to compute probabilities
release-0.8.38-1,We need to find where in the tree the new point would go
release-0.8.38-1,for the purposes of outlier membership approximation
release-0.8.38-1,"Find row in tree where nearest neighbor drops out,"
release-0.8.38-1,so we can get a lambda value for the nearest neighbor
release-0.8.38-1,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
release-0.8.38-1,"Equivalently, this assigns core distance for prediction point as"
release-0.8.38-1,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
release-0.8.38-1,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.38-1,Use new prediction_data that points to exemplars that are specific
release-0.8.38-1,to the choice of n_clusters
release-0.8.38-1,Probabilities based on how long the nearest exemplar persists in
release-0.8.38-1,each cluster (with respect to most persistent exemplar)
release-0.8.38-1,Use new clusters that are defined by the choice of n_clusters.
release-0.8.38-1,Merge the two probabilities to produce a single set of probabilities
release-0.8.38-1,Include probability that the nearest neighbor belongs to a cluster
release-0.8.38-1,Rename variable so it's easy to understand what's being returned
release-0.8.38-1,Extract condensed tree for later use
release-0.8.38-1,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.38-1,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.38-1,Use the same prediction_data as clusterer's
release-0.8.38-1,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.38-1,produces a specified number of n_clusters
release-0.8.38-1,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.38-1,Create another instance of prediction_data that is consistent
release-0.8.38-1,with the selected value of epsilon.
release-0.8.38-1,Flat clustering at the chosen epsilon from prediction_data
release-0.8.38-1,"When no clusters found, return array of 0's"
release-0.8.38-1,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.38-1,Use new prediction_data that points to exemplars that are specific
release-0.8.38-1,to the choice of n_clusters
release-0.8.38-1,Probabilities based on how long the point persists in
release-0.8.38-1,each cluster (with respect to most persistent exemplar)
release-0.8.38-1,Use new clusters that are defined by the choice of n_clusters.
release-0.8.38-1,Include probability that the point belongs to a cluster
release-0.8.38-1,Aggregate the three probabilities to produce membership vectors
release-0.8.38-1,Re-name variable to clarify what's being returned.
release-0.8.38-1,"With method 'eom', max clusters are produced for epsilon=0,"
release-0.8.38-1,as computed by
release-0.8.38-1,Increasing epsilon can only reduce the number of ouput clusters.
release-0.8.38-1,"To select epsilon, consider all values where clusters are split"
release-0.8.38-1,Subtract the extra e-12 to avoid numerical errors in comparison
release-0.8.38-1,"Then, we avoid splitting for all epsilon below this."
release-0.8.38-1,Use an epsilon value that produces the right number of clusters.
release-0.8.38-1,The condensed tree of HDBSCAN has this information.
release-0.8.38-1,Extract the lambda levels (=1/distance) from the condensed tree
release-0.8.38-1,We don't want values that produce a large cluster and
release-0.8.38-1,just one or two individual points.
release-0.8.38-1,Keep only those lambda values corresponding to cluster separation;
release-0.8.38-1,"i.e., with child_sizes > 1"
release-0.8.38-1,"Get the unique values, because when two clusters fall out of one,"
release-0.8.38-1,the entry with lambda is repeated.
release-0.8.38-1,lambda values are sorted by np.unique.
release-0.8.38-1,"Now, get epsilon (distance threshold) as 1/lambda"
release-0.8.38-1,"At this epsilon, n_clusters have been split."
release-0.8.38-1,Stop splits at epsilons smaller than this.
release-0.8.38-1,"To allow for numerical errors,"
release-0.8.38-1,predData must be a pre-trained PredictionData instance from hdbscan
release-0.8.38-1,"If n_clusters is specified, compute cluster_selection_epsilon;"
release-0.8.38-1,This is the key modification:
release-0.8.38-1,Select clusters according to selection method and epsilon.
release-0.8.38-1,_new_select_clusters is a modification of get_clusters
release-0.8.38-1,from hdbscan._hdbscan_tree
release-0.8.38-1,"raw tree, used later to get exemplars and lambda values"
release-0.8.38-1,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
release-0.8.38-1,to the cluster labels produced as output
release-0.8.38-1,Re-compute lambdas and exemplars for selected clusters;
release-0.8.38-1,max_lambda <=> smallest distance <=> most persistent point(s)
release-0.8.38-1,Map all sub-clusters of selected cluster to the selected cluster's
release-0.8.38-1,label in output.
release-0.8.38-1,Map lambdas too...
release-0.8.38-1,Create set of exemplar points for later use.
release-0.8.38-1,Novel points are assigned based on cluster of closest exemplar.
release-0.8.38-1,"For each selected cluster, get all of its leaves,"
release-0.8.38-1,"and leaves of leaves, and so on..."
release-0.8.38-1,Largest lambda => Most persistent points
release-0.8.38-1,Get the most persistent points
release-0.8.38-1,Add most persistent points as exemplars
release-0.8.38-1,Add exemplars for each leaf of each selected cluster.
release-0.8.38-1,(exclude root)
release-0.8.38-1,-*- coding: utf-8 -*-
release-0.8.38-1,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38-1,
release-0.8.38-1,License: BSD 3 clause
release-0.8.38-1,"Return the only cluster, the root"
release-0.8.38-1,We want to get the x and y coordinates for the start of each cluster
release-0.8.38-1,"Initialize the leaves, since we know where they go, the iterate"
release-0.8.38-1,"through everything from the leaves back, setting coords as we go"
release-0.8.38-1,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
release-0.8.38-1,bottoms and widths for each rectangle. We can go through each cluster
release-0.8.38-1,and do this for each in turn.
release-0.8.38-1,Ensure we don't try to take log of zero
release-0.8.38-1,Finally we need the horizontal lines that occur at cluster splits.
release-0.8.38-1,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
release-0.8.38-1,"axis.plot(xs, ys, color='black', linewidth=1)"
release-0.8.38-1,Extract the chosen cluster bounds. If enough duplicate data points exist in the
release-0.8.38-1,data the lambda value might be infinite. This breaks labeling and highlighting
release-0.8.38-1,the chosen clusters.
release-0.8.38-1,Extract the plot range of the y-axis and set default center and height values for ellipses.
release-0.8.38-1,Extremly dense clusters might result in near infinite lambda values. Setting max_height
release-0.8.38-1,based on the percentile should alleviate the impact on plotting.
release-0.8.38-1,Set center and height to default values if necessary
release-0.8.38-1,Ensure the ellipse is visible
release-0.8.38-1,Get a 2D projection; if we have a lot of dimensions use PCA first
release-0.8.38-1,Use PCA to get down to 32 dimension
release-0.8.38-1,"node_desat=None,"
release-0.8.38-1,Extract node color data
release-0.8.38-1,Extract edge color data
release-0.8.38-1,Compute or extract layout
release-0.8.38-1,Add edges
release-0.8.38-1,Add FLASC features
release-0.8.38-1,Add raw data features
release-0.8.38-1,-*- coding: utf-8 -*-
release-0.8.38-1,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38-1,
release-0.8.38-1,License: BSD 3 clause
release-0.8.38-1,The Cython routines used require contiguous arrays
release-0.8.38-1,The Cython routines used require contiguous arrays
release-0.8.38-1,We can't do much with sparse matrices ...
release-0.8.38-1,Need heuristic to decide when to go to boruvka;
release-0.8.38-1,still debugging for now
release-0.8.38-1,Need heuristic to decide when to go to boruvka;
release-0.8.38-1,still debugging for now
release-0.8.38-1,Support various prediction methods for predicting cluster membership
release-0.8.38-1,of new or unseen points. There are several ways to interpret how
release-0.8.38-1,"to do this correctly, so we provide several methods for"
release-0.8.38-1,the different use cases that may arise.
release-0.8.38-1,raw_condensed_tree = condensed_tree.to_numpy()
release-0.8.38-1,New point departs with the old
release-0.8.38-1,Find appropriate cluster based on lambda of new point
release-0.8.38-1,Find appropriate cluster based on lambda of new point
release-0.8.38-1,"the point is in the dataset, fix lambda for rounding errors"
release-0.8.38-1,We need to find where in the tree the new point would go
release-0.8.38-1,for the purposes of outlier membership approximation
release-0.8.38-1,"When no clusters found, return array of 0's"
release-0.8.38-1,Support branch detection within clusters.
release-0.8.38-1,Select finite data points
release-0.8.38-1,Construct tree
release-0.8.38-1,Allocate to maintain data point indices
release-0.8.38-1,Find neighbours for non-noise points
release-0.8.38-1,Check clusterer state
release-0.8.38-1,Validate parameters
release-0.8.38-1,Extract state
release-0.8.38-1,Configure parallelization
release-0.8.38-1,Detect branches
release-0.8.38-1,Maintain data indices for non-finite data
release-0.8.38-1,Combined result
release-0.8.38-1,Branching result
release-0.8.38-1,Clusters to branches
release-0.8.38-1,List points within cluster
release-0.8.38-1,Extract MST edges within cluster
release-0.8.38-1,Compute in cluster centrality
release-0.8.38-1,Construct cluster approximation graph
release-0.8.38-1,Extract centrality MST and compute single linkage
release-0.8.38-1,Re-label edges with data ids
release-0.8.38-1,Return values
release-0.8.38-1,Allocate output (won't be filled completely)
release-0.8.38-1,Fill (undirected) MST edges with within-cluster-ids
release-0.8.38-1,Fill neighbors with within-cluster-ids
release-0.8.38-1,Fill mutual reachabilities
release-0.8.38-1,Extract unique edges that stay within the cluster
release-0.8.38-1,Query KDTree/BallTree for neighours within the distance
release-0.8.38-1,Count number of returned edges per point
release-0.8.38-1,Create full edge list
release-0.8.38-1,Create output
release-0.8.38-1,Reset noise labels to k-cluster
release-0.8.38-1,Allocate output
release-0.8.38-1,Compute the labels and probabilities
release-0.8.38-1,Reorder other parts
release-0.8.38-1,import pickle
release-0.8.38-1,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.38-1,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.38-1,"number of clusters, ignoring noise if present"
release-0.8.38-1,"metric is the function reference, not the string key."
release-0.8.38-1,def test_rsl_unavailable_hierarchy():
release-0.8.38-1,clusterer = RobustSingleLinkage()
release-0.8.38-1,with warnings.catch_warnings(record=True) as w:
release-0.8.38-1,tree = clusterer.cluster_hierarchy_
release-0.8.38-1,assert len(w) > 0
release-0.8.38-1,assert tree is None
release-0.8.38-1,"H, y = shuffle(X, y, random_state=7)"
release-0.8.38-1,Disable for now -- need to refactor to meet newer standards
release-0.8.38-1,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.38-1,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.38-1,this fails if no $DISPLAY specified
release-0.8.38-1,"number of clusters, ignoring noise if present"
release-0.8.38-1,"number of clusters, ignoring noise if present"
release-0.8.38-1,"H, y = shuffle(X, y, random_state=7)"
release-0.8.38-1,"metric is the function reference, not the string key."
release-0.8.38-1,def test_hdbscan_unavailable_attributes():
release-0.8.38-1,clusterer = HDBSCAN(gen_min_span_tree=False)
release-0.8.38-1,with warnings.catch_warnings(record=True) as w:
release-0.8.38-1,tree = clusterer.condensed_tree_
release-0.8.38-1,assert len(w) > 0
release-0.8.38-1,assert tree is None
release-0.8.38-1,with warnings.catch_warnings(record=True) as w:
release-0.8.38-1,tree = clusterer.single_linkage_tree_
release-0.8.38-1,assert len(w) > 0
release-0.8.38-1,assert tree is None
release-0.8.38-1,with warnings.catch_warnings(record=True) as w:
release-0.8.38-1,scores = clusterer.outlier_scores_
release-0.8.38-1,assert len(w) > 0
release-0.8.38-1,assert scores is None
release-0.8.38-1,with warnings.catch_warnings(record=True) as w:
release-0.8.38-1,tree = clusterer.minimum_spanning_tree_
release-0.8.38-1,assert len(w) > 0
release-0.8.38-1,assert tree is None
release-0.8.38-1,def test_hdbscan_min_span_tree_availability():
release-0.8.38-1,clusterer = HDBSCAN().fit(X)
release-0.8.38-1,tree = clusterer.minimum_spanning_tree_
release-0.8.38-1,assert tree is None
release-0.8.38-1,D = distance.squareform(distance.pdist(X))
release-0.8.38-1,D /= np.max(D)
release-0.8.38-1,HDBSCAN(metric='precomputed').fit(D)
release-0.8.38-1,tree = clusterer.minimum_spanning_tree_
release-0.8.38-1,assert tree is None
release-0.8.38-1,no prediction data error
release-0.8.38-1,wrong dimensions error
release-0.8.38-1,no clusters warning
release-0.8.38-1,def test_hdbscan_membership_vector():
release-0.8.38-1,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.38-1,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
release-0.8.38-1,assert_array_almost_equal(
release-0.8.38-1,"vector,"
release-0.8.38-1,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
release-0.8.38-1,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
release-0.8.38-1,assert_array_almost_equal(
release-0.8.38-1,"vector,"
release-0.8.38-1,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
release-0.8.38-1,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
release-0.8.38-1,assert_array_almost_equal(
release-0.8.38-1,"vector,"
release-0.8.38-1,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
release-0.8.38-1,
release-0.8.38-1,def test_hdbscan_all_points_membership_vectors():
release-0.8.38-1,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.38-1,vects = all_points_membership_vectors(clusterer)
release-0.8.38-1,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
release-0.8.38-1,"2.52734246e-001,"
release-0.8.38-1,8.38299608e-002]))
release-0.8.38-1,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
release-0.8.38-1,"8.35882503e-002,"
release-0.8.38-1,1.07356406e-001]))
release-0.8.38-1,without epsilon we should see many noise points as children of root.
release-0.8.38-1,for this random seed an epsilon of 0.2 will produce exactly 2 noise
release-0.8.38-1,points at that cut in single linkage.
release-0.8.38-1,Disable for now -- need to refactor to meet newer standards
release-0.8.38-1,Probably not applicable now #
release-0.8.38-1,def test_dbscan_sparse():
release-0.8.38-1,def test_dbscan_balltree():
release-0.8.38-1,def test_pickle():
release-0.8.38-1,def test_dbscan_core_samples_toy():
release-0.8.38-1,def test_boundaries():
release-0.8.38-1,"Given negative, zero and positive denominator and positive numerator"
release-0.8.38-1,Make sure safe division is always positive and doesn't raise ZeroDivision error
release-0.8.38-1,--- Branch Detection Data
release-0.8.38-1,There are no fast metrics that are not supported by KDTree or BallTree!
release-0.8.38-1,"Cosine and arccoss both crash HDBSCAN. They go down the BallTree path, but"
release-0.8.38-1,the implementation does not support them.
release-0.8.38-1,Distance matrix
release-0.8.38-1,Sparse matrix
release-0.8.38-1,--- Detecting Branches
release-0.8.38-1,Generate single-cluster data
release-0.8.38-1,"Without persistence, find 6 branches"
release-0.8.38-1,"Mac & Windows give 71, Linux gives 72. Probably different random values."
release-0.8.38-1,Adding presistence removes some branches
release-0.8.38-1,--- Branch Detector Functionality
release-0.8.38-1,A point on a branch (not noise) exact labels change per run
release-0.8.38-1,A point in a cluster
release-0.8.38-1,A noise point
release-0.8.38-1,--- Attribute Output Formats
release-0.8.38-1,--- Attribute plots
release-0.8.38-1,Ignore future warnings thrown by sklearn
release-0.8.38-1,Create a nice dataset with 6 circular clusters and 2 moons
release-0.8.38-1,"Given, the base HDBSCAN with method 'eom'"
release-0.8.38-1,"When we ask for flat clustering with same n_clusters,"
release-0.8.38-1,"Then, the labels and probabilities should match"
release-0.8.38-1,"Given, the base HDBSCAN with method 'leaf'"
release-0.8.38-1,"When we ask for flat clustering with same n_clusters,"
release-0.8.38-1,"Then, the labels and probabilities should match"
release-0.8.38-1,Method 'eom'...
release-0.8.38-1,"Given, a flat clustering for required n_clusters,"
release-0.8.38-1,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.38-1,"Then, the labels and probabilities should match"
release-0.8.38-1,Method 'leaf'...
release-0.8.38-1,"Given, a flat clustering for required n_clusters,"
release-0.8.38-1,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.38-1,"Then, the labels and probabilities should match"
release-0.8.38-1,"Given the max number of clusters that can be produced by 'eom',"
release-0.8.38-1,(these are produced for epsilon=0) (??? Needs verification)
release-0.8.38-1,"When we try flat clustering with 'eom' method for more n_clusters,"
release-0.8.38-1,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.38-1,"assert ""Cannot predict"" in str(w[-1].message)"
release-0.8.38-1,"the resulting clusterer switches to using method 'leaf',"
release-0.8.38-1,and the resulting probabilities and labels must match
release-0.8.38-1,"Given the base HDBSCAN trained on some data,"
release-0.8.38-1,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.38-1,"Then, the clustering should match that due to approximate_predict,"
release-0.8.38-1,"Given a flat clustering trained for some n_clusters,"
release-0.8.38-1,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.38-1,"Then, the number of clusters produced must match the original n_clusters"
release-0.8.38-1,and all probabilities are <= 1.
release-0.8.38-1,"Given a flat clustering trained for some n_clusters,"
release-0.8.38-1,"When using approximate_predict_flat with specified n_clusters,"
release-0.8.38-1,"Then, the requested number of clusters must be produced"
release-0.8.38-1,and all probabilities are <= 1.
release-0.8.38-1,When using approximate_predict_flat with more clusters
release-0.8.38-1,"than 'eom' can handle,"
release-0.8.38-1,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.38-1,But the requested number of clusters must still be produced using 'leaf'
release-0.8.38-1,and all probabilities are <= 1.
release-0.8.38-1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38-1,"When membership_vector_flat is called with new data,"
release-0.8.38-1,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38-1,and the number of points should equal those in the test set
release-0.8.38-1,and all probabilities are <= 1.
release-0.8.38-1,========================================
release-0.8.38-1,"Given a flat clustering for a specified n_clusters,"
release-0.8.38-1,"When membership_vector_flat is called with new data,"
release-0.8.38-1,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38-1,and the number of points should equal those in the test set
release-0.8.38-1,and all probabilities are <= 1.
release-0.8.38-1,Ignore user warnings in this function
release-0.8.38-1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38-1,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.38-1,"Then the number of clusters in memberships should be as requested,"
release-0.8.38-1,and the number of points should equal those in the test set
release-0.8.38-1,and all probabilities are <= 1.
release-0.8.38-1,========================================
release-0.8.38-1,"Given a flat clustering for a specified n_clusters,"
release-0.8.38-1,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.38-1,"Then the number of clusters in memberships should be as requested,"
release-0.8.38-1,and the number of points should equal those in the test set
release-0.8.38-1,and all probabilities are <= 1.
release-0.8.38-1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38-1,"When all_points_membership_vectors_flat is called,"
release-0.8.38-1,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38-1,and the number of points should equal those in the training set
release-0.8.38-1,and all probabilities are <= 1.
release-0.8.38-1,========================================
release-0.8.38-1,"Given a flat clustering for a specified n_clusters,"
release-0.8.38-1,"When all_points_membership_vectors_flat is called,"
release-0.8.38-1,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38-1,and the number of points should equal those in the training set
release-0.8.38-1,and all probabilities are <= 1.
release-0.8.38-1,Ignore user warnings in this function
release-0.8.38-1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38-1,"When all_points_membership_vectors_flat is called for some n_clusters,"
release-0.8.38-1,"Then the number of clusters in memberships should be as requested,"
release-0.8.38-1,and the number of points should equal those in the training set
release-0.8.38-1,and all probabilities are <= 1.
release-0.8.38-1,========================================
release-0.8.38-1,"Given a flat clustering for a specified n_clusters,"
release-0.8.38-1,"When membership_vector_flat is called for some n_clusters,"
release-0.8.38-1,"Then the number of clusters in memberships should be as requested,"
release-0.8.38-1,and the number of points should equal those in the training set
release-0.8.38-1,and all probabilities are <= 1.
release-0.8.38-1,Generate datasets. We choose the size big enough to see the scalability
release-0.8.38-1,"of the algorithms, but not too big to avoid too long running times"
release-0.8.38-1,normalize dataset for easier parameter selection
release-0.8.38-1,estimate bandwidth for mean shift
release-0.8.38-1,connectivity matrix for structured Ward
release-0.8.38-1,make connectivity symmetric
release-0.8.38-1,create clustering estimators
release-0.8.38-1,predict cluster memberships
release-0.8.38-1,plot
release-0.8.38-1,-*- coding: utf-8 -*-
release-0.8.38-1,#############################################################################
release-0.8.38-1,Generate sample data
release-0.8.38-1,#############################################################################
release-0.8.38-1,Compute DBSCAN
release-0.8.38-1,"Number of clusters in labels, ignoring noise if present."
release-0.8.38-1,#############################################################################
release-0.8.38-1,Plot result
release-0.8.38-1,Black removed and is used for noise instead.
release-0.8.38-1,Black used for noise.
release-0.8.38-1,Black used for noise.
release-0.8.38-1,-*- coding: utf-8 -*-
release-0.8.38-1,
release-0.8.38-1,"hdbscan documentation build configuration file, created by"
release-0.8.38-1,sphinx-quickstart on Sat May 28 10:34:44 2016.
release-0.8.38-1,
release-0.8.38-1,This file is execfile()d with the current directory set to its
release-0.8.38-1,containing dir.
release-0.8.38-1,
release-0.8.38-1,Note that not all possible configuration values are present in this
release-0.8.38-1,autogenerated file.
release-0.8.38-1,
release-0.8.38-1,All configuration values have a default; values that are commented out
release-0.8.38-1,serve to show the default.
release-0.8.38-1,"If extensions (or modules to document with autodoc) are in another directory,"
release-0.8.38-1,add these directories to sys.path here. If the directory is relative to the
release-0.8.38-1,"documentation root, use os.path.abspath to make it absolute, like shown here."
release-0.8.38-1,"## We now install the package in a virtualenv to build docs, so this is not needed"
release-0.8.38-1,"sys.path.insert(0, os.path.abspath('../'))"
release-0.8.38-1,-- General configuration ------------------------------------------------
release-0.8.38-1,"If your documentation needs a minimal Sphinx version, state it here."
release-0.8.38-1,needs_sphinx = '1.0'
release-0.8.38-1,"Add any Sphinx extension module names here, as strings. They can be"
release-0.8.38-1,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
release-0.8.38-1,ones.
release-0.8.38-1,"'sphinx.ext.napoleon',"
release-0.8.38-1,'numpy_ext.numpydoc'
release-0.8.38-1,napoleon_google_docstring = False
release-0.8.38-1,napoleon_numpy_docstring = True
release-0.8.38-1,"Add any paths that contain templates here, relative to this directory."
release-0.8.38-1,The suffix(es) of source filenames.
release-0.8.38-1,You can specify multiple suffix as a list of string:
release-0.8.38-1,"source_suffix = ['.rst', '.md']"
release-0.8.38-1,The encoding of source files.
release-0.8.38-1,source_encoding = 'utf-8-sig'
release-0.8.38-1,The master toctree document.
release-0.8.38-1,General information about the project.
release-0.8.38-1,"The version info for the project you're documenting, acts as replacement for"
release-0.8.38-1,"|version| and |release|, also used in various other places throughout the"
release-0.8.38-1,built documents.
release-0.8.38-1,
release-0.8.38-1,The short X.Y version.
release-0.8.38-1,"The full version, including alpha/beta/rc tags."
release-0.8.38-1,The language for content autogenerated by Sphinx. Refer to documentation
release-0.8.38-1,for a list of supported languages.
release-0.8.38-1,
release-0.8.38-1,This is also used if you do content translation via gettext catalogs.
release-0.8.38-1,"Usually you set ""language"" from the command line for these cases."
release-0.8.38-1,"There are two options for replacing |today|: either, you set today to some"
release-0.8.38-1,"non-false value, then it is used:"
release-0.8.38-1,today = ''
release-0.8.38-1,"Else, today_fmt is used as the format for a strftime call."
release-0.8.38-1,"today_fmt = '%B %d, %Y'"
release-0.8.38-1,"List of patterns, relative to source directory, that match files and"
release-0.8.38-1,directories to ignore when looking for source files.
release-0.8.38-1,The reST default role (used for this markup: `text`) to use for all
release-0.8.38-1,documents.
release-0.8.38-1,default_role = None
release-0.8.38-1,"If true, '()' will be appended to :func: etc. cross-reference text."
release-0.8.38-1,add_function_parentheses = True
release-0.8.38-1,"If true, the current module name will be prepended to all description"
release-0.8.38-1,unit titles (such as .. function::).
release-0.8.38-1,add_module_names = True
release-0.8.38-1,"If true, sectionauthor and moduleauthor directives will be shown in the"
release-0.8.38-1,output. They are ignored by default.
release-0.8.38-1,show_authors = False
release-0.8.38-1,The name of the Pygments (syntax highlighting) style to use.
release-0.8.38-1,A list of ignored prefixes for module index sorting.
release-0.8.38-1,modindex_common_prefix = []
release-0.8.38-1,"If true, keep warnings as ""system message"" paragraphs in the built documents."
release-0.8.38-1,keep_warnings = False
release-0.8.38-1,"If true, `todo` and `todoList` produce output, else they produce nothing."
release-0.8.38-1,-- Options for HTML output ----------------------------------------------
release-0.8.38-1,The theme to use for HTML and HTML Help pages.  See the documentation for
release-0.8.38-1,a list of builtin themes.
release-0.8.38-1,html_theme = 'alabaster'
release-0.8.38-1,Theme options are theme-specific and customize the look and feel of a theme
release-0.8.38-1,"further.  For a list of options available for each theme, see the"
release-0.8.38-1,documentation.
release-0.8.38-1,html_theme_options = {}
release-0.8.38-1,"Add any paths that contain custom themes here, relative to this directory."
release-0.8.38-1,html_theme_path = []
release-0.8.38-1,"The name for this set of Sphinx documents.  If None, it defaults to"
release-0.8.38-1,"""<project> v<release> documentation""."
release-0.8.38-1,html_title = None
release-0.8.38-1,A shorter title for the navigation bar.  Default is the same as html_title.
release-0.8.38-1,html_short_title = None
release-0.8.38-1,The name of an image file (relative to this directory) to place at the top
release-0.8.38-1,of the sidebar.
release-0.8.38-1,html_logo = None
release-0.8.38-1,The name of an image file (within the static path) to use as favicon of the
release-0.8.38-1,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
release-0.8.38-1,pixels large.
release-0.8.38-1,html_favicon = None
release-0.8.38-1,"Add any paths that contain custom static files (such as style sheets) here,"
release-0.8.38-1,"relative to this directory. They are copied after the builtin static files,"
release-0.8.38-1,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
release-0.8.38-1,Add any extra paths that contain custom files (such as robots.txt or
release-0.8.38-1,".htaccess) here, relative to this directory. These files are copied"
release-0.8.38-1,directly to the root of the documentation.
release-0.8.38-1,html_extra_path = []
release-0.8.38-1,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
release-0.8.38-1,using the given strftime format.
release-0.8.38-1,"html_last_updated_fmt = '%b %d, %Y'"
release-0.8.38-1,"If true, SmartyPants will be used to convert quotes and dashes to"
release-0.8.38-1,typographically correct entities.
release-0.8.38-1,html_use_smartypants = True
release-0.8.38-1,"Custom sidebar templates, maps document names to template names."
release-0.8.38-1,html_sidebars = {}
release-0.8.38-1,"Additional templates that should be rendered to pages, maps page names to"
release-0.8.38-1,template names.
release-0.8.38-1,html_additional_pages = {}
release-0.8.38-1,"If false, no module index is generated."
release-0.8.38-1,html_domain_indices = True
release-0.8.38-1,"If false, no index is generated."
release-0.8.38-1,html_use_index = True
release-0.8.38-1,"If true, the index is split into individual pages for each letter."
release-0.8.38-1,html_split_index = False
release-0.8.38-1,"If true, links to the reST sources are added to the pages."
release-0.8.38-1,html_show_sourcelink = True
release-0.8.38-1,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
release-0.8.38-1,html_show_sphinx = True
release-0.8.38-1,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
release-0.8.38-1,html_show_copyright = True
release-0.8.38-1,"If true, an OpenSearch description file will be output, and all pages will"
release-0.8.38-1,contain a <link> tag referring to it.  The value of this option must be the
release-0.8.38-1,base URL from which the finished HTML is served.
release-0.8.38-1,html_use_opensearch = ''
release-0.8.38-1,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
release-0.8.38-1,html_file_suffix = None
release-0.8.38-1,Language to be used for generating the HTML full-text search index.
release-0.8.38-1,Sphinx supports the following languages:
release-0.8.38-1,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
release-0.8.38-1,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
release-0.8.38-1,html_search_language = 'en'
release-0.8.38-1,"A dictionary with options for the search language support, empty by default."
release-0.8.38-1,Now only 'ja' uses this config value
release-0.8.38-1,html_search_options = {'type': 'default'}
release-0.8.38-1,The name of a javascript file (relative to the configuration directory) that
release-0.8.38-1,"implements a search results scorer. If empty, the default will be used."
release-0.8.38-1,html_search_scorer = 'scorer.js'
release-0.8.38-1,Output file base name for HTML help builder.
release-0.8.38-1,-- Options for LaTeX output ---------------------------------------------
release-0.8.38-1,The paper size ('letterpaper' or 'a4paper').
release-0.8.38-1,"'papersize': 'letterpaper',"
release-0.8.38-1,"The font size ('10pt', '11pt' or '12pt')."
release-0.8.38-1,"'pointsize': '10pt',"
release-0.8.38-1,Additional stuff for the LaTeX preamble.
release-0.8.38-1,"'preamble': '',"
release-0.8.38-1,Latex figure (float) alignment
release-0.8.38-1,"'figure_align': 'htbp',"
release-0.8.38-1,Grouping the document tree into LaTeX files. List of tuples
release-0.8.38-1,"(source start file, target name, title,"
release-0.8.38-1,"author, documentclass [howto, manual, or own class])."
release-0.8.38-1,The name of an image file (relative to this directory) to place at the top of
release-0.8.38-1,the title page.
release-0.8.38-1,latex_logo = None
release-0.8.38-1,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
release-0.8.38-1,not chapters.
release-0.8.38-1,latex_use_parts = False
release-0.8.38-1,"If true, show page references after internal links."
release-0.8.38-1,latex_show_pagerefs = False
release-0.8.38-1,"If true, show URL addresses after external links."
release-0.8.38-1,latex_show_urls = False
release-0.8.38-1,Documents to append as an appendix to all manuals.
release-0.8.38-1,latex_appendices = []
release-0.8.38-1,"If false, no module index is generated."
release-0.8.38-1,latex_domain_indices = True
release-0.8.38-1,-- Options for manual page output ---------------------------------------
release-0.8.38-1,One entry per manual page. List of tuples
release-0.8.38-1,"(source start file, name, description, authors, manual section)."
release-0.8.38-1,"If true, show URL addresses after external links."
release-0.8.38-1,man_show_urls = False
release-0.8.38-1,-- Options for Texinfo output -------------------------------------------
release-0.8.38-1,Grouping the document tree into Texinfo files. List of tuples
release-0.8.38-1,"(source start file, target name, title, author,"
release-0.8.38-1,"dir menu entry, description, category)"
release-0.8.38-1,Documents to append as an appendix to all manuals.
release-0.8.38-1,texinfo_appendices = []
release-0.8.38-1,"If false, no module index is generated."
release-0.8.38-1,texinfo_domain_indices = True
release-0.8.38-1,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.38-1,texinfo_show_urls = 'footnote'
release-0.8.38-1,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
release-0.8.38-1,texinfo_no_detailmenu = False
release-0.8.38-1,-- Options for Epub output ----------------------------------------------
release-0.8.38-1,Bibliographic Dublin Core info.
release-0.8.38-1,The basename for the epub file. It defaults to the project name.
release-0.8.38-1,epub_basename = project
release-0.8.38-1,The HTML theme for the epub output. Since the default themes are not
release-0.8.38-1,"optimized for small screen space, using the same theme for HTML and epub"
release-0.8.38-1,"output is usually not wise. This defaults to 'epub', a theme designed to save"
release-0.8.38-1,visual space.
release-0.8.38-1,epub_theme = 'epub'
release-0.8.38-1,The language of the text. It defaults to the language option
release-0.8.38-1,or 'en' if the language is not set.
release-0.8.38-1,epub_language = ''
release-0.8.38-1,The scheme of the identifier. Typical schemes are ISBN or URL.
release-0.8.38-1,epub_scheme = ''
release-0.8.38-1,The unique identifier of the text. This can be a ISBN number
release-0.8.38-1,or the project homepage.
release-0.8.38-1,epub_identifier = ''
release-0.8.38-1,A unique identification for the text.
release-0.8.38-1,epub_uid = ''
release-0.8.38-1,A tuple containing the cover image and cover page html template filenames.
release-0.8.38-1,epub_cover = ()
release-0.8.38-1,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
release-0.8.38-1,epub_guide = ()
release-0.8.38-1,HTML files that should be inserted before the pages created by sphinx.
release-0.8.38-1,The format is a list of tuples containing the path and title.
release-0.8.38-1,epub_pre_files = []
release-0.8.38-1,HTML files that should be inserted after the pages created by sphinx.
release-0.8.38-1,The format is a list of tuples containing the path and title.
release-0.8.38-1,epub_post_files = []
release-0.8.38-1,A list of files that should not be packed into the epub file.
release-0.8.38-1,The depth of the table of contents in toc.ncx.
release-0.8.38-1,epub_tocdepth = 3
release-0.8.38-1,Allow duplicate toc entries.
release-0.8.38-1,epub_tocdup = True
release-0.8.38-1,Choose between 'default' and 'includehidden'.
release-0.8.38-1,epub_tocscope = 'default'
release-0.8.38-1,Fix unsupported image types using the Pillow.
release-0.8.38-1,epub_fix_images = False
release-0.8.38-1,Scale large images.
release-0.8.38-1,epub_max_image_width = 0
release-0.8.38-1,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.38-1,epub_show_urls = 'inline'
release-0.8.38-1,"If false, no index is generated."
release-0.8.38-1,epub_use_index = True
release-0.8.38,"Import numpy here, only when headers are needed"
release-0.8.38,Add numpy headers to include_dirs
release-0.8.38,Call original build_ext command
release-0.8.38,The dependencies are the same as the contents of requirements.txt
release-0.8.38,"A little ""fancy"" we select from the flattened array reshape back"
release-0.8.38,(Fortran format to get indexing right) and take the product to do an and
release-0.8.38,then convert back to boolean type.
release-0.8.38,Density sparseness is not well defined if there are no
release-0.8.38,internal edges (as per the referenced paper). However
release-0.8.38,MATLAB code from the original authors simply selects the
release-0.8.38,largest of *all* the edges in the case that there are
release-0.8.38,"no internal edges, so we do the same here"
release-0.8.38,"If there are any internal edges, then subselect them out"
release-0.8.38,If there are no internal edges then we want to take the
release-0.8.38,"max over all the edges that exist in the MST, so we simply"
release-0.8.38,do nothing and return all the edges in the MST.
release-0.8.38,-*- coding: utf-8 -*-
release-0.8.38,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38,Steve Astels <sastels@gmail.com>
release-0.8.38,John Healy <jchealy@gmail.com>
release-0.8.38,
release-0.8.38,License: BSD 3 clause
release-0.8.38,"Treating this case explicitly, instead of letting"
release-0.8.38,"sklearn.metrics.pairwise_distances handle it,"
release-0.8.38,enables the usage of numpy.inf in the distance
release-0.8.38,matrix to indicate missing distance information.
release-0.8.38,TODO: Check if copying is necessary
release-0.8.38,raise TypeError('Sparse distance matrices not yet supported')
release-0.8.38,Warn if the MST couldn't be constructed around the missing distances
release-0.8.38,mst_linkage_core does not generate a full minimal spanning tree
release-0.8.38,If a tree is required then we must build the edges from the information
release-0.8.38,returned by mst_linkage_core (i.e. just the order of points to be merged)
release-0.8.38,Sort edges of the min_spanning_tree by weight
release-0.8.38,Convert edge list into standard hierarchical clustering format
release-0.8.38,Check for connected component on X
release-0.8.38,Compute sparse mutual reachability graph
release-0.8.38,"if max_dist > 0, max distance to use when the reachability is infinite"
release-0.8.38,Check connected component on mutual reachability
release-0.8.38,"If more than one component, it means that even if the distance matrix X"
release-0.8.38,"has one component, there exists with less than `min_samples` neighbors"
release-0.8.38,Compute the minimum spanning tree for the sparse graph
release-0.8.38,Convert the graph to scipy cluster array format
release-0.8.38,Sort edges of the min_spanning_tree by weight
release-0.8.38,Convert edge list into standard hierarchical clustering format
release-0.8.38,The Cython routines used require contiguous arrays
release-0.8.38,TO DO: Deal with p for minkowski appropriately
release-0.8.38,Get distance to kth nearest neighbour
release-0.8.38,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.38,Sort edges of the min_spanning_tree by weight
release-0.8.38,Convert edge list into standard hierarchical clustering format
release-0.8.38,The Cython routines used require contiguous arrays
release-0.8.38,Get distance to kth nearest neighbour
release-0.8.38,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.38,Sort edges of the min_spanning_tree by weight
release-0.8.38,Convert edge list into standard hierarchical clustering format
release-0.8.38,Sort edges of the min_spanning_tree by weight
release-0.8.38,Convert edge list into standard hierarchical clustering format
release-0.8.38,Sort edges of the min_spanning_tree by weight
release-0.8.38,Convert edge list into standard hierarchical clustering format
release-0.8.38,Checks input and converts to an nd-array where possible
release-0.8.38,"Only non-sparse, precomputed distance matrices are handled here"
release-0.8.38,and thereby allowed to contain numpy.inf for missing distances
release-0.8.38,Python 2 and 3 compliant string_type checking
release-0.8.38,We can't do much with sparse matrices ...
release-0.8.38,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.38,still debugging for now
release-0.8.38,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.38,still debugging for now
release-0.8.38,Inherits from sklearn
release-0.8.38,Non-precomputed matrices may contain non-finite values.
release-0.8.38,Rows with these values
release-0.8.38,Pass only the purely finite indices into hdbscan
release-0.8.38,We will later assign all non-finite points to the background -1 cluster
release-0.8.38,Handle sparse precomputed distance matrices separately
release-0.8.38,"Only non-sparse, precomputed distance matrices are allowed"
release-0.8.38,to have numpy.inf values indicating missing distances
release-0.8.38,"prediction data only applies to the persistent model, so remove"
release-0.8.38,it from the keyword args we pass on the the function
release-0.8.38,remap indices to align with original data in the case of non-finite entries.
release-0.8.38,"Unltimately, for each Ci, we only require the"
release-0.8.38,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
release-0.8.38,"So let's call this value DSPC_wrt(Ci), i.e."
release-0.8.38,density separation 'with respect to' Ci.
release-0.8.38,If exactly one of the points is noise
release-0.8.38,Set the density sparseness of the cluster
release-0.8.38,to the sparsest value seen so far.
release-0.8.38,Check whether density separations with
release-0.8.38,respect to each of these clusters can
release-0.8.38,be reduced.
release-0.8.38,"In case min_outlier_sep is still np.inf, we assign a new value to it."
release-0.8.38,This only makes sense if num_clusters = 1 since it has turned out
release-0.8.38,that the MR-MST has no edges between a noise point and a core point.
release-0.8.38,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
release-0.8.38,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
release-0.8.38,MR-MST might contain an edge with one point in Cj and ther other one
release-0.8.38,"in Ck. Here, we replace the infinite density separation of Ci by"
release-0.8.38,another large enough value.
release-0.8.38,
release-0.8.38,TODO: Think of a better yet efficient way to handle this.
release-0.8.38,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
release-0.8.38,Use a previously initialized/trained HDBSCAN
release-0.8.38,Handle the trivial case first.
release-0.8.38,Always generate prediction_data to avoid later woes
release-0.8.38,This will later be chosen according to n_clusters
release-0.8.38,Initialize and train clusterer if one was not previously supplied.
release-0.8.38,Always generate prediction data
release-0.8.38,We do not pass cluster_selection_epsilon here.
release-0.8.38,"While this adds unnecessary computation, it makes the code"
release-0.8.38,easier to read and debug.
release-0.8.38,"Train on 'X'. Do this even if the supplied clusterer was trained,"
release-0.8.38,because we want to make sure it fits 'X'.
release-0.8.38,"Pick an epsilon value right after a split produces n_clusters,"
release-0.8.38,and the don't split further for smaller epsilon (larger lambda)
release-0.8.38,Or use the specified cluster_selection_epsilon
release-0.8.38,"Extract tree related stuff, in order to re-assign labels"
release-0.8.38,Get labels according to the required cluster_selection_epsilon
release-0.8.38,Reflect the related changes in HDBSCAN.
release-0.8.38,PredictionData attached to HDBSCAN should also change.
release-0.8.38,A function re_init is defined in this module to handle this.
release-0.8.38,"From a fitted HDBSCAN model, predict for n_clusters=5"
release-0.8.38,Store prediciton data for later use.
release-0.8.38,and use this prediction data to predict on new points
release-0.8.38,Get number of fitted clusters for later use.
release-0.8.38,We'll need the condensed tree later...
release-0.8.38,"If none of the three arguments: prediction_data, n_clusters,"
release-0.8.38,"and cluster_selection_epsilon are supplied,"
release-0.8.38,then use clusterer's prediciton data directly
release-0.8.38,"If either of n_clusters or cluster_selection_epsilon were supplied,"
release-0.8.38,then build prediction data from these by modifying clusterer's
release-0.8.38,Get prediction data from clusterer
release-0.8.38,Modify prediction_data to reflect new n_clusters
release-0.8.38,"First, make a copy of prediction data to avoid modifying source"
release-0.8.38,Cluster selection method is hold by condensed_tree.
release-0.8.38,Change from 'eom' to 'leaf' if n_clusters is too large.
release-0.8.38,This change does not affect the tree associated with 'clusterer'
release-0.8.38,Re-initialize prediction_data for the specified n_clusters or epsilon
release-0.8.38,============================================================
release-0.8.38,Now we're ready to use prediction_data
release-0.8.38,"The rest of the code is copied from HDBSCAN's approximate_predict,"
release-0.8.38,but modified to use prediction_data instead of clusterer's attribute
release-0.8.38,Extract condensed tree for later use
release-0.8.38,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.38,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.38,Use the same prediction_data as clusterer's
release-0.8.38,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.38,produces a specified number of n_clusters
release-0.8.38,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.38,Create another instance of prediction_data that is consistent
release-0.8.38,with the selected value of epsilon.
release-0.8.38,Flat clustering from prediction data
release-0.8.38,Initialize probabilities
release-0.8.38,k-NN for prediciton points to training set
release-0.8.38,Loop over prediction points to compute probabilities
release-0.8.38,We need to find where in the tree the new point would go
release-0.8.38,for the purposes of outlier membership approximation
release-0.8.38,"Find row in tree where nearest neighbor drops out,"
release-0.8.38,so we can get a lambda value for the nearest neighbor
release-0.8.38,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
release-0.8.38,"Equivalently, this assigns core distance for prediction point as"
release-0.8.38,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
release-0.8.38,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.38,Use new prediction_data that points to exemplars that are specific
release-0.8.38,to the choice of n_clusters
release-0.8.38,Probabilities based on how long the nearest exemplar persists in
release-0.8.38,each cluster (with respect to most persistent exemplar)
release-0.8.38,Use new clusters that are defined by the choice of n_clusters.
release-0.8.38,Merge the two probabilities to produce a single set of probabilities
release-0.8.38,Include probability that the nearest neighbor belongs to a cluster
release-0.8.38,Rename variable so it's easy to understand what's being returned
release-0.8.38,Extract condensed tree for later use
release-0.8.38,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.38,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.38,Use the same prediction_data as clusterer's
release-0.8.38,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.38,produces a specified number of n_clusters
release-0.8.38,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.38,Create another instance of prediction_data that is consistent
release-0.8.38,with the selected value of epsilon.
release-0.8.38,Flat clustering at the chosen epsilon from prediction_data
release-0.8.38,"When no clusters found, return array of 0's"
release-0.8.38,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.38,Use new prediction_data that points to exemplars that are specific
release-0.8.38,to the choice of n_clusters
release-0.8.38,Probabilities based on how long the point persists in
release-0.8.38,each cluster (with respect to most persistent exemplar)
release-0.8.38,Use new clusters that are defined by the choice of n_clusters.
release-0.8.38,Include probability that the point belongs to a cluster
release-0.8.38,Aggregate the three probabilities to produce membership vectors
release-0.8.38,Re-name variable to clarify what's being returned.
release-0.8.38,"With method 'eom', max clusters are produced for epsilon=0,"
release-0.8.38,as computed by
release-0.8.38,Increasing epsilon can only reduce the number of ouput clusters.
release-0.8.38,"To select epsilon, consider all values where clusters are split"
release-0.8.38,Subtract the extra e-12 to avoid numerical errors in comparison
release-0.8.38,"Then, we avoid splitting for all epsilon below this."
release-0.8.38,Use an epsilon value that produces the right number of clusters.
release-0.8.38,The condensed tree of HDBSCAN has this information.
release-0.8.38,Extract the lambda levels (=1/distance) from the condensed tree
release-0.8.38,We don't want values that produce a large cluster and
release-0.8.38,just one or two individual points.
release-0.8.38,Keep only those lambda values corresponding to cluster separation;
release-0.8.38,"i.e., with child_sizes > 1"
release-0.8.38,"Get the unique values, because when two clusters fall out of one,"
release-0.8.38,the entry with lambda is repeated.
release-0.8.38,lambda values are sorted by np.unique.
release-0.8.38,"Now, get epsilon (distance threshold) as 1/lambda"
release-0.8.38,"At this epsilon, n_clusters have been split."
release-0.8.38,Stop splits at epsilons smaller than this.
release-0.8.38,"To allow for numerical errors,"
release-0.8.38,predData must be a pre-trained PredictionData instance from hdbscan
release-0.8.38,"If n_clusters is specified, compute cluster_selection_epsilon;"
release-0.8.38,This is the key modification:
release-0.8.38,Select clusters according to selection method and epsilon.
release-0.8.38,_new_select_clusters is a modification of get_clusters
release-0.8.38,from hdbscan._hdbscan_tree
release-0.8.38,"raw tree, used later to get exemplars and lambda values"
release-0.8.38,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
release-0.8.38,to the cluster labels produced as output
release-0.8.38,Re-compute lambdas and exemplars for selected clusters;
release-0.8.38,max_lambda <=> smallest distance <=> most persistent point(s)
release-0.8.38,Map all sub-clusters of selected cluster to the selected cluster's
release-0.8.38,label in output.
release-0.8.38,Map lambdas too...
release-0.8.38,Create set of exemplar points for later use.
release-0.8.38,Novel points are assigned based on cluster of closest exemplar.
release-0.8.38,"For each selected cluster, get all of its leaves,"
release-0.8.38,"and leaves of leaves, and so on..."
release-0.8.38,Largest lambda => Most persistent points
release-0.8.38,Get the most persistent points
release-0.8.38,Add most persistent points as exemplars
release-0.8.38,Add exemplars for each leaf of each selected cluster.
release-0.8.38,(exclude root)
release-0.8.38,-*- coding: utf-8 -*-
release-0.8.38,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38,
release-0.8.38,License: BSD 3 clause
release-0.8.38,"Return the only cluster, the root"
release-0.8.38,We want to get the x and y coordinates for the start of each cluster
release-0.8.38,"Initialize the leaves, since we know where they go, the iterate"
release-0.8.38,"through everything from the leaves back, setting coords as we go"
release-0.8.38,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
release-0.8.38,bottoms and widths for each rectangle. We can go through each cluster
release-0.8.38,and do this for each in turn.
release-0.8.38,Ensure we don't try to take log of zero
release-0.8.38,Finally we need the horizontal lines that occur at cluster splits.
release-0.8.38,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
release-0.8.38,"axis.plot(xs, ys, color='black', linewidth=1)"
release-0.8.38,Extract the chosen cluster bounds. If enough duplicate data points exist in the
release-0.8.38,data the lambda value might be infinite. This breaks labeling and highlighting
release-0.8.38,the chosen clusters.
release-0.8.38,Extract the plot range of the y-axis and set default center and height values for ellipses.
release-0.8.38,Extremly dense clusters might result in near infinite lambda values. Setting max_height
release-0.8.38,based on the percentile should alleviate the impact on plotting.
release-0.8.38,Set center and height to default values if necessary
release-0.8.38,Ensure the ellipse is visible
release-0.8.38,Get a 2D projection; if we have a lot of dimensions use PCA first
release-0.8.38,Use PCA to get down to 32 dimension
release-0.8.38,"node_desat=None,"
release-0.8.38,Extract node color data
release-0.8.38,Extract edge color data
release-0.8.38,Compute or extract layout
release-0.8.38,Add edges
release-0.8.38,Add FLASC features
release-0.8.38,Add raw data features
release-0.8.38,-*- coding: utf-8 -*-
release-0.8.38,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.38,
release-0.8.38,License: BSD 3 clause
release-0.8.38,The Cython routines used require contiguous arrays
release-0.8.38,The Cython routines used require contiguous arrays
release-0.8.38,We can't do much with sparse matrices ...
release-0.8.38,Need heuristic to decide when to go to boruvka;
release-0.8.38,still debugging for now
release-0.8.38,Need heuristic to decide when to go to boruvka;
release-0.8.38,still debugging for now
release-0.8.38,Support various prediction methods for predicting cluster membership
release-0.8.38,of new or unseen points. There are several ways to interpret how
release-0.8.38,"to do this correctly, so we provide several methods for"
release-0.8.38,the different use cases that may arise.
release-0.8.38,raw_condensed_tree = condensed_tree.to_numpy()
release-0.8.38,New point departs with the old
release-0.8.38,Find appropriate cluster based on lambda of new point
release-0.8.38,Find appropriate cluster based on lambda of new point
release-0.8.38,"the point is in the dataset, fix lambda for rounding errors"
release-0.8.38,We need to find where in the tree the new point would go
release-0.8.38,for the purposes of outlier membership approximation
release-0.8.38,"When no clusters found, return array of 0's"
release-0.8.38,Support branch detection within clusters.
release-0.8.38,Select finite data points
release-0.8.38,Construct tree
release-0.8.38,Allocate to maintain data point indices
release-0.8.38,Find neighbours for non-noise points
release-0.8.38,Check clusterer state
release-0.8.38,Validate parameters
release-0.8.38,Extract state
release-0.8.38,Configure parallelization
release-0.8.38,Detect branches
release-0.8.38,Maintain data indices for non-finite data
release-0.8.38,Combined result
release-0.8.38,Branching result
release-0.8.38,Clusters to branches
release-0.8.38,List points within cluster
release-0.8.38,Extract MST edges within cluster
release-0.8.38,Compute in cluster centrality
release-0.8.38,Construct cluster approximation graph
release-0.8.38,Extract centrality MST and compute single linkage
release-0.8.38,Re-label edges with data ids
release-0.8.38,Return values
release-0.8.38,Allocate output (won't be filled completely)
release-0.8.38,Fill (undirected) MST edges with within-cluster-ids
release-0.8.38,Fill neighbors with within-cluster-ids
release-0.8.38,Fill mutual reachabilities
release-0.8.38,Extract unique edges that stay within the cluster
release-0.8.38,Query KDTree/BallTree for neighours within the distance
release-0.8.38,Count number of returned edges per point
release-0.8.38,Create full edge list
release-0.8.38,Create output
release-0.8.38,Reset noise labels to k-cluster
release-0.8.38,Allocate output
release-0.8.38,Compute the labels and probabilities
release-0.8.38,Reorder other parts
release-0.8.38,import pickle
release-0.8.38,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.38,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.38,"number of clusters, ignoring noise if present"
release-0.8.38,"metric is the function reference, not the string key."
release-0.8.38,def test_rsl_unavailable_hierarchy():
release-0.8.38,clusterer = RobustSingleLinkage()
release-0.8.38,with warnings.catch_warnings(record=True) as w:
release-0.8.38,tree = clusterer.cluster_hierarchy_
release-0.8.38,assert len(w) > 0
release-0.8.38,assert tree is None
release-0.8.38,"H, y = shuffle(X, y, random_state=7)"
release-0.8.38,Disable for now -- need to refactor to meet newer standards
release-0.8.38,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.38,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.38,this fails if no $DISPLAY specified
release-0.8.38,"number of clusters, ignoring noise if present"
release-0.8.38,"number of clusters, ignoring noise if present"
release-0.8.38,"H, y = shuffle(X, y, random_state=7)"
release-0.8.38,"metric is the function reference, not the string key."
release-0.8.38,def test_hdbscan_unavailable_attributes():
release-0.8.38,clusterer = HDBSCAN(gen_min_span_tree=False)
release-0.8.38,with warnings.catch_warnings(record=True) as w:
release-0.8.38,tree = clusterer.condensed_tree_
release-0.8.38,assert len(w) > 0
release-0.8.38,assert tree is None
release-0.8.38,with warnings.catch_warnings(record=True) as w:
release-0.8.38,tree = clusterer.single_linkage_tree_
release-0.8.38,assert len(w) > 0
release-0.8.38,assert tree is None
release-0.8.38,with warnings.catch_warnings(record=True) as w:
release-0.8.38,scores = clusterer.outlier_scores_
release-0.8.38,assert len(w) > 0
release-0.8.38,assert scores is None
release-0.8.38,with warnings.catch_warnings(record=True) as w:
release-0.8.38,tree = clusterer.minimum_spanning_tree_
release-0.8.38,assert len(w) > 0
release-0.8.38,assert tree is None
release-0.8.38,def test_hdbscan_min_span_tree_availability():
release-0.8.38,clusterer = HDBSCAN().fit(X)
release-0.8.38,tree = clusterer.minimum_spanning_tree_
release-0.8.38,assert tree is None
release-0.8.38,D = distance.squareform(distance.pdist(X))
release-0.8.38,D /= np.max(D)
release-0.8.38,HDBSCAN(metric='precomputed').fit(D)
release-0.8.38,tree = clusterer.minimum_spanning_tree_
release-0.8.38,assert tree is None
release-0.8.38,no prediction data error
release-0.8.38,wrong dimensions error
release-0.8.38,no clusters warning
release-0.8.38,def test_hdbscan_membership_vector():
release-0.8.38,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.38,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
release-0.8.38,assert_array_almost_equal(
release-0.8.38,"vector,"
release-0.8.38,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
release-0.8.38,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
release-0.8.38,assert_array_almost_equal(
release-0.8.38,"vector,"
release-0.8.38,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
release-0.8.38,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
release-0.8.38,assert_array_almost_equal(
release-0.8.38,"vector,"
release-0.8.38,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
release-0.8.38,
release-0.8.38,def test_hdbscan_all_points_membership_vectors():
release-0.8.38,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.38,vects = all_points_membership_vectors(clusterer)
release-0.8.38,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
release-0.8.38,"2.52734246e-001,"
release-0.8.38,8.38299608e-002]))
release-0.8.38,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
release-0.8.38,"8.35882503e-002,"
release-0.8.38,1.07356406e-001]))
release-0.8.38,without epsilon we should see many noise points as children of root.
release-0.8.38,for this random seed an epsilon of 0.2 will produce exactly 2 noise
release-0.8.38,points at that cut in single linkage.
release-0.8.38,Disable for now -- need to refactor to meet newer standards
release-0.8.38,Probably not applicable now #
release-0.8.38,def test_dbscan_sparse():
release-0.8.38,def test_dbscan_balltree():
release-0.8.38,def test_pickle():
release-0.8.38,def test_dbscan_core_samples_toy():
release-0.8.38,def test_boundaries():
release-0.8.38,"Given negative, zero and positive denominator and positive numerator"
release-0.8.38,Make sure safe division is always positive and doesn't raise ZeroDivision error
release-0.8.38,--- Branch Detection Data
release-0.8.38,There are no fast metrics that are not supported by KDTree or BallTree!
release-0.8.38,"Cosine and arccoss both crash HDBSCAN. They go down the BallTree path, but"
release-0.8.38,the implementation does not support them.
release-0.8.38,Distance matrix
release-0.8.38,Sparse matrix
release-0.8.38,--- Detecting Branches
release-0.8.38,Generate single-cluster data
release-0.8.38,"Without persistence, find 6 branches"
release-0.8.38,"Mac & Windows give 71, Linux gives 72. Probably different random values."
release-0.8.38,Adding presistence removes some branches
release-0.8.38,--- Branch Detector Functionality
release-0.8.38,A point on a branch (not noise) exact labels change per run
release-0.8.38,A point in a cluster
release-0.8.38,A noise point
release-0.8.38,--- Attribute Output Formats
release-0.8.38,--- Attribute plots
release-0.8.38,Ignore future warnings thrown by sklearn
release-0.8.38,Create a nice dataset with 6 circular clusters and 2 moons
release-0.8.38,"Given, the base HDBSCAN with method 'eom'"
release-0.8.38,"When we ask for flat clustering with same n_clusters,"
release-0.8.38,"Then, the labels and probabilities should match"
release-0.8.38,"Given, the base HDBSCAN with method 'leaf'"
release-0.8.38,"When we ask for flat clustering with same n_clusters,"
release-0.8.38,"Then, the labels and probabilities should match"
release-0.8.38,Method 'eom'...
release-0.8.38,"Given, a flat clustering for required n_clusters,"
release-0.8.38,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.38,"Then, the labels and probabilities should match"
release-0.8.38,Method 'leaf'...
release-0.8.38,"Given, a flat clustering for required n_clusters,"
release-0.8.38,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.38,"Then, the labels and probabilities should match"
release-0.8.38,"Given the max number of clusters that can be produced by 'eom',"
release-0.8.38,(these are produced for epsilon=0) (??? Needs verification)
release-0.8.38,"When we try flat clustering with 'eom' method for more n_clusters,"
release-0.8.38,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.38,"assert ""Cannot predict"" in str(w[-1].message)"
release-0.8.38,"the resulting clusterer switches to using method 'leaf',"
release-0.8.38,and the resulting probabilities and labels must match
release-0.8.38,"Given the base HDBSCAN trained on some data,"
release-0.8.38,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.38,"Then, the clustering should match that due to approximate_predict,"
release-0.8.38,"Given a flat clustering trained for some n_clusters,"
release-0.8.38,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.38,"Then, the number of clusters produced must match the original n_clusters"
release-0.8.38,and all probabilities are <= 1.
release-0.8.38,"Given a flat clustering trained for some n_clusters,"
release-0.8.38,"When using approximate_predict_flat with specified n_clusters,"
release-0.8.38,"Then, the requested number of clusters must be produced"
release-0.8.38,and all probabilities are <= 1.
release-0.8.38,When using approximate_predict_flat with more clusters
release-0.8.38,"than 'eom' can handle,"
release-0.8.38,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.38,But the requested number of clusters must still be produced using 'leaf'
release-0.8.38,and all probabilities are <= 1.
release-0.8.38,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38,"When membership_vector_flat is called with new data,"
release-0.8.38,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38,and the number of points should equal those in the test set
release-0.8.38,and all probabilities are <= 1.
release-0.8.38,========================================
release-0.8.38,"Given a flat clustering for a specified n_clusters,"
release-0.8.38,"When membership_vector_flat is called with new data,"
release-0.8.38,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38,and the number of points should equal those in the test set
release-0.8.38,and all probabilities are <= 1.
release-0.8.38,Ignore user warnings in this function
release-0.8.38,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.38,"Then the number of clusters in memberships should be as requested,"
release-0.8.38,and the number of points should equal those in the test set
release-0.8.38,and all probabilities are <= 1.
release-0.8.38,========================================
release-0.8.38,"Given a flat clustering for a specified n_clusters,"
release-0.8.38,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.38,"Then the number of clusters in memberships should be as requested,"
release-0.8.38,and the number of points should equal those in the test set
release-0.8.38,and all probabilities are <= 1.
release-0.8.38,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38,"When all_points_membership_vectors_flat is called,"
release-0.8.38,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38,and the number of points should equal those in the training set
release-0.8.38,and all probabilities are <= 1.
release-0.8.38,========================================
release-0.8.38,"Given a flat clustering for a specified n_clusters,"
release-0.8.38,"When all_points_membership_vectors_flat is called,"
release-0.8.38,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.38,and the number of points should equal those in the training set
release-0.8.38,and all probabilities are <= 1.
release-0.8.38,Ignore user warnings in this function
release-0.8.38,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.38,"When all_points_membership_vectors_flat is called for some n_clusters,"
release-0.8.38,"Then the number of clusters in memberships should be as requested,"
release-0.8.38,and the number of points should equal those in the training set
release-0.8.38,and all probabilities are <= 1.
release-0.8.38,========================================
release-0.8.38,"Given a flat clustering for a specified n_clusters,"
release-0.8.38,"When membership_vector_flat is called for some n_clusters,"
release-0.8.38,"Then the number of clusters in memberships should be as requested,"
release-0.8.38,and the number of points should equal those in the training set
release-0.8.38,and all probabilities are <= 1.
release-0.8.38,Generate datasets. We choose the size big enough to see the scalability
release-0.8.38,"of the algorithms, but not too big to avoid too long running times"
release-0.8.38,normalize dataset for easier parameter selection
release-0.8.38,estimate bandwidth for mean shift
release-0.8.38,connectivity matrix for structured Ward
release-0.8.38,make connectivity symmetric
release-0.8.38,create clustering estimators
release-0.8.38,predict cluster memberships
release-0.8.38,plot
release-0.8.38,-*- coding: utf-8 -*-
release-0.8.38,#############################################################################
release-0.8.38,Generate sample data
release-0.8.38,#############################################################################
release-0.8.38,Compute DBSCAN
release-0.8.38,"Number of clusters in labels, ignoring noise if present."
release-0.8.38,#############################################################################
release-0.8.38,Plot result
release-0.8.38,Black removed and is used for noise instead.
release-0.8.38,Black used for noise.
release-0.8.38,Black used for noise.
release-0.8.38,-*- coding: utf-8 -*-
release-0.8.38,
release-0.8.38,"hdbscan documentation build configuration file, created by"
release-0.8.38,sphinx-quickstart on Sat May 28 10:34:44 2016.
release-0.8.38,
release-0.8.38,This file is execfile()d with the current directory set to its
release-0.8.38,containing dir.
release-0.8.38,
release-0.8.38,Note that not all possible configuration values are present in this
release-0.8.38,autogenerated file.
release-0.8.38,
release-0.8.38,All configuration values have a default; values that are commented out
release-0.8.38,serve to show the default.
release-0.8.38,"If extensions (or modules to document with autodoc) are in another directory,"
release-0.8.38,add these directories to sys.path here. If the directory is relative to the
release-0.8.38,"documentation root, use os.path.abspath to make it absolute, like shown here."
release-0.8.38,"## We now install the package in a virtualenv to build docs, so this is not needed"
release-0.8.38,"sys.path.insert(0, os.path.abspath('../'))"
release-0.8.38,-- General configuration ------------------------------------------------
release-0.8.38,"If your documentation needs a minimal Sphinx version, state it here."
release-0.8.38,needs_sphinx = '1.0'
release-0.8.38,"Add any Sphinx extension module names here, as strings. They can be"
release-0.8.38,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
release-0.8.38,ones.
release-0.8.38,"'sphinx.ext.napoleon',"
release-0.8.38,'numpy_ext.numpydoc'
release-0.8.38,napoleon_google_docstring = False
release-0.8.38,napoleon_numpy_docstring = True
release-0.8.38,"Add any paths that contain templates here, relative to this directory."
release-0.8.38,The suffix(es) of source filenames.
release-0.8.38,You can specify multiple suffix as a list of string:
release-0.8.38,"source_suffix = ['.rst', '.md']"
release-0.8.38,The encoding of source files.
release-0.8.38,source_encoding = 'utf-8-sig'
release-0.8.38,The master toctree document.
release-0.8.38,General information about the project.
release-0.8.38,"The version info for the project you're documenting, acts as replacement for"
release-0.8.38,"|version| and |release|, also used in various other places throughout the"
release-0.8.38,built documents.
release-0.8.38,
release-0.8.38,The short X.Y version.
release-0.8.38,"The full version, including alpha/beta/rc tags."
release-0.8.38,The language for content autogenerated by Sphinx. Refer to documentation
release-0.8.38,for a list of supported languages.
release-0.8.38,
release-0.8.38,This is also used if you do content translation via gettext catalogs.
release-0.8.38,"Usually you set ""language"" from the command line for these cases."
release-0.8.38,"There are two options for replacing |today|: either, you set today to some"
release-0.8.38,"non-false value, then it is used:"
release-0.8.38,today = ''
release-0.8.38,"Else, today_fmt is used as the format for a strftime call."
release-0.8.38,"today_fmt = '%B %d, %Y'"
release-0.8.38,"List of patterns, relative to source directory, that match files and"
release-0.8.38,directories to ignore when looking for source files.
release-0.8.38,The reST default role (used for this markup: `text`) to use for all
release-0.8.38,documents.
release-0.8.38,default_role = None
release-0.8.38,"If true, '()' will be appended to :func: etc. cross-reference text."
release-0.8.38,add_function_parentheses = True
release-0.8.38,"If true, the current module name will be prepended to all description"
release-0.8.38,unit titles (such as .. function::).
release-0.8.38,add_module_names = True
release-0.8.38,"If true, sectionauthor and moduleauthor directives will be shown in the"
release-0.8.38,output. They are ignored by default.
release-0.8.38,show_authors = False
release-0.8.38,The name of the Pygments (syntax highlighting) style to use.
release-0.8.38,A list of ignored prefixes for module index sorting.
release-0.8.38,modindex_common_prefix = []
release-0.8.38,"If true, keep warnings as ""system message"" paragraphs in the built documents."
release-0.8.38,keep_warnings = False
release-0.8.38,"If true, `todo` and `todoList` produce output, else they produce nothing."
release-0.8.38,-- Options for HTML output ----------------------------------------------
release-0.8.38,The theme to use for HTML and HTML Help pages.  See the documentation for
release-0.8.38,a list of builtin themes.
release-0.8.38,html_theme = 'alabaster'
release-0.8.38,Theme options are theme-specific and customize the look and feel of a theme
release-0.8.38,"further.  For a list of options available for each theme, see the"
release-0.8.38,documentation.
release-0.8.38,html_theme_options = {}
release-0.8.38,"Add any paths that contain custom themes here, relative to this directory."
release-0.8.38,html_theme_path = []
release-0.8.38,"The name for this set of Sphinx documents.  If None, it defaults to"
release-0.8.38,"""<project> v<release> documentation""."
release-0.8.38,html_title = None
release-0.8.38,A shorter title for the navigation bar.  Default is the same as html_title.
release-0.8.38,html_short_title = None
release-0.8.38,The name of an image file (relative to this directory) to place at the top
release-0.8.38,of the sidebar.
release-0.8.38,html_logo = None
release-0.8.38,The name of an image file (within the static path) to use as favicon of the
release-0.8.38,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
release-0.8.38,pixels large.
release-0.8.38,html_favicon = None
release-0.8.38,"Add any paths that contain custom static files (such as style sheets) here,"
release-0.8.38,"relative to this directory. They are copied after the builtin static files,"
release-0.8.38,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
release-0.8.38,Add any extra paths that contain custom files (such as robots.txt or
release-0.8.38,".htaccess) here, relative to this directory. These files are copied"
release-0.8.38,directly to the root of the documentation.
release-0.8.38,html_extra_path = []
release-0.8.38,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
release-0.8.38,using the given strftime format.
release-0.8.38,"html_last_updated_fmt = '%b %d, %Y'"
release-0.8.38,"If true, SmartyPants will be used to convert quotes and dashes to"
release-0.8.38,typographically correct entities.
release-0.8.38,html_use_smartypants = True
release-0.8.38,"Custom sidebar templates, maps document names to template names."
release-0.8.38,html_sidebars = {}
release-0.8.38,"Additional templates that should be rendered to pages, maps page names to"
release-0.8.38,template names.
release-0.8.38,html_additional_pages = {}
release-0.8.38,"If false, no module index is generated."
release-0.8.38,html_domain_indices = True
release-0.8.38,"If false, no index is generated."
release-0.8.38,html_use_index = True
release-0.8.38,"If true, the index is split into individual pages for each letter."
release-0.8.38,html_split_index = False
release-0.8.38,"If true, links to the reST sources are added to the pages."
release-0.8.38,html_show_sourcelink = True
release-0.8.38,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
release-0.8.38,html_show_sphinx = True
release-0.8.38,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
release-0.8.38,html_show_copyright = True
release-0.8.38,"If true, an OpenSearch description file will be output, and all pages will"
release-0.8.38,contain a <link> tag referring to it.  The value of this option must be the
release-0.8.38,base URL from which the finished HTML is served.
release-0.8.38,html_use_opensearch = ''
release-0.8.38,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
release-0.8.38,html_file_suffix = None
release-0.8.38,Language to be used for generating the HTML full-text search index.
release-0.8.38,Sphinx supports the following languages:
release-0.8.38,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
release-0.8.38,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
release-0.8.38,html_search_language = 'en'
release-0.8.38,"A dictionary with options for the search language support, empty by default."
release-0.8.38,Now only 'ja' uses this config value
release-0.8.38,html_search_options = {'type': 'default'}
release-0.8.38,The name of a javascript file (relative to the configuration directory) that
release-0.8.38,"implements a search results scorer. If empty, the default will be used."
release-0.8.38,html_search_scorer = 'scorer.js'
release-0.8.38,Output file base name for HTML help builder.
release-0.8.38,-- Options for LaTeX output ---------------------------------------------
release-0.8.38,The paper size ('letterpaper' or 'a4paper').
release-0.8.38,"'papersize': 'letterpaper',"
release-0.8.38,"The font size ('10pt', '11pt' or '12pt')."
release-0.8.38,"'pointsize': '10pt',"
release-0.8.38,Additional stuff for the LaTeX preamble.
release-0.8.38,"'preamble': '',"
release-0.8.38,Latex figure (float) alignment
release-0.8.38,"'figure_align': 'htbp',"
release-0.8.38,Grouping the document tree into LaTeX files. List of tuples
release-0.8.38,"(source start file, target name, title,"
release-0.8.38,"author, documentclass [howto, manual, or own class])."
release-0.8.38,The name of an image file (relative to this directory) to place at the top of
release-0.8.38,the title page.
release-0.8.38,latex_logo = None
release-0.8.38,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
release-0.8.38,not chapters.
release-0.8.38,latex_use_parts = False
release-0.8.38,"If true, show page references after internal links."
release-0.8.38,latex_show_pagerefs = False
release-0.8.38,"If true, show URL addresses after external links."
release-0.8.38,latex_show_urls = False
release-0.8.38,Documents to append as an appendix to all manuals.
release-0.8.38,latex_appendices = []
release-0.8.38,"If false, no module index is generated."
release-0.8.38,latex_domain_indices = True
release-0.8.38,-- Options for manual page output ---------------------------------------
release-0.8.38,One entry per manual page. List of tuples
release-0.8.38,"(source start file, name, description, authors, manual section)."
release-0.8.38,"If true, show URL addresses after external links."
release-0.8.38,man_show_urls = False
release-0.8.38,-- Options for Texinfo output -------------------------------------------
release-0.8.38,Grouping the document tree into Texinfo files. List of tuples
release-0.8.38,"(source start file, target name, title, author,"
release-0.8.38,"dir menu entry, description, category)"
release-0.8.38,Documents to append as an appendix to all manuals.
release-0.8.38,texinfo_appendices = []
release-0.8.38,"If false, no module index is generated."
release-0.8.38,texinfo_domain_indices = True
release-0.8.38,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.38,texinfo_show_urls = 'footnote'
release-0.8.38,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
release-0.8.38,texinfo_no_detailmenu = False
release-0.8.38,-- Options for Epub output ----------------------------------------------
release-0.8.38,Bibliographic Dublin Core info.
release-0.8.38,The basename for the epub file. It defaults to the project name.
release-0.8.38,epub_basename = project
release-0.8.38,The HTML theme for the epub output. Since the default themes are not
release-0.8.38,"optimized for small screen space, using the same theme for HTML and epub"
release-0.8.38,"output is usually not wise. This defaults to 'epub', a theme designed to save"
release-0.8.38,visual space.
release-0.8.38,epub_theme = 'epub'
release-0.8.38,The language of the text. It defaults to the language option
release-0.8.38,or 'en' if the language is not set.
release-0.8.38,epub_language = ''
release-0.8.38,The scheme of the identifier. Typical schemes are ISBN or URL.
release-0.8.38,epub_scheme = ''
release-0.8.38,The unique identifier of the text. This can be a ISBN number
release-0.8.38,or the project homepage.
release-0.8.38,epub_identifier = ''
release-0.8.38,A unique identification for the text.
release-0.8.38,epub_uid = ''
release-0.8.38,A tuple containing the cover image and cover page html template filenames.
release-0.8.38,epub_cover = ()
release-0.8.38,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
release-0.8.38,epub_guide = ()
release-0.8.38,HTML files that should be inserted before the pages created by sphinx.
release-0.8.38,The format is a list of tuples containing the path and title.
release-0.8.38,epub_pre_files = []
release-0.8.38,HTML files that should be inserted after the pages created by sphinx.
release-0.8.38,The format is a list of tuples containing the path and title.
release-0.8.38,epub_post_files = []
release-0.8.38,A list of files that should not be packed into the epub file.
release-0.8.38,The depth of the table of contents in toc.ncx.
release-0.8.38,epub_tocdepth = 3
release-0.8.38,Allow duplicate toc entries.
release-0.8.38,epub_tocdup = True
release-0.8.38,Choose between 'default' and 'includehidden'.
release-0.8.38,epub_tocscope = 'default'
release-0.8.38,Fix unsupported image types using the Pillow.
release-0.8.38,epub_fix_images = False
release-0.8.38,Scale large images.
release-0.8.38,epub_max_image_width = 0
release-0.8.38,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.38,epub_show_urls = 'inline'
release-0.8.38,"If false, no index is generated."
release-0.8.38,epub_use_index = True
release-0.8.37,"Import numpy here, only when headers are needed"
release-0.8.37,Add numpy headers to include_dirs
release-0.8.37,Call original build_ext command
release-0.8.37,The dependencies are the same as the contents of requirements.txt
release-0.8.37,"A little ""fancy"" we select from the flattened array reshape back"
release-0.8.37,(Fortran format to get indexing right) and take the product to do an and
release-0.8.37,then convert back to boolean type.
release-0.8.37,Density sparseness is not well defined if there are no
release-0.8.37,internal edges (as per the referenced paper). However
release-0.8.37,MATLAB code from the original authors simply selects the
release-0.8.37,largest of *all* the edges in the case that there are
release-0.8.37,"no internal edges, so we do the same here"
release-0.8.37,"If there are any internal edges, then subselect them out"
release-0.8.37,If there are no internal edges then we want to take the
release-0.8.37,"max over all the edges that exist in the MST, so we simply"
release-0.8.37,do nothing and return all the edges in the MST.
release-0.8.37,-*- coding: utf-8 -*-
release-0.8.37,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.37,Steve Astels <sastels@gmail.com>
release-0.8.37,John Healy <jchealy@gmail.com>
release-0.8.37,
release-0.8.37,License: BSD 3 clause
release-0.8.37,"Treating this case explicitly, instead of letting"
release-0.8.37,"sklearn.metrics.pairwise_distances handle it,"
release-0.8.37,enables the usage of numpy.inf in the distance
release-0.8.37,matrix to indicate missing distance information.
release-0.8.37,TODO: Check if copying is necessary
release-0.8.37,raise TypeError('Sparse distance matrices not yet supported')
release-0.8.37,Warn if the MST couldn't be constructed around the missing distances
release-0.8.37,mst_linkage_core does not generate a full minimal spanning tree
release-0.8.37,If a tree is required then we must build the edges from the information
release-0.8.37,returned by mst_linkage_core (i.e. just the order of points to be merged)
release-0.8.37,Sort edges of the min_spanning_tree by weight
release-0.8.37,Convert edge list into standard hierarchical clustering format
release-0.8.37,Check for connected component on X
release-0.8.37,Compute sparse mutual reachability graph
release-0.8.37,"if max_dist > 0, max distance to use when the reachability is infinite"
release-0.8.37,Check connected component on mutual reachability
release-0.8.37,"If more than one component, it means that even if the distance matrix X"
release-0.8.37,"has one component, there exists with less than `min_samples` neighbors"
release-0.8.37,Compute the minimum spanning tree for the sparse graph
release-0.8.37,Convert the graph to scipy cluster array format
release-0.8.37,Sort edges of the min_spanning_tree by weight
release-0.8.37,Convert edge list into standard hierarchical clustering format
release-0.8.37,The Cython routines used require contiguous arrays
release-0.8.37,TO DO: Deal with p for minkowski appropriately
release-0.8.37,Get distance to kth nearest neighbour
release-0.8.37,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.37,Sort edges of the min_spanning_tree by weight
release-0.8.37,Convert edge list into standard hierarchical clustering format
release-0.8.37,The Cython routines used require contiguous arrays
release-0.8.37,Get distance to kth nearest neighbour
release-0.8.37,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.37,Sort edges of the min_spanning_tree by weight
release-0.8.37,Convert edge list into standard hierarchical clustering format
release-0.8.37,Sort edges of the min_spanning_tree by weight
release-0.8.37,Convert edge list into standard hierarchical clustering format
release-0.8.37,Sort edges of the min_spanning_tree by weight
release-0.8.37,Convert edge list into standard hierarchical clustering format
release-0.8.37,Checks input and converts to an nd-array where possible
release-0.8.37,"Only non-sparse, precomputed distance matrices are handled here"
release-0.8.37,and thereby allowed to contain numpy.inf for missing distances
release-0.8.37,Python 2 and 3 compliant string_type checking
release-0.8.37,We can't do much with sparse matrices ...
release-0.8.37,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.37,still debugging for now
release-0.8.37,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.37,still debugging for now
release-0.8.37,Inherits from sklearn
release-0.8.37,Non-precomputed matrices may contain non-finite values.
release-0.8.37,Rows with these values
release-0.8.37,Pass only the purely finite indices into hdbscan
release-0.8.37,We will later assign all non-finite points to the background -1 cluster
release-0.8.37,Handle sparse precomputed distance matrices separately
release-0.8.37,"Only non-sparse, precomputed distance matrices are allowed"
release-0.8.37,to have numpy.inf values indicating missing distances
release-0.8.37,"prediction data only applies to the persistent model, so remove"
release-0.8.37,it from the keyword args we pass on the the function
release-0.8.37,remap indices to align with original data in the case of non-finite entries.
release-0.8.37,"Unltimately, for each Ci, we only require the"
release-0.8.37,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
release-0.8.37,"So let's call this value DSPC_wrt(Ci), i.e."
release-0.8.37,density separation 'with respect to' Ci.
release-0.8.37,If exactly one of the points is noise
release-0.8.37,Set the density sparseness of the cluster
release-0.8.37,to the sparsest value seen so far.
release-0.8.37,Check whether density separations with
release-0.8.37,respect to each of these clusters can
release-0.8.37,be reduced.
release-0.8.37,"In case min_outlier_sep is still np.inf, we assign a new value to it."
release-0.8.37,This only makes sense if num_clusters = 1 since it has turned out
release-0.8.37,that the MR-MST has no edges between a noise point and a core point.
release-0.8.37,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
release-0.8.37,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
release-0.8.37,MR-MST might contain an edge with one point in Cj and ther other one
release-0.8.37,"in Ck. Here, we replace the infinite density separation of Ci by"
release-0.8.37,another large enough value.
release-0.8.37,
release-0.8.37,TODO: Think of a better yet efficient way to handle this.
release-0.8.37,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
release-0.8.37,Use a previously initialized/trained HDBSCAN
release-0.8.37,Handle the trivial case first.
release-0.8.37,Always generate prediction_data to avoid later woes
release-0.8.37,This will later be chosen according to n_clusters
release-0.8.37,Initialize and train clusterer if one was not previously supplied.
release-0.8.37,Always generate prediction data
release-0.8.37,We do not pass cluster_selection_epsilon here.
release-0.8.37,"While this adds unnecessary computation, it makes the code"
release-0.8.37,easier to read and debug.
release-0.8.37,"Train on 'X'. Do this even if the supplied clusterer was trained,"
release-0.8.37,because we want to make sure it fits 'X'.
release-0.8.37,"Pick an epsilon value right after a split produces n_clusters,"
release-0.8.37,and the don't split further for smaller epsilon (larger lambda)
release-0.8.37,Or use the specified cluster_selection_epsilon
release-0.8.37,"Extract tree related stuff, in order to re-assign labels"
release-0.8.37,Get labels according to the required cluster_selection_epsilon
release-0.8.37,Reflect the related changes in HDBSCAN.
release-0.8.37,PredictionData attached to HDBSCAN should also change.
release-0.8.37,A function re_init is defined in this module to handle this.
release-0.8.37,"From a fitted HDBSCAN model, predict for n_clusters=5"
release-0.8.37,Store prediciton data for later use.
release-0.8.37,and use this prediction data to predict on new points
release-0.8.37,Get number of fitted clusters for later use.
release-0.8.37,We'll need the condensed tree later...
release-0.8.37,"If none of the three arguments: prediction_data, n_clusters,"
release-0.8.37,"and cluster_selection_epsilon are supplied,"
release-0.8.37,then use clusterer's prediciton data directly
release-0.8.37,"If either of n_clusters or cluster_selection_epsilon were supplied,"
release-0.8.37,then build prediction data from these by modifying clusterer's
release-0.8.37,Get prediction data from clusterer
release-0.8.37,Modify prediction_data to reflect new n_clusters
release-0.8.37,"First, make a copy of prediction data to avoid modifying source"
release-0.8.37,Cluster selection method is hold by condensed_tree.
release-0.8.37,Change from 'eom' to 'leaf' if n_clusters is too large.
release-0.8.37,This change does not affect the tree associated with 'clusterer'
release-0.8.37,Re-initialize prediction_data for the specified n_clusters or epsilon
release-0.8.37,============================================================
release-0.8.37,Now we're ready to use prediction_data
release-0.8.37,"The rest of the code is copied from HDBSCAN's approximate_predict,"
release-0.8.37,but modified to use prediction_data instead of clusterer's attribute
release-0.8.37,Extract condensed tree for later use
release-0.8.37,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.37,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.37,Use the same prediction_data as clusterer's
release-0.8.37,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.37,produces a specified number of n_clusters
release-0.8.37,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.37,Create another instance of prediction_data that is consistent
release-0.8.37,with the selected value of epsilon.
release-0.8.37,Flat clustering from prediction data
release-0.8.37,Initialize probabilities
release-0.8.37,k-NN for prediciton points to training set
release-0.8.37,Loop over prediction points to compute probabilities
release-0.8.37,We need to find where in the tree the new point would go
release-0.8.37,for the purposes of outlier membership approximation
release-0.8.37,"Find row in tree where nearest neighbor drops out,"
release-0.8.37,so we can get a lambda value for the nearest neighbor
release-0.8.37,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
release-0.8.37,"Equivalently, this assigns core distance for prediction point as"
release-0.8.37,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
release-0.8.37,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.37,Use new prediction_data that points to exemplars that are specific
release-0.8.37,to the choice of n_clusters
release-0.8.37,Probabilities based on how long the nearest exemplar persists in
release-0.8.37,each cluster (with respect to most persistent exemplar)
release-0.8.37,Use new clusters that are defined by the choice of n_clusters.
release-0.8.37,Merge the two probabilities to produce a single set of probabilities
release-0.8.37,Include probability that the nearest neighbor belongs to a cluster
release-0.8.37,Rename variable so it's easy to understand what's being returned
release-0.8.37,Extract condensed tree for later use
release-0.8.37,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.37,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.37,Use the same prediction_data as clusterer's
release-0.8.37,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.37,produces a specified number of n_clusters
release-0.8.37,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.37,Create another instance of prediction_data that is consistent
release-0.8.37,with the selected value of epsilon.
release-0.8.37,Flat clustering at the chosen epsilon from prediction_data
release-0.8.37,"When no clusters found, return array of 0's"
release-0.8.37,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.37,Use new prediction_data that points to exemplars that are specific
release-0.8.37,to the choice of n_clusters
release-0.8.37,Probabilities based on how long the point persists in
release-0.8.37,each cluster (with respect to most persistent exemplar)
release-0.8.37,Use new clusters that are defined by the choice of n_clusters.
release-0.8.37,Include probability that the point belongs to a cluster
release-0.8.37,Aggregate the three probabilities to produce membership vectors
release-0.8.37,Re-name variable to clarify what's being returned.
release-0.8.37,"With method 'eom', max clusters are produced for epsilon=0,"
release-0.8.37,as computed by
release-0.8.37,Increasing epsilon can only reduce the number of ouput clusters.
release-0.8.37,"To select epsilon, consider all values where clusters are split"
release-0.8.37,Subtract the extra e-12 to avoid numerical errors in comparison
release-0.8.37,"Then, we avoid splitting for all epsilon below this."
release-0.8.37,Use an epsilon value that produces the right number of clusters.
release-0.8.37,The condensed tree of HDBSCAN has this information.
release-0.8.37,Extract the lambda levels (=1/distance) from the condensed tree
release-0.8.37,We don't want values that produce a large cluster and
release-0.8.37,just one or two individual points.
release-0.8.37,Keep only those lambda values corresponding to cluster separation;
release-0.8.37,"i.e., with child_sizes > 1"
release-0.8.37,"Get the unique values, because when two clusters fall out of one,"
release-0.8.37,the entry with lambda is repeated.
release-0.8.37,lambda values are sorted by np.unique.
release-0.8.37,"Now, get epsilon (distance threshold) as 1/lambda"
release-0.8.37,"At this epsilon, n_clusters have been split."
release-0.8.37,Stop splits at epsilons smaller than this.
release-0.8.37,"To allow for numerical errors,"
release-0.8.37,predData must be a pre-trained PredictionData instance from hdbscan
release-0.8.37,"If n_clusters is specified, compute cluster_selection_epsilon;"
release-0.8.37,This is the key modification:
release-0.8.37,Select clusters according to selection method and epsilon.
release-0.8.37,_new_select_clusters is a modification of get_clusters
release-0.8.37,from hdbscan._hdbscan_tree
release-0.8.37,"raw tree, used later to get exemplars and lambda values"
release-0.8.37,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
release-0.8.37,to the cluster labels produced as output
release-0.8.37,Re-compute lambdas and exemplars for selected clusters;
release-0.8.37,max_lambda <=> smallest distance <=> most persistent point(s)
release-0.8.37,Map all sub-clusters of selected cluster to the selected cluster's
release-0.8.37,label in output.
release-0.8.37,Map lambdas too...
release-0.8.37,Create set of exemplar points for later use.
release-0.8.37,Novel points are assigned based on cluster of closest exemplar.
release-0.8.37,"For each selected cluster, get all of its leaves,"
release-0.8.37,"and leaves of leaves, and so on..."
release-0.8.37,Largest lambda => Most persistent points
release-0.8.37,Get the most persistent points
release-0.8.37,Add most persistent points as exemplars
release-0.8.37,Add exemplars for each leaf of each selected cluster.
release-0.8.37,(exclude root)
release-0.8.37,-*- coding: utf-8 -*-
release-0.8.37,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.37,
release-0.8.37,License: BSD 3 clause
release-0.8.37,"Return the only cluster, the root"
release-0.8.37,We want to get the x and y coordinates for the start of each cluster
release-0.8.37,"Initialize the leaves, since we know where they go, the iterate"
release-0.8.37,"through everything from the leaves back, setting coords as we go"
release-0.8.37,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
release-0.8.37,bottoms and widths for each rectangle. We can go through each cluster
release-0.8.37,and do this for each in turn.
release-0.8.37,Ensure we don't try to take log of zero
release-0.8.37,Finally we need the horizontal lines that occur at cluster splits.
release-0.8.37,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
release-0.8.37,"axis.plot(xs, ys, color='black', linewidth=1)"
release-0.8.37,Extract the chosen cluster bounds. If enough duplicate data points exist in the
release-0.8.37,data the lambda value might be infinite. This breaks labeling and highlighting
release-0.8.37,the chosen clusters.
release-0.8.37,Extract the plot range of the y-axis and set default center and height values for ellipses.
release-0.8.37,Extremly dense clusters might result in near infinite lambda values. Setting max_height
release-0.8.37,based on the percentile should alleviate the impact on plotting.
release-0.8.37,Set center and height to default values if necessary
release-0.8.37,Ensure the ellipse is visible
release-0.8.37,Get a 2D projection; if we have a lot of dimensions use PCA first
release-0.8.37,Use PCA to get down to 32 dimension
release-0.8.37,-*- coding: utf-8 -*-
release-0.8.37,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.37,
release-0.8.37,License: BSD 3 clause
release-0.8.37,The Cython routines used require contiguous arrays
release-0.8.37,The Cython routines used require contiguous arrays
release-0.8.37,We can't do much with sparse matrices ...
release-0.8.37,Need heuristic to decide when to go to boruvka;
release-0.8.37,still debugging for now
release-0.8.37,Need heuristic to decide when to go to boruvka;
release-0.8.37,still debugging for now
release-0.8.37,Support various prediction methods for predicting cluster membership
release-0.8.37,of new or unseen points. There are several ways to interpret how
release-0.8.37,"to do this correctly, so we provide several methods for"
release-0.8.37,the different use cases that may arise.
release-0.8.37,raw_condensed_tree = condensed_tree.to_numpy()
release-0.8.37,New point departs with the old
release-0.8.37,Find appropriate cluster based on lambda of new point
release-0.8.37,Find appropriate cluster based on lambda of new point
release-0.8.37,"the point is in the dataset, fix lambda for rounding errors"
release-0.8.37,We need to find where in the tree the new point would go
release-0.8.37,for the purposes of outlier membership approximation
release-0.8.37,"When no clusters found, return array of 0's"
release-0.8.37,import pickle
release-0.8.37,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.37,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.37,"number of clusters, ignoring noise if present"
release-0.8.37,"metric is the function reference, not the string key."
release-0.8.37,def test_rsl_unavailable_hierarchy():
release-0.8.37,clusterer = RobustSingleLinkage()
release-0.8.37,with warnings.catch_warnings(record=True) as w:
release-0.8.37,tree = clusterer.cluster_hierarchy_
release-0.8.37,assert len(w) > 0
release-0.8.37,assert tree is None
release-0.8.37,"H, y = shuffle(X, y, random_state=7)"
release-0.8.37,Disable for now -- need to refactor to meet newer standards
release-0.8.37,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.37,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.37,this fails if no $DISPLAY specified
release-0.8.37,"number of clusters, ignoring noise if present"
release-0.8.37,"number of clusters, ignoring noise if present"
release-0.8.37,"H, y = shuffle(X, y, random_state=7)"
release-0.8.37,"metric is the function reference, not the string key."
release-0.8.37,def test_hdbscan_unavailable_attributes():
release-0.8.37,clusterer = HDBSCAN(gen_min_span_tree=False)
release-0.8.37,with warnings.catch_warnings(record=True) as w:
release-0.8.37,tree = clusterer.condensed_tree_
release-0.8.37,assert len(w) > 0
release-0.8.37,assert tree is None
release-0.8.37,with warnings.catch_warnings(record=True) as w:
release-0.8.37,tree = clusterer.single_linkage_tree_
release-0.8.37,assert len(w) > 0
release-0.8.37,assert tree is None
release-0.8.37,with warnings.catch_warnings(record=True) as w:
release-0.8.37,scores = clusterer.outlier_scores_
release-0.8.37,assert len(w) > 0
release-0.8.37,assert scores is None
release-0.8.37,with warnings.catch_warnings(record=True) as w:
release-0.8.37,tree = clusterer.minimum_spanning_tree_
release-0.8.37,assert len(w) > 0
release-0.8.37,assert tree is None
release-0.8.37,def test_hdbscan_min_span_tree_availability():
release-0.8.37,clusterer = HDBSCAN().fit(X)
release-0.8.37,tree = clusterer.minimum_spanning_tree_
release-0.8.37,assert tree is None
release-0.8.37,D = distance.squareform(distance.pdist(X))
release-0.8.37,D /= np.max(D)
release-0.8.37,HDBSCAN(metric='precomputed').fit(D)
release-0.8.37,tree = clusterer.minimum_spanning_tree_
release-0.8.37,assert tree is None
release-0.8.37,no prediction data error
release-0.8.37,wrong dimensions error
release-0.8.37,no clusters warning
release-0.8.37,def test_hdbscan_membership_vector():
release-0.8.37,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.37,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
release-0.8.37,assert_array_almost_equal(
release-0.8.37,"vector,"
release-0.8.37,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
release-0.8.37,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
release-0.8.37,assert_array_almost_equal(
release-0.8.37,"vector,"
release-0.8.37,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
release-0.8.37,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
release-0.8.37,assert_array_almost_equal(
release-0.8.37,"vector,"
release-0.8.37,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
release-0.8.37,
release-0.8.37,def test_hdbscan_all_points_membership_vectors():
release-0.8.37,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.37,vects = all_points_membership_vectors(clusterer)
release-0.8.37,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
release-0.8.37,"2.52734246e-001,"
release-0.8.37,8.38299608e-002]))
release-0.8.37,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
release-0.8.37,"8.35882503e-002,"
release-0.8.37,1.07356406e-001]))
release-0.8.37,without epsilon we should see many noise points as children of root.
release-0.8.37,for this random seed an epsilon of 0.2 will produce exactly 2 noise
release-0.8.37,points at that cut in single linkage.
release-0.8.37,Disable for now -- need to refactor to meet newer standards
release-0.8.37,Probably not applicable now #
release-0.8.37,def test_dbscan_sparse():
release-0.8.37,def test_dbscan_balltree():
release-0.8.37,def test_pickle():
release-0.8.37,def test_dbscan_core_samples_toy():
release-0.8.37,def test_boundaries():
release-0.8.37,"Given negative, zero and positive denominator and positive numerator"
release-0.8.37,Make sure safe division is always positive and doesn't raise ZeroDivision error
release-0.8.37,Ignore future warnings thrown by sklearn
release-0.8.37,Create a nice dataset with 6 circular clusters and 2 moons
release-0.8.37,"Given, the base HDBSCAN with method 'eom'"
release-0.8.37,"When we ask for flat clustering with same n_clusters,"
release-0.8.37,"Then, the labels and probabilities should match"
release-0.8.37,"Given, the base HDBSCAN with method 'leaf'"
release-0.8.37,"When we ask for flat clustering with same n_clusters,"
release-0.8.37,"Then, the labels and probabilities should match"
release-0.8.37,Method 'eom'...
release-0.8.37,"Given, a flat clustering for required n_clusters,"
release-0.8.37,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.37,"Then, the labels and probabilities should match"
release-0.8.37,Method 'leaf'...
release-0.8.37,"Given, a flat clustering for required n_clusters,"
release-0.8.37,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.37,"Then, the labels and probabilities should match"
release-0.8.37,"Given the max number of clusters that can be produced by 'eom',"
release-0.8.37,(these are produced for epsilon=0) (??? Needs verification)
release-0.8.37,"When we try flat clustering with 'eom' method for more n_clusters,"
release-0.8.37,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.37,"assert ""Cannot predict"" in str(w[-1].message)"
release-0.8.37,"the resulting clusterer switches to using method 'leaf',"
release-0.8.37,and the resulting probabilities and labels must match
release-0.8.37,"Given the base HDBSCAN trained on some data,"
release-0.8.37,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.37,"Then, the clustering should match that due to approximate_predict,"
release-0.8.37,"Given a flat clustering trained for some n_clusters,"
release-0.8.37,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.37,"Then, the number of clusters produced must match the original n_clusters"
release-0.8.37,and all probabilities are <= 1.
release-0.8.37,"Given a flat clustering trained for some n_clusters,"
release-0.8.37,"When using approximate_predict_flat with specified n_clusters,"
release-0.8.37,"Then, the requested number of clusters must be produced"
release-0.8.37,and all probabilities are <= 1.
release-0.8.37,When using approximate_predict_flat with more clusters
release-0.8.37,"than 'eom' can handle,"
release-0.8.37,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.37,But the requested number of clusters must still be produced using 'leaf'
release-0.8.37,and all probabilities are <= 1.
release-0.8.37,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.37,"When membership_vector_flat is called with new data,"
release-0.8.37,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.37,and the number of points should equal those in the test set
release-0.8.37,and all probabilities are <= 1.
release-0.8.37,========================================
release-0.8.37,"Given a flat clustering for a specified n_clusters,"
release-0.8.37,"When membership_vector_flat is called with new data,"
release-0.8.37,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.37,and the number of points should equal those in the test set
release-0.8.37,and all probabilities are <= 1.
release-0.8.37,Ignore user warnings in this function
release-0.8.37,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.37,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.37,"Then the number of clusters in memberships should be as requested,"
release-0.8.37,and the number of points should equal those in the test set
release-0.8.37,and all probabilities are <= 1.
release-0.8.37,========================================
release-0.8.37,"Given a flat clustering for a specified n_clusters,"
release-0.8.37,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.37,"Then the number of clusters in memberships should be as requested,"
release-0.8.37,and the number of points should equal those in the test set
release-0.8.37,and all probabilities are <= 1.
release-0.8.37,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.37,"When all_points_membership_vectors_flat is called,"
release-0.8.37,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.37,and the number of points should equal those in the training set
release-0.8.37,and all probabilities are <= 1.
release-0.8.37,========================================
release-0.8.37,"Given a flat clustering for a specified n_clusters,"
release-0.8.37,"When all_points_membership_vectors_flat is called,"
release-0.8.37,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.37,and the number of points should equal those in the training set
release-0.8.37,and all probabilities are <= 1.
release-0.8.37,Ignore user warnings in this function
release-0.8.37,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.37,"When all_points_membership_vectors_flat is called for some n_clusters,"
release-0.8.37,"Then the number of clusters in memberships should be as requested,"
release-0.8.37,and the number of points should equal those in the training set
release-0.8.37,and all probabilities are <= 1.
release-0.8.37,========================================
release-0.8.37,"Given a flat clustering for a specified n_clusters,"
release-0.8.37,"When membership_vector_flat is called for some n_clusters,"
release-0.8.37,"Then the number of clusters in memberships should be as requested,"
release-0.8.37,and the number of points should equal those in the training set
release-0.8.37,and all probabilities are <= 1.
release-0.8.37,Generate datasets. We choose the size big enough to see the scalability
release-0.8.37,"of the algorithms, but not too big to avoid too long running times"
release-0.8.37,normalize dataset for easier parameter selection
release-0.8.37,estimate bandwidth for mean shift
release-0.8.37,connectivity matrix for structured Ward
release-0.8.37,make connectivity symmetric
release-0.8.37,create clustering estimators
release-0.8.37,predict cluster memberships
release-0.8.37,plot
release-0.8.37,-*- coding: utf-8 -*-
release-0.8.37,#############################################################################
release-0.8.37,Generate sample data
release-0.8.37,#############################################################################
release-0.8.37,Compute DBSCAN
release-0.8.37,"Number of clusters in labels, ignoring noise if present."
release-0.8.37,#############################################################################
release-0.8.37,Plot result
release-0.8.37,Black removed and is used for noise instead.
release-0.8.37,Black used for noise.
release-0.8.37,Black used for noise.
release-0.8.37,-*- coding: utf-8 -*-
release-0.8.37,
release-0.8.37,"hdbscan documentation build configuration file, created by"
release-0.8.37,sphinx-quickstart on Sat May 28 10:34:44 2016.
release-0.8.37,
release-0.8.37,This file is execfile()d with the current directory set to its
release-0.8.37,containing dir.
release-0.8.37,
release-0.8.37,Note that not all possible configuration values are present in this
release-0.8.37,autogenerated file.
release-0.8.37,
release-0.8.37,All configuration values have a default; values that are commented out
release-0.8.37,serve to show the default.
release-0.8.37,"If extensions (or modules to document with autodoc) are in another directory,"
release-0.8.37,add these directories to sys.path here. If the directory is relative to the
release-0.8.37,"documentation root, use os.path.abspath to make it absolute, like shown here."
release-0.8.37,"## We now install the package in a virtualenv to build docs, so this is not needed"
release-0.8.37,"sys.path.insert(0, os.path.abspath('../'))"
release-0.8.37,-- General configuration ------------------------------------------------
release-0.8.37,"If your documentation needs a minimal Sphinx version, state it here."
release-0.8.37,needs_sphinx = '1.0'
release-0.8.37,"Add any Sphinx extension module names here, as strings. They can be"
release-0.8.37,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
release-0.8.37,ones.
release-0.8.37,"'sphinx.ext.napoleon',"
release-0.8.37,'numpy_ext.numpydoc'
release-0.8.37,napoleon_google_docstring = False
release-0.8.37,napoleon_numpy_docstring = True
release-0.8.37,"Add any paths that contain templates here, relative to this directory."
release-0.8.37,The suffix(es) of source filenames.
release-0.8.37,You can specify multiple suffix as a list of string:
release-0.8.37,"source_suffix = ['.rst', '.md']"
release-0.8.37,The encoding of source files.
release-0.8.37,source_encoding = 'utf-8-sig'
release-0.8.37,The master toctree document.
release-0.8.37,General information about the project.
release-0.8.37,"The version info for the project you're documenting, acts as replacement for"
release-0.8.37,"|version| and |release|, also used in various other places throughout the"
release-0.8.37,built documents.
release-0.8.37,
release-0.8.37,The short X.Y version.
release-0.8.37,"The full version, including alpha/beta/rc tags."
release-0.8.37,The language for content autogenerated by Sphinx. Refer to documentation
release-0.8.37,for a list of supported languages.
release-0.8.37,
release-0.8.37,This is also used if you do content translation via gettext catalogs.
release-0.8.37,"Usually you set ""language"" from the command line for these cases."
release-0.8.37,"There are two options for replacing |today|: either, you set today to some"
release-0.8.37,"non-false value, then it is used:"
release-0.8.37,today = ''
release-0.8.37,"Else, today_fmt is used as the format for a strftime call."
release-0.8.37,"today_fmt = '%B %d, %Y'"
release-0.8.37,"List of patterns, relative to source directory, that match files and"
release-0.8.37,directories to ignore when looking for source files.
release-0.8.37,The reST default role (used for this markup: `text`) to use for all
release-0.8.37,documents.
release-0.8.37,default_role = None
release-0.8.37,"If true, '()' will be appended to :func: etc. cross-reference text."
release-0.8.37,add_function_parentheses = True
release-0.8.37,"If true, the current module name will be prepended to all description"
release-0.8.37,unit titles (such as .. function::).
release-0.8.37,add_module_names = True
release-0.8.37,"If true, sectionauthor and moduleauthor directives will be shown in the"
release-0.8.37,output. They are ignored by default.
release-0.8.37,show_authors = False
release-0.8.37,The name of the Pygments (syntax highlighting) style to use.
release-0.8.37,A list of ignored prefixes for module index sorting.
release-0.8.37,modindex_common_prefix = []
release-0.8.37,"If true, keep warnings as ""system message"" paragraphs in the built documents."
release-0.8.37,keep_warnings = False
release-0.8.37,"If true, `todo` and `todoList` produce output, else they produce nothing."
release-0.8.37,-- Options for HTML output ----------------------------------------------
release-0.8.37,The theme to use for HTML and HTML Help pages.  See the documentation for
release-0.8.37,a list of builtin themes.
release-0.8.37,html_theme = 'alabaster'
release-0.8.37,Theme options are theme-specific and customize the look and feel of a theme
release-0.8.37,"further.  For a list of options available for each theme, see the"
release-0.8.37,documentation.
release-0.8.37,html_theme_options = {}
release-0.8.37,"Add any paths that contain custom themes here, relative to this directory."
release-0.8.37,html_theme_path = []
release-0.8.37,"The name for this set of Sphinx documents.  If None, it defaults to"
release-0.8.37,"""<project> v<release> documentation""."
release-0.8.37,html_title = None
release-0.8.37,A shorter title for the navigation bar.  Default is the same as html_title.
release-0.8.37,html_short_title = None
release-0.8.37,The name of an image file (relative to this directory) to place at the top
release-0.8.37,of the sidebar.
release-0.8.37,html_logo = None
release-0.8.37,The name of an image file (within the static path) to use as favicon of the
release-0.8.37,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
release-0.8.37,pixels large.
release-0.8.37,html_favicon = None
release-0.8.37,"Add any paths that contain custom static files (such as style sheets) here,"
release-0.8.37,"relative to this directory. They are copied after the builtin static files,"
release-0.8.37,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
release-0.8.37,Add any extra paths that contain custom files (such as robots.txt or
release-0.8.37,".htaccess) here, relative to this directory. These files are copied"
release-0.8.37,directly to the root of the documentation.
release-0.8.37,html_extra_path = []
release-0.8.37,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
release-0.8.37,using the given strftime format.
release-0.8.37,"html_last_updated_fmt = '%b %d, %Y'"
release-0.8.37,"If true, SmartyPants will be used to convert quotes and dashes to"
release-0.8.37,typographically correct entities.
release-0.8.37,html_use_smartypants = True
release-0.8.37,"Custom sidebar templates, maps document names to template names."
release-0.8.37,html_sidebars = {}
release-0.8.37,"Additional templates that should be rendered to pages, maps page names to"
release-0.8.37,template names.
release-0.8.37,html_additional_pages = {}
release-0.8.37,"If false, no module index is generated."
release-0.8.37,html_domain_indices = True
release-0.8.37,"If false, no index is generated."
release-0.8.37,html_use_index = True
release-0.8.37,"If true, the index is split into individual pages for each letter."
release-0.8.37,html_split_index = False
release-0.8.37,"If true, links to the reST sources are added to the pages."
release-0.8.37,html_show_sourcelink = True
release-0.8.37,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
release-0.8.37,html_show_sphinx = True
release-0.8.37,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
release-0.8.37,html_show_copyright = True
release-0.8.37,"If true, an OpenSearch description file will be output, and all pages will"
release-0.8.37,contain a <link> tag referring to it.  The value of this option must be the
release-0.8.37,base URL from which the finished HTML is served.
release-0.8.37,html_use_opensearch = ''
release-0.8.37,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
release-0.8.37,html_file_suffix = None
release-0.8.37,Language to be used for generating the HTML full-text search index.
release-0.8.37,Sphinx supports the following languages:
release-0.8.37,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
release-0.8.37,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
release-0.8.37,html_search_language = 'en'
release-0.8.37,"A dictionary with options for the search language support, empty by default."
release-0.8.37,Now only 'ja' uses this config value
release-0.8.37,html_search_options = {'type': 'default'}
release-0.8.37,The name of a javascript file (relative to the configuration directory) that
release-0.8.37,"implements a search results scorer. If empty, the default will be used."
release-0.8.37,html_search_scorer = 'scorer.js'
release-0.8.37,Output file base name for HTML help builder.
release-0.8.37,-- Options for LaTeX output ---------------------------------------------
release-0.8.37,The paper size ('letterpaper' or 'a4paper').
release-0.8.37,"'papersize': 'letterpaper',"
release-0.8.37,"The font size ('10pt', '11pt' or '12pt')."
release-0.8.37,"'pointsize': '10pt',"
release-0.8.37,Additional stuff for the LaTeX preamble.
release-0.8.37,"'preamble': '',"
release-0.8.37,Latex figure (float) alignment
release-0.8.37,"'figure_align': 'htbp',"
release-0.8.37,Grouping the document tree into LaTeX files. List of tuples
release-0.8.37,"(source start file, target name, title,"
release-0.8.37,"author, documentclass [howto, manual, or own class])."
release-0.8.37,The name of an image file (relative to this directory) to place at the top of
release-0.8.37,the title page.
release-0.8.37,latex_logo = None
release-0.8.37,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
release-0.8.37,not chapters.
release-0.8.37,latex_use_parts = False
release-0.8.37,"If true, show page references after internal links."
release-0.8.37,latex_show_pagerefs = False
release-0.8.37,"If true, show URL addresses after external links."
release-0.8.37,latex_show_urls = False
release-0.8.37,Documents to append as an appendix to all manuals.
release-0.8.37,latex_appendices = []
release-0.8.37,"If false, no module index is generated."
release-0.8.37,latex_domain_indices = True
release-0.8.37,-- Options for manual page output ---------------------------------------
release-0.8.37,One entry per manual page. List of tuples
release-0.8.37,"(source start file, name, description, authors, manual section)."
release-0.8.37,"If true, show URL addresses after external links."
release-0.8.37,man_show_urls = False
release-0.8.37,-- Options for Texinfo output -------------------------------------------
release-0.8.37,Grouping the document tree into Texinfo files. List of tuples
release-0.8.37,"(source start file, target name, title, author,"
release-0.8.37,"dir menu entry, description, category)"
release-0.8.37,Documents to append as an appendix to all manuals.
release-0.8.37,texinfo_appendices = []
release-0.8.37,"If false, no module index is generated."
release-0.8.37,texinfo_domain_indices = True
release-0.8.37,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.37,texinfo_show_urls = 'footnote'
release-0.8.37,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
release-0.8.37,texinfo_no_detailmenu = False
release-0.8.37,-- Options for Epub output ----------------------------------------------
release-0.8.37,Bibliographic Dublin Core info.
release-0.8.37,The basename for the epub file. It defaults to the project name.
release-0.8.37,epub_basename = project
release-0.8.37,The HTML theme for the epub output. Since the default themes are not
release-0.8.37,"optimized for small screen space, using the same theme for HTML and epub"
release-0.8.37,"output is usually not wise. This defaults to 'epub', a theme designed to save"
release-0.8.37,visual space.
release-0.8.37,epub_theme = 'epub'
release-0.8.37,The language of the text. It defaults to the language option
release-0.8.37,or 'en' if the language is not set.
release-0.8.37,epub_language = ''
release-0.8.37,The scheme of the identifier. Typical schemes are ISBN or URL.
release-0.8.37,epub_scheme = ''
release-0.8.37,The unique identifier of the text. This can be a ISBN number
release-0.8.37,or the project homepage.
release-0.8.37,epub_identifier = ''
release-0.8.37,A unique identification for the text.
release-0.8.37,epub_uid = ''
release-0.8.37,A tuple containing the cover image and cover page html template filenames.
release-0.8.37,epub_cover = ()
release-0.8.37,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
release-0.8.37,epub_guide = ()
release-0.8.37,HTML files that should be inserted before the pages created by sphinx.
release-0.8.37,The format is a list of tuples containing the path and title.
release-0.8.37,epub_pre_files = []
release-0.8.37,HTML files that should be inserted after the pages created by sphinx.
release-0.8.37,The format is a list of tuples containing the path and title.
release-0.8.37,epub_post_files = []
release-0.8.37,A list of files that should not be packed into the epub file.
release-0.8.37,The depth of the table of contents in toc.ncx.
release-0.8.37,epub_tocdepth = 3
release-0.8.37,Allow duplicate toc entries.
release-0.8.37,epub_tocdup = True
release-0.8.37,Choose between 'default' and 'includehidden'.
release-0.8.37,epub_tocscope = 'default'
release-0.8.37,Fix unsupported image types using the Pillow.
release-0.8.37,epub_fix_images = False
release-0.8.37,Scale large images.
release-0.8.37,epub_max_image_width = 0
release-0.8.37,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.37,epub_show_urls = 'inline'
release-0.8.37,"If false, no index is generated."
release-0.8.37,epub_use_index = True
release-0.8.36,"Import numpy here, only when headers are needed"
release-0.8.36,Add numpy headers to include_dirs
release-0.8.36,Call original build_ext command
release-0.8.36,The dependencies are the same as the contents of requirements.txt
release-0.8.36,"A little ""fancy"" we select from the flattened array reshape back"
release-0.8.36,(Fortran format to get indexing right) and take the product to do an and
release-0.8.36,then convert back to boolean type.
release-0.8.36,Density sparseness is not well defined if there are no
release-0.8.36,internal edges (as per the referenced paper). However
release-0.8.36,MATLAB code from the original authors simply selects the
release-0.8.36,largest of *all* the edges in the case that there are
release-0.8.36,"no internal edges, so we do the same here"
release-0.8.36,"If there are any internal edges, then subselect them out"
release-0.8.36,If there are no internal edges then we want to take the
release-0.8.36,"max over all the edges that exist in the MST, so we simply"
release-0.8.36,do nothing and return all the edges in the MST.
release-0.8.36,-*- coding: utf-8 -*-
release-0.8.36,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.36,Steve Astels <sastels@gmail.com>
release-0.8.36,John Healy <jchealy@gmail.com>
release-0.8.36,
release-0.8.36,License: BSD 3 clause
release-0.8.36,"Treating this case explicitly, instead of letting"
release-0.8.36,"sklearn.metrics.pairwise_distances handle it,"
release-0.8.36,enables the usage of numpy.inf in the distance
release-0.8.36,matrix to indicate missing distance information.
release-0.8.36,TODO: Check if copying is necessary
release-0.8.36,raise TypeError('Sparse distance matrices not yet supported')
release-0.8.36,Warn if the MST couldn't be constructed around the missing distances
release-0.8.36,mst_linkage_core does not generate a full minimal spanning tree
release-0.8.36,If a tree is required then we must build the edges from the information
release-0.8.36,returned by mst_linkage_core (i.e. just the order of points to be merged)
release-0.8.36,Sort edges of the min_spanning_tree by weight
release-0.8.36,Convert edge list into standard hierarchical clustering format
release-0.8.36,Check for connected component on X
release-0.8.36,Compute sparse mutual reachability graph
release-0.8.36,"if max_dist > 0, max distance to use when the reachability is infinite"
release-0.8.36,Check connected component on mutual reachability
release-0.8.36,"If more than one component, it means that even if the distance matrix X"
release-0.8.36,"has one component, there exists with less than `min_samples` neighbors"
release-0.8.36,Compute the minimum spanning tree for the sparse graph
release-0.8.36,Convert the graph to scipy cluster array format
release-0.8.36,Sort edges of the min_spanning_tree by weight
release-0.8.36,Convert edge list into standard hierarchical clustering format
release-0.8.36,The Cython routines used require contiguous arrays
release-0.8.36,TO DO: Deal with p for minkowski appropriately
release-0.8.36,Get distance to kth nearest neighbour
release-0.8.36,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.36,Sort edges of the min_spanning_tree by weight
release-0.8.36,Convert edge list into standard hierarchical clustering format
release-0.8.36,The Cython routines used require contiguous arrays
release-0.8.36,Get distance to kth nearest neighbour
release-0.8.36,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.36,Sort edges of the min_spanning_tree by weight
release-0.8.36,Convert edge list into standard hierarchical clustering format
release-0.8.36,Sort edges of the min_spanning_tree by weight
release-0.8.36,Convert edge list into standard hierarchical clustering format
release-0.8.36,Sort edges of the min_spanning_tree by weight
release-0.8.36,Convert edge list into standard hierarchical clustering format
release-0.8.36,Checks input and converts to an nd-array where possible
release-0.8.36,"Only non-sparse, precomputed distance matrices are handled here"
release-0.8.36,and thereby allowed to contain numpy.inf for missing distances
release-0.8.36,Python 2 and 3 compliant string_type checking
release-0.8.36,We can't do much with sparse matrices ...
release-0.8.36,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.36,still debugging for now
release-0.8.36,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.36,still debugging for now
release-0.8.36,Inherits from sklearn
release-0.8.36,Non-precomputed matrices may contain non-finite values.
release-0.8.36,Rows with these values
release-0.8.36,Pass only the purely finite indices into hdbscan
release-0.8.36,We will later assign all non-finite points to the background -1 cluster
release-0.8.36,Handle sparse precomputed distance matrices separately
release-0.8.36,"Only non-sparse, precomputed distance matrices are allowed"
release-0.8.36,to have numpy.inf values indicating missing distances
release-0.8.36,"prediction data only applies to the persistent model, so remove"
release-0.8.36,it from the keyword args we pass on the the function
release-0.8.36,remap indices to align with original data in the case of non-finite entries.
release-0.8.36,"Unltimately, for each Ci, we only require the"
release-0.8.36,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
release-0.8.36,"So let's call this value DSPC_wrt(Ci), i.e."
release-0.8.36,density separation 'with respect to' Ci.
release-0.8.36,If exactly one of the points is noise
release-0.8.36,Set the density sparseness of the cluster
release-0.8.36,to the sparsest value seen so far.
release-0.8.36,Check whether density separations with
release-0.8.36,respect to each of these clusters can
release-0.8.36,be reduced.
release-0.8.36,"In case min_outlier_sep is still np.inf, we assign a new value to it."
release-0.8.36,This only makes sense if num_clusters = 1 since it has turned out
release-0.8.36,that the MR-MST has no edges between a noise point and a core point.
release-0.8.36,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
release-0.8.36,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
release-0.8.36,MR-MST might contain an edge with one point in Cj and ther other one
release-0.8.36,"in Ck. Here, we replace the infinite density separation of Ci by"
release-0.8.36,another large enough value.
release-0.8.36,
release-0.8.36,TODO: Think of a better yet efficient way to handle this.
release-0.8.36,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
release-0.8.36,Use a previously initialized/trained HDBSCAN
release-0.8.36,Handle the trivial case first.
release-0.8.36,Always generate prediction_data to avoid later woes
release-0.8.36,This will later be chosen according to n_clusters
release-0.8.36,Initialize and train clusterer if one was not previously supplied.
release-0.8.36,Always generate prediction data
release-0.8.36,We do not pass cluster_selection_epsilon here.
release-0.8.36,"While this adds unnecessary computation, it makes the code"
release-0.8.36,easier to read and debug.
release-0.8.36,"Train on 'X'. Do this even if the supplied clusterer was trained,"
release-0.8.36,because we want to make sure it fits 'X'.
release-0.8.36,"Pick an epsilon value right after a split produces n_clusters,"
release-0.8.36,and the don't split further for smaller epsilon (larger lambda)
release-0.8.36,Or use the specified cluster_selection_epsilon
release-0.8.36,"Extract tree related stuff, in order to re-assign labels"
release-0.8.36,Get labels according to the required cluster_selection_epsilon
release-0.8.36,Reflect the related changes in HDBSCAN.
release-0.8.36,PredictionData attached to HDBSCAN should also change.
release-0.8.36,A function re_init is defined in this module to handle this.
release-0.8.36,"From a fitted HDBSCAN model, predict for n_clusters=5"
release-0.8.36,Store prediciton data for later use.
release-0.8.36,and use this prediction data to predict on new points
release-0.8.36,Get number of fitted clusters for later use.
release-0.8.36,We'll need the condensed tree later...
release-0.8.36,"If none of the three arguments: prediction_data, n_clusters,"
release-0.8.36,"and cluster_selection_epsilon are supplied,"
release-0.8.36,then use clusterer's prediciton data directly
release-0.8.36,"If either of n_clusters or cluster_selection_epsilon were supplied,"
release-0.8.36,then build prediction data from these by modifying clusterer's
release-0.8.36,Get prediction data from clusterer
release-0.8.36,Modify prediction_data to reflect new n_clusters
release-0.8.36,"First, make a copy of prediction data to avoid modifying source"
release-0.8.36,Cluster selection method is hold by condensed_tree.
release-0.8.36,Change from 'eom' to 'leaf' if n_clusters is too large.
release-0.8.36,This change does not affect the tree associated with 'clusterer'
release-0.8.36,Re-initialize prediction_data for the specified n_clusters or epsilon
release-0.8.36,============================================================
release-0.8.36,Now we're ready to use prediction_data
release-0.8.36,"The rest of the code is copied from HDBSCAN's approximate_predict,"
release-0.8.36,but modified to use prediction_data instead of clusterer's attribute
release-0.8.36,Extract condensed tree for later use
release-0.8.36,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.36,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.36,Use the same prediction_data as clusterer's
release-0.8.36,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.36,produces a specified number of n_clusters
release-0.8.36,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.36,Create another instance of prediction_data that is consistent
release-0.8.36,with the selected value of epsilon.
release-0.8.36,Flat clustering from prediction data
release-0.8.36,Initialize probabilities
release-0.8.36,k-NN for prediciton points to training set
release-0.8.36,Loop over prediction points to compute probabilities
release-0.8.36,We need to find where in the tree the new point would go
release-0.8.36,for the purposes of outlier membership approximation
release-0.8.36,"Find row in tree where nearest neighbor drops out,"
release-0.8.36,so we can get a lambda value for the nearest neighbor
release-0.8.36,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
release-0.8.36,"Equivalently, this assigns core distance for prediction point as"
release-0.8.36,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
release-0.8.36,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.36,Use new prediction_data that points to exemplars that are specific
release-0.8.36,to the choice of n_clusters
release-0.8.36,Probabilities based on how long the nearest exemplar persists in
release-0.8.36,each cluster (with respect to most persistent exemplar)
release-0.8.36,Use new clusters that are defined by the choice of n_clusters.
release-0.8.36,Merge the two probabilities to produce a single set of probabilities
release-0.8.36,Include probability that the nearest neighbor belongs to a cluster
release-0.8.36,Rename variable so it's easy to understand what's being returned
release-0.8.36,Extract condensed tree for later use
release-0.8.36,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.36,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.36,Use the same prediction_data as clusterer's
release-0.8.36,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.36,produces a specified number of n_clusters
release-0.8.36,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.36,Create another instance of prediction_data that is consistent
release-0.8.36,with the selected value of epsilon.
release-0.8.36,Flat clustering at the chosen epsilon from prediction_data
release-0.8.36,"When no clusters found, return array of 0's"
release-0.8.36,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.36,Use new prediction_data that points to exemplars that are specific
release-0.8.36,to the choice of n_clusters
release-0.8.36,Probabilities based on how long the point persists in
release-0.8.36,each cluster (with respect to most persistent exemplar)
release-0.8.36,Use new clusters that are defined by the choice of n_clusters.
release-0.8.36,Include probability that the point belongs to a cluster
release-0.8.36,Aggregate the three probabilities to produce membership vectors
release-0.8.36,Re-name variable to clarify what's being returned.
release-0.8.36,"With method 'eom', max clusters are produced for epsilon=0,"
release-0.8.36,as computed by
release-0.8.36,Increasing epsilon can only reduce the number of ouput clusters.
release-0.8.36,"To select epsilon, consider all values where clusters are split"
release-0.8.36,Subtract the extra e-12 to avoid numerical errors in comparison
release-0.8.36,"Then, we avoid splitting for all epsilon below this."
release-0.8.36,Use an epsilon value that produces the right number of clusters.
release-0.8.36,The condensed tree of HDBSCAN has this information.
release-0.8.36,Extract the lambda levels (=1/distance) from the condensed tree
release-0.8.36,We don't want values that produce a large cluster and
release-0.8.36,just one or two individual points.
release-0.8.36,Keep only those lambda values corresponding to cluster separation;
release-0.8.36,"i.e., with child_sizes > 1"
release-0.8.36,"Get the unique values, because when two clusters fall out of one,"
release-0.8.36,the entry with lambda is repeated.
release-0.8.36,lambda values are sorted by np.unique.
release-0.8.36,"Now, get epsilon (distance threshold) as 1/lambda"
release-0.8.36,"At this epsilon, n_clusters have been split."
release-0.8.36,Stop splits at epsilons smaller than this.
release-0.8.36,"To allow for numerical errors,"
release-0.8.36,predData must be a pre-trained PredictionData instance from hdbscan
release-0.8.36,"If n_clusters is specified, compute cluster_selection_epsilon;"
release-0.8.36,This is the key modification:
release-0.8.36,Select clusters according to selection method and epsilon.
release-0.8.36,_new_select_clusters is a modification of get_clusters
release-0.8.36,from hdbscan._hdbscan_tree
release-0.8.36,"raw tree, used later to get exemplars and lambda values"
release-0.8.36,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
release-0.8.36,to the cluster labels produced as output
release-0.8.36,Re-compute lambdas and exemplars for selected clusters;
release-0.8.36,max_lambda <=> smallest distance <=> most persistent point(s)
release-0.8.36,Map all sub-clusters of selected cluster to the selected cluster's
release-0.8.36,label in output.
release-0.8.36,Map lambdas too...
release-0.8.36,Create set of exemplar points for later use.
release-0.8.36,Novel points are assigned based on cluster of closest exemplar.
release-0.8.36,"For each selected cluster, get all of its leaves,"
release-0.8.36,"and leaves of leaves, and so on..."
release-0.8.36,Largest lambda => Most persistent points
release-0.8.36,Get the most persistent points
release-0.8.36,Add most persistent points as exemplars
release-0.8.36,Add exemplars for each leaf of each selected cluster.
release-0.8.36,(exclude root)
release-0.8.36,-*- coding: utf-8 -*-
release-0.8.36,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.36,
release-0.8.36,License: BSD 3 clause
release-0.8.36,"Return the only cluster, the root"
release-0.8.36,We want to get the x and y coordinates for the start of each cluster
release-0.8.36,"Initialize the leaves, since we know where they go, the iterate"
release-0.8.36,"through everything from the leaves back, setting coords as we go"
release-0.8.36,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
release-0.8.36,bottoms and widths for each rectangle. We can go through each cluster
release-0.8.36,and do this for each in turn.
release-0.8.36,Ensure we don't try to take log of zero
release-0.8.36,Finally we need the horizontal lines that occur at cluster splits.
release-0.8.36,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
release-0.8.36,"axis.plot(xs, ys, color='black', linewidth=1)"
release-0.8.36,Extract the chosen cluster bounds. If enough duplicate data points exist in the
release-0.8.36,data the lambda value might be infinite. This breaks labeling and highlighting
release-0.8.36,the chosen clusters.
release-0.8.36,Extract the plot range of the y-axis and set default center and height values for ellipses.
release-0.8.36,Extremly dense clusters might result in near infinite lambda values. Setting max_height
release-0.8.36,based on the percentile should alleviate the impact on plotting.
release-0.8.36,Set center and height to default values if necessary
release-0.8.36,Ensure the ellipse is visible
release-0.8.36,Get a 2D projection; if we have a lot of dimensions use PCA first
release-0.8.36,Use PCA to get down to 32 dimension
release-0.8.36,-*- coding: utf-8 -*-
release-0.8.36,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.36,
release-0.8.36,License: BSD 3 clause
release-0.8.36,The Cython routines used require contiguous arrays
release-0.8.36,The Cython routines used require contiguous arrays
release-0.8.36,We can't do much with sparse matrices ...
release-0.8.36,Need heuristic to decide when to go to boruvka;
release-0.8.36,still debugging for now
release-0.8.36,Need heuristic to decide when to go to boruvka;
release-0.8.36,still debugging for now
release-0.8.36,Support various prediction methods for predicting cluster membership
release-0.8.36,of new or unseen points. There are several ways to interpret how
release-0.8.36,"to do this correctly, so we provide several methods for"
release-0.8.36,the different use cases that may arise.
release-0.8.36,raw_condensed_tree = condensed_tree.to_numpy()
release-0.8.36,New point departs with the old
release-0.8.36,Find appropriate cluster based on lambda of new point
release-0.8.36,Find appropriate cluster based on lambda of new point
release-0.8.36,"the point is in the dataset, fix lambda for rounding errors"
release-0.8.36,We need to find where in the tree the new point would go
release-0.8.36,for the purposes of outlier membership approximation
release-0.8.36,"When no clusters found, return array of 0's"
release-0.8.36,import pickle
release-0.8.36,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.36,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.36,"number of clusters, ignoring noise if present"
release-0.8.36,"metric is the function reference, not the string key."
release-0.8.36,def test_rsl_unavailable_hierarchy():
release-0.8.36,clusterer = RobustSingleLinkage()
release-0.8.36,with warnings.catch_warnings(record=True) as w:
release-0.8.36,tree = clusterer.cluster_hierarchy_
release-0.8.36,assert len(w) > 0
release-0.8.36,assert tree is None
release-0.8.36,"H, y = shuffle(X, y, random_state=7)"
release-0.8.36,Disable for now -- need to refactor to meet newer standards
release-0.8.36,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.36,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.36,this fails if no $DISPLAY specified
release-0.8.36,"number of clusters, ignoring noise if present"
release-0.8.36,"number of clusters, ignoring noise if present"
release-0.8.36,"H, y = shuffle(X, y, random_state=7)"
release-0.8.36,"metric is the function reference, not the string key."
release-0.8.36,def test_hdbscan_unavailable_attributes():
release-0.8.36,clusterer = HDBSCAN(gen_min_span_tree=False)
release-0.8.36,with warnings.catch_warnings(record=True) as w:
release-0.8.36,tree = clusterer.condensed_tree_
release-0.8.36,assert len(w) > 0
release-0.8.36,assert tree is None
release-0.8.36,with warnings.catch_warnings(record=True) as w:
release-0.8.36,tree = clusterer.single_linkage_tree_
release-0.8.36,assert len(w) > 0
release-0.8.36,assert tree is None
release-0.8.36,with warnings.catch_warnings(record=True) as w:
release-0.8.36,scores = clusterer.outlier_scores_
release-0.8.36,assert len(w) > 0
release-0.8.36,assert scores is None
release-0.8.36,with warnings.catch_warnings(record=True) as w:
release-0.8.36,tree = clusterer.minimum_spanning_tree_
release-0.8.36,assert len(w) > 0
release-0.8.36,assert tree is None
release-0.8.36,def test_hdbscan_min_span_tree_availability():
release-0.8.36,clusterer = HDBSCAN().fit(X)
release-0.8.36,tree = clusterer.minimum_spanning_tree_
release-0.8.36,assert tree is None
release-0.8.36,D = distance.squareform(distance.pdist(X))
release-0.8.36,D /= np.max(D)
release-0.8.36,HDBSCAN(metric='precomputed').fit(D)
release-0.8.36,tree = clusterer.minimum_spanning_tree_
release-0.8.36,assert tree is None
release-0.8.36,no prediction data error
release-0.8.36,wrong dimensions error
release-0.8.36,no clusters warning
release-0.8.36,def test_hdbscan_membership_vector():
release-0.8.36,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.36,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
release-0.8.36,assert_array_almost_equal(
release-0.8.36,"vector,"
release-0.8.36,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
release-0.8.36,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
release-0.8.36,assert_array_almost_equal(
release-0.8.36,"vector,"
release-0.8.36,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
release-0.8.36,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
release-0.8.36,assert_array_almost_equal(
release-0.8.36,"vector,"
release-0.8.36,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
release-0.8.36,
release-0.8.36,def test_hdbscan_all_points_membership_vectors():
release-0.8.36,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.36,vects = all_points_membership_vectors(clusterer)
release-0.8.36,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
release-0.8.36,"2.52734246e-001,"
release-0.8.36,8.38299608e-002]))
release-0.8.36,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
release-0.8.36,"8.35882503e-002,"
release-0.8.36,1.07356406e-001]))
release-0.8.36,without epsilon we should see many noise points as children of root.
release-0.8.36,for this random seed an epsilon of 0.2 will produce exactly 2 noise
release-0.8.36,points at that cut in single linkage.
release-0.8.36,Disable for now -- need to refactor to meet newer standards
release-0.8.36,Probably not applicable now #
release-0.8.36,def test_dbscan_sparse():
release-0.8.36,def test_dbscan_balltree():
release-0.8.36,def test_pickle():
release-0.8.36,def test_dbscan_core_samples_toy():
release-0.8.36,def test_boundaries():
release-0.8.36,"Given negative, zero and positive denominator and positive numerator"
release-0.8.36,Make sure safe division is always positive and doesn't raise ZeroDivision error
release-0.8.36,Ignore future warnings thrown by sklearn
release-0.8.36,Create a nice dataset with 6 circular clusters and 2 moons
release-0.8.36,"Given, the base HDBSCAN with method 'eom'"
release-0.8.36,"When we ask for flat clustering with same n_clusters,"
release-0.8.36,"Then, the labels and probabilities should match"
release-0.8.36,"Given, the base HDBSCAN with method 'leaf'"
release-0.8.36,"When we ask for flat clustering with same n_clusters,"
release-0.8.36,"Then, the labels and probabilities should match"
release-0.8.36,Method 'eom'...
release-0.8.36,"Given, a flat clustering for required n_clusters,"
release-0.8.36,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.36,"Then, the labels and probabilities should match"
release-0.8.36,Method 'leaf'...
release-0.8.36,"Given, a flat clustering for required n_clusters,"
release-0.8.36,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.36,"Then, the labels and probabilities should match"
release-0.8.36,"Given the max number of clusters that can be produced by 'eom',"
release-0.8.36,(these are produced for epsilon=0) (??? Needs verification)
release-0.8.36,"When we try flat clustering with 'eom' method for more n_clusters,"
release-0.8.36,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.36,"assert ""Cannot predict"" in str(w[-1].message)"
release-0.8.36,"the resulting clusterer switches to using method 'leaf',"
release-0.8.36,and the resulting probabilities and labels must match
release-0.8.36,"Given the base HDBSCAN trained on some data,"
release-0.8.36,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.36,"Then, the clustering should match that due to approximate_predict,"
release-0.8.36,"Given a flat clustering trained for some n_clusters,"
release-0.8.36,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.36,"Then, the number of clusters produced must match the original n_clusters"
release-0.8.36,and all probabilities are <= 1.
release-0.8.36,"Given a flat clustering trained for some n_clusters,"
release-0.8.36,"When using approximate_predict_flat with specified n_clusters,"
release-0.8.36,"Then, the requested number of clusters must be produced"
release-0.8.36,and all probabilities are <= 1.
release-0.8.36,When using approximate_predict_flat with more clusters
release-0.8.36,"than 'eom' can handle,"
release-0.8.36,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.36,But the requested number of clusters must still be produced using 'leaf'
release-0.8.36,and all probabilities are <= 1.
release-0.8.36,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.36,"When membership_vector_flat is called with new data,"
release-0.8.36,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.36,and the number of points should equal those in the test set
release-0.8.36,and all probabilities are <= 1.
release-0.8.36,========================================
release-0.8.36,"Given a flat clustering for a specified n_clusters,"
release-0.8.36,"When membership_vector_flat is called with new data,"
release-0.8.36,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.36,and the number of points should equal those in the test set
release-0.8.36,and all probabilities are <= 1.
release-0.8.36,Ignore user warnings in this function
release-0.8.36,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.36,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.36,"Then the number of clusters in memberships should be as requested,"
release-0.8.36,and the number of points should equal those in the test set
release-0.8.36,and all probabilities are <= 1.
release-0.8.36,========================================
release-0.8.36,"Given a flat clustering for a specified n_clusters,"
release-0.8.36,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.36,"Then the number of clusters in memberships should be as requested,"
release-0.8.36,and the number of points should equal those in the test set
release-0.8.36,and all probabilities are <= 1.
release-0.8.36,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.36,"When all_points_membership_vectors_flat is called,"
release-0.8.36,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.36,and the number of points should equal those in the training set
release-0.8.36,and all probabilities are <= 1.
release-0.8.36,========================================
release-0.8.36,"Given a flat clustering for a specified n_clusters,"
release-0.8.36,"When all_points_membership_vectors_flat is called,"
release-0.8.36,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.36,and the number of points should equal those in the training set
release-0.8.36,and all probabilities are <= 1.
release-0.8.36,Ignore user warnings in this function
release-0.8.36,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.36,"When all_points_membership_vectors_flat is called for some n_clusters,"
release-0.8.36,"Then the number of clusters in memberships should be as requested,"
release-0.8.36,and the number of points should equal those in the training set
release-0.8.36,and all probabilities are <= 1.
release-0.8.36,========================================
release-0.8.36,"Given a flat clustering for a specified n_clusters,"
release-0.8.36,"When membership_vector_flat is called for some n_clusters,"
release-0.8.36,"Then the number of clusters in memberships should be as requested,"
release-0.8.36,and the number of points should equal those in the training set
release-0.8.36,and all probabilities are <= 1.
release-0.8.36,Generate datasets. We choose the size big enough to see the scalability
release-0.8.36,"of the algorithms, but not too big to avoid too long running times"
release-0.8.36,normalize dataset for easier parameter selection
release-0.8.36,estimate bandwidth for mean shift
release-0.8.36,connectivity matrix for structured Ward
release-0.8.36,make connectivity symmetric
release-0.8.36,create clustering estimators
release-0.8.36,predict cluster memberships
release-0.8.36,plot
release-0.8.36,-*- coding: utf-8 -*-
release-0.8.36,#############################################################################
release-0.8.36,Generate sample data
release-0.8.36,#############################################################################
release-0.8.36,Compute DBSCAN
release-0.8.36,"Number of clusters in labels, ignoring noise if present."
release-0.8.36,#############################################################################
release-0.8.36,Plot result
release-0.8.36,Black removed and is used for noise instead.
release-0.8.36,Black used for noise.
release-0.8.36,Black used for noise.
release-0.8.36,-*- coding: utf-8 -*-
release-0.8.36,
release-0.8.36,"hdbscan documentation build configuration file, created by"
release-0.8.36,sphinx-quickstart on Sat May 28 10:34:44 2016.
release-0.8.36,
release-0.8.36,This file is execfile()d with the current directory set to its
release-0.8.36,containing dir.
release-0.8.36,
release-0.8.36,Note that not all possible configuration values are present in this
release-0.8.36,autogenerated file.
release-0.8.36,
release-0.8.36,All configuration values have a default; values that are commented out
release-0.8.36,serve to show the default.
release-0.8.36,"If extensions (or modules to document with autodoc) are in another directory,"
release-0.8.36,add these directories to sys.path here. If the directory is relative to the
release-0.8.36,"documentation root, use os.path.abspath to make it absolute, like shown here."
release-0.8.36,"## We now install the package in a virtualenv to build docs, so this is not needed"
release-0.8.36,"sys.path.insert(0, os.path.abspath('../'))"
release-0.8.36,-- General configuration ------------------------------------------------
release-0.8.36,"If your documentation needs a minimal Sphinx version, state it here."
release-0.8.36,needs_sphinx = '1.0'
release-0.8.36,"Add any Sphinx extension module names here, as strings. They can be"
release-0.8.36,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
release-0.8.36,ones.
release-0.8.36,"'sphinx.ext.napoleon',"
release-0.8.36,'numpy_ext.numpydoc'
release-0.8.36,napoleon_google_docstring = False
release-0.8.36,napoleon_numpy_docstring = True
release-0.8.36,"Add any paths that contain templates here, relative to this directory."
release-0.8.36,The suffix(es) of source filenames.
release-0.8.36,You can specify multiple suffix as a list of string:
release-0.8.36,"source_suffix = ['.rst', '.md']"
release-0.8.36,The encoding of source files.
release-0.8.36,source_encoding = 'utf-8-sig'
release-0.8.36,The master toctree document.
release-0.8.36,General information about the project.
release-0.8.36,"The version info for the project you're documenting, acts as replacement for"
release-0.8.36,"|version| and |release|, also used in various other places throughout the"
release-0.8.36,built documents.
release-0.8.36,
release-0.8.36,The short X.Y version.
release-0.8.36,"The full version, including alpha/beta/rc tags."
release-0.8.36,The language for content autogenerated by Sphinx. Refer to documentation
release-0.8.36,for a list of supported languages.
release-0.8.36,
release-0.8.36,This is also used if you do content translation via gettext catalogs.
release-0.8.36,"Usually you set ""language"" from the command line for these cases."
release-0.8.36,"There are two options for replacing |today|: either, you set today to some"
release-0.8.36,"non-false value, then it is used:"
release-0.8.36,today = ''
release-0.8.36,"Else, today_fmt is used as the format for a strftime call."
release-0.8.36,"today_fmt = '%B %d, %Y'"
release-0.8.36,"List of patterns, relative to source directory, that match files and"
release-0.8.36,directories to ignore when looking for source files.
release-0.8.36,The reST default role (used for this markup: `text`) to use for all
release-0.8.36,documents.
release-0.8.36,default_role = None
release-0.8.36,"If true, '()' will be appended to :func: etc. cross-reference text."
release-0.8.36,add_function_parentheses = True
release-0.8.36,"If true, the current module name will be prepended to all description"
release-0.8.36,unit titles (such as .. function::).
release-0.8.36,add_module_names = True
release-0.8.36,"If true, sectionauthor and moduleauthor directives will be shown in the"
release-0.8.36,output. They are ignored by default.
release-0.8.36,show_authors = False
release-0.8.36,The name of the Pygments (syntax highlighting) style to use.
release-0.8.36,A list of ignored prefixes for module index sorting.
release-0.8.36,modindex_common_prefix = []
release-0.8.36,"If true, keep warnings as ""system message"" paragraphs in the built documents."
release-0.8.36,keep_warnings = False
release-0.8.36,"If true, `todo` and `todoList` produce output, else they produce nothing."
release-0.8.36,-- Options for HTML output ----------------------------------------------
release-0.8.36,The theme to use for HTML and HTML Help pages.  See the documentation for
release-0.8.36,a list of builtin themes.
release-0.8.36,html_theme = 'alabaster'
release-0.8.36,Theme options are theme-specific and customize the look and feel of a theme
release-0.8.36,"further.  For a list of options available for each theme, see the"
release-0.8.36,documentation.
release-0.8.36,html_theme_options = {}
release-0.8.36,"Add any paths that contain custom themes here, relative to this directory."
release-0.8.36,html_theme_path = []
release-0.8.36,"The name for this set of Sphinx documents.  If None, it defaults to"
release-0.8.36,"""<project> v<release> documentation""."
release-0.8.36,html_title = None
release-0.8.36,A shorter title for the navigation bar.  Default is the same as html_title.
release-0.8.36,html_short_title = None
release-0.8.36,The name of an image file (relative to this directory) to place at the top
release-0.8.36,of the sidebar.
release-0.8.36,html_logo = None
release-0.8.36,The name of an image file (within the static path) to use as favicon of the
release-0.8.36,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
release-0.8.36,pixels large.
release-0.8.36,html_favicon = None
release-0.8.36,"Add any paths that contain custom static files (such as style sheets) here,"
release-0.8.36,"relative to this directory. They are copied after the builtin static files,"
release-0.8.36,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
release-0.8.36,Add any extra paths that contain custom files (such as robots.txt or
release-0.8.36,".htaccess) here, relative to this directory. These files are copied"
release-0.8.36,directly to the root of the documentation.
release-0.8.36,html_extra_path = []
release-0.8.36,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
release-0.8.36,using the given strftime format.
release-0.8.36,"html_last_updated_fmt = '%b %d, %Y'"
release-0.8.36,"If true, SmartyPants will be used to convert quotes and dashes to"
release-0.8.36,typographically correct entities.
release-0.8.36,html_use_smartypants = True
release-0.8.36,"Custom sidebar templates, maps document names to template names."
release-0.8.36,html_sidebars = {}
release-0.8.36,"Additional templates that should be rendered to pages, maps page names to"
release-0.8.36,template names.
release-0.8.36,html_additional_pages = {}
release-0.8.36,"If false, no module index is generated."
release-0.8.36,html_domain_indices = True
release-0.8.36,"If false, no index is generated."
release-0.8.36,html_use_index = True
release-0.8.36,"If true, the index is split into individual pages for each letter."
release-0.8.36,html_split_index = False
release-0.8.36,"If true, links to the reST sources are added to the pages."
release-0.8.36,html_show_sourcelink = True
release-0.8.36,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
release-0.8.36,html_show_sphinx = True
release-0.8.36,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
release-0.8.36,html_show_copyright = True
release-0.8.36,"If true, an OpenSearch description file will be output, and all pages will"
release-0.8.36,contain a <link> tag referring to it.  The value of this option must be the
release-0.8.36,base URL from which the finished HTML is served.
release-0.8.36,html_use_opensearch = ''
release-0.8.36,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
release-0.8.36,html_file_suffix = None
release-0.8.36,Language to be used for generating the HTML full-text search index.
release-0.8.36,Sphinx supports the following languages:
release-0.8.36,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
release-0.8.36,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
release-0.8.36,html_search_language = 'en'
release-0.8.36,"A dictionary with options for the search language support, empty by default."
release-0.8.36,Now only 'ja' uses this config value
release-0.8.36,html_search_options = {'type': 'default'}
release-0.8.36,The name of a javascript file (relative to the configuration directory) that
release-0.8.36,"implements a search results scorer. If empty, the default will be used."
release-0.8.36,html_search_scorer = 'scorer.js'
release-0.8.36,Output file base name for HTML help builder.
release-0.8.36,-- Options for LaTeX output ---------------------------------------------
release-0.8.36,The paper size ('letterpaper' or 'a4paper').
release-0.8.36,"'papersize': 'letterpaper',"
release-0.8.36,"The font size ('10pt', '11pt' or '12pt')."
release-0.8.36,"'pointsize': '10pt',"
release-0.8.36,Additional stuff for the LaTeX preamble.
release-0.8.36,"'preamble': '',"
release-0.8.36,Latex figure (float) alignment
release-0.8.36,"'figure_align': 'htbp',"
release-0.8.36,Grouping the document tree into LaTeX files. List of tuples
release-0.8.36,"(source start file, target name, title,"
release-0.8.36,"author, documentclass [howto, manual, or own class])."
release-0.8.36,The name of an image file (relative to this directory) to place at the top of
release-0.8.36,the title page.
release-0.8.36,latex_logo = None
release-0.8.36,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
release-0.8.36,not chapters.
release-0.8.36,latex_use_parts = False
release-0.8.36,"If true, show page references after internal links."
release-0.8.36,latex_show_pagerefs = False
release-0.8.36,"If true, show URL addresses after external links."
release-0.8.36,latex_show_urls = False
release-0.8.36,Documents to append as an appendix to all manuals.
release-0.8.36,latex_appendices = []
release-0.8.36,"If false, no module index is generated."
release-0.8.36,latex_domain_indices = True
release-0.8.36,-- Options for manual page output ---------------------------------------
release-0.8.36,One entry per manual page. List of tuples
release-0.8.36,"(source start file, name, description, authors, manual section)."
release-0.8.36,"If true, show URL addresses after external links."
release-0.8.36,man_show_urls = False
release-0.8.36,-- Options for Texinfo output -------------------------------------------
release-0.8.36,Grouping the document tree into Texinfo files. List of tuples
release-0.8.36,"(source start file, target name, title, author,"
release-0.8.36,"dir menu entry, description, category)"
release-0.8.36,Documents to append as an appendix to all manuals.
release-0.8.36,texinfo_appendices = []
release-0.8.36,"If false, no module index is generated."
release-0.8.36,texinfo_domain_indices = True
release-0.8.36,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.36,texinfo_show_urls = 'footnote'
release-0.8.36,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
release-0.8.36,texinfo_no_detailmenu = False
release-0.8.36,-- Options for Epub output ----------------------------------------------
release-0.8.36,Bibliographic Dublin Core info.
release-0.8.36,The basename for the epub file. It defaults to the project name.
release-0.8.36,epub_basename = project
release-0.8.36,The HTML theme for the epub output. Since the default themes are not
release-0.8.36,"optimized for small screen space, using the same theme for HTML and epub"
release-0.8.36,"output is usually not wise. This defaults to 'epub', a theme designed to save"
release-0.8.36,visual space.
release-0.8.36,epub_theme = 'epub'
release-0.8.36,The language of the text. It defaults to the language option
release-0.8.36,or 'en' if the language is not set.
release-0.8.36,epub_language = ''
release-0.8.36,The scheme of the identifier. Typical schemes are ISBN or URL.
release-0.8.36,epub_scheme = ''
release-0.8.36,The unique identifier of the text. This can be a ISBN number
release-0.8.36,or the project homepage.
release-0.8.36,epub_identifier = ''
release-0.8.36,A unique identification for the text.
release-0.8.36,epub_uid = ''
release-0.8.36,A tuple containing the cover image and cover page html template filenames.
release-0.8.36,epub_cover = ()
release-0.8.36,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
release-0.8.36,epub_guide = ()
release-0.8.36,HTML files that should be inserted before the pages created by sphinx.
release-0.8.36,The format is a list of tuples containing the path and title.
release-0.8.36,epub_pre_files = []
release-0.8.36,HTML files that should be inserted after the pages created by sphinx.
release-0.8.36,The format is a list of tuples containing the path and title.
release-0.8.36,epub_post_files = []
release-0.8.36,A list of files that should not be packed into the epub file.
release-0.8.36,The depth of the table of contents in toc.ncx.
release-0.8.36,epub_tocdepth = 3
release-0.8.36,Allow duplicate toc entries.
release-0.8.36,epub_tocdup = True
release-0.8.36,Choose between 'default' and 'includehidden'.
release-0.8.36,epub_tocscope = 'default'
release-0.8.36,Fix unsupported image types using the Pillow.
release-0.8.36,epub_fix_images = False
release-0.8.36,Scale large images.
release-0.8.36,epub_max_image_width = 0
release-0.8.36,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.36,epub_show_urls = 'inline'
release-0.8.36,"If false, no index is generated."
release-0.8.36,epub_use_index = True
release-0.8.35,"Import numpy here, only when headers are needed"
release-0.8.35,Add numpy headers to include_dirs
release-0.8.35,Call original build_ext command
release-0.8.35,The dependencies are the same as the contents of requirements.txt
release-0.8.35,"A little ""fancy"" we select from the flattened array reshape back"
release-0.8.35,(Fortran format to get indexing right) and take the product to do an and
release-0.8.35,then convert back to boolean type.
release-0.8.35,Density sparseness is not well defined if there are no
release-0.8.35,internal edges (as per the referenced paper). However
release-0.8.35,MATLAB code from the original authors simply selects the
release-0.8.35,largest of *all* the edges in the case that there are
release-0.8.35,"no internal edges, so we do the same here"
release-0.8.35,"If there are any internal edges, then subselect them out"
release-0.8.35,If there are no internal edges then we want to take the
release-0.8.35,"max over all the edges that exist in the MST, so we simply"
release-0.8.35,do nothing and return all the edges in the MST.
release-0.8.35,-*- coding: utf-8 -*-
release-0.8.35,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.35,Steve Astels <sastels@gmail.com>
release-0.8.35,John Healy <jchealy@gmail.com>
release-0.8.35,
release-0.8.35,License: BSD 3 clause
release-0.8.35,"Treating this case explicitly, instead of letting"
release-0.8.35,"sklearn.metrics.pairwise_distances handle it,"
release-0.8.35,enables the usage of numpy.inf in the distance
release-0.8.35,matrix to indicate missing distance information.
release-0.8.35,TODO: Check if copying is necessary
release-0.8.35,raise TypeError('Sparse distance matrices not yet supported')
release-0.8.35,Warn if the MST couldn't be constructed around the missing distances
release-0.8.35,mst_linkage_core does not generate a full minimal spanning tree
release-0.8.35,If a tree is required then we must build the edges from the information
release-0.8.35,returned by mst_linkage_core (i.e. just the order of points to be merged)
release-0.8.35,Sort edges of the min_spanning_tree by weight
release-0.8.35,Convert edge list into standard hierarchical clustering format
release-0.8.35,Check for connected component on X
release-0.8.35,Compute sparse mutual reachability graph
release-0.8.35,"if max_dist > 0, max distance to use when the reachability is infinite"
release-0.8.35,Check connected component on mutual reachability
release-0.8.35,"If more than one component, it means that even if the distance matrix X"
release-0.8.35,"has one component, there exists with less than `min_samples` neighbors"
release-0.8.35,Compute the minimum spanning tree for the sparse graph
release-0.8.35,Convert the graph to scipy cluster array format
release-0.8.35,Sort edges of the min_spanning_tree by weight
release-0.8.35,Convert edge list into standard hierarchical clustering format
release-0.8.35,The Cython routines used require contiguous arrays
release-0.8.35,TO DO: Deal with p for minkowski appropriately
release-0.8.35,Get distance to kth nearest neighbour
release-0.8.35,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.35,Sort edges of the min_spanning_tree by weight
release-0.8.35,Convert edge list into standard hierarchical clustering format
release-0.8.35,The Cython routines used require contiguous arrays
release-0.8.35,Get distance to kth nearest neighbour
release-0.8.35,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.35,Sort edges of the min_spanning_tree by weight
release-0.8.35,Convert edge list into standard hierarchical clustering format
release-0.8.35,Sort edges of the min_spanning_tree by weight
release-0.8.35,Convert edge list into standard hierarchical clustering format
release-0.8.35,Sort edges of the min_spanning_tree by weight
release-0.8.35,Convert edge list into standard hierarchical clustering format
release-0.8.35,Checks input and converts to an nd-array where possible
release-0.8.35,"Only non-sparse, precomputed distance matrices are handled here"
release-0.8.35,and thereby allowed to contain numpy.inf for missing distances
release-0.8.35,Python 2 and 3 compliant string_type checking
release-0.8.35,We can't do much with sparse matrices ...
release-0.8.35,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.35,still debugging for now
release-0.8.35,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.35,still debugging for now
release-0.8.35,Inherits from sklearn
release-0.8.35,Non-precomputed matrices may contain non-finite values.
release-0.8.35,Rows with these values
release-0.8.35,Pass only the purely finite indices into hdbscan
release-0.8.35,We will later assign all non-finite points to the background -1 cluster
release-0.8.35,Handle sparse precomputed distance matrices separately
release-0.8.35,"Only non-sparse, precomputed distance matrices are allowed"
release-0.8.35,to have numpy.inf values indicating missing distances
release-0.8.35,"prediction data only applies to the persistent model, so remove"
release-0.8.35,it from the keyword args we pass on the the function
release-0.8.35,remap indices to align with original data in the case of non-finite entries.
release-0.8.35,"Unltimately, for each Ci, we only require the"
release-0.8.35,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
release-0.8.35,"So let's call this value DSPC_wrt(Ci), i.e."
release-0.8.35,density separation 'with respect to' Ci.
release-0.8.35,If exactly one of the points is noise
release-0.8.35,Set the density sparseness of the cluster
release-0.8.35,to the sparsest value seen so far.
release-0.8.35,Check whether density separations with
release-0.8.35,respect to each of these clusters can
release-0.8.35,be reduced.
release-0.8.35,"In case min_outlier_sep is still np.inf, we assign a new value to it."
release-0.8.35,This only makes sense if num_clusters = 1 since it has turned out
release-0.8.35,that the MR-MST has no edges between a noise point and a core point.
release-0.8.35,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
release-0.8.35,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
release-0.8.35,MR-MST might contain an edge with one point in Cj and ther other one
release-0.8.35,"in Ck. Here, we replace the infinite density separation of Ci by"
release-0.8.35,another large enough value.
release-0.8.35,
release-0.8.35,TODO: Think of a better yet efficient way to handle this.
release-0.8.35,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
release-0.8.35,Use a previously initialized/trained HDBSCAN
release-0.8.35,Handle the trivial case first.
release-0.8.35,Always generate prediction_data to avoid later woes
release-0.8.35,This will later be chosen according to n_clusters
release-0.8.35,Initialize and train clusterer if one was not previously supplied.
release-0.8.35,Always generate prediction data
release-0.8.35,We do not pass cluster_selection_epsilon here.
release-0.8.35,"While this adds unnecessary computation, it makes the code"
release-0.8.35,easier to read and debug.
release-0.8.35,"Train on 'X'. Do this even if the supplied clusterer was trained,"
release-0.8.35,because we want to make sure it fits 'X'.
release-0.8.35,"Pick an epsilon value right after a split produces n_clusters,"
release-0.8.35,and the don't split further for smaller epsilon (larger lambda)
release-0.8.35,Or use the specified cluster_selection_epsilon
release-0.8.35,"Extract tree related stuff, in order to re-assign labels"
release-0.8.35,Get labels according to the required cluster_selection_epsilon
release-0.8.35,Reflect the related changes in HDBSCAN.
release-0.8.35,PredictionData attached to HDBSCAN should also change.
release-0.8.35,A function re_init is defined in this module to handle this.
release-0.8.35,"From a fitted HDBSCAN model, predict for n_clusters=5"
release-0.8.35,Store prediciton data for later use.
release-0.8.35,and use this prediction data to predict on new points
release-0.8.35,Get number of fitted clusters for later use.
release-0.8.35,We'll need the condensed tree later...
release-0.8.35,"If none of the three arguments: prediction_data, n_clusters,"
release-0.8.35,"and cluster_selection_epsilon are supplied,"
release-0.8.35,then use clusterer's prediciton data directly
release-0.8.35,"If either of n_clusters or cluster_selection_epsilon were supplied,"
release-0.8.35,then build prediction data from these by modifying clusterer's
release-0.8.35,Get prediction data from clusterer
release-0.8.35,Modify prediction_data to reflect new n_clusters
release-0.8.35,"First, make a copy of prediction data to avoid modifying source"
release-0.8.35,Cluster selection method is hold by condensed_tree.
release-0.8.35,Change from 'eom' to 'leaf' if n_clusters is too large.
release-0.8.35,This change does not affect the tree associated with 'clusterer'
release-0.8.35,Re-initialize prediction_data for the specified n_clusters or epsilon
release-0.8.35,============================================================
release-0.8.35,Now we're ready to use prediction_data
release-0.8.35,"The rest of the code is copied from HDBSCAN's approximate_predict,"
release-0.8.35,but modified to use prediction_data instead of clusterer's attribute
release-0.8.35,Extract condensed tree for later use
release-0.8.35,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.35,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.35,Use the same prediction_data as clusterer's
release-0.8.35,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.35,produces a specified number of n_clusters
release-0.8.35,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.35,Create another instance of prediction_data that is consistent
release-0.8.35,with the selected value of epsilon.
release-0.8.35,Flat clustering from prediction data
release-0.8.35,Initialize probabilities
release-0.8.35,k-NN for prediciton points to training set
release-0.8.35,Loop over prediction points to compute probabilities
release-0.8.35,We need to find where in the tree the new point would go
release-0.8.35,for the purposes of outlier membership approximation
release-0.8.35,"Find row in tree where nearest neighbor drops out,"
release-0.8.35,so we can get a lambda value for the nearest neighbor
release-0.8.35,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
release-0.8.35,"Equivalently, this assigns core distance for prediction point as"
release-0.8.35,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
release-0.8.35,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.35,Use new prediction_data that points to exemplars that are specific
release-0.8.35,to the choice of n_clusters
release-0.8.35,Probabilities based on how long the nearest exemplar persists in
release-0.8.35,each cluster (with respect to most persistent exemplar)
release-0.8.35,Use new clusters that are defined by the choice of n_clusters.
release-0.8.35,Merge the two probabilities to produce a single set of probabilities
release-0.8.35,Include probability that the nearest neighbor belongs to a cluster
release-0.8.35,Rename variable so it's easy to understand what's being returned
release-0.8.35,Extract condensed tree for later use
release-0.8.35,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.35,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.35,Use the same prediction_data as clusterer's
release-0.8.35,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.35,produces a specified number of n_clusters
release-0.8.35,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.35,Create another instance of prediction_data that is consistent
release-0.8.35,with the selected value of epsilon.
release-0.8.35,Flat clustering at the chosen epsilon from prediction_data
release-0.8.35,"When no clusters found, return array of 0's"
release-0.8.35,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.35,Use new prediction_data that points to exemplars that are specific
release-0.8.35,to the choice of n_clusters
release-0.8.35,Probabilities based on how long the point persists in
release-0.8.35,each cluster (with respect to most persistent exemplar)
release-0.8.35,Use new clusters that are defined by the choice of n_clusters.
release-0.8.35,Include probability that the point belongs to a cluster
release-0.8.35,Aggregate the three probabilities to produce membership vectors
release-0.8.35,Re-name variable to clarify what's being returned.
release-0.8.35,"With method 'eom', max clusters are produced for epsilon=0,"
release-0.8.35,as computed by
release-0.8.35,Increasing epsilon can only reduce the number of ouput clusters.
release-0.8.35,"To select epsilon, consider all values where clusters are split"
release-0.8.35,Subtract the extra e-12 to avoid numerical errors in comparison
release-0.8.35,"Then, we avoid splitting for all epsilon below this."
release-0.8.35,Use an epsilon value that produces the right number of clusters.
release-0.8.35,The condensed tree of HDBSCAN has this information.
release-0.8.35,Extract the lambda levels (=1/distance) from the condensed tree
release-0.8.35,We don't want values that produce a large cluster and
release-0.8.35,just one or two individual points.
release-0.8.35,Keep only those lambda values corresponding to cluster separation;
release-0.8.35,"i.e., with child_sizes > 1"
release-0.8.35,"Get the unique values, because when two clusters fall out of one,"
release-0.8.35,the entry with lambda is repeated.
release-0.8.35,lambda values are sorted by np.unique.
release-0.8.35,"Now, get epsilon (distance threshold) as 1/lambda"
release-0.8.35,"At this epsilon, n_clusters have been split."
release-0.8.35,Stop splits at epsilons smaller than this.
release-0.8.35,"To allow for numerical errors,"
release-0.8.35,predData must be a pre-trained PredictionData instance from hdbscan
release-0.8.35,"If n_clusters is specified, compute cluster_selection_epsilon;"
release-0.8.35,This is the key modification:
release-0.8.35,Select clusters according to selection method and epsilon.
release-0.8.35,_new_select_clusters is a modification of get_clusters
release-0.8.35,from hdbscan._hdbscan_tree
release-0.8.35,"raw tree, used later to get exemplars and lambda values"
release-0.8.35,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
release-0.8.35,to the cluster labels produced as output
release-0.8.35,Re-compute lambdas and exemplars for selected clusters;
release-0.8.35,max_lambda <=> smallest distance <=> most persistent point(s)
release-0.8.35,Map all sub-clusters of selected cluster to the selected cluster's
release-0.8.35,label in output.
release-0.8.35,Map lambdas too...
release-0.8.35,Create set of exemplar points for later use.
release-0.8.35,Novel points are assigned based on cluster of closest exemplar.
release-0.8.35,"For each selected cluster, get all of its leaves,"
release-0.8.35,"and leaves of leaves, and so on..."
release-0.8.35,Largest lambda => Most persistent points
release-0.8.35,Get the most persistent points
release-0.8.35,Add most persistent points as exemplars
release-0.8.35,Add exemplars for each leaf of each selected cluster.
release-0.8.35,(exclude root)
release-0.8.35,-*- coding: utf-8 -*-
release-0.8.35,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.35,
release-0.8.35,License: BSD 3 clause
release-0.8.35,"Return the only cluster, the root"
release-0.8.35,We want to get the x and y coordinates for the start of each cluster
release-0.8.35,"Initialize the leaves, since we know where they go, the iterate"
release-0.8.35,"through everything from the leaves back, setting coords as we go"
release-0.8.35,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
release-0.8.35,bottoms and widths for each rectangle. We can go through each cluster
release-0.8.35,and do this for each in turn.
release-0.8.35,Ensure we don't try to take log of zero
release-0.8.35,Finally we need the horizontal lines that occur at cluster splits.
release-0.8.35,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
release-0.8.35,"axis.plot(xs, ys, color='black', linewidth=1)"
release-0.8.35,Extract the chosen cluster bounds. If enough duplicate data points exist in the
release-0.8.35,data the lambda value might be infinite. This breaks labeling and highlighting
release-0.8.35,the chosen clusters.
release-0.8.35,Extract the plot range of the y-axis and set default center and height values for ellipses.
release-0.8.35,Extremly dense clusters might result in near infinite lambda values. Setting max_height
release-0.8.35,based on the percentile should alleviate the impact on plotting.
release-0.8.35,Set center and height to default values if necessary
release-0.8.35,Ensure the ellipse is visible
release-0.8.35,Get a 2D projection; if we have a lot of dimensions use PCA first
release-0.8.35,Use PCA to get down to 32 dimension
release-0.8.35,-*- coding: utf-8 -*-
release-0.8.35,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.35,
release-0.8.35,License: BSD 3 clause
release-0.8.35,The Cython routines used require contiguous arrays
release-0.8.35,The Cython routines used require contiguous arrays
release-0.8.35,We can't do much with sparse matrices ...
release-0.8.35,Need heuristic to decide when to go to boruvka;
release-0.8.35,still debugging for now
release-0.8.35,Need heuristic to decide when to go to boruvka;
release-0.8.35,still debugging for now
release-0.8.35,Support various prediction methods for predicting cluster membership
release-0.8.35,of new or unseen points. There are several ways to interpret how
release-0.8.35,"to do this correctly, so we provide several methods for"
release-0.8.35,the different use cases that may arise.
release-0.8.35,raw_condensed_tree = condensed_tree.to_numpy()
release-0.8.35,New point departs with the old
release-0.8.35,Find appropriate cluster based on lambda of new point
release-0.8.35,Find appropriate cluster based on lambda of new point
release-0.8.35,"the point is in the dataset, fix lambda for rounding errors"
release-0.8.35,We need to find where in the tree the new point would go
release-0.8.35,for the purposes of outlier membership approximation
release-0.8.35,"When no clusters found, return array of 0's"
release-0.8.35,import pickle
release-0.8.35,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.35,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.35,"number of clusters, ignoring noise if present"
release-0.8.35,"metric is the function reference, not the string key."
release-0.8.35,def test_rsl_unavailable_hierarchy():
release-0.8.35,clusterer = RobustSingleLinkage()
release-0.8.35,with warnings.catch_warnings(record=True) as w:
release-0.8.35,tree = clusterer.cluster_hierarchy_
release-0.8.35,assert len(w) > 0
release-0.8.35,assert tree is None
release-0.8.35,"H, y = shuffle(X, y, random_state=7)"
release-0.8.35,Disable for now -- need to refactor to meet newer standards
release-0.8.35,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.35,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.35,this fails if no $DISPLAY specified
release-0.8.35,"number of clusters, ignoring noise if present"
release-0.8.35,"number of clusters, ignoring noise if present"
release-0.8.35,"H, y = shuffle(X, y, random_state=7)"
release-0.8.35,"metric is the function reference, not the string key."
release-0.8.35,def test_hdbscan_unavailable_attributes():
release-0.8.35,clusterer = HDBSCAN(gen_min_span_tree=False)
release-0.8.35,with warnings.catch_warnings(record=True) as w:
release-0.8.35,tree = clusterer.condensed_tree_
release-0.8.35,assert len(w) > 0
release-0.8.35,assert tree is None
release-0.8.35,with warnings.catch_warnings(record=True) as w:
release-0.8.35,tree = clusterer.single_linkage_tree_
release-0.8.35,assert len(w) > 0
release-0.8.35,assert tree is None
release-0.8.35,with warnings.catch_warnings(record=True) as w:
release-0.8.35,scores = clusterer.outlier_scores_
release-0.8.35,assert len(w) > 0
release-0.8.35,assert scores is None
release-0.8.35,with warnings.catch_warnings(record=True) as w:
release-0.8.35,tree = clusterer.minimum_spanning_tree_
release-0.8.35,assert len(w) > 0
release-0.8.35,assert tree is None
release-0.8.35,def test_hdbscan_min_span_tree_availability():
release-0.8.35,clusterer = HDBSCAN().fit(X)
release-0.8.35,tree = clusterer.minimum_spanning_tree_
release-0.8.35,assert tree is None
release-0.8.35,D = distance.squareform(distance.pdist(X))
release-0.8.35,D /= np.max(D)
release-0.8.35,HDBSCAN(metric='precomputed').fit(D)
release-0.8.35,tree = clusterer.minimum_spanning_tree_
release-0.8.35,assert tree is None
release-0.8.35,no prediction data error
release-0.8.35,wrong dimensions error
release-0.8.35,no clusters warning
release-0.8.35,def test_hdbscan_membership_vector():
release-0.8.35,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.35,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
release-0.8.35,assert_array_almost_equal(
release-0.8.35,"vector,"
release-0.8.35,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
release-0.8.35,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
release-0.8.35,assert_array_almost_equal(
release-0.8.35,"vector,"
release-0.8.35,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
release-0.8.35,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
release-0.8.35,assert_array_almost_equal(
release-0.8.35,"vector,"
release-0.8.35,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
release-0.8.35,
release-0.8.35,def test_hdbscan_all_points_membership_vectors():
release-0.8.35,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.35,vects = all_points_membership_vectors(clusterer)
release-0.8.35,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
release-0.8.35,"2.52734246e-001,"
release-0.8.35,8.38299608e-002]))
release-0.8.35,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
release-0.8.35,"8.35882503e-002,"
release-0.8.35,1.07356406e-001]))
release-0.8.35,without epsilon we should see many noise points as children of root.
release-0.8.35,for this random seed an epsilon of 0.2 will produce exactly 2 noise
release-0.8.35,points at that cut in single linkage.
release-0.8.35,Disable for now -- need to refactor to meet newer standards
release-0.8.35,Probably not applicable now #
release-0.8.35,def test_dbscan_sparse():
release-0.8.35,def test_dbscan_balltree():
release-0.8.35,def test_pickle():
release-0.8.35,def test_dbscan_core_samples_toy():
release-0.8.35,def test_boundaries():
release-0.8.35,"Given negative, zero and positive denominator and positive numerator"
release-0.8.35,Make sure safe division is always positive and doesn't raise ZeroDivision error
release-0.8.35,Ignore future warnings thrown by sklearn
release-0.8.35,Create a nice dataset with 6 circular clusters and 2 moons
release-0.8.35,"Given, the base HDBSCAN with method 'eom'"
release-0.8.35,"When we ask for flat clustering with same n_clusters,"
release-0.8.35,"Then, the labels and probabilities should match"
release-0.8.35,"Given, the base HDBSCAN with method 'leaf'"
release-0.8.35,"When we ask for flat clustering with same n_clusters,"
release-0.8.35,"Then, the labels and probabilities should match"
release-0.8.35,Method 'eom'...
release-0.8.35,"Given, a flat clustering for required n_clusters,"
release-0.8.35,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.35,"Then, the labels and probabilities should match"
release-0.8.35,Method 'leaf'...
release-0.8.35,"Given, a flat clustering for required n_clusters,"
release-0.8.35,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.35,"Then, the labels and probabilities should match"
release-0.8.35,"Given the max number of clusters that can be produced by 'eom',"
release-0.8.35,(these are produced for epsilon=0) (??? Needs verification)
release-0.8.35,"When we try flat clustering with 'eom' method for more n_clusters,"
release-0.8.35,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.35,"assert ""Cannot predict"" in str(w[-1].message)"
release-0.8.35,"the resulting clusterer switches to using method 'leaf',"
release-0.8.35,and the resulting probabilities and labels must match
release-0.8.35,"Given the base HDBSCAN trained on some data,"
release-0.8.35,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.35,"Then, the clustering should match that due to approximate_predict,"
release-0.8.35,"Given a flat clustering trained for some n_clusters,"
release-0.8.35,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.35,"Then, the number of clusters produced must match the original n_clusters"
release-0.8.35,and all probabilities are <= 1.
release-0.8.35,"Given a flat clustering trained for some n_clusters,"
release-0.8.35,"When using approximate_predict_flat with specified n_clusters,"
release-0.8.35,"Then, the requested number of clusters must be produced"
release-0.8.35,and all probabilities are <= 1.
release-0.8.35,When using approximate_predict_flat with more clusters
release-0.8.35,"than 'eom' can handle,"
release-0.8.35,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.35,But the requested number of clusters must still be produced using 'leaf'
release-0.8.35,and all probabilities are <= 1.
release-0.8.35,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.35,"When membership_vector_flat is called with new data,"
release-0.8.35,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.35,and the number of points should equal those in the test set
release-0.8.35,and all probabilities are <= 1.
release-0.8.35,========================================
release-0.8.35,"Given a flat clustering for a specified n_clusters,"
release-0.8.35,"When membership_vector_flat is called with new data,"
release-0.8.35,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.35,and the number of points should equal those in the test set
release-0.8.35,and all probabilities are <= 1.
release-0.8.35,Ignore user warnings in this function
release-0.8.35,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.35,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.35,"Then the number of clusters in memberships should be as requested,"
release-0.8.35,and the number of points should equal those in the test set
release-0.8.35,and all probabilities are <= 1.
release-0.8.35,========================================
release-0.8.35,"Given a flat clustering for a specified n_clusters,"
release-0.8.35,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.35,"Then the number of clusters in memberships should be as requested,"
release-0.8.35,and the number of points should equal those in the test set
release-0.8.35,and all probabilities are <= 1.
release-0.8.35,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.35,"When all_points_membership_vectors_flat is called,"
release-0.8.35,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.35,and the number of points should equal those in the training set
release-0.8.35,and all probabilities are <= 1.
release-0.8.35,========================================
release-0.8.35,"Given a flat clustering for a specified n_clusters,"
release-0.8.35,"When all_points_membership_vectors_flat is called,"
release-0.8.35,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.35,and the number of points should equal those in the training set
release-0.8.35,and all probabilities are <= 1.
release-0.8.35,Ignore user warnings in this function
release-0.8.35,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.35,"When all_points_membership_vectors_flat is called for some n_clusters,"
release-0.8.35,"Then the number of clusters in memberships should be as requested,"
release-0.8.35,and the number of points should equal those in the training set
release-0.8.35,and all probabilities are <= 1.
release-0.8.35,========================================
release-0.8.35,"Given a flat clustering for a specified n_clusters,"
release-0.8.35,"When membership_vector_flat is called for some n_clusters,"
release-0.8.35,"Then the number of clusters in memberships should be as requested,"
release-0.8.35,and the number of points should equal those in the training set
release-0.8.35,and all probabilities are <= 1.
release-0.8.35,Generate datasets. We choose the size big enough to see the scalability
release-0.8.35,"of the algorithms, but not too big to avoid too long running times"
release-0.8.35,normalize dataset for easier parameter selection
release-0.8.35,estimate bandwidth for mean shift
release-0.8.35,connectivity matrix for structured Ward
release-0.8.35,make connectivity symmetric
release-0.8.35,create clustering estimators
release-0.8.35,predict cluster memberships
release-0.8.35,plot
release-0.8.35,-*- coding: utf-8 -*-
release-0.8.35,#############################################################################
release-0.8.35,Generate sample data
release-0.8.35,#############################################################################
release-0.8.35,Compute DBSCAN
release-0.8.35,"Number of clusters in labels, ignoring noise if present."
release-0.8.35,#############################################################################
release-0.8.35,Plot result
release-0.8.35,Black removed and is used for noise instead.
release-0.8.35,Black used for noise.
release-0.8.35,Black used for noise.
release-0.8.35,-*- coding: utf-8 -*-
release-0.8.35,
release-0.8.35,"hdbscan documentation build configuration file, created by"
release-0.8.35,sphinx-quickstart on Sat May 28 10:34:44 2016.
release-0.8.35,
release-0.8.35,This file is execfile()d with the current directory set to its
release-0.8.35,containing dir.
release-0.8.35,
release-0.8.35,Note that not all possible configuration values are present in this
release-0.8.35,autogenerated file.
release-0.8.35,
release-0.8.35,All configuration values have a default; values that are commented out
release-0.8.35,serve to show the default.
release-0.8.35,"If extensions (or modules to document with autodoc) are in another directory,"
release-0.8.35,add these directories to sys.path here. If the directory is relative to the
release-0.8.35,"documentation root, use os.path.abspath to make it absolute, like shown here."
release-0.8.35,"## We now install the package in a virtualenv to build docs, so this is not needed"
release-0.8.35,"sys.path.insert(0, os.path.abspath('../'))"
release-0.8.35,-- General configuration ------------------------------------------------
release-0.8.35,"If your documentation needs a minimal Sphinx version, state it here."
release-0.8.35,needs_sphinx = '1.0'
release-0.8.35,"Add any Sphinx extension module names here, as strings. They can be"
release-0.8.35,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
release-0.8.35,ones.
release-0.8.35,"'sphinx.ext.napoleon',"
release-0.8.35,'numpy_ext.numpydoc'
release-0.8.35,napoleon_google_docstring = False
release-0.8.35,napoleon_numpy_docstring = True
release-0.8.35,"Add any paths that contain templates here, relative to this directory."
release-0.8.35,The suffix(es) of source filenames.
release-0.8.35,You can specify multiple suffix as a list of string:
release-0.8.35,"source_suffix = ['.rst', '.md']"
release-0.8.35,The encoding of source files.
release-0.8.35,source_encoding = 'utf-8-sig'
release-0.8.35,The master toctree document.
release-0.8.35,General information about the project.
release-0.8.35,"The version info for the project you're documenting, acts as replacement for"
release-0.8.35,"|version| and |release|, also used in various other places throughout the"
release-0.8.35,built documents.
release-0.8.35,
release-0.8.35,The short X.Y version.
release-0.8.35,"The full version, including alpha/beta/rc tags."
release-0.8.35,The language for content autogenerated by Sphinx. Refer to documentation
release-0.8.35,for a list of supported languages.
release-0.8.35,
release-0.8.35,This is also used if you do content translation via gettext catalogs.
release-0.8.35,"Usually you set ""language"" from the command line for these cases."
release-0.8.35,"There are two options for replacing |today|: either, you set today to some"
release-0.8.35,"non-false value, then it is used:"
release-0.8.35,today = ''
release-0.8.35,"Else, today_fmt is used as the format for a strftime call."
release-0.8.35,"today_fmt = '%B %d, %Y'"
release-0.8.35,"List of patterns, relative to source directory, that match files and"
release-0.8.35,directories to ignore when looking for source files.
release-0.8.35,The reST default role (used for this markup: `text`) to use for all
release-0.8.35,documents.
release-0.8.35,default_role = None
release-0.8.35,"If true, '()' will be appended to :func: etc. cross-reference text."
release-0.8.35,add_function_parentheses = True
release-0.8.35,"If true, the current module name will be prepended to all description"
release-0.8.35,unit titles (such as .. function::).
release-0.8.35,add_module_names = True
release-0.8.35,"If true, sectionauthor and moduleauthor directives will be shown in the"
release-0.8.35,output. They are ignored by default.
release-0.8.35,show_authors = False
release-0.8.35,The name of the Pygments (syntax highlighting) style to use.
release-0.8.35,A list of ignored prefixes for module index sorting.
release-0.8.35,modindex_common_prefix = []
release-0.8.35,"If true, keep warnings as ""system message"" paragraphs in the built documents."
release-0.8.35,keep_warnings = False
release-0.8.35,"If true, `todo` and `todoList` produce output, else they produce nothing."
release-0.8.35,-- Options for HTML output ----------------------------------------------
release-0.8.35,The theme to use for HTML and HTML Help pages.  See the documentation for
release-0.8.35,a list of builtin themes.
release-0.8.35,html_theme = 'alabaster'
release-0.8.35,Theme options are theme-specific and customize the look and feel of a theme
release-0.8.35,"further.  For a list of options available for each theme, see the"
release-0.8.35,documentation.
release-0.8.35,html_theme_options = {}
release-0.8.35,"Add any paths that contain custom themes here, relative to this directory."
release-0.8.35,html_theme_path = []
release-0.8.35,"The name for this set of Sphinx documents.  If None, it defaults to"
release-0.8.35,"""<project> v<release> documentation""."
release-0.8.35,html_title = None
release-0.8.35,A shorter title for the navigation bar.  Default is the same as html_title.
release-0.8.35,html_short_title = None
release-0.8.35,The name of an image file (relative to this directory) to place at the top
release-0.8.35,of the sidebar.
release-0.8.35,html_logo = None
release-0.8.35,The name of an image file (within the static path) to use as favicon of the
release-0.8.35,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
release-0.8.35,pixels large.
release-0.8.35,html_favicon = None
release-0.8.35,"Add any paths that contain custom static files (such as style sheets) here,"
release-0.8.35,"relative to this directory. They are copied after the builtin static files,"
release-0.8.35,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
release-0.8.35,Add any extra paths that contain custom files (such as robots.txt or
release-0.8.35,".htaccess) here, relative to this directory. These files are copied"
release-0.8.35,directly to the root of the documentation.
release-0.8.35,html_extra_path = []
release-0.8.35,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
release-0.8.35,using the given strftime format.
release-0.8.35,"html_last_updated_fmt = '%b %d, %Y'"
release-0.8.35,"If true, SmartyPants will be used to convert quotes and dashes to"
release-0.8.35,typographically correct entities.
release-0.8.35,html_use_smartypants = True
release-0.8.35,"Custom sidebar templates, maps document names to template names."
release-0.8.35,html_sidebars = {}
release-0.8.35,"Additional templates that should be rendered to pages, maps page names to"
release-0.8.35,template names.
release-0.8.35,html_additional_pages = {}
release-0.8.35,"If false, no module index is generated."
release-0.8.35,html_domain_indices = True
release-0.8.35,"If false, no index is generated."
release-0.8.35,html_use_index = True
release-0.8.35,"If true, the index is split into individual pages for each letter."
release-0.8.35,html_split_index = False
release-0.8.35,"If true, links to the reST sources are added to the pages."
release-0.8.35,html_show_sourcelink = True
release-0.8.35,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
release-0.8.35,html_show_sphinx = True
release-0.8.35,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
release-0.8.35,html_show_copyright = True
release-0.8.35,"If true, an OpenSearch description file will be output, and all pages will"
release-0.8.35,contain a <link> tag referring to it.  The value of this option must be the
release-0.8.35,base URL from which the finished HTML is served.
release-0.8.35,html_use_opensearch = ''
release-0.8.35,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
release-0.8.35,html_file_suffix = None
release-0.8.35,Language to be used for generating the HTML full-text search index.
release-0.8.35,Sphinx supports the following languages:
release-0.8.35,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
release-0.8.35,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
release-0.8.35,html_search_language = 'en'
release-0.8.35,"A dictionary with options for the search language support, empty by default."
release-0.8.35,Now only 'ja' uses this config value
release-0.8.35,html_search_options = {'type': 'default'}
release-0.8.35,The name of a javascript file (relative to the configuration directory) that
release-0.8.35,"implements a search results scorer. If empty, the default will be used."
release-0.8.35,html_search_scorer = 'scorer.js'
release-0.8.35,Output file base name for HTML help builder.
release-0.8.35,-- Options for LaTeX output ---------------------------------------------
release-0.8.35,The paper size ('letterpaper' or 'a4paper').
release-0.8.35,"'papersize': 'letterpaper',"
release-0.8.35,"The font size ('10pt', '11pt' or '12pt')."
release-0.8.35,"'pointsize': '10pt',"
release-0.8.35,Additional stuff for the LaTeX preamble.
release-0.8.35,"'preamble': '',"
release-0.8.35,Latex figure (float) alignment
release-0.8.35,"'figure_align': 'htbp',"
release-0.8.35,Grouping the document tree into LaTeX files. List of tuples
release-0.8.35,"(source start file, target name, title,"
release-0.8.35,"author, documentclass [howto, manual, or own class])."
release-0.8.35,The name of an image file (relative to this directory) to place at the top of
release-0.8.35,the title page.
release-0.8.35,latex_logo = None
release-0.8.35,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
release-0.8.35,not chapters.
release-0.8.35,latex_use_parts = False
release-0.8.35,"If true, show page references after internal links."
release-0.8.35,latex_show_pagerefs = False
release-0.8.35,"If true, show URL addresses after external links."
release-0.8.35,latex_show_urls = False
release-0.8.35,Documents to append as an appendix to all manuals.
release-0.8.35,latex_appendices = []
release-0.8.35,"If false, no module index is generated."
release-0.8.35,latex_domain_indices = True
release-0.8.35,-- Options for manual page output ---------------------------------------
release-0.8.35,One entry per manual page. List of tuples
release-0.8.35,"(source start file, name, description, authors, manual section)."
release-0.8.35,"If true, show URL addresses after external links."
release-0.8.35,man_show_urls = False
release-0.8.35,-- Options for Texinfo output -------------------------------------------
release-0.8.35,Grouping the document tree into Texinfo files. List of tuples
release-0.8.35,"(source start file, target name, title, author,"
release-0.8.35,"dir menu entry, description, category)"
release-0.8.35,Documents to append as an appendix to all manuals.
release-0.8.35,texinfo_appendices = []
release-0.8.35,"If false, no module index is generated."
release-0.8.35,texinfo_domain_indices = True
release-0.8.35,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.35,texinfo_show_urls = 'footnote'
release-0.8.35,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
release-0.8.35,texinfo_no_detailmenu = False
release-0.8.35,-- Options for Epub output ----------------------------------------------
release-0.8.35,Bibliographic Dublin Core info.
release-0.8.35,The basename for the epub file. It defaults to the project name.
release-0.8.35,epub_basename = project
release-0.8.35,The HTML theme for the epub output. Since the default themes are not
release-0.8.35,"optimized for small screen space, using the same theme for HTML and epub"
release-0.8.35,"output is usually not wise. This defaults to 'epub', a theme designed to save"
release-0.8.35,visual space.
release-0.8.35,epub_theme = 'epub'
release-0.8.35,The language of the text. It defaults to the language option
release-0.8.35,or 'en' if the language is not set.
release-0.8.35,epub_language = ''
release-0.8.35,The scheme of the identifier. Typical schemes are ISBN or URL.
release-0.8.35,epub_scheme = ''
release-0.8.35,The unique identifier of the text. This can be a ISBN number
release-0.8.35,or the project homepage.
release-0.8.35,epub_identifier = ''
release-0.8.35,A unique identification for the text.
release-0.8.35,epub_uid = ''
release-0.8.35,A tuple containing the cover image and cover page html template filenames.
release-0.8.35,epub_cover = ()
release-0.8.35,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
release-0.8.35,epub_guide = ()
release-0.8.35,HTML files that should be inserted before the pages created by sphinx.
release-0.8.35,The format is a list of tuples containing the path and title.
release-0.8.35,epub_pre_files = []
release-0.8.35,HTML files that should be inserted after the pages created by sphinx.
release-0.8.35,The format is a list of tuples containing the path and title.
release-0.8.35,epub_post_files = []
release-0.8.35,A list of files that should not be packed into the epub file.
release-0.8.35,The depth of the table of contents in toc.ncx.
release-0.8.35,epub_tocdepth = 3
release-0.8.35,Allow duplicate toc entries.
release-0.8.35,epub_tocdup = True
release-0.8.35,Choose between 'default' and 'includehidden'.
release-0.8.35,epub_tocscope = 'default'
release-0.8.35,Fix unsupported image types using the Pillow.
release-0.8.35,epub_fix_images = False
release-0.8.35,Scale large images.
release-0.8.35,epub_max_image_width = 0
release-0.8.35,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.35,epub_show_urls = 'inline'
release-0.8.35,"If false, no index is generated."
release-0.8.35,epub_use_index = True
release-0.8.34-rc1,"Import numpy here, only when headers are needed"
release-0.8.34-rc1,Add numpy headers to include_dirs
release-0.8.34-rc1,Call original build_ext command
release-0.8.34-rc1,The dependencies are the same as the contents of requirements.txt
release-0.8.34-rc1,"A little ""fancy"" we select from the flattened array reshape back"
release-0.8.34-rc1,(Fortran format to get indexing right) and take the product to do an and
release-0.8.34-rc1,then convert back to boolean type.
release-0.8.34-rc1,Density sparseness is not well defined if there are no
release-0.8.34-rc1,internal edges (as per the referenced paper). However
release-0.8.34-rc1,MATLAB code from the original authors simply selects the
release-0.8.34-rc1,largest of *all* the edges in the case that there are
release-0.8.34-rc1,"no internal edges, so we do the same here"
release-0.8.34-rc1,"If there are any internal edges, then subselect them out"
release-0.8.34-rc1,If there are no internal edges then we want to take the
release-0.8.34-rc1,"max over all the edges that exist in the MST, so we simply"
release-0.8.34-rc1,do nothing and return all the edges in the MST.
release-0.8.34-rc1,-*- coding: utf-8 -*-
release-0.8.34-rc1,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.34-rc1,Steve Astels <sastels@gmail.com>
release-0.8.34-rc1,John Healy <jchealy@gmail.com>
release-0.8.34-rc1,
release-0.8.34-rc1,License: BSD 3 clause
release-0.8.34-rc1,"Treating this case explicitly, instead of letting"
release-0.8.34-rc1,"sklearn.metrics.pairwise_distances handle it,"
release-0.8.34-rc1,enables the usage of numpy.inf in the distance
release-0.8.34-rc1,matrix to indicate missing distance information.
release-0.8.34-rc1,TODO: Check if copying is necessary
release-0.8.34-rc1,raise TypeError('Sparse distance matrices not yet supported')
release-0.8.34-rc1,Warn if the MST couldn't be constructed around the missing distances
release-0.8.34-rc1,mst_linkage_core does not generate a full minimal spanning tree
release-0.8.34-rc1,If a tree is required then we must build the edges from the information
release-0.8.34-rc1,returned by mst_linkage_core (i.e. just the order of points to be merged)
release-0.8.34-rc1,Sort edges of the min_spanning_tree by weight
release-0.8.34-rc1,Convert edge list into standard hierarchical clustering format
release-0.8.34-rc1,Check for connected component on X
release-0.8.34-rc1,Compute sparse mutual reachability graph
release-0.8.34-rc1,"if max_dist > 0, max distance to use when the reachability is infinite"
release-0.8.34-rc1,Check connected component on mutual reachability
release-0.8.34-rc1,"If more than one component, it means that even if the distance matrix X"
release-0.8.34-rc1,"has one component, there exists with less than `min_samples` neighbors"
release-0.8.34-rc1,Compute the minimum spanning tree for the sparse graph
release-0.8.34-rc1,Convert the graph to scipy cluster array format
release-0.8.34-rc1,Sort edges of the min_spanning_tree by weight
release-0.8.34-rc1,Convert edge list into standard hierarchical clustering format
release-0.8.34-rc1,The Cython routines used require contiguous arrays
release-0.8.34-rc1,TO DO: Deal with p for minkowski appropriately
release-0.8.34-rc1,Get distance to kth nearest neighbour
release-0.8.34-rc1,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.34-rc1,Sort edges of the min_spanning_tree by weight
release-0.8.34-rc1,Convert edge list into standard hierarchical clustering format
release-0.8.34-rc1,The Cython routines used require contiguous arrays
release-0.8.34-rc1,Get distance to kth nearest neighbour
release-0.8.34-rc1,Mutual reachability distance is implicit in mst_linkage_core_vector
release-0.8.34-rc1,Sort edges of the min_spanning_tree by weight
release-0.8.34-rc1,Convert edge list into standard hierarchical clustering format
release-0.8.34-rc1,Sort edges of the min_spanning_tree by weight
release-0.8.34-rc1,Convert edge list into standard hierarchical clustering format
release-0.8.34-rc1,Sort edges of the min_spanning_tree by weight
release-0.8.34-rc1,Convert edge list into standard hierarchical clustering format
release-0.8.34-rc1,Checks input and converts to an nd-array where possible
release-0.8.34-rc1,"Only non-sparse, precomputed distance matrices are handled here"
release-0.8.34-rc1,and thereby allowed to contain numpy.inf for missing distances
release-0.8.34-rc1,Python 2 and 3 compliant string_type checking
release-0.8.34-rc1,We can't do much with sparse matrices ...
release-0.8.34-rc1,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.34-rc1,still debugging for now
release-0.8.34-rc1,TO DO: Need heuristic to decide when to go to boruvka;
release-0.8.34-rc1,still debugging for now
release-0.8.34-rc1,Inherits from sklearn
release-0.8.34-rc1,Non-precomputed matrices may contain non-finite values.
release-0.8.34-rc1,Rows with these values
release-0.8.34-rc1,Pass only the purely finite indices into hdbscan
release-0.8.34-rc1,We will later assign all non-finite points to the background -1 cluster
release-0.8.34-rc1,Handle sparse precomputed distance matrices separately
release-0.8.34-rc1,"Only non-sparse, precomputed distance matrices are allowed"
release-0.8.34-rc1,to have numpy.inf values indicating missing distances
release-0.8.34-rc1,"prediction data only applies to the persistent model, so remove"
release-0.8.34-rc1,it from the keyword args we pass on the the function
release-0.8.34-rc1,remap indices to align with original data in the case of non-finite entries.
release-0.8.34-rc1,"Unltimately, for each Ci, we only require the"
release-0.8.34-rc1,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
release-0.8.34-rc1,"So let's call this value DSPC_wrt(Ci), i.e."
release-0.8.34-rc1,density separation 'with respect to' Ci.
release-0.8.34-rc1,If exactly one of the points is noise
release-0.8.34-rc1,Set the density sparseness of the cluster
release-0.8.34-rc1,to the sparsest value seen so far.
release-0.8.34-rc1,Check whether density separations with
release-0.8.34-rc1,respect to each of these clusters can
release-0.8.34-rc1,be reduced.
release-0.8.34-rc1,"In case min_outlier_sep is still np.inf, we assign a new value to it."
release-0.8.34-rc1,This only makes sense if num_clusters = 1 since it has turned out
release-0.8.34-rc1,that the MR-MST has no edges between a noise point and a core point.
release-0.8.34-rc1,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
release-0.8.34-rc1,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
release-0.8.34-rc1,MR-MST might contain an edge with one point in Cj and ther other one
release-0.8.34-rc1,"in Ck. Here, we replace the infinite density separation of Ci by"
release-0.8.34-rc1,another large enough value.
release-0.8.34-rc1,
release-0.8.34-rc1,TODO: Think of a better yet efficient way to handle this.
release-0.8.34-rc1,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
release-0.8.34-rc1,Use a previously initialized/trained HDBSCAN
release-0.8.34-rc1,Handle the trivial case first.
release-0.8.34-rc1,Always generate prediction_data to avoid later woes
release-0.8.34-rc1,This will later be chosen according to n_clusters
release-0.8.34-rc1,Initialize and train clusterer if one was not previously supplied.
release-0.8.34-rc1,Always generate prediction data
release-0.8.34-rc1,We do not pass cluster_selection_epsilon here.
release-0.8.34-rc1,"While this adds unnecessary computation, it makes the code"
release-0.8.34-rc1,easier to read and debug.
release-0.8.34-rc1,"Train on 'X'. Do this even if the supplied clusterer was trained,"
release-0.8.34-rc1,because we want to make sure it fits 'X'.
release-0.8.34-rc1,"Pick an epsilon value right after a split produces n_clusters,"
release-0.8.34-rc1,and the don't split further for smaller epsilon (larger lambda)
release-0.8.34-rc1,Or use the specified cluster_selection_epsilon
release-0.8.34-rc1,"Extract tree related stuff, in order to re-assign labels"
release-0.8.34-rc1,Get labels according to the required cluster_selection_epsilon
release-0.8.34-rc1,Reflect the related changes in HDBSCAN.
release-0.8.34-rc1,PredictionData attached to HDBSCAN should also change.
release-0.8.34-rc1,A function re_init is defined in this module to handle this.
release-0.8.34-rc1,"From a fitted HDBSCAN model, predict for n_clusters=5"
release-0.8.34-rc1,Store prediciton data for later use.
release-0.8.34-rc1,and use this prediction data to predict on new points
release-0.8.34-rc1,Get number of fitted clusters for later use.
release-0.8.34-rc1,We'll need the condensed tree later...
release-0.8.34-rc1,"If none of the three arguments: prediction_data, n_clusters,"
release-0.8.34-rc1,"and cluster_selection_epsilon are supplied,"
release-0.8.34-rc1,then use clusterer's prediciton data directly
release-0.8.34-rc1,"If either of n_clusters or cluster_selection_epsilon were supplied,"
release-0.8.34-rc1,then build prediction data from these by modifying clusterer's
release-0.8.34-rc1,Get prediction data from clusterer
release-0.8.34-rc1,Modify prediction_data to reflect new n_clusters
release-0.8.34-rc1,"First, make a copy of prediction data to avoid modifying source"
release-0.8.34-rc1,Cluster selection method is hold by condensed_tree.
release-0.8.34-rc1,Change from 'eom' to 'leaf' if n_clusters is too large.
release-0.8.34-rc1,This change does not affect the tree associated with 'clusterer'
release-0.8.34-rc1,Re-initialize prediction_data for the specified n_clusters or epsilon
release-0.8.34-rc1,============================================================
release-0.8.34-rc1,Now we're ready to use prediction_data
release-0.8.34-rc1,"The rest of the code is copied from HDBSCAN's approximate_predict,"
release-0.8.34-rc1,but modified to use prediction_data instead of clusterer's attribute
release-0.8.34-rc1,Extract condensed tree for later use
release-0.8.34-rc1,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.34-rc1,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.34-rc1,Use the same prediction_data as clusterer's
release-0.8.34-rc1,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.34-rc1,produces a specified number of n_clusters
release-0.8.34-rc1,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.34-rc1,Create another instance of prediction_data that is consistent
release-0.8.34-rc1,with the selected value of epsilon.
release-0.8.34-rc1,Flat clustering from prediction data
release-0.8.34-rc1,Initialize probabilities
release-0.8.34-rc1,k-NN for prediciton points to training set
release-0.8.34-rc1,Loop over prediction points to compute probabilities
release-0.8.34-rc1,We need to find where in the tree the new point would go
release-0.8.34-rc1,for the purposes of outlier membership approximation
release-0.8.34-rc1,"Find row in tree where nearest neighbor drops out,"
release-0.8.34-rc1,so we can get a lambda value for the nearest neighbor
release-0.8.34-rc1,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
release-0.8.34-rc1,"Equivalently, this assigns core distance for prediction point as"
release-0.8.34-rc1,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
release-0.8.34-rc1,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.34-rc1,Use new prediction_data that points to exemplars that are specific
release-0.8.34-rc1,to the choice of n_clusters
release-0.8.34-rc1,Probabilities based on how long the nearest exemplar persists in
release-0.8.34-rc1,each cluster (with respect to most persistent exemplar)
release-0.8.34-rc1,Use new clusters that are defined by the choice of n_clusters.
release-0.8.34-rc1,Merge the two probabilities to produce a single set of probabilities
release-0.8.34-rc1,Include probability that the nearest neighbor belongs to a cluster
release-0.8.34-rc1,Rename variable so it's easy to understand what's being returned
release-0.8.34-rc1,Extract condensed tree for later use
release-0.8.34-rc1,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
release-0.8.34-rc1,"If neither is specified, use clusterer's cluster_selection_epsilon"
release-0.8.34-rc1,Use the same prediction_data as clusterer's
release-0.8.34-rc1,Compute cluster_selection_epsilon so that a flat clustering
release-0.8.34-rc1,produces a specified number of n_clusters
release-0.8.34-rc1,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
release-0.8.34-rc1,Create another instance of prediction_data that is consistent
release-0.8.34-rc1,with the selected value of epsilon.
release-0.8.34-rc1,Flat clustering at the chosen epsilon from prediction_data
release-0.8.34-rc1,"When no clusters found, return array of 0's"
release-0.8.34-rc1,Probabilities based on distance to closest exemplar in each cluster:
release-0.8.34-rc1,Use new prediction_data that points to exemplars that are specific
release-0.8.34-rc1,to the choice of n_clusters
release-0.8.34-rc1,Probabilities based on how long the point persists in
release-0.8.34-rc1,each cluster (with respect to most persistent exemplar)
release-0.8.34-rc1,Use new clusters that are defined by the choice of n_clusters.
release-0.8.34-rc1,Include probability that the point belongs to a cluster
release-0.8.34-rc1,Aggregate the three probabilities to produce membership vectors
release-0.8.34-rc1,Re-name variable to clarify what's being returned.
release-0.8.34-rc1,"With method 'eom', max clusters are produced for epsilon=0,"
release-0.8.34-rc1,as computed by
release-0.8.34-rc1,Increasing epsilon can only reduce the number of ouput clusters.
release-0.8.34-rc1,"To select epsilon, consider all values where clusters are split"
release-0.8.34-rc1,Subtract the extra e-12 to avoid numerical errors in comparison
release-0.8.34-rc1,"Then, we avoid splitting for all epsilon below this."
release-0.8.34-rc1,Use an epsilon value that produces the right number of clusters.
release-0.8.34-rc1,The condensed tree of HDBSCAN has this information.
release-0.8.34-rc1,Extract the lambda levels (=1/distance) from the condensed tree
release-0.8.34-rc1,We don't want values that produce a large cluster and
release-0.8.34-rc1,just one or two individual points.
release-0.8.34-rc1,Keep only those lambda values corresponding to cluster separation;
release-0.8.34-rc1,"i.e., with child_sizes > 1"
release-0.8.34-rc1,"Get the unique values, because when two clusters fall out of one,"
release-0.8.34-rc1,the entry with lambda is repeated.
release-0.8.34-rc1,lambda values are sorted by np.unique.
release-0.8.34-rc1,"Now, get epsilon (distance threshold) as 1/lambda"
release-0.8.34-rc1,"At this epsilon, n_clusters have been split."
release-0.8.34-rc1,Stop splits at epsilons smaller than this.
release-0.8.34-rc1,"To allow for numerical errors,"
release-0.8.34-rc1,predData must be a pre-trained PredictionData instance from hdbscan
release-0.8.34-rc1,"If n_clusters is specified, compute cluster_selection_epsilon;"
release-0.8.34-rc1,This is the key modification:
release-0.8.34-rc1,Select clusters according to selection method and epsilon.
release-0.8.34-rc1,_new_select_clusters is a modification of get_clusters
release-0.8.34-rc1,from hdbscan._hdbscan_tree
release-0.8.34-rc1,"raw tree, used later to get exemplars and lambda values"
release-0.8.34-rc1,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
release-0.8.34-rc1,to the cluster labels produced as output
release-0.8.34-rc1,Re-compute lambdas and exemplars for selected clusters;
release-0.8.34-rc1,max_lambda <=> smallest distance <=> most persistent point(s)
release-0.8.34-rc1,Map all sub-clusters of selected cluster to the selected cluster's
release-0.8.34-rc1,label in output.
release-0.8.34-rc1,Map lambdas too...
release-0.8.34-rc1,Create set of exemplar points for later use.
release-0.8.34-rc1,Novel points are assigned based on cluster of closest exemplar.
release-0.8.34-rc1,"For each selected cluster, get all of its leaves,"
release-0.8.34-rc1,"and leaves of leaves, and so on..."
release-0.8.34-rc1,Largest lambda => Most persistent points
release-0.8.34-rc1,Get the most persistent points
release-0.8.34-rc1,Add most persistent points as exemplars
release-0.8.34-rc1,Add exemplars for each leaf of each selected cluster.
release-0.8.34-rc1,(exclude root)
release-0.8.34-rc1,-*- coding: utf-8 -*-
release-0.8.34-rc1,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.34-rc1,
release-0.8.34-rc1,License: BSD 3 clause
release-0.8.34-rc1,"Return the only cluster, the root"
release-0.8.34-rc1,We want to get the x and y coordinates for the start of each cluster
release-0.8.34-rc1,"Initialize the leaves, since we know where they go, the iterate"
release-0.8.34-rc1,"through everything from the leaves back, setting coords as we go"
release-0.8.34-rc1,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
release-0.8.34-rc1,bottoms and widths for each rectangle. We can go through each cluster
release-0.8.34-rc1,and do this for each in turn.
release-0.8.34-rc1,Ensure we don't try to take log of zero
release-0.8.34-rc1,Finally we need the horizontal lines that occur at cluster splits.
release-0.8.34-rc1,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
release-0.8.34-rc1,"axis.plot(xs, ys, color='black', linewidth=1)"
release-0.8.34-rc1,Extract the chosen cluster bounds. If enough duplicate data points exist in the
release-0.8.34-rc1,data the lambda value might be infinite. This breaks labeling and highlighting
release-0.8.34-rc1,the chosen clusters.
release-0.8.34-rc1,Extract the plot range of the y-axis and set default center and height values for ellipses.
release-0.8.34-rc1,Extremly dense clusters might result in near infinite lambda values. Setting max_height
release-0.8.34-rc1,based on the percentile should alleviate the impact on plotting.
release-0.8.34-rc1,Set center and height to default values if necessary
release-0.8.34-rc1,Ensure the ellipse is visible
release-0.8.34-rc1,Get a 2D projection; if we have a lot of dimensions use PCA first
release-0.8.34-rc1,Use PCA to get down to 32 dimension
release-0.8.34-rc1,-*- coding: utf-8 -*-
release-0.8.34-rc1,Author: Leland McInnes <leland.mcinnes@gmail.com>
release-0.8.34-rc1,
release-0.8.34-rc1,License: BSD 3 clause
release-0.8.34-rc1,The Cython routines used require contiguous arrays
release-0.8.34-rc1,The Cython routines used require contiguous arrays
release-0.8.34-rc1,We can't do much with sparse matrices ...
release-0.8.34-rc1,Need heuristic to decide when to go to boruvka;
release-0.8.34-rc1,still debugging for now
release-0.8.34-rc1,Need heuristic to decide when to go to boruvka;
release-0.8.34-rc1,still debugging for now
release-0.8.34-rc1,Support various prediction methods for predicting cluster membership
release-0.8.34-rc1,of new or unseen points. There are several ways to interpret how
release-0.8.34-rc1,"to do this correctly, so we provide several methods for"
release-0.8.34-rc1,the different use cases that may arise.
release-0.8.34-rc1,raw_condensed_tree = condensed_tree.to_numpy()
release-0.8.34-rc1,New point departs with the old
release-0.8.34-rc1,Find appropriate cluster based on lambda of new point
release-0.8.34-rc1,Find appropriate cluster based on lambda of new point
release-0.8.34-rc1,"the point is in the dataset, fix lambda for rounding errors"
release-0.8.34-rc1,We need to find where in the tree the new point would go
release-0.8.34-rc1,for the purposes of outlier membership approximation
release-0.8.34-rc1,"When no clusters found, return array of 0's"
release-0.8.34-rc1,import pickle
release-0.8.34-rc1,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.34-rc1,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.34-rc1,"number of clusters, ignoring noise if present"
release-0.8.34-rc1,"metric is the function reference, not the string key."
release-0.8.34-rc1,def test_rsl_unavailable_hierarchy():
release-0.8.34-rc1,clusterer = RobustSingleLinkage()
release-0.8.34-rc1,with warnings.catch_warnings(record=True) as w:
release-0.8.34-rc1,tree = clusterer.cluster_hierarchy_
release-0.8.34-rc1,assert len(w) > 0
release-0.8.34-rc1,assert tree is None
release-0.8.34-rc1,"H, y = shuffle(X, y, random_state=7)"
release-0.8.34-rc1,Disable for now -- need to refactor to meet newer standards
release-0.8.34-rc1,from sklearn.cluster.tests.common import generate_clustered_data
release-0.8.34-rc1,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
release-0.8.34-rc1,this fails if no $DISPLAY specified
release-0.8.34-rc1,"number of clusters, ignoring noise if present"
release-0.8.34-rc1,"number of clusters, ignoring noise if present"
release-0.8.34-rc1,"H, y = shuffle(X, y, random_state=7)"
release-0.8.34-rc1,"metric is the function reference, not the string key."
release-0.8.34-rc1,def test_hdbscan_unavailable_attributes():
release-0.8.34-rc1,clusterer = HDBSCAN(gen_min_span_tree=False)
release-0.8.34-rc1,with warnings.catch_warnings(record=True) as w:
release-0.8.34-rc1,tree = clusterer.condensed_tree_
release-0.8.34-rc1,assert len(w) > 0
release-0.8.34-rc1,assert tree is None
release-0.8.34-rc1,with warnings.catch_warnings(record=True) as w:
release-0.8.34-rc1,tree = clusterer.single_linkage_tree_
release-0.8.34-rc1,assert len(w) > 0
release-0.8.34-rc1,assert tree is None
release-0.8.34-rc1,with warnings.catch_warnings(record=True) as w:
release-0.8.34-rc1,scores = clusterer.outlier_scores_
release-0.8.34-rc1,assert len(w) > 0
release-0.8.34-rc1,assert scores is None
release-0.8.34-rc1,with warnings.catch_warnings(record=True) as w:
release-0.8.34-rc1,tree = clusterer.minimum_spanning_tree_
release-0.8.34-rc1,assert len(w) > 0
release-0.8.34-rc1,assert tree is None
release-0.8.34-rc1,def test_hdbscan_min_span_tree_availability():
release-0.8.34-rc1,clusterer = HDBSCAN().fit(X)
release-0.8.34-rc1,tree = clusterer.minimum_spanning_tree_
release-0.8.34-rc1,assert tree is None
release-0.8.34-rc1,D = distance.squareform(distance.pdist(X))
release-0.8.34-rc1,D /= np.max(D)
release-0.8.34-rc1,HDBSCAN(metric='precomputed').fit(D)
release-0.8.34-rc1,tree = clusterer.minimum_spanning_tree_
release-0.8.34-rc1,assert tree is None
release-0.8.34-rc1,no prediction data error
release-0.8.34-rc1,wrong dimensions error
release-0.8.34-rc1,no clusters warning
release-0.8.34-rc1,def test_hdbscan_membership_vector():
release-0.8.34-rc1,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.34-rc1,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
release-0.8.34-rc1,assert_array_almost_equal(
release-0.8.34-rc1,"vector,"
release-0.8.34-rc1,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
release-0.8.34-rc1,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
release-0.8.34-rc1,assert_array_almost_equal(
release-0.8.34-rc1,"vector,"
release-0.8.34-rc1,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
release-0.8.34-rc1,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
release-0.8.34-rc1,assert_array_almost_equal(
release-0.8.34-rc1,"vector,"
release-0.8.34-rc1,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
release-0.8.34-rc1,
release-0.8.34-rc1,def test_hdbscan_all_points_membership_vectors():
release-0.8.34-rc1,clusterer = HDBSCAN(prediction_data=True).fit(X)
release-0.8.34-rc1,vects = all_points_membership_vectors(clusterer)
release-0.8.34-rc1,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
release-0.8.34-rc1,"2.52734246e-001,"
release-0.8.34-rc1,8.38299608e-002]))
release-0.8.34-rc1,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
release-0.8.34-rc1,"8.35882503e-002,"
release-0.8.34-rc1,1.07356406e-001]))
release-0.8.34-rc1,without epsilon we should see many noise points as children of root.
release-0.8.34-rc1,for this random seed an epsilon of 0.2 will produce exactly 2 noise
release-0.8.34-rc1,points at that cut in single linkage.
release-0.8.34-rc1,Disable for now -- need to refactor to meet newer standards
release-0.8.34-rc1,Probably not applicable now #
release-0.8.34-rc1,def test_dbscan_sparse():
release-0.8.34-rc1,def test_dbscan_balltree():
release-0.8.34-rc1,def test_pickle():
release-0.8.34-rc1,def test_dbscan_core_samples_toy():
release-0.8.34-rc1,def test_boundaries():
release-0.8.34-rc1,"Given negative, zero and positive denominator and positive numerator"
release-0.8.34-rc1,Make sure safe division is always positive and doesn't raise ZeroDivision error
release-0.8.34-rc1,Ignore future warnings thrown by sklearn
release-0.8.34-rc1,Create a nice dataset with 6 circular clusters and 2 moons
release-0.8.34-rc1,"Given, the base HDBSCAN with method 'eom'"
release-0.8.34-rc1,"When we ask for flat clustering with same n_clusters,"
release-0.8.34-rc1,"Then, the labels and probabilities should match"
release-0.8.34-rc1,"Given, the base HDBSCAN with method 'leaf'"
release-0.8.34-rc1,"When we ask for flat clustering with same n_clusters,"
release-0.8.34-rc1,"Then, the labels and probabilities should match"
release-0.8.34-rc1,Method 'eom'...
release-0.8.34-rc1,"Given, a flat clustering for required n_clusters,"
release-0.8.34-rc1,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.34-rc1,"Then, the labels and probabilities should match"
release-0.8.34-rc1,Method 'leaf'...
release-0.8.34-rc1,"Given, a flat clustering for required n_clusters,"
release-0.8.34-rc1,"When we run the base HDBSCAN using it's epsilon,"
release-0.8.34-rc1,"Then, the labels and probabilities should match"
release-0.8.34-rc1,"Given the max number of clusters that can be produced by 'eom',"
release-0.8.34-rc1,(these are produced for epsilon=0) (??? Needs verification)
release-0.8.34-rc1,"When we try flat clustering with 'eom' method for more n_clusters,"
release-0.8.34-rc1,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.34-rc1,"assert ""Cannot predict"" in str(w[-1].message)"
release-0.8.34-rc1,"the resulting clusterer switches to using method 'leaf',"
release-0.8.34-rc1,and the resulting probabilities and labels must match
release-0.8.34-rc1,"Given the base HDBSCAN trained on some data,"
release-0.8.34-rc1,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.34-rc1,"Then, the clustering should match that due to approximate_predict,"
release-0.8.34-rc1,"Given a flat clustering trained for some n_clusters,"
release-0.8.34-rc1,"When using approximate_predict_flat without specifying n_clusters,"
release-0.8.34-rc1,"Then, the number of clusters produced must match the original n_clusters"
release-0.8.34-rc1,and all probabilities are <= 1.
release-0.8.34-rc1,"Given a flat clustering trained for some n_clusters,"
release-0.8.34-rc1,"When using approximate_predict_flat with specified n_clusters,"
release-0.8.34-rc1,"Then, the requested number of clusters must be produced"
release-0.8.34-rc1,and all probabilities are <= 1.
release-0.8.34-rc1,When using approximate_predict_flat with more clusters
release-0.8.34-rc1,"than 'eom' can handle,"
release-0.8.34-rc1,"Then, a warning is raised saying 'eom' can't get this clustering,"
release-0.8.34-rc1,But the requested number of clusters must still be produced using 'leaf'
release-0.8.34-rc1,and all probabilities are <= 1.
release-0.8.34-rc1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.34-rc1,"When membership_vector_flat is called with new data,"
release-0.8.34-rc1,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.34-rc1,and the number of points should equal those in the test set
release-0.8.34-rc1,and all probabilities are <= 1.
release-0.8.34-rc1,========================================
release-0.8.34-rc1,"Given a flat clustering for a specified n_clusters,"
release-0.8.34-rc1,"When membership_vector_flat is called with new data,"
release-0.8.34-rc1,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.34-rc1,and the number of points should equal those in the test set
release-0.8.34-rc1,and all probabilities are <= 1.
release-0.8.34-rc1,Ignore user warnings in this function
release-0.8.34-rc1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.34-rc1,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.34-rc1,"Then the number of clusters in memberships should be as requested,"
release-0.8.34-rc1,and the number of points should equal those in the test set
release-0.8.34-rc1,and all probabilities are <= 1.
release-0.8.34-rc1,========================================
release-0.8.34-rc1,"Given a flat clustering for a specified n_clusters,"
release-0.8.34-rc1,"When membership_vector_flat is called with new data for some n_clusters,"
release-0.8.34-rc1,"Then the number of clusters in memberships should be as requested,"
release-0.8.34-rc1,and the number of points should equal those in the test set
release-0.8.34-rc1,and all probabilities are <= 1.
release-0.8.34-rc1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.34-rc1,"When all_points_membership_vectors_flat is called,"
release-0.8.34-rc1,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.34-rc1,and the number of points should equal those in the training set
release-0.8.34-rc1,and all probabilities are <= 1.
release-0.8.34-rc1,========================================
release-0.8.34-rc1,"Given a flat clustering for a specified n_clusters,"
release-0.8.34-rc1,"When all_points_membership_vectors_flat is called,"
release-0.8.34-rc1,"Then the number of clusters in memberships matches those of clusterer,"
release-0.8.34-rc1,and the number of points should equal those in the training set
release-0.8.34-rc1,and all probabilities are <= 1.
release-0.8.34-rc1,Ignore user warnings in this function
release-0.8.34-rc1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
release-0.8.34-rc1,"When all_points_membership_vectors_flat is called for some n_clusters,"
release-0.8.34-rc1,"Then the number of clusters in memberships should be as requested,"
release-0.8.34-rc1,and the number of points should equal those in the training set
release-0.8.34-rc1,and all probabilities are <= 1.
release-0.8.34-rc1,========================================
release-0.8.34-rc1,"Given a flat clustering for a specified n_clusters,"
release-0.8.34-rc1,"When membership_vector_flat is called for some n_clusters,"
release-0.8.34-rc1,"Then the number of clusters in memberships should be as requested,"
release-0.8.34-rc1,and the number of points should equal those in the training set
release-0.8.34-rc1,and all probabilities are <= 1.
release-0.8.34-rc1,Generate datasets. We choose the size big enough to see the scalability
release-0.8.34-rc1,"of the algorithms, but not too big to avoid too long running times"
release-0.8.34-rc1,normalize dataset for easier parameter selection
release-0.8.34-rc1,estimate bandwidth for mean shift
release-0.8.34-rc1,connectivity matrix for structured Ward
release-0.8.34-rc1,make connectivity symmetric
release-0.8.34-rc1,create clustering estimators
release-0.8.34-rc1,predict cluster memberships
release-0.8.34-rc1,plot
release-0.8.34-rc1,-*- coding: utf-8 -*-
release-0.8.34-rc1,#############################################################################
release-0.8.34-rc1,Generate sample data
release-0.8.34-rc1,#############################################################################
release-0.8.34-rc1,Compute DBSCAN
release-0.8.34-rc1,"Number of clusters in labels, ignoring noise if present."
release-0.8.34-rc1,#############################################################################
release-0.8.34-rc1,Plot result
release-0.8.34-rc1,Black removed and is used for noise instead.
release-0.8.34-rc1,Black used for noise.
release-0.8.34-rc1,Black used for noise.
release-0.8.34-rc1,-*- coding: utf-8 -*-
release-0.8.34-rc1,
release-0.8.34-rc1,"hdbscan documentation build configuration file, created by"
release-0.8.34-rc1,sphinx-quickstart on Sat May 28 10:34:44 2016.
release-0.8.34-rc1,
release-0.8.34-rc1,This file is execfile()d with the current directory set to its
release-0.8.34-rc1,containing dir.
release-0.8.34-rc1,
release-0.8.34-rc1,Note that not all possible configuration values are present in this
release-0.8.34-rc1,autogenerated file.
release-0.8.34-rc1,
release-0.8.34-rc1,All configuration values have a default; values that are commented out
release-0.8.34-rc1,serve to show the default.
release-0.8.34-rc1,"If extensions (or modules to document with autodoc) are in another directory,"
release-0.8.34-rc1,add these directories to sys.path here. If the directory is relative to the
release-0.8.34-rc1,"documentation root, use os.path.abspath to make it absolute, like shown here."
release-0.8.34-rc1,"## We now install the package in a virtualenv to build docs, so this is not needed"
release-0.8.34-rc1,"sys.path.insert(0, os.path.abspath('../'))"
release-0.8.34-rc1,-- General configuration ------------------------------------------------
release-0.8.34-rc1,"If your documentation needs a minimal Sphinx version, state it here."
release-0.8.34-rc1,needs_sphinx = '1.0'
release-0.8.34-rc1,"Add any Sphinx extension module names here, as strings. They can be"
release-0.8.34-rc1,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
release-0.8.34-rc1,ones.
release-0.8.34-rc1,"'sphinx.ext.napoleon',"
release-0.8.34-rc1,'numpy_ext.numpydoc'
release-0.8.34-rc1,napoleon_google_docstring = False
release-0.8.34-rc1,napoleon_numpy_docstring = True
release-0.8.34-rc1,"Add any paths that contain templates here, relative to this directory."
release-0.8.34-rc1,The suffix(es) of source filenames.
release-0.8.34-rc1,You can specify multiple suffix as a list of string:
release-0.8.34-rc1,"source_suffix = ['.rst', '.md']"
release-0.8.34-rc1,The encoding of source files.
release-0.8.34-rc1,source_encoding = 'utf-8-sig'
release-0.8.34-rc1,The master toctree document.
release-0.8.34-rc1,General information about the project.
release-0.8.34-rc1,"The version info for the project you're documenting, acts as replacement for"
release-0.8.34-rc1,"|version| and |release|, also used in various other places throughout the"
release-0.8.34-rc1,built documents.
release-0.8.34-rc1,
release-0.8.34-rc1,The short X.Y version.
release-0.8.34-rc1,"The full version, including alpha/beta/rc tags."
release-0.8.34-rc1,The language for content autogenerated by Sphinx. Refer to documentation
release-0.8.34-rc1,for a list of supported languages.
release-0.8.34-rc1,
release-0.8.34-rc1,This is also used if you do content translation via gettext catalogs.
release-0.8.34-rc1,"Usually you set ""language"" from the command line for these cases."
release-0.8.34-rc1,"There are two options for replacing |today|: either, you set today to some"
release-0.8.34-rc1,"non-false value, then it is used:"
release-0.8.34-rc1,today = ''
release-0.8.34-rc1,"Else, today_fmt is used as the format for a strftime call."
release-0.8.34-rc1,"today_fmt = '%B %d, %Y'"
release-0.8.34-rc1,"List of patterns, relative to source directory, that match files and"
release-0.8.34-rc1,directories to ignore when looking for source files.
release-0.8.34-rc1,The reST default role (used for this markup: `text`) to use for all
release-0.8.34-rc1,documents.
release-0.8.34-rc1,default_role = None
release-0.8.34-rc1,"If true, '()' will be appended to :func: etc. cross-reference text."
release-0.8.34-rc1,add_function_parentheses = True
release-0.8.34-rc1,"If true, the current module name will be prepended to all description"
release-0.8.34-rc1,unit titles (such as .. function::).
release-0.8.34-rc1,add_module_names = True
release-0.8.34-rc1,"If true, sectionauthor and moduleauthor directives will be shown in the"
release-0.8.34-rc1,output. They are ignored by default.
release-0.8.34-rc1,show_authors = False
release-0.8.34-rc1,The name of the Pygments (syntax highlighting) style to use.
release-0.8.34-rc1,A list of ignored prefixes for module index sorting.
release-0.8.34-rc1,modindex_common_prefix = []
release-0.8.34-rc1,"If true, keep warnings as ""system message"" paragraphs in the built documents."
release-0.8.34-rc1,keep_warnings = False
release-0.8.34-rc1,"If true, `todo` and `todoList` produce output, else they produce nothing."
release-0.8.34-rc1,-- Options for HTML output ----------------------------------------------
release-0.8.34-rc1,The theme to use for HTML and HTML Help pages.  See the documentation for
release-0.8.34-rc1,a list of builtin themes.
release-0.8.34-rc1,html_theme = 'alabaster'
release-0.8.34-rc1,Theme options are theme-specific and customize the look and feel of a theme
release-0.8.34-rc1,"further.  For a list of options available for each theme, see the"
release-0.8.34-rc1,documentation.
release-0.8.34-rc1,html_theme_options = {}
release-0.8.34-rc1,"Add any paths that contain custom themes here, relative to this directory."
release-0.8.34-rc1,html_theme_path = []
release-0.8.34-rc1,"The name for this set of Sphinx documents.  If None, it defaults to"
release-0.8.34-rc1,"""<project> v<release> documentation""."
release-0.8.34-rc1,html_title = None
release-0.8.34-rc1,A shorter title for the navigation bar.  Default is the same as html_title.
release-0.8.34-rc1,html_short_title = None
release-0.8.34-rc1,The name of an image file (relative to this directory) to place at the top
release-0.8.34-rc1,of the sidebar.
release-0.8.34-rc1,html_logo = None
release-0.8.34-rc1,The name of an image file (within the static path) to use as favicon of the
release-0.8.34-rc1,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
release-0.8.34-rc1,pixels large.
release-0.8.34-rc1,html_favicon = None
release-0.8.34-rc1,"Add any paths that contain custom static files (such as style sheets) here,"
release-0.8.34-rc1,"relative to this directory. They are copied after the builtin static files,"
release-0.8.34-rc1,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
release-0.8.34-rc1,Add any extra paths that contain custom files (such as robots.txt or
release-0.8.34-rc1,".htaccess) here, relative to this directory. These files are copied"
release-0.8.34-rc1,directly to the root of the documentation.
release-0.8.34-rc1,html_extra_path = []
release-0.8.34-rc1,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
release-0.8.34-rc1,using the given strftime format.
release-0.8.34-rc1,"html_last_updated_fmt = '%b %d, %Y'"
release-0.8.34-rc1,"If true, SmartyPants will be used to convert quotes and dashes to"
release-0.8.34-rc1,typographically correct entities.
release-0.8.34-rc1,html_use_smartypants = True
release-0.8.34-rc1,"Custom sidebar templates, maps document names to template names."
release-0.8.34-rc1,html_sidebars = {}
release-0.8.34-rc1,"Additional templates that should be rendered to pages, maps page names to"
release-0.8.34-rc1,template names.
release-0.8.34-rc1,html_additional_pages = {}
release-0.8.34-rc1,"If false, no module index is generated."
release-0.8.34-rc1,html_domain_indices = True
release-0.8.34-rc1,"If false, no index is generated."
release-0.8.34-rc1,html_use_index = True
release-0.8.34-rc1,"If true, the index is split into individual pages for each letter."
release-0.8.34-rc1,html_split_index = False
release-0.8.34-rc1,"If true, links to the reST sources are added to the pages."
release-0.8.34-rc1,html_show_sourcelink = True
release-0.8.34-rc1,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
release-0.8.34-rc1,html_show_sphinx = True
release-0.8.34-rc1,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
release-0.8.34-rc1,html_show_copyright = True
release-0.8.34-rc1,"If true, an OpenSearch description file will be output, and all pages will"
release-0.8.34-rc1,contain a <link> tag referring to it.  The value of this option must be the
release-0.8.34-rc1,base URL from which the finished HTML is served.
release-0.8.34-rc1,html_use_opensearch = ''
release-0.8.34-rc1,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
release-0.8.34-rc1,html_file_suffix = None
release-0.8.34-rc1,Language to be used for generating the HTML full-text search index.
release-0.8.34-rc1,Sphinx supports the following languages:
release-0.8.34-rc1,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
release-0.8.34-rc1,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
release-0.8.34-rc1,html_search_language = 'en'
release-0.8.34-rc1,"A dictionary with options for the search language support, empty by default."
release-0.8.34-rc1,Now only 'ja' uses this config value
release-0.8.34-rc1,html_search_options = {'type': 'default'}
release-0.8.34-rc1,The name of a javascript file (relative to the configuration directory) that
release-0.8.34-rc1,"implements a search results scorer. If empty, the default will be used."
release-0.8.34-rc1,html_search_scorer = 'scorer.js'
release-0.8.34-rc1,Output file base name for HTML help builder.
release-0.8.34-rc1,-- Options for LaTeX output ---------------------------------------------
release-0.8.34-rc1,The paper size ('letterpaper' or 'a4paper').
release-0.8.34-rc1,"'papersize': 'letterpaper',"
release-0.8.34-rc1,"The font size ('10pt', '11pt' or '12pt')."
release-0.8.34-rc1,"'pointsize': '10pt',"
release-0.8.34-rc1,Additional stuff for the LaTeX preamble.
release-0.8.34-rc1,"'preamble': '',"
release-0.8.34-rc1,Latex figure (float) alignment
release-0.8.34-rc1,"'figure_align': 'htbp',"
release-0.8.34-rc1,Grouping the document tree into LaTeX files. List of tuples
release-0.8.34-rc1,"(source start file, target name, title,"
release-0.8.34-rc1,"author, documentclass [howto, manual, or own class])."
release-0.8.34-rc1,The name of an image file (relative to this directory) to place at the top of
release-0.8.34-rc1,the title page.
release-0.8.34-rc1,latex_logo = None
release-0.8.34-rc1,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
release-0.8.34-rc1,not chapters.
release-0.8.34-rc1,latex_use_parts = False
release-0.8.34-rc1,"If true, show page references after internal links."
release-0.8.34-rc1,latex_show_pagerefs = False
release-0.8.34-rc1,"If true, show URL addresses after external links."
release-0.8.34-rc1,latex_show_urls = False
release-0.8.34-rc1,Documents to append as an appendix to all manuals.
release-0.8.34-rc1,latex_appendices = []
release-0.8.34-rc1,"If false, no module index is generated."
release-0.8.34-rc1,latex_domain_indices = True
release-0.8.34-rc1,-- Options for manual page output ---------------------------------------
release-0.8.34-rc1,One entry per manual page. List of tuples
release-0.8.34-rc1,"(source start file, name, description, authors, manual section)."
release-0.8.34-rc1,"If true, show URL addresses after external links."
release-0.8.34-rc1,man_show_urls = False
release-0.8.34-rc1,-- Options for Texinfo output -------------------------------------------
release-0.8.34-rc1,Grouping the document tree into Texinfo files. List of tuples
release-0.8.34-rc1,"(source start file, target name, title, author,"
release-0.8.34-rc1,"dir menu entry, description, category)"
release-0.8.34-rc1,Documents to append as an appendix to all manuals.
release-0.8.34-rc1,texinfo_appendices = []
release-0.8.34-rc1,"If false, no module index is generated."
release-0.8.34-rc1,texinfo_domain_indices = True
release-0.8.34-rc1,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.34-rc1,texinfo_show_urls = 'footnote'
release-0.8.34-rc1,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
release-0.8.34-rc1,texinfo_no_detailmenu = False
release-0.8.34-rc1,-- Options for Epub output ----------------------------------------------
release-0.8.34-rc1,Bibliographic Dublin Core info.
release-0.8.34-rc1,The basename for the epub file. It defaults to the project name.
release-0.8.34-rc1,epub_basename = project
release-0.8.34-rc1,The HTML theme for the epub output. Since the default themes are not
release-0.8.34-rc1,"optimized for small screen space, using the same theme for HTML and epub"
release-0.8.34-rc1,"output is usually not wise. This defaults to 'epub', a theme designed to save"
release-0.8.34-rc1,visual space.
release-0.8.34-rc1,epub_theme = 'epub'
release-0.8.34-rc1,The language of the text. It defaults to the language option
release-0.8.34-rc1,or 'en' if the language is not set.
release-0.8.34-rc1,epub_language = ''
release-0.8.34-rc1,The scheme of the identifier. Typical schemes are ISBN or URL.
release-0.8.34-rc1,epub_scheme = ''
release-0.8.34-rc1,The unique identifier of the text. This can be a ISBN number
release-0.8.34-rc1,or the project homepage.
release-0.8.34-rc1,epub_identifier = ''
release-0.8.34-rc1,A unique identification for the text.
release-0.8.34-rc1,epub_uid = ''
release-0.8.34-rc1,A tuple containing the cover image and cover page html template filenames.
release-0.8.34-rc1,epub_cover = ()
release-0.8.34-rc1,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
release-0.8.34-rc1,epub_guide = ()
release-0.8.34-rc1,HTML files that should be inserted before the pages created by sphinx.
release-0.8.34-rc1,The format is a list of tuples containing the path and title.
release-0.8.34-rc1,epub_pre_files = []
release-0.8.34-rc1,HTML files that should be inserted after the pages created by sphinx.
release-0.8.34-rc1,The format is a list of tuples containing the path and title.
release-0.8.34-rc1,epub_post_files = []
release-0.8.34-rc1,A list of files that should not be packed into the epub file.
release-0.8.34-rc1,The depth of the table of contents in toc.ncx.
release-0.8.34-rc1,epub_tocdepth = 3
release-0.8.34-rc1,Allow duplicate toc entries.
release-0.8.34-rc1,epub_tocdup = True
release-0.8.34-rc1,Choose between 'default' and 'includehidden'.
release-0.8.34-rc1,epub_tocscope = 'default'
release-0.8.34-rc1,Fix unsupported image types using the Pillow.
release-0.8.34-rc1,epub_fix_images = False
release-0.8.34-rc1,Scale large images.
release-0.8.34-rc1,epub_max_image_width = 0
release-0.8.34-rc1,"How to display URL addresses: 'footnote', 'no', or 'inline'."
release-0.8.34-rc1,epub_show_urls = 'inline'
release-0.8.34-rc1,"If false, no index is generated."
release-0.8.34-rc1,epub_use_index = True
0.8.33,"Import numpy here, only when headers are needed"
0.8.33,Add numpy headers to include_dirs
0.8.33,Call original build_ext command
0.8.33,The dependencies are the same as the contents of requirements.txt
0.8.33,"A little ""fancy"" we select from the flattened array reshape back"
0.8.33,(Fortran format to get indexing right) and take the product to do an and
0.8.33,then convert back to boolean type.
0.8.33,Density sparseness is not well defined if there are no
0.8.33,internal edges (as per the referenced paper). However
0.8.33,MATLAB code from the original authors simply selects the
0.8.33,largest of *all* the edges in the case that there are
0.8.33,"no internal edges, so we do the same here"
0.8.33,"If there are any internal edges, then subselect them out"
0.8.33,If there are no internal edges then we want to take the
0.8.33,"max over all the edges that exist in the MST, so we simply"
0.8.33,do nothing and return all the edges in the MST.
0.8.33,-*- coding: utf-8 -*-
0.8.33,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.33,Steve Astels <sastels@gmail.com>
0.8.33,John Healy <jchealy@gmail.com>
0.8.33,
0.8.33,License: BSD 3 clause
0.8.33,"Treating this case explicitly, instead of letting"
0.8.33,"sklearn.metrics.pairwise_distances handle it,"
0.8.33,enables the usage of numpy.inf in the distance
0.8.33,matrix to indicate missing distance information.
0.8.33,TODO: Check if copying is necessary
0.8.33,raise TypeError('Sparse distance matrices not yet supported')
0.8.33,Warn if the MST couldn't be constructed around the missing distances
0.8.33,mst_linkage_core does not generate a full minimal spanning tree
0.8.33,If a tree is required then we must build the edges from the information
0.8.33,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.33,Sort edges of the min_spanning_tree by weight
0.8.33,Convert edge list into standard hierarchical clustering format
0.8.33,Check for connected component on X
0.8.33,Compute sparse mutual reachability graph
0.8.33,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.33,Check connected component on mutual reachability
0.8.33,"If more than one component, it means that even if the distance matrix X"
0.8.33,"has one component, there exists with less than `min_samples` neighbors"
0.8.33,Compute the minimum spanning tree for the sparse graph
0.8.33,Convert the graph to scipy cluster array format
0.8.33,Sort edges of the min_spanning_tree by weight
0.8.33,Convert edge list into standard hierarchical clustering format
0.8.33,The Cython routines used require contiguous arrays
0.8.33,TO DO: Deal with p for minkowski appropriately
0.8.33,Get distance to kth nearest neighbour
0.8.33,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.33,Sort edges of the min_spanning_tree by weight
0.8.33,Convert edge list into standard hierarchical clustering format
0.8.33,The Cython routines used require contiguous arrays
0.8.33,Get distance to kth nearest neighbour
0.8.33,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.33,Sort edges of the min_spanning_tree by weight
0.8.33,Convert edge list into standard hierarchical clustering format
0.8.33,Sort edges of the min_spanning_tree by weight
0.8.33,Convert edge list into standard hierarchical clustering format
0.8.33,Sort edges of the min_spanning_tree by weight
0.8.33,Convert edge list into standard hierarchical clustering format
0.8.33,Checks input and converts to an nd-array where possible
0.8.33,"Only non-sparse, precomputed distance matrices are handled here"
0.8.33,and thereby allowed to contain numpy.inf for missing distances
0.8.33,Python 2 and 3 compliant string_type checking
0.8.33,We can't do much with sparse matrices ...
0.8.33,TO DO: Need heuristic to decide when to go to boruvka;
0.8.33,still debugging for now
0.8.33,TO DO: Need heuristic to decide when to go to boruvka;
0.8.33,still debugging for now
0.8.33,Inherits from sklearn
0.8.33,Non-precomputed matrices may contain non-finite values.
0.8.33,Rows with these values
0.8.33,Pass only the purely finite indices into hdbscan
0.8.33,We will later assign all non-finite points to the background -1 cluster
0.8.33,Handle sparse precomputed distance matrices separately
0.8.33,"Only non-sparse, precomputed distance matrices are allowed"
0.8.33,to have numpy.inf values indicating missing distances
0.8.33,"prediction data only applies to the persistent model, so remove"
0.8.33,it from the keyword args we pass on the the function
0.8.33,remap indices to align with original data in the case of non-finite entries.
0.8.33,"Unltimately, for each Ci, we only require the"
0.8.33,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.33,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.33,density separation 'with respect to' Ci.
0.8.33,If exactly one of the points is noise
0.8.33,Set the density sparseness of the cluster
0.8.33,to the sparsest value seen so far.
0.8.33,Check whether density separations with
0.8.33,respect to each of these clusters can
0.8.33,be reduced.
0.8.33,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.33,This only makes sense if num_clusters = 1 since it has turned out
0.8.33,that the MR-MST has no edges between a noise point and a core point.
0.8.33,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.33,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.33,MR-MST might contain an edge with one point in Cj and ther other one
0.8.33,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.33,another large enough value.
0.8.33,
0.8.33,TODO: Think of a better yet efficient way to handle this.
0.8.33,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
0.8.33,Use a previously initialized/trained HDBSCAN
0.8.33,Handle the trivial case first.
0.8.33,Always generate prediction_data to avoid later woes
0.8.33,This will later be chosen according to n_clusters
0.8.33,Initialize and train clusterer if one was not previously supplied.
0.8.33,Always generate prediction data
0.8.33,We do not pass cluster_selection_epsilon here.
0.8.33,"While this adds unnecessary computation, it makes the code"
0.8.33,easier to read and debug.
0.8.33,"Train on 'X'. Do this even if the supplied clusterer was trained,"
0.8.33,because we want to make sure it fits 'X'.
0.8.33,"Pick an epsilon value right after a split produces n_clusters,"
0.8.33,and the don't split further for smaller epsilon (larger lambda)
0.8.33,Or use the specified cluster_selection_epsilon
0.8.33,"Extract tree related stuff, in order to re-assign labels"
0.8.33,Get labels according to the required cluster_selection_epsilon
0.8.33,Reflect the related changes in HDBSCAN.
0.8.33,PredictionData attached to HDBSCAN should also change.
0.8.33,A function re_init is defined in this module to handle this.
0.8.33,"From a fitted HDBSCAN model, predict for n_clusters=5"
0.8.33,Store prediciton data for later use.
0.8.33,and use this prediction data to predict on new points
0.8.33,Get number of fitted clusters for later use.
0.8.33,We'll need the condensed tree later...
0.8.33,"If none of the three arguments: prediction_data, n_clusters,"
0.8.33,"and cluster_selection_epsilon are supplied,"
0.8.33,then use clusterer's prediciton data directly
0.8.33,"If either of n_clusters or cluster_selection_epsilon were supplied,"
0.8.33,then build prediction data from these by modifying clusterer's
0.8.33,Get prediction data from clusterer
0.8.33,Modify prediction_data to reflect new n_clusters
0.8.33,"First, make a copy of prediction data to avoid modifying source"
0.8.33,Cluster selection method is hold by condensed_tree.
0.8.33,Change from 'eom' to 'leaf' if n_clusters is too large.
0.8.33,This change does not affect the tree associated with 'clusterer'
0.8.33,Re-initialize prediction_data for the specified n_clusters or epsilon
0.8.33,============================================================
0.8.33,Now we're ready to use prediction_data
0.8.33,"The rest of the code is copied from HDBSCAN's approximate_predict,"
0.8.33,but modified to use prediction_data instead of clusterer's attribute
0.8.33,Extract condensed tree for later use
0.8.33,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.33,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.33,Use the same prediction_data as clusterer's
0.8.33,Compute cluster_selection_epsilon so that a flat clustering
0.8.33,produces a specified number of n_clusters
0.8.33,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.33,Create another instance of prediction_data that is consistent
0.8.33,with the selected value of epsilon.
0.8.33,Flat clustering from prediction data
0.8.33,Initialize probabilities
0.8.33,k-NN for prediciton points to training set
0.8.33,Loop over prediction points to compute probabilities
0.8.33,We need to find where in the tree the new point would go
0.8.33,for the purposes of outlier membership approximation
0.8.33,"Find row in tree where nearest neighbor drops out,"
0.8.33,so we can get a lambda value for the nearest neighbor
0.8.33,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
0.8.33,"Equivalently, this assigns core distance for prediction point as"
0.8.33,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
0.8.33,Probabilities based on distance to closest exemplar in each cluster:
0.8.33,Use new prediction_data that points to exemplars that are specific
0.8.33,to the choice of n_clusters
0.8.33,Probabilities based on how long the nearest exemplar persists in
0.8.33,each cluster (with respect to most persistent exemplar)
0.8.33,Use new clusters that are defined by the choice of n_clusters.
0.8.33,Merge the two probabilities to produce a single set of probabilities
0.8.33,Include probability that the nearest neighbor belongs to a cluster
0.8.33,Rename variable so it's easy to understand what's being returned
0.8.33,Extract condensed tree for later use
0.8.33,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.33,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.33,Use the same prediction_data as clusterer's
0.8.33,Compute cluster_selection_epsilon so that a flat clustering
0.8.33,produces a specified number of n_clusters
0.8.33,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.33,Create another instance of prediction_data that is consistent
0.8.33,with the selected value of epsilon.
0.8.33,Flat clustering at the chosen epsilon from prediction_data
0.8.33,"When no clusters found, return array of 0's"
0.8.33,Probabilities based on distance to closest exemplar in each cluster:
0.8.33,Use new prediction_data that points to exemplars that are specific
0.8.33,to the choice of n_clusters
0.8.33,Probabilities based on how long the point persists in
0.8.33,each cluster (with respect to most persistent exemplar)
0.8.33,Use new clusters that are defined by the choice of n_clusters.
0.8.33,Include probability that the point belongs to a cluster
0.8.33,Aggregate the three probabilities to produce membership vectors
0.8.33,Re-name variable to clarify what's being returned.
0.8.33,"With method 'eom', max clusters are produced for epsilon=0,"
0.8.33,as computed by
0.8.33,Increasing epsilon can only reduce the number of ouput clusters.
0.8.33,"To select epsilon, consider all values where clusters are split"
0.8.33,Subtract the extra e-12 to avoid numerical errors in comparison
0.8.33,"Then, we avoid splitting for all epsilon below this."
0.8.33,Use an epsilon value that produces the right number of clusters.
0.8.33,The condensed tree of HDBSCAN has this information.
0.8.33,Extract the lambda levels (=1/distance) from the condensed tree
0.8.33,We don't want values that produce a large cluster and
0.8.33,just one or two individual points.
0.8.33,Keep only those lambda values corresponding to cluster separation;
0.8.33,"i.e., with child_sizes > 1"
0.8.33,"Get the unique values, because when two clusters fall out of one,"
0.8.33,the entry with lambda is repeated.
0.8.33,lambda values are sorted by np.unique.
0.8.33,"Now, get epsilon (distance threshold) as 1/lambda"
0.8.33,"At this epsilon, n_clusters have been split."
0.8.33,Stop splits at epsilons smaller than this.
0.8.33,"To allow for numerical errors,"
0.8.33,predData must be a pre-trained PredictionData instance from hdbscan
0.8.33,"If n_clusters is specified, compute cluster_selection_epsilon;"
0.8.33,This is the key modification:
0.8.33,Select clusters according to selection method and epsilon.
0.8.33,_new_select_clusters is a modification of get_clusters
0.8.33,from hdbscan._hdbscan_tree
0.8.33,"raw tree, used later to get exemplars and lambda values"
0.8.33,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
0.8.33,to the cluster labels produced as output
0.8.33,Re-compute lambdas and exemplars for selected clusters;
0.8.33,max_lambda <=> smallest distance <=> most persistent point(s)
0.8.33,Map all sub-clusters of selected cluster to the selected cluster's
0.8.33,label in output.
0.8.33,Map lambdas too...
0.8.33,Create set of exemplar points for later use.
0.8.33,Novel points are assigned based on cluster of closest exemplar.
0.8.33,"For each selected cluster, get all of its leaves,"
0.8.33,"and leaves of leaves, and so on..."
0.8.33,Largest lambda => Most persistent points
0.8.33,Get the most persistent points
0.8.33,Add most persistent points as exemplars
0.8.33,Add exemplars for each leaf of each selected cluster.
0.8.33,(exclude root)
0.8.33,-*- coding: utf-8 -*-
0.8.33,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.33,
0.8.33,License: BSD 3 clause
0.8.33,"Return the only cluster, the root"
0.8.33,We want to get the x and y coordinates for the start of each cluster
0.8.33,"Initialize the leaves, since we know where they go, the iterate"
0.8.33,"through everything from the leaves back, setting coords as we go"
0.8.33,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.33,bottoms and widths for each rectangle. We can go through each cluster
0.8.33,and do this for each in turn.
0.8.33,Ensure we don't try to take log of zero
0.8.33,Finally we need the horizontal lines that occur at cluster splits.
0.8.33,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.33,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.33,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.33,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.33,the chosen clusters.
0.8.33,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.33,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.33,based on the percentile should alleviate the impact on plotting.
0.8.33,Set center and height to default values if necessary
0.8.33,Ensure the ellipse is visible
0.8.33,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.33,Use PCA to get down to 32 dimension
0.8.33,-*- coding: utf-8 -*-
0.8.33,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.33,
0.8.33,License: BSD 3 clause
0.8.33,The Cython routines used require contiguous arrays
0.8.33,The Cython routines used require contiguous arrays
0.8.33,We can't do much with sparse matrices ...
0.8.33,Need heuristic to decide when to go to boruvka;
0.8.33,still debugging for now
0.8.33,Need heuristic to decide when to go to boruvka;
0.8.33,still debugging for now
0.8.33,Support various prediction methods for predicting cluster membership
0.8.33,of new or unseen points. There are several ways to interpret how
0.8.33,"to do this correctly, so we provide several methods for"
0.8.33,the different use cases that may arise.
0.8.33,raw_condensed_tree = condensed_tree.to_numpy()
0.8.33,New point departs with the old
0.8.33,Find appropriate cluster based on lambda of new point
0.8.33,Find appropriate cluster based on lambda of new point
0.8.33,"the point is in the dataset, fix lambda for rounding errors"
0.8.33,We need to find where in the tree the new point would go
0.8.33,for the purposes of outlier membership approximation
0.8.33,"When no clusters found, return array of 0's"
0.8.33,import pickle
0.8.33,from sklearn.cluster.tests.common import generate_clustered_data
0.8.33,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.33,"number of clusters, ignoring noise if present"
0.8.33,"metric is the function reference, not the string key."
0.8.33,def test_rsl_unavailable_hierarchy():
0.8.33,clusterer = RobustSingleLinkage()
0.8.33,with warnings.catch_warnings(record=True) as w:
0.8.33,tree = clusterer.cluster_hierarchy_
0.8.33,assert len(w) > 0
0.8.33,assert tree is None
0.8.33,"H, y = shuffle(X, y, random_state=7)"
0.8.33,Disable for now -- need to refactor to meet newer standards
0.8.33,from sklearn.cluster.tests.common import generate_clustered_data
0.8.33,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.33,this fails if no $DISPLAY specified
0.8.33,"number of clusters, ignoring noise if present"
0.8.33,"number of clusters, ignoring noise if present"
0.8.33,"H, y = shuffle(X, y, random_state=7)"
0.8.33,"metric is the function reference, not the string key."
0.8.33,def test_hdbscan_unavailable_attributes():
0.8.33,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.33,with warnings.catch_warnings(record=True) as w:
0.8.33,tree = clusterer.condensed_tree_
0.8.33,assert len(w) > 0
0.8.33,assert tree is None
0.8.33,with warnings.catch_warnings(record=True) as w:
0.8.33,tree = clusterer.single_linkage_tree_
0.8.33,assert len(w) > 0
0.8.33,assert tree is None
0.8.33,with warnings.catch_warnings(record=True) as w:
0.8.33,scores = clusterer.outlier_scores_
0.8.33,assert len(w) > 0
0.8.33,assert scores is None
0.8.33,with warnings.catch_warnings(record=True) as w:
0.8.33,tree = clusterer.minimum_spanning_tree_
0.8.33,assert len(w) > 0
0.8.33,assert tree is None
0.8.33,def test_hdbscan_min_span_tree_availability():
0.8.33,clusterer = HDBSCAN().fit(X)
0.8.33,tree = clusterer.minimum_spanning_tree_
0.8.33,assert tree is None
0.8.33,D = distance.squareform(distance.pdist(X))
0.8.33,D /= np.max(D)
0.8.33,HDBSCAN(metric='precomputed').fit(D)
0.8.33,tree = clusterer.minimum_spanning_tree_
0.8.33,assert tree is None
0.8.33,no prediction data error
0.8.33,wrong dimensions error
0.8.33,no clusters warning
0.8.33,def test_hdbscan_membership_vector():
0.8.33,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.33,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.33,assert_array_almost_equal(
0.8.33,"vector,"
0.8.33,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.33,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.33,assert_array_almost_equal(
0.8.33,"vector,"
0.8.33,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.33,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.33,assert_array_almost_equal(
0.8.33,"vector,"
0.8.33,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.33,
0.8.33,def test_hdbscan_all_points_membership_vectors():
0.8.33,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.33,vects = all_points_membership_vectors(clusterer)
0.8.33,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.33,"2.52734246e-001,"
0.8.33,8.38299608e-002]))
0.8.33,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.33,"8.35882503e-002,"
0.8.33,1.07356406e-001]))
0.8.33,without epsilon we should see many noise points as children of root.
0.8.33,for this random seed an epsilon of 0.2 will produce exactly 2 noise
0.8.33,points at that cut in single linkage.
0.8.33,Disable for now -- need to refactor to meet newer standards
0.8.33,Probably not applicable now #
0.8.33,def test_dbscan_sparse():
0.8.33,def test_dbscan_balltree():
0.8.33,def test_pickle():
0.8.33,def test_dbscan_core_samples_toy():
0.8.33,def test_boundaries():
0.8.33,"Given negative, zero and positive denominator and positive numerator"
0.8.33,Make sure safe division is always positive and doesn't raise ZeroDivision error
0.8.33,Ignore future warnings thrown by sklearn
0.8.33,Create a nice dataset with 6 circular clusters and 2 moons
0.8.33,"Given, the base HDBSCAN with method 'eom'"
0.8.33,"When we ask for flat clustering with same n_clusters,"
0.8.33,"Then, the labels and probabilities should match"
0.8.33,"Given, the base HDBSCAN with method 'leaf'"
0.8.33,"When we ask for flat clustering with same n_clusters,"
0.8.33,"Then, the labels and probabilities should match"
0.8.33,Method 'eom'...
0.8.33,"Given, a flat clustering for required n_clusters,"
0.8.33,"When we run the base HDBSCAN using it's epsilon,"
0.8.33,"Then, the labels and probabilities should match"
0.8.33,Method 'leaf'...
0.8.33,"Given, a flat clustering for required n_clusters,"
0.8.33,"When we run the base HDBSCAN using it's epsilon,"
0.8.33,"Then, the labels and probabilities should match"
0.8.33,"Given the max number of clusters that can be produced by 'eom',"
0.8.33,(these are produced for epsilon=0) (??? Needs verification)
0.8.33,"When we try flat clustering with 'eom' method for more n_clusters,"
0.8.33,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.33,"assert ""Cannot predict"" in str(w[-1].message)"
0.8.33,"the resulting clusterer switches to using method 'leaf',"
0.8.33,and the resulting probabilities and labels must match
0.8.33,"Given the base HDBSCAN trained on some data,"
0.8.33,"When using approximate_predict_flat without specifying n_clusters,"
0.8.33,"Then, the clustering should match that due to approximate_predict,"
0.8.33,"Given a flat clustering trained for some n_clusters,"
0.8.33,"When using approximate_predict_flat without specifying n_clusters,"
0.8.33,"Then, the number of clusters produced must match the original n_clusters"
0.8.33,and all probabilities are <= 1.
0.8.33,"Given a flat clustering trained for some n_clusters,"
0.8.33,"When using approximate_predict_flat with specified n_clusters,"
0.8.33,"Then, the requested number of clusters must be produced"
0.8.33,and all probabilities are <= 1.
0.8.33,When using approximate_predict_flat with more clusters
0.8.33,"than 'eom' can handle,"
0.8.33,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.33,But the requested number of clusters must still be produced using 'leaf'
0.8.33,and all probabilities are <= 1.
0.8.33,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.33,"When membership_vector_flat is called with new data,"
0.8.33,"Then the number of clusters in memberships matches those of clusterer,"
0.8.33,and the number of points should equal those in the test set
0.8.33,and all probabilities are <= 1.
0.8.33,========================================
0.8.33,"Given a flat clustering for a specified n_clusters,"
0.8.33,"When membership_vector_flat is called with new data,"
0.8.33,"Then the number of clusters in memberships matches those of clusterer,"
0.8.33,and the number of points should equal those in the test set
0.8.33,and all probabilities are <= 1.
0.8.33,Ignore user warnings in this function
0.8.33,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.33,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.33,"Then the number of clusters in memberships should be as requested,"
0.8.33,and the number of points should equal those in the test set
0.8.33,and all probabilities are <= 1.
0.8.33,========================================
0.8.33,"Given a flat clustering for a specified n_clusters,"
0.8.33,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.33,"Then the number of clusters in memberships should be as requested,"
0.8.33,and the number of points should equal those in the test set
0.8.33,and all probabilities are <= 1.
0.8.33,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.33,"When all_points_membership_vectors_flat is called,"
0.8.33,"Then the number of clusters in memberships matches those of clusterer,"
0.8.33,and the number of points should equal those in the training set
0.8.33,and all probabilities are <= 1.
0.8.33,========================================
0.8.33,"Given a flat clustering for a specified n_clusters,"
0.8.33,"When all_points_membership_vectors_flat is called,"
0.8.33,"Then the number of clusters in memberships matches those of clusterer,"
0.8.33,and the number of points should equal those in the training set
0.8.33,and all probabilities are <= 1.
0.8.33,Ignore user warnings in this function
0.8.33,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.33,"When all_points_membership_vectors_flat is called for some n_clusters,"
0.8.33,"Then the number of clusters in memberships should be as requested,"
0.8.33,and the number of points should equal those in the training set
0.8.33,and all probabilities are <= 1.
0.8.33,========================================
0.8.33,"Given a flat clustering for a specified n_clusters,"
0.8.33,"When membership_vector_flat is called for some n_clusters,"
0.8.33,"Then the number of clusters in memberships should be as requested,"
0.8.33,and the number of points should equal those in the training set
0.8.33,and all probabilities are <= 1.
0.8.33,Generate datasets. We choose the size big enough to see the scalability
0.8.33,"of the algorithms, but not too big to avoid too long running times"
0.8.33,normalize dataset for easier parameter selection
0.8.33,estimate bandwidth for mean shift
0.8.33,connectivity matrix for structured Ward
0.8.33,make connectivity symmetric
0.8.33,create clustering estimators
0.8.33,predict cluster memberships
0.8.33,plot
0.8.33,-*- coding: utf-8 -*-
0.8.33,#############################################################################
0.8.33,Generate sample data
0.8.33,#############################################################################
0.8.33,Compute DBSCAN
0.8.33,"Number of clusters in labels, ignoring noise if present."
0.8.33,#############################################################################
0.8.33,Plot result
0.8.33,Black removed and is used for noise instead.
0.8.33,Black used for noise.
0.8.33,Black used for noise.
0.8.33,-*- coding: utf-8 -*-
0.8.33,
0.8.33,"hdbscan documentation build configuration file, created by"
0.8.33,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.33,
0.8.33,This file is execfile()d with the current directory set to its
0.8.33,containing dir.
0.8.33,
0.8.33,Note that not all possible configuration values are present in this
0.8.33,autogenerated file.
0.8.33,
0.8.33,All configuration values have a default; values that are commented out
0.8.33,serve to show the default.
0.8.33,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.33,add these directories to sys.path here. If the directory is relative to the
0.8.33,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.33,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.33,"sys.path.insert(0, os.path.abspath('../'))"
0.8.33,-- General configuration ------------------------------------------------
0.8.33,"If your documentation needs a minimal Sphinx version, state it here."
0.8.33,needs_sphinx = '1.0'
0.8.33,"Add any Sphinx extension module names here, as strings. They can be"
0.8.33,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.33,ones.
0.8.33,"'sphinx.ext.napoleon',"
0.8.33,'numpy_ext.numpydoc'
0.8.33,napoleon_google_docstring = False
0.8.33,napoleon_numpy_docstring = True
0.8.33,"Add any paths that contain templates here, relative to this directory."
0.8.33,The suffix(es) of source filenames.
0.8.33,You can specify multiple suffix as a list of string:
0.8.33,"source_suffix = ['.rst', '.md']"
0.8.33,The encoding of source files.
0.8.33,source_encoding = 'utf-8-sig'
0.8.33,The master toctree document.
0.8.33,General information about the project.
0.8.33,"The version info for the project you're documenting, acts as replacement for"
0.8.33,"|version| and |release|, also used in various other places throughout the"
0.8.33,built documents.
0.8.33,
0.8.33,The short X.Y version.
0.8.33,"The full version, including alpha/beta/rc tags."
0.8.33,The language for content autogenerated by Sphinx. Refer to documentation
0.8.33,for a list of supported languages.
0.8.33,
0.8.33,This is also used if you do content translation via gettext catalogs.
0.8.33,"Usually you set ""language"" from the command line for these cases."
0.8.33,"There are two options for replacing |today|: either, you set today to some"
0.8.33,"non-false value, then it is used:"
0.8.33,today = ''
0.8.33,"Else, today_fmt is used as the format for a strftime call."
0.8.33,"today_fmt = '%B %d, %Y'"
0.8.33,"List of patterns, relative to source directory, that match files and"
0.8.33,directories to ignore when looking for source files.
0.8.33,The reST default role (used for this markup: `text`) to use for all
0.8.33,documents.
0.8.33,default_role = None
0.8.33,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.33,add_function_parentheses = True
0.8.33,"If true, the current module name will be prepended to all description"
0.8.33,unit titles (such as .. function::).
0.8.33,add_module_names = True
0.8.33,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.33,output. They are ignored by default.
0.8.33,show_authors = False
0.8.33,The name of the Pygments (syntax highlighting) style to use.
0.8.33,A list of ignored prefixes for module index sorting.
0.8.33,modindex_common_prefix = []
0.8.33,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.33,keep_warnings = False
0.8.33,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.33,-- Options for HTML output ----------------------------------------------
0.8.33,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.33,a list of builtin themes.
0.8.33,html_theme = 'alabaster'
0.8.33,Theme options are theme-specific and customize the look and feel of a theme
0.8.33,"further.  For a list of options available for each theme, see the"
0.8.33,documentation.
0.8.33,html_theme_options = {}
0.8.33,"Add any paths that contain custom themes here, relative to this directory."
0.8.33,html_theme_path = []
0.8.33,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.33,"""<project> v<release> documentation""."
0.8.33,html_title = None
0.8.33,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.33,html_short_title = None
0.8.33,The name of an image file (relative to this directory) to place at the top
0.8.33,of the sidebar.
0.8.33,html_logo = None
0.8.33,The name of an image file (within the static path) to use as favicon of the
0.8.33,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.33,pixels large.
0.8.33,html_favicon = None
0.8.33,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.33,"relative to this directory. They are copied after the builtin static files,"
0.8.33,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.33,Add any extra paths that contain custom files (such as robots.txt or
0.8.33,".htaccess) here, relative to this directory. These files are copied"
0.8.33,directly to the root of the documentation.
0.8.33,html_extra_path = []
0.8.33,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.33,using the given strftime format.
0.8.33,"html_last_updated_fmt = '%b %d, %Y'"
0.8.33,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.33,typographically correct entities.
0.8.33,html_use_smartypants = True
0.8.33,"Custom sidebar templates, maps document names to template names."
0.8.33,html_sidebars = {}
0.8.33,"Additional templates that should be rendered to pages, maps page names to"
0.8.33,template names.
0.8.33,html_additional_pages = {}
0.8.33,"If false, no module index is generated."
0.8.33,html_domain_indices = True
0.8.33,"If false, no index is generated."
0.8.33,html_use_index = True
0.8.33,"If true, the index is split into individual pages for each letter."
0.8.33,html_split_index = False
0.8.33,"If true, links to the reST sources are added to the pages."
0.8.33,html_show_sourcelink = True
0.8.33,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.33,html_show_sphinx = True
0.8.33,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.33,html_show_copyright = True
0.8.33,"If true, an OpenSearch description file will be output, and all pages will"
0.8.33,contain a <link> tag referring to it.  The value of this option must be the
0.8.33,base URL from which the finished HTML is served.
0.8.33,html_use_opensearch = ''
0.8.33,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.33,html_file_suffix = None
0.8.33,Language to be used for generating the HTML full-text search index.
0.8.33,Sphinx supports the following languages:
0.8.33,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.33,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.33,html_search_language = 'en'
0.8.33,"A dictionary with options for the search language support, empty by default."
0.8.33,Now only 'ja' uses this config value
0.8.33,html_search_options = {'type': 'default'}
0.8.33,The name of a javascript file (relative to the configuration directory) that
0.8.33,"implements a search results scorer. If empty, the default will be used."
0.8.33,html_search_scorer = 'scorer.js'
0.8.33,Output file base name for HTML help builder.
0.8.33,-- Options for LaTeX output ---------------------------------------------
0.8.33,The paper size ('letterpaper' or 'a4paper').
0.8.33,"'papersize': 'letterpaper',"
0.8.33,"The font size ('10pt', '11pt' or '12pt')."
0.8.33,"'pointsize': '10pt',"
0.8.33,Additional stuff for the LaTeX preamble.
0.8.33,"'preamble': '',"
0.8.33,Latex figure (float) alignment
0.8.33,"'figure_align': 'htbp',"
0.8.33,Grouping the document tree into LaTeX files. List of tuples
0.8.33,"(source start file, target name, title,"
0.8.33,"author, documentclass [howto, manual, or own class])."
0.8.33,The name of an image file (relative to this directory) to place at the top of
0.8.33,the title page.
0.8.33,latex_logo = None
0.8.33,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.33,not chapters.
0.8.33,latex_use_parts = False
0.8.33,"If true, show page references after internal links."
0.8.33,latex_show_pagerefs = False
0.8.33,"If true, show URL addresses after external links."
0.8.33,latex_show_urls = False
0.8.33,Documents to append as an appendix to all manuals.
0.8.33,latex_appendices = []
0.8.33,"If false, no module index is generated."
0.8.33,latex_domain_indices = True
0.8.33,-- Options for manual page output ---------------------------------------
0.8.33,One entry per manual page. List of tuples
0.8.33,"(source start file, name, description, authors, manual section)."
0.8.33,"If true, show URL addresses after external links."
0.8.33,man_show_urls = False
0.8.33,-- Options for Texinfo output -------------------------------------------
0.8.33,Grouping the document tree into Texinfo files. List of tuples
0.8.33,"(source start file, target name, title, author,"
0.8.33,"dir menu entry, description, category)"
0.8.33,Documents to append as an appendix to all manuals.
0.8.33,texinfo_appendices = []
0.8.33,"If false, no module index is generated."
0.8.33,texinfo_domain_indices = True
0.8.33,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.33,texinfo_show_urls = 'footnote'
0.8.33,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.33,texinfo_no_detailmenu = False
0.8.33,-- Options for Epub output ----------------------------------------------
0.8.33,Bibliographic Dublin Core info.
0.8.33,The basename for the epub file. It defaults to the project name.
0.8.33,epub_basename = project
0.8.33,The HTML theme for the epub output. Since the default themes are not
0.8.33,"optimized for small screen space, using the same theme for HTML and epub"
0.8.33,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.33,visual space.
0.8.33,epub_theme = 'epub'
0.8.33,The language of the text. It defaults to the language option
0.8.33,or 'en' if the language is not set.
0.8.33,epub_language = ''
0.8.33,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.33,epub_scheme = ''
0.8.33,The unique identifier of the text. This can be a ISBN number
0.8.33,or the project homepage.
0.8.33,epub_identifier = ''
0.8.33,A unique identification for the text.
0.8.33,epub_uid = ''
0.8.33,A tuple containing the cover image and cover page html template filenames.
0.8.33,epub_cover = ()
0.8.33,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.33,epub_guide = ()
0.8.33,HTML files that should be inserted before the pages created by sphinx.
0.8.33,The format is a list of tuples containing the path and title.
0.8.33,epub_pre_files = []
0.8.33,HTML files that should be inserted after the pages created by sphinx.
0.8.33,The format is a list of tuples containing the path and title.
0.8.33,epub_post_files = []
0.8.33,A list of files that should not be packed into the epub file.
0.8.33,The depth of the table of contents in toc.ncx.
0.8.33,epub_tocdepth = 3
0.8.33,Allow duplicate toc entries.
0.8.33,epub_tocdup = True
0.8.33,Choose between 'default' and 'includehidden'.
0.8.33,epub_tocscope = 'default'
0.8.33,Fix unsupported image types using the Pillow.
0.8.33,epub_fix_images = False
0.8.33,Scale large images.
0.8.33,epub_max_image_width = 0
0.8.33,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.33,epub_show_urls = 'inline'
0.8.33,"If false, no index is generated."
0.8.33,epub_use_index = True
0.8.32,"Import numpy here, only when headers are needed"
0.8.32,Add numpy headers to include_dirs
0.8.32,Call original build_ext command
0.8.32,The dependencies are the same as the contents of requirements.txt
0.8.32,"A little ""fancy"" we select from the flattened array reshape back"
0.8.32,(Fortran format to get indexing right) and take the product to do an and
0.8.32,then convert back to boolean type.
0.8.32,Density sparseness is not well defined if there are no
0.8.32,internal edges (as per the referenced paper). However
0.8.32,MATLAB code from the original authors simply selects the
0.8.32,largest of *all* the edges in the case that there are
0.8.32,"no internal edges, so we do the same here"
0.8.32,"If there are any internal edges, then subselect them out"
0.8.32,If there are no internal edges then we want to take the
0.8.32,"max over all the edges that exist in the MST, so we simply"
0.8.32,do nothing and return all the edges in the MST.
0.8.32,-*- coding: utf-8 -*-
0.8.32,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.32,Steve Astels <sastels@gmail.com>
0.8.32,John Healy <jchealy@gmail.com>
0.8.32,
0.8.32,License: BSD 3 clause
0.8.32,"Treating this case explicitly, instead of letting"
0.8.32,"sklearn.metrics.pairwise_distances handle it,"
0.8.32,enables the usage of numpy.inf in the distance
0.8.32,matrix to indicate missing distance information.
0.8.32,TODO: Check if copying is necessary
0.8.32,raise TypeError('Sparse distance matrices not yet supported')
0.8.32,Warn if the MST couldn't be constructed around the missing distances
0.8.32,mst_linkage_core does not generate a full minimal spanning tree
0.8.32,If a tree is required then we must build the edges from the information
0.8.32,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.32,Sort edges of the min_spanning_tree by weight
0.8.32,Convert edge list into standard hierarchical clustering format
0.8.32,Check for connected component on X
0.8.32,Compute sparse mutual reachability graph
0.8.32,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.32,Check connected component on mutual reachability
0.8.32,"If more than one component, it means that even if the distance matrix X"
0.8.32,"has one component, there exists with less than `min_samples` neighbors"
0.8.32,Compute the minimum spanning tree for the sparse graph
0.8.32,Convert the graph to scipy cluster array format
0.8.32,Sort edges of the min_spanning_tree by weight
0.8.32,Convert edge list into standard hierarchical clustering format
0.8.32,The Cython routines used require contiguous arrays
0.8.32,TO DO: Deal with p for minkowski appropriately
0.8.32,Get distance to kth nearest neighbour
0.8.32,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.32,Sort edges of the min_spanning_tree by weight
0.8.32,Convert edge list into standard hierarchical clustering format
0.8.32,The Cython routines used require contiguous arrays
0.8.32,Get distance to kth nearest neighbour
0.8.32,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.32,Sort edges of the min_spanning_tree by weight
0.8.32,Convert edge list into standard hierarchical clustering format
0.8.32,Sort edges of the min_spanning_tree by weight
0.8.32,Convert edge list into standard hierarchical clustering format
0.8.32,Sort edges of the min_spanning_tree by weight
0.8.32,Convert edge list into standard hierarchical clustering format
0.8.32,Checks input and converts to an nd-array where possible
0.8.32,"Only non-sparse, precomputed distance matrices are handled here"
0.8.32,and thereby allowed to contain numpy.inf for missing distances
0.8.32,Python 2 and 3 compliant string_type checking
0.8.32,We can't do much with sparse matrices ...
0.8.32,TO DO: Need heuristic to decide when to go to boruvka;
0.8.32,still debugging for now
0.8.32,TO DO: Need heuristic to decide when to go to boruvka;
0.8.32,still debugging for now
0.8.32,Inherits from sklearn
0.8.32,Non-precomputed matrices may contain non-finite values.
0.8.32,Rows with these values
0.8.32,Pass only the purely finite indices into hdbscan
0.8.32,We will later assign all non-finite points to the background -1 cluster
0.8.32,Handle sparse precomputed distance matrices separately
0.8.32,"Only non-sparse, precomputed distance matrices are allowed"
0.8.32,to have numpy.inf values indicating missing distances
0.8.32,"prediction data only applies to the persistent model, so remove"
0.8.32,it from the keyword args we pass on the the function
0.8.32,remap indices to align with original data in the case of non-finite entries.
0.8.32,"Unltimately, for each Ci, we only require the"
0.8.32,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.32,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.32,density separation 'with respect to' Ci.
0.8.32,If exactly one of the points is noise
0.8.32,Set the density sparseness of the cluster
0.8.32,to the sparsest value seen so far.
0.8.32,Check whether density separations with
0.8.32,respect to each of these clusters can
0.8.32,be reduced.
0.8.32,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.32,This only makes sense if num_clusters = 1 since it has turned out
0.8.32,that the MR-MST has no edges between a noise point and a core point.
0.8.32,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.32,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.32,MR-MST might contain an edge with one point in Cj and ther other one
0.8.32,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.32,another large enough value.
0.8.32,
0.8.32,TODO: Think of a better yet efficient way to handle this.
0.8.32,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
0.8.32,Use a previously initialized/trained HDBSCAN
0.8.32,Handle the trivial case first.
0.8.32,Always generate prediction_data to avoid later woes
0.8.32,This will later be chosen according to n_clusters
0.8.32,Initialize and train clusterer if one was not previously supplied.
0.8.32,Always generate prediction data
0.8.32,We do not pass cluster_selection_epsilon here.
0.8.32,"While this adds unnecessary computation, it makes the code"
0.8.32,easier to read and debug.
0.8.32,"Train on 'X'. Do this even if the supplied clusterer was trained,"
0.8.32,because we want to make sure it fits 'X'.
0.8.32,"Pick an epsilon value right after a split produces n_clusters,"
0.8.32,and the don't split further for smaller epsilon (larger lambda)
0.8.32,Or use the specified cluster_selection_epsilon
0.8.32,"Extract tree related stuff, in order to re-assign labels"
0.8.32,Get labels according to the required cluster_selection_epsilon
0.8.32,Reflect the related changes in HDBSCAN.
0.8.32,PredictionData attached to HDBSCAN should also change.
0.8.32,A function re_init is defined in this module to handle this.
0.8.32,"From a fitted HDBSCAN model, predict for n_clusters=5"
0.8.32,Store prediciton data for later use.
0.8.32,and use this prediction data to predict on new points
0.8.32,Get number of fitted clusters for later use.
0.8.32,We'll need the condensed tree later...
0.8.32,"If none of the three arguments: prediction_data, n_clusters,"
0.8.32,"and cluster_selection_epsilon are supplied,"
0.8.32,then use clusterer's prediciton data directly
0.8.32,"If either of n_clusters or cluster_selection_epsilon were supplied,"
0.8.32,then build prediction data from these by modifying clusterer's
0.8.32,Get prediction data from clusterer
0.8.32,Modify prediction_data to reflect new n_clusters
0.8.32,"First, make a copy of prediction data to avoid modifying source"
0.8.32,Cluster selection method is hold by condensed_tree.
0.8.32,Change from 'eom' to 'leaf' if n_clusters is too large.
0.8.32,This change does not affect the tree associated with 'clusterer'
0.8.32,Re-initialize prediction_data for the specified n_clusters or epsilon
0.8.32,============================================================
0.8.32,Now we're ready to use prediction_data
0.8.32,"The rest of the code is copied from HDBSCAN's approximate_predict,"
0.8.32,but modified to use prediction_data instead of clusterer's attribute
0.8.32,Extract condensed tree for later use
0.8.32,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.32,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.32,Use the same prediction_data as clusterer's
0.8.32,Compute cluster_selection_epsilon so that a flat clustering
0.8.32,produces a specified number of n_clusters
0.8.32,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.32,Create another instance of prediction_data that is consistent
0.8.32,with the selected value of epsilon.
0.8.32,Flat clustering from prediction data
0.8.32,Initialize probabilities
0.8.32,k-NN for prediciton points to training set
0.8.32,Loop over prediction points to compute probabilities
0.8.32,We need to find where in the tree the new point would go
0.8.32,for the purposes of outlier membership approximation
0.8.32,"Find row in tree where nearest neighbor drops out,"
0.8.32,so we can get a lambda value for the nearest neighbor
0.8.32,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
0.8.32,"Equivalently, this assigns core distance for prediction point as"
0.8.32,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
0.8.32,Probabilities based on distance to closest exemplar in each cluster:
0.8.32,Use new prediction_data that points to exemplars that are specific
0.8.32,to the choice of n_clusters
0.8.32,Probabilities based on how long the nearest exemplar persists in
0.8.32,each cluster (with respect to most persistent exemplar)
0.8.32,Use new clusters that are defined by the choice of n_clusters.
0.8.32,Merge the two probabilities to produce a single set of probabilities
0.8.32,Include probability that the nearest neighbor belongs to a cluster
0.8.32,Rename variable so it's easy to understand what's being returned
0.8.32,Extract condensed tree for later use
0.8.32,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.32,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.32,Use the same prediction_data as clusterer's
0.8.32,Compute cluster_selection_epsilon so that a flat clustering
0.8.32,produces a specified number of n_clusters
0.8.32,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.32,Create another instance of prediction_data that is consistent
0.8.32,with the selected value of epsilon.
0.8.32,Flat clustering at the chosen epsilon from prediction_data
0.8.32,"When no clusters found, return array of 0's"
0.8.32,Probabilities based on distance to closest exemplar in each cluster:
0.8.32,Use new prediction_data that points to exemplars that are specific
0.8.32,to the choice of n_clusters
0.8.32,Probabilities based on how long the point persists in
0.8.32,each cluster (with respect to most persistent exemplar)
0.8.32,Use new clusters that are defined by the choice of n_clusters.
0.8.32,Include probability that the point belongs to a cluster
0.8.32,Aggregate the three probabilities to produce membership vectors
0.8.32,Re-name variable to clarify what's being returned.
0.8.32,"With method 'eom', max clusters are produced for epsilon=0,"
0.8.32,as computed by
0.8.32,Increasing epsilon can only reduce the number of ouput clusters.
0.8.32,"To select epsilon, consider all values where clusters are split"
0.8.32,Subtract the extra e-12 to avoid numerical errors in comparison
0.8.32,"Then, we avoid splitting for all epsilon below this."
0.8.32,Use an epsilon value that produces the right number of clusters.
0.8.32,The condensed tree of HDBSCAN has this information.
0.8.32,Extract the lambda levels (=1/distance) from the condensed tree
0.8.32,We don't want values that produce a large cluster and
0.8.32,just one or two individual points.
0.8.32,Keep only those lambda values corresponding to cluster separation;
0.8.32,"i.e., with child_sizes > 1"
0.8.32,"Get the unique values, because when two clusters fall out of one,"
0.8.32,the entry with lambda is repeated.
0.8.32,lambda values are sorted by np.unique.
0.8.32,"Now, get epsilon (distance threshold) as 1/lambda"
0.8.32,"At this epsilon, n_clusters have been split."
0.8.32,Stop splits at epsilons smaller than this.
0.8.32,"To allow for numerical errors,"
0.8.32,predData must be a pre-trained PredictionData instance from hdbscan
0.8.32,"If n_clusters is specified, compute cluster_selection_epsilon;"
0.8.32,This is the key modification:
0.8.32,Select clusters according to selection method and epsilon.
0.8.32,_new_select_clusters is a modification of get_clusters
0.8.32,from hdbscan._hdbscan_tree
0.8.32,"raw tree, used later to get exemplars and lambda values"
0.8.32,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
0.8.32,to the cluster labels produced as output
0.8.32,Re-compute lambdas and exemplars for selected clusters;
0.8.32,max_lambda <=> smallest distance <=> most persistent point(s)
0.8.32,Map all sub-clusters of selected cluster to the selected cluster's
0.8.32,label in output.
0.8.32,Map lambdas too...
0.8.32,Create set of exemplar points for later use.
0.8.32,Novel points are assigned based on cluster of closest exemplar.
0.8.32,"For each selected cluster, get all of its leaves,"
0.8.32,"and leaves of leaves, and so on..."
0.8.32,Largest lambda => Most persistent points
0.8.32,Get the most persistent points
0.8.32,Add most persistent points as exemplars
0.8.32,Add exemplars for each leaf of each selected cluster.
0.8.32,(exclude root)
0.8.32,-*- coding: utf-8 -*-
0.8.32,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.32,
0.8.32,License: BSD 3 clause
0.8.32,"Return the only cluster, the root"
0.8.32,We want to get the x and y coordinates for the start of each cluster
0.8.32,"Initialize the leaves, since we know where they go, the iterate"
0.8.32,"through everything from the leaves back, setting coords as we go"
0.8.32,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.32,bottoms and widths for each rectangle. We can go through each cluster
0.8.32,and do this for each in turn.
0.8.32,Ensure we don't try to take log of zero
0.8.32,Finally we need the horizontal lines that occur at cluster splits.
0.8.32,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.32,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.32,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.32,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.32,the chosen clusters.
0.8.32,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.32,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.32,based on the percentile should alleviate the impact on plotting.
0.8.32,Set center and height to default values if necessary
0.8.32,Ensure the ellipse is visible
0.8.32,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.32,Use PCA to get down to 32 dimension
0.8.32,-*- coding: utf-8 -*-
0.8.32,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.32,
0.8.32,License: BSD 3 clause
0.8.32,The Cython routines used require contiguous arrays
0.8.32,The Cython routines used require contiguous arrays
0.8.32,We can't do much with sparse matrices ...
0.8.32,Need heuristic to decide when to go to boruvka;
0.8.32,still debugging for now
0.8.32,Need heuristic to decide when to go to boruvka;
0.8.32,still debugging for now
0.8.32,Support various prediction methods for predicting cluster membership
0.8.32,of new or unseen points. There are several ways to interpret how
0.8.32,"to do this correctly, so we provide several methods for"
0.8.32,the different use cases that may arise.
0.8.32,raw_condensed_tree = condensed_tree.to_numpy()
0.8.32,New point departs with the old
0.8.32,Find appropriate cluster based on lambda of new point
0.8.32,Find appropriate cluster based on lambda of new point
0.8.32,"the point is in the dataset, fix lambda for rounding errors"
0.8.32,We need to find where in the tree the new point would go
0.8.32,for the purposes of outlier membership approximation
0.8.32,"When no clusters found, return array of 0's"
0.8.32,import pickle
0.8.32,from sklearn.cluster.tests.common import generate_clustered_data
0.8.32,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.32,"number of clusters, ignoring noise if present"
0.8.32,"metric is the function reference, not the string key."
0.8.32,def test_rsl_unavailable_hierarchy():
0.8.32,clusterer = RobustSingleLinkage()
0.8.32,with warnings.catch_warnings(record=True) as w:
0.8.32,tree = clusterer.cluster_hierarchy_
0.8.32,assert len(w) > 0
0.8.32,assert tree is None
0.8.32,"H, y = shuffle(X, y, random_state=7)"
0.8.32,Disable for now -- need to refactor to meet newer standards
0.8.32,from sklearn.cluster.tests.common import generate_clustered_data
0.8.32,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.32,this fails if no $DISPLAY specified
0.8.32,"number of clusters, ignoring noise if present"
0.8.32,"number of clusters, ignoring noise if present"
0.8.32,"H, y = shuffle(X, y, random_state=7)"
0.8.32,"metric is the function reference, not the string key."
0.8.32,def test_hdbscan_unavailable_attributes():
0.8.32,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.32,with warnings.catch_warnings(record=True) as w:
0.8.32,tree = clusterer.condensed_tree_
0.8.32,assert len(w) > 0
0.8.32,assert tree is None
0.8.32,with warnings.catch_warnings(record=True) as w:
0.8.32,tree = clusterer.single_linkage_tree_
0.8.32,assert len(w) > 0
0.8.32,assert tree is None
0.8.32,with warnings.catch_warnings(record=True) as w:
0.8.32,scores = clusterer.outlier_scores_
0.8.32,assert len(w) > 0
0.8.32,assert scores is None
0.8.32,with warnings.catch_warnings(record=True) as w:
0.8.32,tree = clusterer.minimum_spanning_tree_
0.8.32,assert len(w) > 0
0.8.32,assert tree is None
0.8.32,def test_hdbscan_min_span_tree_availability():
0.8.32,clusterer = HDBSCAN().fit(X)
0.8.32,tree = clusterer.minimum_spanning_tree_
0.8.32,assert tree is None
0.8.32,D = distance.squareform(distance.pdist(X))
0.8.32,D /= np.max(D)
0.8.32,HDBSCAN(metric='precomputed').fit(D)
0.8.32,tree = clusterer.minimum_spanning_tree_
0.8.32,assert tree is None
0.8.32,no prediction data error
0.8.32,wrong dimensions error
0.8.32,no clusters warning
0.8.32,def test_hdbscan_membership_vector():
0.8.32,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.32,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.32,assert_array_almost_equal(
0.8.32,"vector,"
0.8.32,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.32,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.32,assert_array_almost_equal(
0.8.32,"vector,"
0.8.32,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.32,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.32,assert_array_almost_equal(
0.8.32,"vector,"
0.8.32,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.32,
0.8.32,def test_hdbscan_all_points_membership_vectors():
0.8.32,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.32,vects = all_points_membership_vectors(clusterer)
0.8.32,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.32,"2.52734246e-001,"
0.8.32,8.38299608e-002]))
0.8.32,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.32,"8.35882503e-002,"
0.8.32,1.07356406e-001]))
0.8.32,without epsilon we should see many noise points as children of root.
0.8.32,for this random seed an epsilon of 0.2 will produce exactly 2 noise
0.8.32,points at that cut in single linkage.
0.8.32,Disable for now -- need to refactor to meet newer standards
0.8.32,Probably not applicable now #
0.8.32,def test_dbscan_sparse():
0.8.32,def test_dbscan_balltree():
0.8.32,def test_pickle():
0.8.32,def test_dbscan_core_samples_toy():
0.8.32,def test_boundaries():
0.8.32,"Given negative, zero and positive denominator and positive numerator"
0.8.32,Make sure safe division is always positive and doesn't raise ZeroDivision error
0.8.32,Ignore future warnings thrown by sklearn
0.8.32,Create a nice dataset with 6 circular clusters and 2 moons
0.8.32,"Given, the base HDBSCAN with method 'eom'"
0.8.32,"When we ask for flat clustering with same n_clusters,"
0.8.32,"Then, the labels and probabilities should match"
0.8.32,"Given, the base HDBSCAN with method 'leaf'"
0.8.32,"When we ask for flat clustering with same n_clusters,"
0.8.32,"Then, the labels and probabilities should match"
0.8.32,Method 'eom'...
0.8.32,"Given, a flat clustering for required n_clusters,"
0.8.32,"When we run the base HDBSCAN using it's epsilon,"
0.8.32,"Then, the labels and probabilities should match"
0.8.32,Method 'leaf'...
0.8.32,"Given, a flat clustering for required n_clusters,"
0.8.32,"When we run the base HDBSCAN using it's epsilon,"
0.8.32,"Then, the labels and probabilities should match"
0.8.32,"Given the max number of clusters that can be produced by 'eom',"
0.8.32,(these are produced for epsilon=0) (??? Needs verification)
0.8.32,"When we try flat clustering with 'eom' method for more n_clusters,"
0.8.32,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.32,"assert ""Cannot predict"" in str(w[-1].message)"
0.8.32,"the resulting clusterer switches to using method 'leaf',"
0.8.32,and the resulting probabilities and labels must match
0.8.32,"Given the base HDBSCAN trained on some data,"
0.8.32,"When using approximate_predict_flat without specifying n_clusters,"
0.8.32,"Then, the clustering should match that due to approximate_predict,"
0.8.32,"Given a flat clustering trained for some n_clusters,"
0.8.32,"When using approximate_predict_flat without specifying n_clusters,"
0.8.32,"Then, the number of clusters produced must match the original n_clusters"
0.8.32,and all probabilities are <= 1.
0.8.32,"Given a flat clustering trained for some n_clusters,"
0.8.32,"When using approximate_predict_flat with specified n_clusters,"
0.8.32,"Then, the requested number of clusters must be produced"
0.8.32,and all probabilities are <= 1.
0.8.32,When using approximate_predict_flat with more clusters
0.8.32,"than 'eom' can handle,"
0.8.32,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.32,But the requested number of clusters must still be produced using 'leaf'
0.8.32,and all probabilities are <= 1.
0.8.32,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.32,"When membership_vector_flat is called with new data,"
0.8.32,"Then the number of clusters in memberships matches those of clusterer,"
0.8.32,and the number of points should equal those in the test set
0.8.32,and all probabilities are <= 1.
0.8.32,========================================
0.8.32,"Given a flat clustering for a specified n_clusters,"
0.8.32,"When membership_vector_flat is called with new data,"
0.8.32,"Then the number of clusters in memberships matches those of clusterer,"
0.8.32,and the number of points should equal those in the test set
0.8.32,and all probabilities are <= 1.
0.8.32,Ignore user warnings in this function
0.8.32,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.32,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.32,"Then the number of clusters in memberships should be as requested,"
0.8.32,and the number of points should equal those in the test set
0.8.32,and all probabilities are <= 1.
0.8.32,========================================
0.8.32,"Given a flat clustering for a specified n_clusters,"
0.8.32,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.32,"Then the number of clusters in memberships should be as requested,"
0.8.32,and the number of points should equal those in the test set
0.8.32,and all probabilities are <= 1.
0.8.32,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.32,"When all_points_membership_vectors_flat is called,"
0.8.32,"Then the number of clusters in memberships matches those of clusterer,"
0.8.32,and the number of points should equal those in the training set
0.8.32,and all probabilities are <= 1.
0.8.32,========================================
0.8.32,"Given a flat clustering for a specified n_clusters,"
0.8.32,"When all_points_membership_vectors_flat is called,"
0.8.32,"Then the number of clusters in memberships matches those of clusterer,"
0.8.32,and the number of points should equal those in the training set
0.8.32,and all probabilities are <= 1.
0.8.32,Ignore user warnings in this function
0.8.32,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.32,"When all_points_membership_vectors_flat is called for some n_clusters,"
0.8.32,"Then the number of clusters in memberships should be as requested,"
0.8.32,and the number of points should equal those in the training set
0.8.32,and all probabilities are <= 1.
0.8.32,========================================
0.8.32,"Given a flat clustering for a specified n_clusters,"
0.8.32,"When membership_vector_flat is called for some n_clusters,"
0.8.32,"Then the number of clusters in memberships should be as requested,"
0.8.32,and the number of points should equal those in the training set
0.8.32,and all probabilities are <= 1.
0.8.32,Generate datasets. We choose the size big enough to see the scalability
0.8.32,"of the algorithms, but not too big to avoid too long running times"
0.8.32,normalize dataset for easier parameter selection
0.8.32,estimate bandwidth for mean shift
0.8.32,connectivity matrix for structured Ward
0.8.32,make connectivity symmetric
0.8.32,create clustering estimators
0.8.32,predict cluster memberships
0.8.32,plot
0.8.32,-*- coding: utf-8 -*-
0.8.32,#############################################################################
0.8.32,Generate sample data
0.8.32,#############################################################################
0.8.32,Compute DBSCAN
0.8.32,"Number of clusters in labels, ignoring noise if present."
0.8.32,#############################################################################
0.8.32,Plot result
0.8.32,Black removed and is used for noise instead.
0.8.32,Black used for noise.
0.8.32,Black used for noise.
0.8.32,-*- coding: utf-8 -*-
0.8.32,
0.8.32,"hdbscan documentation build configuration file, created by"
0.8.32,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.32,
0.8.32,This file is execfile()d with the current directory set to its
0.8.32,containing dir.
0.8.32,
0.8.32,Note that not all possible configuration values are present in this
0.8.32,autogenerated file.
0.8.32,
0.8.32,All configuration values have a default; values that are commented out
0.8.32,serve to show the default.
0.8.32,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.32,add these directories to sys.path here. If the directory is relative to the
0.8.32,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.32,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.32,"sys.path.insert(0, os.path.abspath('../'))"
0.8.32,-- General configuration ------------------------------------------------
0.8.32,"If your documentation needs a minimal Sphinx version, state it here."
0.8.32,needs_sphinx = '1.0'
0.8.32,"Add any Sphinx extension module names here, as strings. They can be"
0.8.32,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.32,ones.
0.8.32,"'sphinx.ext.napoleon',"
0.8.32,'numpy_ext.numpydoc'
0.8.32,napoleon_google_docstring = False
0.8.32,napoleon_numpy_docstring = True
0.8.32,"Add any paths that contain templates here, relative to this directory."
0.8.32,The suffix(es) of source filenames.
0.8.32,You can specify multiple suffix as a list of string:
0.8.32,"source_suffix = ['.rst', '.md']"
0.8.32,The encoding of source files.
0.8.32,source_encoding = 'utf-8-sig'
0.8.32,The master toctree document.
0.8.32,General information about the project.
0.8.32,"The version info for the project you're documenting, acts as replacement for"
0.8.32,"|version| and |release|, also used in various other places throughout the"
0.8.32,built documents.
0.8.32,
0.8.32,The short X.Y version.
0.8.32,"The full version, including alpha/beta/rc tags."
0.8.32,The language for content autogenerated by Sphinx. Refer to documentation
0.8.32,for a list of supported languages.
0.8.32,
0.8.32,This is also used if you do content translation via gettext catalogs.
0.8.32,"Usually you set ""language"" from the command line for these cases."
0.8.32,"There are two options for replacing |today|: either, you set today to some"
0.8.32,"non-false value, then it is used:"
0.8.32,today = ''
0.8.32,"Else, today_fmt is used as the format for a strftime call."
0.8.32,"today_fmt = '%B %d, %Y'"
0.8.32,"List of patterns, relative to source directory, that match files and"
0.8.32,directories to ignore when looking for source files.
0.8.32,The reST default role (used for this markup: `text`) to use for all
0.8.32,documents.
0.8.32,default_role = None
0.8.32,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.32,add_function_parentheses = True
0.8.32,"If true, the current module name will be prepended to all description"
0.8.32,unit titles (such as .. function::).
0.8.32,add_module_names = True
0.8.32,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.32,output. They are ignored by default.
0.8.32,show_authors = False
0.8.32,The name of the Pygments (syntax highlighting) style to use.
0.8.32,A list of ignored prefixes for module index sorting.
0.8.32,modindex_common_prefix = []
0.8.32,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.32,keep_warnings = False
0.8.32,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.32,-- Options for HTML output ----------------------------------------------
0.8.32,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.32,a list of builtin themes.
0.8.32,html_theme = 'alabaster'
0.8.32,Theme options are theme-specific and customize the look and feel of a theme
0.8.32,"further.  For a list of options available for each theme, see the"
0.8.32,documentation.
0.8.32,html_theme_options = {}
0.8.32,"Add any paths that contain custom themes here, relative to this directory."
0.8.32,html_theme_path = []
0.8.32,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.32,"""<project> v<release> documentation""."
0.8.32,html_title = None
0.8.32,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.32,html_short_title = None
0.8.32,The name of an image file (relative to this directory) to place at the top
0.8.32,of the sidebar.
0.8.32,html_logo = None
0.8.32,The name of an image file (within the static path) to use as favicon of the
0.8.32,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.32,pixels large.
0.8.32,html_favicon = None
0.8.32,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.32,"relative to this directory. They are copied after the builtin static files,"
0.8.32,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.32,Add any extra paths that contain custom files (such as robots.txt or
0.8.32,".htaccess) here, relative to this directory. These files are copied"
0.8.32,directly to the root of the documentation.
0.8.32,html_extra_path = []
0.8.32,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.32,using the given strftime format.
0.8.32,"html_last_updated_fmt = '%b %d, %Y'"
0.8.32,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.32,typographically correct entities.
0.8.32,html_use_smartypants = True
0.8.32,"Custom sidebar templates, maps document names to template names."
0.8.32,html_sidebars = {}
0.8.32,"Additional templates that should be rendered to pages, maps page names to"
0.8.32,template names.
0.8.32,html_additional_pages = {}
0.8.32,"If false, no module index is generated."
0.8.32,html_domain_indices = True
0.8.32,"If false, no index is generated."
0.8.32,html_use_index = True
0.8.32,"If true, the index is split into individual pages for each letter."
0.8.32,html_split_index = False
0.8.32,"If true, links to the reST sources are added to the pages."
0.8.32,html_show_sourcelink = True
0.8.32,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.32,html_show_sphinx = True
0.8.32,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.32,html_show_copyright = True
0.8.32,"If true, an OpenSearch description file will be output, and all pages will"
0.8.32,contain a <link> tag referring to it.  The value of this option must be the
0.8.32,base URL from which the finished HTML is served.
0.8.32,html_use_opensearch = ''
0.8.32,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.32,html_file_suffix = None
0.8.32,Language to be used for generating the HTML full-text search index.
0.8.32,Sphinx supports the following languages:
0.8.32,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.32,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.32,html_search_language = 'en'
0.8.32,"A dictionary with options for the search language support, empty by default."
0.8.32,Now only 'ja' uses this config value
0.8.32,html_search_options = {'type': 'default'}
0.8.32,The name of a javascript file (relative to the configuration directory) that
0.8.32,"implements a search results scorer. If empty, the default will be used."
0.8.32,html_search_scorer = 'scorer.js'
0.8.32,Output file base name for HTML help builder.
0.8.32,-- Options for LaTeX output ---------------------------------------------
0.8.32,The paper size ('letterpaper' or 'a4paper').
0.8.32,"'papersize': 'letterpaper',"
0.8.32,"The font size ('10pt', '11pt' or '12pt')."
0.8.32,"'pointsize': '10pt',"
0.8.32,Additional stuff for the LaTeX preamble.
0.8.32,"'preamble': '',"
0.8.32,Latex figure (float) alignment
0.8.32,"'figure_align': 'htbp',"
0.8.32,Grouping the document tree into LaTeX files. List of tuples
0.8.32,"(source start file, target name, title,"
0.8.32,"author, documentclass [howto, manual, or own class])."
0.8.32,The name of an image file (relative to this directory) to place at the top of
0.8.32,the title page.
0.8.32,latex_logo = None
0.8.32,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.32,not chapters.
0.8.32,latex_use_parts = False
0.8.32,"If true, show page references after internal links."
0.8.32,latex_show_pagerefs = False
0.8.32,"If true, show URL addresses after external links."
0.8.32,latex_show_urls = False
0.8.32,Documents to append as an appendix to all manuals.
0.8.32,latex_appendices = []
0.8.32,"If false, no module index is generated."
0.8.32,latex_domain_indices = True
0.8.32,-- Options for manual page output ---------------------------------------
0.8.32,One entry per manual page. List of tuples
0.8.32,"(source start file, name, description, authors, manual section)."
0.8.32,"If true, show URL addresses after external links."
0.8.32,man_show_urls = False
0.8.32,-- Options for Texinfo output -------------------------------------------
0.8.32,Grouping the document tree into Texinfo files. List of tuples
0.8.32,"(source start file, target name, title, author,"
0.8.32,"dir menu entry, description, category)"
0.8.32,Documents to append as an appendix to all manuals.
0.8.32,texinfo_appendices = []
0.8.32,"If false, no module index is generated."
0.8.32,texinfo_domain_indices = True
0.8.32,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.32,texinfo_show_urls = 'footnote'
0.8.32,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.32,texinfo_no_detailmenu = False
0.8.32,-- Options for Epub output ----------------------------------------------
0.8.32,Bibliographic Dublin Core info.
0.8.32,The basename for the epub file. It defaults to the project name.
0.8.32,epub_basename = project
0.8.32,The HTML theme for the epub output. Since the default themes are not
0.8.32,"optimized for small screen space, using the same theme for HTML and epub"
0.8.32,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.32,visual space.
0.8.32,epub_theme = 'epub'
0.8.32,The language of the text. It defaults to the language option
0.8.32,or 'en' if the language is not set.
0.8.32,epub_language = ''
0.8.32,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.32,epub_scheme = ''
0.8.32,The unique identifier of the text. This can be a ISBN number
0.8.32,or the project homepage.
0.8.32,epub_identifier = ''
0.8.32,A unique identification for the text.
0.8.32,epub_uid = ''
0.8.32,A tuple containing the cover image and cover page html template filenames.
0.8.32,epub_cover = ()
0.8.32,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.32,epub_guide = ()
0.8.32,HTML files that should be inserted before the pages created by sphinx.
0.8.32,The format is a list of tuples containing the path and title.
0.8.32,epub_pre_files = []
0.8.32,HTML files that should be inserted after the pages created by sphinx.
0.8.32,The format is a list of tuples containing the path and title.
0.8.32,epub_post_files = []
0.8.32,A list of files that should not be packed into the epub file.
0.8.32,The depth of the table of contents in toc.ncx.
0.8.32,epub_tocdepth = 3
0.8.32,Allow duplicate toc entries.
0.8.32,epub_tocdup = True
0.8.32,Choose between 'default' and 'includehidden'.
0.8.32,epub_tocscope = 'default'
0.8.32,Fix unsupported image types using the Pillow.
0.8.32,epub_fix_images = False
0.8.32,Scale large images.
0.8.32,epub_max_image_width = 0
0.8.32,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.32,epub_show_urls = 'inline'
0.8.32,"If false, no index is generated."
0.8.32,epub_use_index = True
0.8.31,"Import numpy here, only when headers are needed"
0.8.31,Add numpy headers to include_dirs
0.8.31,Call original build_ext command
0.8.31,The dependencies are the same as the contents of requirements.txt
0.8.31,"A little ""fancy"" we select from the flattened array reshape back"
0.8.31,(Fortran format to get indexing right) and take the product to do an and
0.8.31,then convert back to boolean type.
0.8.31,Density sparseness is not well defined if there are no
0.8.31,internal edges (as per the referenced paper). However
0.8.31,MATLAB code from the original authors simply selects the
0.8.31,largest of *all* the edges in the case that there are
0.8.31,"no internal edges, so we do the same here"
0.8.31,"If there are any internal edges, then subselect them out"
0.8.31,If there are no internal edges then we want to take the
0.8.31,"max over all the edges that exist in the MST, so we simply"
0.8.31,do nothing and return all the edges in the MST.
0.8.31,-*- coding: utf-8 -*-
0.8.31,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.31,Steve Astels <sastels@gmail.com>
0.8.31,John Healy <jchealy@gmail.com>
0.8.31,
0.8.31,License: BSD 3 clause
0.8.31,"Treating this case explicitly, instead of letting"
0.8.31,"sklearn.metrics.pairwise_distances handle it,"
0.8.31,enables the usage of numpy.inf in the distance
0.8.31,matrix to indicate missing distance information.
0.8.31,TODO: Check if copying is necessary
0.8.31,raise TypeError('Sparse distance matrices not yet supported')
0.8.31,Warn if the MST couldn't be constructed around the missing distances
0.8.31,mst_linkage_core does not generate a full minimal spanning tree
0.8.31,If a tree is required then we must build the edges from the information
0.8.31,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.31,Sort edges of the min_spanning_tree by weight
0.8.31,Convert edge list into standard hierarchical clustering format
0.8.31,Check for connected component on X
0.8.31,Compute sparse mutual reachability graph
0.8.31,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.31,Check connected component on mutual reachability
0.8.31,"If more than one component, it means that even if the distance matrix X"
0.8.31,"has one component, there exists with less than `min_samples` neighbors"
0.8.31,Compute the minimum spanning tree for the sparse graph
0.8.31,Convert the graph to scipy cluster array format
0.8.31,Sort edges of the min_spanning_tree by weight
0.8.31,Convert edge list into standard hierarchical clustering format
0.8.31,The Cython routines used require contiguous arrays
0.8.31,TO DO: Deal with p for minkowski appropriately
0.8.31,Get distance to kth nearest neighbour
0.8.31,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.31,Sort edges of the min_spanning_tree by weight
0.8.31,Convert edge list into standard hierarchical clustering format
0.8.31,The Cython routines used require contiguous arrays
0.8.31,Get distance to kth nearest neighbour
0.8.31,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.31,Sort edges of the min_spanning_tree by weight
0.8.31,Convert edge list into standard hierarchical clustering format
0.8.31,Sort edges of the min_spanning_tree by weight
0.8.31,Convert edge list into standard hierarchical clustering format
0.8.31,Sort edges of the min_spanning_tree by weight
0.8.31,Convert edge list into standard hierarchical clustering format
0.8.31,Checks input and converts to an nd-array where possible
0.8.31,"Only non-sparse, precomputed distance matrices are handled here"
0.8.31,and thereby allowed to contain numpy.inf for missing distances
0.8.31,Python 2 and 3 compliant string_type checking
0.8.31,We can't do much with sparse matrices ...
0.8.31,TO DO: Need heuristic to decide when to go to boruvka;
0.8.31,still debugging for now
0.8.31,TO DO: Need heuristic to decide when to go to boruvka;
0.8.31,still debugging for now
0.8.31,Inherits from sklearn
0.8.31,Non-precomputed matrices may contain non-finite values.
0.8.31,Rows with these values
0.8.31,Pass only the purely finite indices into hdbscan
0.8.31,We will later assign all non-finite points to the background -1 cluster
0.8.31,Handle sparse precomputed distance matrices separately
0.8.31,"Only non-sparse, precomputed distance matrices are allowed"
0.8.31,to have numpy.inf values indicating missing distances
0.8.31,"prediction data only applies to the persistent model, so remove"
0.8.31,it from the keyword args we pass on the the function
0.8.31,remap indices to align with original data in the case of non-finite entries.
0.8.31,"Unltimately, for each Ci, we only require the"
0.8.31,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.31,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.31,density separation 'with respect to' Ci.
0.8.31,If exactly one of the points is noise
0.8.31,Set the density sparseness of the cluster
0.8.31,to the sparsest value seen so far.
0.8.31,Check whether density separations with
0.8.31,respect to each of these clusters can
0.8.31,be reduced.
0.8.31,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.31,This only makes sense if num_clusters = 1 since it has turned out
0.8.31,that the MR-MST has no edges between a noise point and a core point.
0.8.31,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.31,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.31,MR-MST might contain an edge with one point in Cj and ther other one
0.8.31,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.31,another large enough value.
0.8.31,
0.8.31,TODO: Think of a better yet efficient way to handle this.
0.8.31,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
0.8.31,Use a previously initialized/trained HDBSCAN
0.8.31,Handle the trivial case first.
0.8.31,Always generate prediction_data to avoid later woes
0.8.31,This will later be chosen according to n_clusters
0.8.31,Initialize and train clusterer if one was not previously supplied.
0.8.31,Always generate prediction data
0.8.31,We do not pass cluster_selection_epsilon here.
0.8.31,"While this adds unnecessary computation, it makes the code"
0.8.31,easier to read and debug.
0.8.31,"Train on 'X'. Do this even if the supplied clusterer was trained,"
0.8.31,because we want to make sure it fits 'X'.
0.8.31,"Pick an epsilon value right after a split produces n_clusters,"
0.8.31,and the don't split further for smaller epsilon (larger lambda)
0.8.31,Or use the specified cluster_selection_epsilon
0.8.31,"Extract tree related stuff, in order to re-assign labels"
0.8.31,Get labels according to the required cluster_selection_epsilon
0.8.31,Reflect the related changes in HDBSCAN.
0.8.31,PredictionData attached to HDBSCAN should also change.
0.8.31,A function re_init is defined in this module to handle this.
0.8.31,"From a fitted HDBSCAN model, predict for n_clusters=5"
0.8.31,Store prediciton data for later use.
0.8.31,and use this prediction data to predict on new points
0.8.31,Get number of fitted clusters for later use.
0.8.31,We'll need the condensed tree later...
0.8.31,"If none of the three arguments: prediction_data, n_clusters,"
0.8.31,"and cluster_selection_epsilon are supplied,"
0.8.31,then use clusterer's prediciton data directly
0.8.31,"If either of n_clusters or cluster_selection_epsilon were supplied,"
0.8.31,then build prediction data from these by modifying clusterer's
0.8.31,Get prediction data from clusterer
0.8.31,Modify prediction_data to reflect new n_clusters
0.8.31,"First, make a copy of prediction data to avoid modifying source"
0.8.31,Cluster selection method is hold by condensed_tree.
0.8.31,Change from 'eom' to 'leaf' if n_clusters is too large.
0.8.31,This change does not affect the tree associated with 'clusterer'
0.8.31,Re-initialize prediction_data for the specified n_clusters or epsilon
0.8.31,============================================================
0.8.31,Now we're ready to use prediction_data
0.8.31,"The rest of the code is copied from HDBSCAN's approximate_predict,"
0.8.31,but modified to use prediction_data instead of clusterer's attribute
0.8.31,Extract condensed tree for later use
0.8.31,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.31,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.31,Use the same prediction_data as clusterer's
0.8.31,Compute cluster_selection_epsilon so that a flat clustering
0.8.31,produces a specified number of n_clusters
0.8.31,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.31,Create another instance of prediction_data that is consistent
0.8.31,with the selected value of epsilon.
0.8.31,Flat clustering from prediction data
0.8.31,Initialize probabilities
0.8.31,k-NN for prediciton points to training set
0.8.31,Loop over prediction points to compute probabilities
0.8.31,We need to find where in the tree the new point would go
0.8.31,for the purposes of outlier membership approximation
0.8.31,"Find row in tree where nearest neighbor drops out,"
0.8.31,so we can get a lambda value for the nearest neighbor
0.8.31,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
0.8.31,"Equivalently, this assigns core distance for prediction point as"
0.8.31,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
0.8.31,Probabilities based on distance to closest exemplar in each cluster:
0.8.31,Use new prediction_data that points to exemplars that are specific
0.8.31,to the choice of n_clusters
0.8.31,Probabilities based on how long the nearest exemplar persists in
0.8.31,each cluster (with respect to most persistent exemplar)
0.8.31,Use new clusters that are defined by the choice of n_clusters.
0.8.31,Merge the two probabilities to produce a single set of probabilities
0.8.31,Include probability that the nearest neighbor belongs to a cluster
0.8.31,Rename variable so it's easy to understand what's being returned
0.8.31,Extract condensed tree for later use
0.8.31,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.31,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.31,Use the same prediction_data as clusterer's
0.8.31,Compute cluster_selection_epsilon so that a flat clustering
0.8.31,produces a specified number of n_clusters
0.8.31,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.31,Create another instance of prediction_data that is consistent
0.8.31,with the selected value of epsilon.
0.8.31,Flat clustering at the chosen epsilon from prediction_data
0.8.31,"When no clusters found, return array of 0's"
0.8.31,Probabilities based on distance to closest exemplar in each cluster:
0.8.31,Use new prediction_data that points to exemplars that are specific
0.8.31,to the choice of n_clusters
0.8.31,Probabilities based on how long the point persists in
0.8.31,each cluster (with respect to most persistent exemplar)
0.8.31,Use new clusters that are defined by the choice of n_clusters.
0.8.31,Include probability that the point belongs to a cluster
0.8.31,Aggregate the three probabilities to produce membership vectors
0.8.31,Re-name variable to clarify what's being returned.
0.8.31,"With method 'eom', max clusters are produced for epsilon=0,"
0.8.31,as computed by
0.8.31,Increasing epsilon can only reduce the number of ouput clusters.
0.8.31,"To select epsilon, consider all values where clusters are split"
0.8.31,Subtract the extra e-12 to avoid numerical errors in comparison
0.8.31,"Then, we avoid splitting for all epsilon below this."
0.8.31,Use an epsilon value that produces the right number of clusters.
0.8.31,The condensed tree of HDBSCAN has this information.
0.8.31,Extract the lambda levels (=1/distance) from the condensed tree
0.8.31,We don't want values that produce a large cluster and
0.8.31,just one or two individual points.
0.8.31,Keep only those lambda values corresponding to cluster separation;
0.8.31,"i.e., with child_sizes > 1"
0.8.31,"Get the unique values, because when two clusters fall out of one,"
0.8.31,the entry with lambda is repeated.
0.8.31,lambda values are sorted by np.unique.
0.8.31,"Now, get epsilon (distance threshold) as 1/lambda"
0.8.31,"At this epsilon, n_clusters have been split."
0.8.31,Stop splits at epsilons smaller than this.
0.8.31,"To allow for numerical errors,"
0.8.31,predData must be a pre-trained PredictionData instance from hdbscan
0.8.31,"If n_clusters is specified, compute cluster_selection_epsilon;"
0.8.31,This is the key modification:
0.8.31,Select clusters according to selection method and epsilon.
0.8.31,_new_select_clusters is a modification of get_clusters
0.8.31,from hdbscan._hdbscan_tree
0.8.31,"raw tree, used later to get exemplars and lambda values"
0.8.31,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
0.8.31,to the cluster labels produced as output
0.8.31,Re-compute lambdas and exemplars for selected clusters;
0.8.31,max_lambda <=> smallest distance <=> most persistent point(s)
0.8.31,Map all sub-clusters of selected cluster to the selected cluster's
0.8.31,label in output.
0.8.31,Map lambdas too...
0.8.31,Create set of exemplar points for later use.
0.8.31,Novel points are assigned based on cluster of closest exemplar.
0.8.31,"For each selected cluster, get all of its leaves,"
0.8.31,"and leaves of leaves, and so on..."
0.8.31,Largest lambda => Most persistent points
0.8.31,Get the most persistent points
0.8.31,Add most persistent points as exemplars
0.8.31,Add exemplars for each leaf of each selected cluster.
0.8.31,(exclude root)
0.8.31,-*- coding: utf-8 -*-
0.8.31,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.31,
0.8.31,License: BSD 3 clause
0.8.31,"Return the only cluster, the root"
0.8.31,We want to get the x and y coordinates for the start of each cluster
0.8.31,"Initialize the leaves, since we know where they go, the iterate"
0.8.31,"through everything from the leaves back, setting coords as we go"
0.8.31,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.31,bottoms and widths for each rectangle. We can go through each cluster
0.8.31,and do this for each in turn.
0.8.31,Ensure we don't try to take log of zero
0.8.31,Finally we need the horizontal lines that occur at cluster splits.
0.8.31,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.31,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.31,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.31,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.31,the chosen clusters.
0.8.31,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.31,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.31,based on the percentile should alleviate the impact on plotting.
0.8.31,Set center and height to default values if necessary
0.8.31,Ensure the ellipse is visible
0.8.31,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.31,Use PCA to get down to 32 dimension
0.8.31,-*- coding: utf-8 -*-
0.8.31,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.31,
0.8.31,License: BSD 3 clause
0.8.31,The Cython routines used require contiguous arrays
0.8.31,The Cython routines used require contiguous arrays
0.8.31,We can't do much with sparse matrices ...
0.8.31,Need heuristic to decide when to go to boruvka;
0.8.31,still debugging for now
0.8.31,Need heuristic to decide when to go to boruvka;
0.8.31,still debugging for now
0.8.31,Support various prediction methods for predicting cluster membership
0.8.31,of new or unseen points. There are several ways to interpret how
0.8.31,"to do this correctly, so we provide several methods for"
0.8.31,the different use cases that may arise.
0.8.31,raw_condensed_tree = condensed_tree.to_numpy()
0.8.31,New point departs with the old
0.8.31,Find appropriate cluster based on lambda of new point
0.8.31,Find appropriate cluster based on lambda of new point
0.8.31,"the point is in the dataset, fix lambda for rounding errors"
0.8.31,We need to find where in the tree the new point would go
0.8.31,for the purposes of outlier membership approximation
0.8.31,"When no clusters found, return array of 0's"
0.8.31,import pickle
0.8.31,from sklearn.cluster.tests.common import generate_clustered_data
0.8.31,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.31,"number of clusters, ignoring noise if present"
0.8.31,"metric is the function reference, not the string key."
0.8.31,def test_rsl_unavailable_hierarchy():
0.8.31,clusterer = RobustSingleLinkage()
0.8.31,with warnings.catch_warnings(record=True) as w:
0.8.31,tree = clusterer.cluster_hierarchy_
0.8.31,assert len(w) > 0
0.8.31,assert tree is None
0.8.31,"H, y = shuffle(X, y, random_state=7)"
0.8.31,Disable for now -- need to refactor to meet newer standards
0.8.31,from sklearn.cluster.tests.common import generate_clustered_data
0.8.31,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.31,this fails if no $DISPLAY specified
0.8.31,"number of clusters, ignoring noise if present"
0.8.31,"number of clusters, ignoring noise if present"
0.8.31,"H, y = shuffle(X, y, random_state=7)"
0.8.31,"metric is the function reference, not the string key."
0.8.31,def test_hdbscan_unavailable_attributes():
0.8.31,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.31,with warnings.catch_warnings(record=True) as w:
0.8.31,tree = clusterer.condensed_tree_
0.8.31,assert len(w) > 0
0.8.31,assert tree is None
0.8.31,with warnings.catch_warnings(record=True) as w:
0.8.31,tree = clusterer.single_linkage_tree_
0.8.31,assert len(w) > 0
0.8.31,assert tree is None
0.8.31,with warnings.catch_warnings(record=True) as w:
0.8.31,scores = clusterer.outlier_scores_
0.8.31,assert len(w) > 0
0.8.31,assert scores is None
0.8.31,with warnings.catch_warnings(record=True) as w:
0.8.31,tree = clusterer.minimum_spanning_tree_
0.8.31,assert len(w) > 0
0.8.31,assert tree is None
0.8.31,def test_hdbscan_min_span_tree_availability():
0.8.31,clusterer = HDBSCAN().fit(X)
0.8.31,tree = clusterer.minimum_spanning_tree_
0.8.31,assert tree is None
0.8.31,D = distance.squareform(distance.pdist(X))
0.8.31,D /= np.max(D)
0.8.31,HDBSCAN(metric='precomputed').fit(D)
0.8.31,tree = clusterer.minimum_spanning_tree_
0.8.31,assert tree is None
0.8.31,no prediction data error
0.8.31,wrong dimensions error
0.8.31,no clusters warning
0.8.31,def test_hdbscan_membership_vector():
0.8.31,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.31,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.31,assert_array_almost_equal(
0.8.31,"vector,"
0.8.31,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.31,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.31,assert_array_almost_equal(
0.8.31,"vector,"
0.8.31,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.31,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.31,assert_array_almost_equal(
0.8.31,"vector,"
0.8.31,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.31,
0.8.31,def test_hdbscan_all_points_membership_vectors():
0.8.31,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.31,vects = all_points_membership_vectors(clusterer)
0.8.31,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.31,"2.52734246e-001,"
0.8.31,8.38299608e-002]))
0.8.31,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.31,"8.35882503e-002,"
0.8.31,1.07356406e-001]))
0.8.31,without epsilon we should see many noise points as children of root.
0.8.31,for this random seed an epsilon of 0.2 will produce exactly 2 noise
0.8.31,points at that cut in single linkage.
0.8.31,Disable for now -- need to refactor to meet newer standards
0.8.31,Probably not applicable now #
0.8.31,def test_dbscan_sparse():
0.8.31,def test_dbscan_balltree():
0.8.31,def test_pickle():
0.8.31,def test_dbscan_core_samples_toy():
0.8.31,def test_boundaries():
0.8.31,"Given negative, zero and positive denominator and positive numerator"
0.8.31,Make sure safe division is always positive and doesn't raise ZeroDivision error
0.8.31,Ignore future warnings thrown by sklearn
0.8.31,Create a nice dataset with 6 circular clusters and 2 moons
0.8.31,"Given, the base HDBSCAN with method 'eom'"
0.8.31,"When we ask for flat clustering with same n_clusters,"
0.8.31,"Then, the labels and probabilities should match"
0.8.31,"Given, the base HDBSCAN with method 'leaf'"
0.8.31,"When we ask for flat clustering with same n_clusters,"
0.8.31,"Then, the labels and probabilities should match"
0.8.31,Method 'eom'...
0.8.31,"Given, a flat clustering for required n_clusters,"
0.8.31,"When we run the base HDBSCAN using it's epsilon,"
0.8.31,"Then, the labels and probabilities should match"
0.8.31,Method 'leaf'...
0.8.31,"Given, a flat clustering for required n_clusters,"
0.8.31,"When we run the base HDBSCAN using it's epsilon,"
0.8.31,"Then, the labels and probabilities should match"
0.8.31,"Given the max number of clusters that can be produced by 'eom',"
0.8.31,(these are produced for epsilon=0) (??? Needs verification)
0.8.31,"When we try flat clustering with 'eom' method for more n_clusters,"
0.8.31,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.31,"assert ""Cannot predict"" in str(w[-1].message)"
0.8.31,"the resulting clusterer switches to using method 'leaf',"
0.8.31,and the resulting probabilities and labels must match
0.8.31,"Given the base HDBSCAN trained on some data,"
0.8.31,"When using approximate_predict_flat without specifying n_clusters,"
0.8.31,"Then, the clustering should match that due to approximate_predict,"
0.8.31,"Given a flat clustering trained for some n_clusters,"
0.8.31,"When using approximate_predict_flat without specifying n_clusters,"
0.8.31,"Then, the number of clusters produced must match the original n_clusters"
0.8.31,and all probabilities are <= 1.
0.8.31,"Given a flat clustering trained for some n_clusters,"
0.8.31,"When using approximate_predict_flat with specified n_clusters,"
0.8.31,"Then, the requested number of clusters must be produced"
0.8.31,and all probabilities are <= 1.
0.8.31,When using approximate_predict_flat with more clusters
0.8.31,"than 'eom' can handle,"
0.8.31,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.31,But the requested number of clusters must still be produced using 'leaf'
0.8.31,and all probabilities are <= 1.
0.8.31,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.31,"When membership_vector_flat is called with new data,"
0.8.31,"Then the number of clusters in memberships matches those of clusterer,"
0.8.31,and the number of points should equal those in the test set
0.8.31,and all probabilities are <= 1.
0.8.31,========================================
0.8.31,"Given a flat clustering for a specified n_clusters,"
0.8.31,"When membership_vector_flat is called with new data,"
0.8.31,"Then the number of clusters in memberships matches those of clusterer,"
0.8.31,and the number of points should equal those in the test set
0.8.31,and all probabilities are <= 1.
0.8.31,Ignore user warnings in this function
0.8.31,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.31,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.31,"Then the number of clusters in memberships should be as requested,"
0.8.31,and the number of points should equal those in the test set
0.8.31,and all probabilities are <= 1.
0.8.31,========================================
0.8.31,"Given a flat clustering for a specified n_clusters,"
0.8.31,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.31,"Then the number of clusters in memberships should be as requested,"
0.8.31,and the number of points should equal those in the test set
0.8.31,and all probabilities are <= 1.
0.8.31,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.31,"When all_points_membership_vectors_flat is called,"
0.8.31,"Then the number of clusters in memberships matches those of clusterer,"
0.8.31,and the number of points should equal those in the training set
0.8.31,and all probabilities are <= 1.
0.8.31,========================================
0.8.31,"Given a flat clustering for a specified n_clusters,"
0.8.31,"When all_points_membership_vectors_flat is called,"
0.8.31,"Then the number of clusters in memberships matches those of clusterer,"
0.8.31,and the number of points should equal those in the training set
0.8.31,and all probabilities are <= 1.
0.8.31,Ignore user warnings in this function
0.8.31,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.31,"When all_points_membership_vectors_flat is called for some n_clusters,"
0.8.31,"Then the number of clusters in memberships should be as requested,"
0.8.31,and the number of points should equal those in the training set
0.8.31,and all probabilities are <= 1.
0.8.31,========================================
0.8.31,"Given a flat clustering for a specified n_clusters,"
0.8.31,"When membership_vector_flat is called for some n_clusters,"
0.8.31,"Then the number of clusters in memberships should be as requested,"
0.8.31,and the number of points should equal those in the training set
0.8.31,and all probabilities are <= 1.
0.8.31,Generate datasets. We choose the size big enough to see the scalability
0.8.31,"of the algorithms, but not too big to avoid too long running times"
0.8.31,normalize dataset for easier parameter selection
0.8.31,estimate bandwidth for mean shift
0.8.31,connectivity matrix for structured Ward
0.8.31,make connectivity symmetric
0.8.31,create clustering estimators
0.8.31,predict cluster memberships
0.8.31,plot
0.8.31,-*- coding: utf-8 -*-
0.8.31,#############################################################################
0.8.31,Generate sample data
0.8.31,#############################################################################
0.8.31,Compute DBSCAN
0.8.31,"Number of clusters in labels, ignoring noise if present."
0.8.31,#############################################################################
0.8.31,Plot result
0.8.31,Black removed and is used for noise instead.
0.8.31,Black used for noise.
0.8.31,Black used for noise.
0.8.31,-*- coding: utf-8 -*-
0.8.31,
0.8.31,"hdbscan documentation build configuration file, created by"
0.8.31,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.31,
0.8.31,This file is execfile()d with the current directory set to its
0.8.31,containing dir.
0.8.31,
0.8.31,Note that not all possible configuration values are present in this
0.8.31,autogenerated file.
0.8.31,
0.8.31,All configuration values have a default; values that are commented out
0.8.31,serve to show the default.
0.8.31,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.31,add these directories to sys.path here. If the directory is relative to the
0.8.31,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.31,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.31,"sys.path.insert(0, os.path.abspath('../'))"
0.8.31,-- General configuration ------------------------------------------------
0.8.31,"If your documentation needs a minimal Sphinx version, state it here."
0.8.31,needs_sphinx = '1.0'
0.8.31,"Add any Sphinx extension module names here, as strings. They can be"
0.8.31,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.31,ones.
0.8.31,"'sphinx.ext.napoleon',"
0.8.31,'numpy_ext.numpydoc'
0.8.31,napoleon_google_docstring = False
0.8.31,napoleon_numpy_docstring = True
0.8.31,"Add any paths that contain templates here, relative to this directory."
0.8.31,The suffix(es) of source filenames.
0.8.31,You can specify multiple suffix as a list of string:
0.8.31,"source_suffix = ['.rst', '.md']"
0.8.31,The encoding of source files.
0.8.31,source_encoding = 'utf-8-sig'
0.8.31,The master toctree document.
0.8.31,General information about the project.
0.8.31,"The version info for the project you're documenting, acts as replacement for"
0.8.31,"|version| and |release|, also used in various other places throughout the"
0.8.31,built documents.
0.8.31,
0.8.31,The short X.Y version.
0.8.31,"The full version, including alpha/beta/rc tags."
0.8.31,The language for content autogenerated by Sphinx. Refer to documentation
0.8.31,for a list of supported languages.
0.8.31,
0.8.31,This is also used if you do content translation via gettext catalogs.
0.8.31,"Usually you set ""language"" from the command line for these cases."
0.8.31,"There are two options for replacing |today|: either, you set today to some"
0.8.31,"non-false value, then it is used:"
0.8.31,today = ''
0.8.31,"Else, today_fmt is used as the format for a strftime call."
0.8.31,"today_fmt = '%B %d, %Y'"
0.8.31,"List of patterns, relative to source directory, that match files and"
0.8.31,directories to ignore when looking for source files.
0.8.31,The reST default role (used for this markup: `text`) to use for all
0.8.31,documents.
0.8.31,default_role = None
0.8.31,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.31,add_function_parentheses = True
0.8.31,"If true, the current module name will be prepended to all description"
0.8.31,unit titles (such as .. function::).
0.8.31,add_module_names = True
0.8.31,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.31,output. They are ignored by default.
0.8.31,show_authors = False
0.8.31,The name of the Pygments (syntax highlighting) style to use.
0.8.31,A list of ignored prefixes for module index sorting.
0.8.31,modindex_common_prefix = []
0.8.31,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.31,keep_warnings = False
0.8.31,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.31,-- Options for HTML output ----------------------------------------------
0.8.31,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.31,a list of builtin themes.
0.8.31,html_theme = 'alabaster'
0.8.31,Theme options are theme-specific and customize the look and feel of a theme
0.8.31,"further.  For a list of options available for each theme, see the"
0.8.31,documentation.
0.8.31,html_theme_options = {}
0.8.31,"Add any paths that contain custom themes here, relative to this directory."
0.8.31,html_theme_path = []
0.8.31,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.31,"""<project> v<release> documentation""."
0.8.31,html_title = None
0.8.31,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.31,html_short_title = None
0.8.31,The name of an image file (relative to this directory) to place at the top
0.8.31,of the sidebar.
0.8.31,html_logo = None
0.8.31,The name of an image file (within the static path) to use as favicon of the
0.8.31,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.31,pixels large.
0.8.31,html_favicon = None
0.8.31,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.31,"relative to this directory. They are copied after the builtin static files,"
0.8.31,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.31,Add any extra paths that contain custom files (such as robots.txt or
0.8.31,".htaccess) here, relative to this directory. These files are copied"
0.8.31,directly to the root of the documentation.
0.8.31,html_extra_path = []
0.8.31,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.31,using the given strftime format.
0.8.31,"html_last_updated_fmt = '%b %d, %Y'"
0.8.31,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.31,typographically correct entities.
0.8.31,html_use_smartypants = True
0.8.31,"Custom sidebar templates, maps document names to template names."
0.8.31,html_sidebars = {}
0.8.31,"Additional templates that should be rendered to pages, maps page names to"
0.8.31,template names.
0.8.31,html_additional_pages = {}
0.8.31,"If false, no module index is generated."
0.8.31,html_domain_indices = True
0.8.31,"If false, no index is generated."
0.8.31,html_use_index = True
0.8.31,"If true, the index is split into individual pages for each letter."
0.8.31,html_split_index = False
0.8.31,"If true, links to the reST sources are added to the pages."
0.8.31,html_show_sourcelink = True
0.8.31,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.31,html_show_sphinx = True
0.8.31,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.31,html_show_copyright = True
0.8.31,"If true, an OpenSearch description file will be output, and all pages will"
0.8.31,contain a <link> tag referring to it.  The value of this option must be the
0.8.31,base URL from which the finished HTML is served.
0.8.31,html_use_opensearch = ''
0.8.31,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.31,html_file_suffix = None
0.8.31,Language to be used for generating the HTML full-text search index.
0.8.31,Sphinx supports the following languages:
0.8.31,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.31,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.31,html_search_language = 'en'
0.8.31,"A dictionary with options for the search language support, empty by default."
0.8.31,Now only 'ja' uses this config value
0.8.31,html_search_options = {'type': 'default'}
0.8.31,The name of a javascript file (relative to the configuration directory) that
0.8.31,"implements a search results scorer. If empty, the default will be used."
0.8.31,html_search_scorer = 'scorer.js'
0.8.31,Output file base name for HTML help builder.
0.8.31,-- Options for LaTeX output ---------------------------------------------
0.8.31,The paper size ('letterpaper' or 'a4paper').
0.8.31,"'papersize': 'letterpaper',"
0.8.31,"The font size ('10pt', '11pt' or '12pt')."
0.8.31,"'pointsize': '10pt',"
0.8.31,Additional stuff for the LaTeX preamble.
0.8.31,"'preamble': '',"
0.8.31,Latex figure (float) alignment
0.8.31,"'figure_align': 'htbp',"
0.8.31,Grouping the document tree into LaTeX files. List of tuples
0.8.31,"(source start file, target name, title,"
0.8.31,"author, documentclass [howto, manual, or own class])."
0.8.31,The name of an image file (relative to this directory) to place at the top of
0.8.31,the title page.
0.8.31,latex_logo = None
0.8.31,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.31,not chapters.
0.8.31,latex_use_parts = False
0.8.31,"If true, show page references after internal links."
0.8.31,latex_show_pagerefs = False
0.8.31,"If true, show URL addresses after external links."
0.8.31,latex_show_urls = False
0.8.31,Documents to append as an appendix to all manuals.
0.8.31,latex_appendices = []
0.8.31,"If false, no module index is generated."
0.8.31,latex_domain_indices = True
0.8.31,-- Options for manual page output ---------------------------------------
0.8.31,One entry per manual page. List of tuples
0.8.31,"(source start file, name, description, authors, manual section)."
0.8.31,"If true, show URL addresses after external links."
0.8.31,man_show_urls = False
0.8.31,-- Options for Texinfo output -------------------------------------------
0.8.31,Grouping the document tree into Texinfo files. List of tuples
0.8.31,"(source start file, target name, title, author,"
0.8.31,"dir menu entry, description, category)"
0.8.31,Documents to append as an appendix to all manuals.
0.8.31,texinfo_appendices = []
0.8.31,"If false, no module index is generated."
0.8.31,texinfo_domain_indices = True
0.8.31,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.31,texinfo_show_urls = 'footnote'
0.8.31,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.31,texinfo_no_detailmenu = False
0.8.31,-- Options for Epub output ----------------------------------------------
0.8.31,Bibliographic Dublin Core info.
0.8.31,The basename for the epub file. It defaults to the project name.
0.8.31,epub_basename = project
0.8.31,The HTML theme for the epub output. Since the default themes are not
0.8.31,"optimized for small screen space, using the same theme for HTML and epub"
0.8.31,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.31,visual space.
0.8.31,epub_theme = 'epub'
0.8.31,The language of the text. It defaults to the language option
0.8.31,or 'en' if the language is not set.
0.8.31,epub_language = ''
0.8.31,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.31,epub_scheme = ''
0.8.31,The unique identifier of the text. This can be a ISBN number
0.8.31,or the project homepage.
0.8.31,epub_identifier = ''
0.8.31,A unique identification for the text.
0.8.31,epub_uid = ''
0.8.31,A tuple containing the cover image and cover page html template filenames.
0.8.31,epub_cover = ()
0.8.31,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.31,epub_guide = ()
0.8.31,HTML files that should be inserted before the pages created by sphinx.
0.8.31,The format is a list of tuples containing the path and title.
0.8.31,epub_pre_files = []
0.8.31,HTML files that should be inserted after the pages created by sphinx.
0.8.31,The format is a list of tuples containing the path and title.
0.8.31,epub_post_files = []
0.8.31,A list of files that should not be packed into the epub file.
0.8.31,The depth of the table of contents in toc.ncx.
0.8.31,epub_tocdepth = 3
0.8.31,Allow duplicate toc entries.
0.8.31,epub_tocdup = True
0.8.31,Choose between 'default' and 'includehidden'.
0.8.31,epub_tocscope = 'default'
0.8.31,Fix unsupported image types using the Pillow.
0.8.31,epub_fix_images = False
0.8.31,Scale large images.
0.8.31,epub_max_image_width = 0
0.8.31,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.31,epub_show_urls = 'inline'
0.8.31,"If false, no index is generated."
0.8.31,epub_use_index = True
0.8.30,"Import numpy here, only when headers are needed"
0.8.30,Add numpy headers to include_dirs
0.8.30,Call original build_ext command
0.8.30,The dependencies are the same as the contents of requirements.txt
0.8.30,"A little ""fancy"" we select from the flattened array reshape back"
0.8.30,(Fortran format to get indexing right) and take the product to do an and
0.8.30,then convert back to boolean type.
0.8.30,Density sparseness is not well defined if there are no
0.8.30,internal edges (as per the referenced paper). However
0.8.30,MATLAB code from the original authors simply selects the
0.8.30,largest of *all* the edges in the case that there are
0.8.30,"no internal edges, so we do the same here"
0.8.30,"If there are any internal edges, then subselect them out"
0.8.30,If there are no internal edges then we want to take the
0.8.30,"max over all the edges that exist in the MST, so we simply"
0.8.30,do nothing and return all the edges in the MST.
0.8.30,-*- coding: utf-8 -*-
0.8.30,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.30,Steve Astels <sastels@gmail.com>
0.8.30,John Healy <jchealy@gmail.com>
0.8.30,
0.8.30,License: BSD 3 clause
0.8.30,"Treating this case explicitly, instead of letting"
0.8.30,"sklearn.metrics.pairwise_distances handle it,"
0.8.30,enables the usage of numpy.inf in the distance
0.8.30,matrix to indicate missing distance information.
0.8.30,TODO: Check if copying is necessary
0.8.30,raise TypeError('Sparse distance matrices not yet supported')
0.8.30,Warn if the MST couldn't be constructed around the missing distances
0.8.30,mst_linkage_core does not generate a full minimal spanning tree
0.8.30,If a tree is required then we must build the edges from the information
0.8.30,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.30,Sort edges of the min_spanning_tree by weight
0.8.30,Convert edge list into standard hierarchical clustering format
0.8.30,Check for connected component on X
0.8.30,Compute sparse mutual reachability graph
0.8.30,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.30,Check connected component on mutual reachability
0.8.30,"If more than one component, it means that even if the distance matrix X"
0.8.30,"has one component, there exists with less than `min_samples` neighbors"
0.8.30,Compute the minimum spanning tree for the sparse graph
0.8.30,Convert the graph to scipy cluster array format
0.8.30,Sort edges of the min_spanning_tree by weight
0.8.30,Convert edge list into standard hierarchical clustering format
0.8.30,The Cython routines used require contiguous arrays
0.8.30,TO DO: Deal with p for minkowski appropriately
0.8.30,Get distance to kth nearest neighbour
0.8.30,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.30,Sort edges of the min_spanning_tree by weight
0.8.30,Convert edge list into standard hierarchical clustering format
0.8.30,The Cython routines used require contiguous arrays
0.8.30,Get distance to kth nearest neighbour
0.8.30,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.30,Sort edges of the min_spanning_tree by weight
0.8.30,Convert edge list into standard hierarchical clustering format
0.8.30,Sort edges of the min_spanning_tree by weight
0.8.30,Convert edge list into standard hierarchical clustering format
0.8.30,Sort edges of the min_spanning_tree by weight
0.8.30,Convert edge list into standard hierarchical clustering format
0.8.30,Checks input and converts to an nd-array where possible
0.8.30,"Only non-sparse, precomputed distance matrices are handled here"
0.8.30,and thereby allowed to contain numpy.inf for missing distances
0.8.30,Python 2 and 3 compliant string_type checking
0.8.30,We can't do much with sparse matrices ...
0.8.30,TO DO: Need heuristic to decide when to go to boruvka;
0.8.30,still debugging for now
0.8.30,TO DO: Need heuristic to decide when to go to boruvka;
0.8.30,still debugging for now
0.8.30,Inherits from sklearn
0.8.30,Non-precomputed matrices may contain non-finite values.
0.8.30,Rows with these values
0.8.30,Pass only the purely finite indices into hdbscan
0.8.30,We will later assign all non-finite points to the background -1 cluster
0.8.30,Handle sparse precomputed distance matrices separately
0.8.30,"Only non-sparse, precomputed distance matrices are allowed"
0.8.30,to have numpy.inf values indicating missing distances
0.8.30,"prediction data only applies to the persistent model, so remove"
0.8.30,it from the keyword args we pass on the the function
0.8.30,remap indices to align with original data in the case of non-finite entries.
0.8.30,"Unltimately, for each Ci, we only require the"
0.8.30,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.30,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.30,density separation 'with respect to' Ci.
0.8.30,If exactly one of the points is noise
0.8.30,Set the density sparseness of the cluster
0.8.30,to the sparsest value seen so far.
0.8.30,Check whether density separations with
0.8.30,respect to each of these clusters can
0.8.30,be reduced.
0.8.30,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.30,This only makes sense if num_clusters = 1 since it has turned out
0.8.30,that the MR-MST has no edges between a noise point and a core point.
0.8.30,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.30,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.30,MR-MST might contain an edge with one point in Cj and ther other one
0.8.30,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.30,another large enough value.
0.8.30,
0.8.30,TODO: Think of a better yet efficient way to handle this.
0.8.30,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
0.8.30,Use a previously initialized/trained HDBSCAN
0.8.30,Handle the trivial case first.
0.8.30,Always generate prediction_data to avoid later woes
0.8.30,This will later be chosen according to n_clusters
0.8.30,Initialize and train clusterer if one was not previously supplied.
0.8.30,Always generate prediction data
0.8.30,We do not pass cluster_selection_epsilon here.
0.8.30,"While this adds unnecessary computation, it makes the code"
0.8.30,easier to read and debug.
0.8.30,"Train on 'X'. Do this even if the supplied clusterer was trained,"
0.8.30,because we want to make sure it fits 'X'.
0.8.30,"Pick an epsilon value right after a split produces n_clusters,"
0.8.30,and the don't split further for smaller epsilon (larger lambda)
0.8.30,Or use the specified cluster_selection_epsilon
0.8.30,"Extract tree related stuff, in order to re-assign labels"
0.8.30,Get labels according to the required cluster_selection_epsilon
0.8.30,Reflect the related changes in HDBSCAN.
0.8.30,PredictionData attached to HDBSCAN should also change.
0.8.30,A function re_init is defined in this module to handle this.
0.8.30,"From a fitted HDBSCAN model, predict for n_clusters=5"
0.8.30,Store prediciton data for later use.
0.8.30,and use this prediction data to predict on new points
0.8.30,Get number of fitted clusters for later use.
0.8.30,We'll need the condensed tree later...
0.8.30,"If none of the three arguments: prediction_data, n_clusters,"
0.8.30,"and cluster_selection_epsilon are supplied,"
0.8.30,then use clusterer's prediciton data directly
0.8.30,"If either of n_clusters or cluster_selection_epsilon were supplied,"
0.8.30,then build prediction data from these by modifying clusterer's
0.8.30,Get prediction data from clusterer
0.8.30,Modify prediction_data to reflect new n_clusters
0.8.30,"First, make a copy of prediction data to avoid modifying source"
0.8.30,Cluster selection method is hold by condensed_tree.
0.8.30,Change from 'eom' to 'leaf' if n_clusters is too large.
0.8.30,This change does not affect the tree associated with 'clusterer'
0.8.30,Re-initialize prediction_data for the specified n_clusters or epsilon
0.8.30,============================================================
0.8.30,Now we're ready to use prediction_data
0.8.30,"The rest of the code is copied from HDBSCAN's approximate_predict,"
0.8.30,but modified to use prediction_data instead of clusterer's attribute
0.8.30,Extract condensed tree for later use
0.8.30,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.30,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.30,Use the same prediction_data as clusterer's
0.8.30,Compute cluster_selection_epsilon so that a flat clustering
0.8.30,produces a specified number of n_clusters
0.8.30,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.30,Create another instance of prediction_data that is consistent
0.8.30,with the selected value of epsilon.
0.8.30,Flat clustering from prediction data
0.8.30,Initialize probabilities
0.8.30,k-NN for prediciton points to training set
0.8.30,Loop over prediction points to compute probabilities
0.8.30,We need to find where in the tree the new point would go
0.8.30,for the purposes of outlier membership approximation
0.8.30,"Find row in tree where nearest neighbor drops out,"
0.8.30,so we can get a lambda value for the nearest neighbor
0.8.30,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
0.8.30,"Equivalently, this assigns core distance for prediction point as"
0.8.30,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
0.8.30,Probabilities based on distance to closest exemplar in each cluster:
0.8.30,Use new prediction_data that points to exemplars that are specific
0.8.30,to the choice of n_clusters
0.8.30,Probabilities based on how long the nearest exemplar persists in
0.8.30,each cluster (with respect to most persistent exemplar)
0.8.30,Use new clusters that are defined by the choice of n_clusters.
0.8.30,Merge the two probabilities to produce a single set of probabilities
0.8.30,Include probability that the nearest neighbor belongs to a cluster
0.8.30,Rename variable so it's easy to understand what's being returned
0.8.30,Extract condensed tree for later use
0.8.30,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.30,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.30,Use the same prediction_data as clusterer's
0.8.30,Compute cluster_selection_epsilon so that a flat clustering
0.8.30,produces a specified number of n_clusters
0.8.30,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.30,Create another instance of prediction_data that is consistent
0.8.30,with the selected value of epsilon.
0.8.30,Flat clustering at the chosen epsilon from prediction_data
0.8.30,"When no clusters found, return array of 0's"
0.8.30,Probabilities based on distance to closest exemplar in each cluster:
0.8.30,Use new prediction_data that points to exemplars that are specific
0.8.30,to the choice of n_clusters
0.8.30,Probabilities based on how long the point persists in
0.8.30,each cluster (with respect to most persistent exemplar)
0.8.30,Use new clusters that are defined by the choice of n_clusters.
0.8.30,Include probability that the point belongs to a cluster
0.8.30,Aggregate the three probabilities to produce membership vectors
0.8.30,Re-name variable to clarify what's being returned.
0.8.30,"With method 'eom', max clusters are produced for epsilon=0,"
0.8.30,as computed by
0.8.30,Increasing epsilon can only reduce the number of ouput clusters.
0.8.30,"To select epsilon, consider all values where clusters are split"
0.8.30,Subtract the extra e-12 to avoid numerical errors in comparison
0.8.30,"Then, we avoid splitting for all epsilon below this."
0.8.30,Use an epsilon value that produces the right number of clusters.
0.8.30,The condensed tree of HDBSCAN has this information.
0.8.30,Extract the lambda levels (=1/distance) from the condensed tree
0.8.30,We don't want values that produce a large cluster and
0.8.30,just one or two individual points.
0.8.30,Keep only those lambda values corresponding to cluster separation;
0.8.30,"i.e., with child_sizes > 1"
0.8.30,"Get the unique values, because when two clusters fall out of one,"
0.8.30,the entry with lambda is repeated.
0.8.30,lambda values are sorted by np.unique.
0.8.30,"Now, get epsilon (distance threshold) as 1/lambda"
0.8.30,"At this epsilon, n_clusters have been split."
0.8.30,Stop splits at epsilons smaller than this.
0.8.30,"To allow for numerical errors,"
0.8.30,predData must be a pre-trained PredictionData instance from hdbscan
0.8.30,"If n_clusters is specified, compute cluster_selection_epsilon;"
0.8.30,This is the key modification:
0.8.30,Select clusters according to selection method and epsilon.
0.8.30,_new_select_clusters is a modification of get_clusters
0.8.30,from hdbscan._hdbscan_tree
0.8.30,"raw tree, used later to get exemplars and lambda values"
0.8.30,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
0.8.30,to the cluster labels produced as output
0.8.30,Re-compute lambdas and exemplars for selected clusters;
0.8.30,max_lambda <=> smallest distance <=> most persistent point(s)
0.8.30,Map all sub-clusters of selected cluster to the selected cluster's
0.8.30,label in output.
0.8.30,Map lambdas too...
0.8.30,Create set of exemplar points for later use.
0.8.30,Novel points are assigned based on cluster of closest exemplar.
0.8.30,"For each selected cluster, get all of its leaves,"
0.8.30,"and leaves of leaves, and so on..."
0.8.30,Largest lambda => Most persistent points
0.8.30,Get the most persistent points
0.8.30,Add most persistent points as exemplars
0.8.30,Add exemplars for each leaf of each selected cluster.
0.8.30,(exclude root)
0.8.30,-*- coding: utf-8 -*-
0.8.30,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.30,
0.8.30,License: BSD 3 clause
0.8.30,"Return the only cluster, the root"
0.8.30,We want to get the x and y coordinates for the start of each cluster
0.8.30,"Initialize the leaves, since we know where they go, the iterate"
0.8.30,"through everything from the leaves back, setting coords as we go"
0.8.30,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.30,bottoms and widths for each rectangle. We can go through each cluster
0.8.30,and do this for each in turn.
0.8.30,Ensure we don't try to take log of zero
0.8.30,Finally we need the horizontal lines that occur at cluster splits.
0.8.30,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.30,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.30,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.30,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.30,the chosen clusters.
0.8.30,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.30,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.30,based on the percentile should alleviate the impact on plotting.
0.8.30,Set center and height to default values if necessary
0.8.30,Ensure the ellipse is visible
0.8.30,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.30,Use PCA to get down to 32 dimension
0.8.30,-*- coding: utf-8 -*-
0.8.30,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.30,
0.8.30,License: BSD 3 clause
0.8.30,The Cython routines used require contiguous arrays
0.8.30,The Cython routines used require contiguous arrays
0.8.30,We can't do much with sparse matrices ...
0.8.30,Need heuristic to decide when to go to boruvka;
0.8.30,still debugging for now
0.8.30,Need heuristic to decide when to go to boruvka;
0.8.30,still debugging for now
0.8.30,Support various prediction methods for predicting cluster membership
0.8.30,of new or unseen points. There are several ways to interpret how
0.8.30,"to do this correctly, so we provide several methods for"
0.8.30,the different use cases that may arise.
0.8.30,raw_condensed_tree = condensed_tree.to_numpy()
0.8.30,New point departs with the old
0.8.30,Find appropriate cluster based on lambda of new point
0.8.30,Find appropriate cluster based on lambda of new point
0.8.30,"the point is in the dataset, fix lambda for rounding errors"
0.8.30,We need to find where in the tree the new point would go
0.8.30,for the purposes of outlier membership approximation
0.8.30,"When no clusters found, return array of 0's"
0.8.30,import pickle
0.8.30,from sklearn.cluster.tests.common import generate_clustered_data
0.8.30,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.30,"number of clusters, ignoring noise if present"
0.8.30,"metric is the function reference, not the string key."
0.8.30,def test_rsl_unavailable_hierarchy():
0.8.30,clusterer = RobustSingleLinkage()
0.8.30,with warnings.catch_warnings(record=True) as w:
0.8.30,tree = clusterer.cluster_hierarchy_
0.8.30,assert len(w) > 0
0.8.30,assert tree is None
0.8.30,"H, y = shuffle(X, y, random_state=7)"
0.8.30,Disable for now -- need to refactor to meet newer standards
0.8.30,from sklearn.cluster.tests.common import generate_clustered_data
0.8.30,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.30,this fails if no $DISPLAY specified
0.8.30,"number of clusters, ignoring noise if present"
0.8.30,"number of clusters, ignoring noise if present"
0.8.30,"H, y = shuffle(X, y, random_state=7)"
0.8.30,"metric is the function reference, not the string key."
0.8.30,def test_hdbscan_unavailable_attributes():
0.8.30,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.30,with warnings.catch_warnings(record=True) as w:
0.8.30,tree = clusterer.condensed_tree_
0.8.30,assert len(w) > 0
0.8.30,assert tree is None
0.8.30,with warnings.catch_warnings(record=True) as w:
0.8.30,tree = clusterer.single_linkage_tree_
0.8.30,assert len(w) > 0
0.8.30,assert tree is None
0.8.30,with warnings.catch_warnings(record=True) as w:
0.8.30,scores = clusterer.outlier_scores_
0.8.30,assert len(w) > 0
0.8.30,assert scores is None
0.8.30,with warnings.catch_warnings(record=True) as w:
0.8.30,tree = clusterer.minimum_spanning_tree_
0.8.30,assert len(w) > 0
0.8.30,assert tree is None
0.8.30,def test_hdbscan_min_span_tree_availability():
0.8.30,clusterer = HDBSCAN().fit(X)
0.8.30,tree = clusterer.minimum_spanning_tree_
0.8.30,assert tree is None
0.8.30,D = distance.squareform(distance.pdist(X))
0.8.30,D /= np.max(D)
0.8.30,HDBSCAN(metric='precomputed').fit(D)
0.8.30,tree = clusterer.minimum_spanning_tree_
0.8.30,assert tree is None
0.8.30,no prediction data error
0.8.30,wrong dimensions error
0.8.30,no clusters warning
0.8.30,def test_hdbscan_membership_vector():
0.8.30,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.30,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.30,assert_array_almost_equal(
0.8.30,"vector,"
0.8.30,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.30,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.30,assert_array_almost_equal(
0.8.30,"vector,"
0.8.30,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.30,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.30,assert_array_almost_equal(
0.8.30,"vector,"
0.8.30,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.30,
0.8.30,def test_hdbscan_all_points_membership_vectors():
0.8.30,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.30,vects = all_points_membership_vectors(clusterer)
0.8.30,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.30,"2.52734246e-001,"
0.8.30,8.38299608e-002]))
0.8.30,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.30,"8.35882503e-002,"
0.8.30,1.07356406e-001]))
0.8.30,without epsilon we should see many noise points as children of root.
0.8.30,for this random seed an epsilon of 0.2 will produce exactly 2 noise
0.8.30,points at that cut in single linkage.
0.8.30,Disable for now -- need to refactor to meet newer standards
0.8.30,Probably not applicable now #
0.8.30,def test_dbscan_sparse():
0.8.30,def test_dbscan_balltree():
0.8.30,def test_pickle():
0.8.30,def test_dbscan_core_samples_toy():
0.8.30,def test_boundaries():
0.8.30,"Given negative, zero and positive denominator and positive numerator"
0.8.30,Make sure safe division is always positive and doesn't raise ZeroDivision error
0.8.30,Ignore future warnings thrown by sklearn
0.8.30,Create a nice dataset with 6 circular clusters and 2 moons
0.8.30,"Given, the base HDBSCAN with method 'eom'"
0.8.30,"When we ask for flat clustering with same n_clusters,"
0.8.30,"Then, the labels and probabilities should match"
0.8.30,"Given, the base HDBSCAN with method 'leaf'"
0.8.30,"When we ask for flat clustering with same n_clusters,"
0.8.30,"Then, the labels and probabilities should match"
0.8.30,Method 'eom'...
0.8.30,"Given, a flat clustering for required n_clusters,"
0.8.30,"When we run the base HDBSCAN using it's epsilon,"
0.8.30,"Then, the labels and probabilities should match"
0.8.30,Method 'leaf'...
0.8.30,"Given, a flat clustering for required n_clusters,"
0.8.30,"When we run the base HDBSCAN using it's epsilon,"
0.8.30,"Then, the labels and probabilities should match"
0.8.30,"Given the max number of clusters that can be produced by 'eom',"
0.8.30,(these are produced for epsilon=0) (??? Needs verification)
0.8.30,"When we try flat clustering with 'eom' method for more n_clusters,"
0.8.30,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.30,"assert ""Cannot predict"" in str(w[-1].message)"
0.8.30,"the resulting clusterer switches to using method 'leaf',"
0.8.30,and the resulting probabilities and labels must match
0.8.30,"Given the base HDBSCAN trained on some data,"
0.8.30,"When using approximate_predict_flat without specifying n_clusters,"
0.8.30,"Then, the clustering should match that due to approximate_predict,"
0.8.30,"Given a flat clustering trained for some n_clusters,"
0.8.30,"When using approximate_predict_flat without specifying n_clusters,"
0.8.30,"Then, the number of clusters produced must match the original n_clusters"
0.8.30,and all probabilities are <= 1.
0.8.30,"Given a flat clustering trained for some n_clusters,"
0.8.30,"When using approximate_predict_flat with specified n_clusters,"
0.8.30,"Then, the requested number of clusters must be produced"
0.8.30,and all probabilities are <= 1.
0.8.30,When using approximate_predict_flat with more clusters
0.8.30,"than 'eom' can handle,"
0.8.30,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.30,But the requested number of clusters must still be produced using 'leaf'
0.8.30,and all probabilities are <= 1.
0.8.30,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.30,"When membership_vector_flat is called with new data,"
0.8.30,"Then the number of clusters in memberships matches those of clusterer,"
0.8.30,and the number of points should equal those in the test set
0.8.30,and all probabilities are <= 1.
0.8.30,========================================
0.8.30,"Given a flat clustering for a specified n_clusters,"
0.8.30,"When membership_vector_flat is called with new data,"
0.8.30,"Then the number of clusters in memberships matches those of clusterer,"
0.8.30,and the number of points should equal those in the test set
0.8.30,and all probabilities are <= 1.
0.8.30,Ignore user warnings in this function
0.8.30,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.30,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.30,"Then the number of clusters in memberships should be as requested,"
0.8.30,and the number of points should equal those in the test set
0.8.30,and all probabilities are <= 1.
0.8.30,========================================
0.8.30,"Given a flat clustering for a specified n_clusters,"
0.8.30,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.30,"Then the number of clusters in memberships should be as requested,"
0.8.30,and the number of points should equal those in the test set
0.8.30,and all probabilities are <= 1.
0.8.30,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.30,"When all_points_membership_vectors_flat is called,"
0.8.30,"Then the number of clusters in memberships matches those of clusterer,"
0.8.30,and the number of points should equal those in the training set
0.8.30,and all probabilities are <= 1.
0.8.30,========================================
0.8.30,"Given a flat clustering for a specified n_clusters,"
0.8.30,"When all_points_membership_vectors_flat is called,"
0.8.30,"Then the number of clusters in memberships matches those of clusterer,"
0.8.30,and the number of points should equal those in the training set
0.8.30,and all probabilities are <= 1.
0.8.30,Ignore user warnings in this function
0.8.30,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.30,"When all_points_membership_vectors_flat is called for some n_clusters,"
0.8.30,"Then the number of clusters in memberships should be as requested,"
0.8.30,and the number of points should equal those in the training set
0.8.30,and all probabilities are <= 1.
0.8.30,========================================
0.8.30,"Given a flat clustering for a specified n_clusters,"
0.8.30,"When membership_vector_flat is called for some n_clusters,"
0.8.30,"Then the number of clusters in memberships should be as requested,"
0.8.30,and the number of points should equal those in the training set
0.8.30,and all probabilities are <= 1.
0.8.30,Generate datasets. We choose the size big enough to see the scalability
0.8.30,"of the algorithms, but not too big to avoid too long running times"
0.8.30,normalize dataset for easier parameter selection
0.8.30,estimate bandwidth for mean shift
0.8.30,connectivity matrix for structured Ward
0.8.30,make connectivity symmetric
0.8.30,create clustering estimators
0.8.30,predict cluster memberships
0.8.30,plot
0.8.30,-*- coding: utf-8 -*-
0.8.30,#############################################################################
0.8.30,Generate sample data
0.8.30,#############################################################################
0.8.30,Compute DBSCAN
0.8.30,"Number of clusters in labels, ignoring noise if present."
0.8.30,#############################################################################
0.8.30,Plot result
0.8.30,Black removed and is used for noise instead.
0.8.30,Black used for noise.
0.8.30,Black used for noise.
0.8.30,-*- coding: utf-8 -*-
0.8.30,
0.8.30,"hdbscan documentation build configuration file, created by"
0.8.30,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.30,
0.8.30,This file is execfile()d with the current directory set to its
0.8.30,containing dir.
0.8.30,
0.8.30,Note that not all possible configuration values are present in this
0.8.30,autogenerated file.
0.8.30,
0.8.30,All configuration values have a default; values that are commented out
0.8.30,serve to show the default.
0.8.30,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.30,add these directories to sys.path here. If the directory is relative to the
0.8.30,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.30,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.30,"sys.path.insert(0, os.path.abspath('../'))"
0.8.30,-- General configuration ------------------------------------------------
0.8.30,"If your documentation needs a minimal Sphinx version, state it here."
0.8.30,needs_sphinx = '1.0'
0.8.30,"Add any Sphinx extension module names here, as strings. They can be"
0.8.30,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.30,ones.
0.8.30,"'sphinx.ext.napoleon',"
0.8.30,'numpy_ext.numpydoc'
0.8.30,napoleon_google_docstring = False
0.8.30,napoleon_numpy_docstring = True
0.8.30,"Add any paths that contain templates here, relative to this directory."
0.8.30,The suffix(es) of source filenames.
0.8.30,You can specify multiple suffix as a list of string:
0.8.30,"source_suffix = ['.rst', '.md']"
0.8.30,The encoding of source files.
0.8.30,source_encoding = 'utf-8-sig'
0.8.30,The master toctree document.
0.8.30,General information about the project.
0.8.30,"The version info for the project you're documenting, acts as replacement for"
0.8.30,"|version| and |release|, also used in various other places throughout the"
0.8.30,built documents.
0.8.30,
0.8.30,The short X.Y version.
0.8.30,"The full version, including alpha/beta/rc tags."
0.8.30,The language for content autogenerated by Sphinx. Refer to documentation
0.8.30,for a list of supported languages.
0.8.30,
0.8.30,This is also used if you do content translation via gettext catalogs.
0.8.30,"Usually you set ""language"" from the command line for these cases."
0.8.30,"There are two options for replacing |today|: either, you set today to some"
0.8.30,"non-false value, then it is used:"
0.8.30,today = ''
0.8.30,"Else, today_fmt is used as the format for a strftime call."
0.8.30,"today_fmt = '%B %d, %Y'"
0.8.30,"List of patterns, relative to source directory, that match files and"
0.8.30,directories to ignore when looking for source files.
0.8.30,The reST default role (used for this markup: `text`) to use for all
0.8.30,documents.
0.8.30,default_role = None
0.8.30,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.30,add_function_parentheses = True
0.8.30,"If true, the current module name will be prepended to all description"
0.8.30,unit titles (such as .. function::).
0.8.30,add_module_names = True
0.8.30,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.30,output. They are ignored by default.
0.8.30,show_authors = False
0.8.30,The name of the Pygments (syntax highlighting) style to use.
0.8.30,A list of ignored prefixes for module index sorting.
0.8.30,modindex_common_prefix = []
0.8.30,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.30,keep_warnings = False
0.8.30,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.30,-- Options for HTML output ----------------------------------------------
0.8.30,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.30,a list of builtin themes.
0.8.30,html_theme = 'alabaster'
0.8.30,Theme options are theme-specific and customize the look and feel of a theme
0.8.30,"further.  For a list of options available for each theme, see the"
0.8.30,documentation.
0.8.30,html_theme_options = {}
0.8.30,"Add any paths that contain custom themes here, relative to this directory."
0.8.30,html_theme_path = []
0.8.30,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.30,"""<project> v<release> documentation""."
0.8.30,html_title = None
0.8.30,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.30,html_short_title = None
0.8.30,The name of an image file (relative to this directory) to place at the top
0.8.30,of the sidebar.
0.8.30,html_logo = None
0.8.30,The name of an image file (within the static path) to use as favicon of the
0.8.30,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.30,pixels large.
0.8.30,html_favicon = None
0.8.30,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.30,"relative to this directory. They are copied after the builtin static files,"
0.8.30,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.30,Add any extra paths that contain custom files (such as robots.txt or
0.8.30,".htaccess) here, relative to this directory. These files are copied"
0.8.30,directly to the root of the documentation.
0.8.30,html_extra_path = []
0.8.30,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.30,using the given strftime format.
0.8.30,"html_last_updated_fmt = '%b %d, %Y'"
0.8.30,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.30,typographically correct entities.
0.8.30,html_use_smartypants = True
0.8.30,"Custom sidebar templates, maps document names to template names."
0.8.30,html_sidebars = {}
0.8.30,"Additional templates that should be rendered to pages, maps page names to"
0.8.30,template names.
0.8.30,html_additional_pages = {}
0.8.30,"If false, no module index is generated."
0.8.30,html_domain_indices = True
0.8.30,"If false, no index is generated."
0.8.30,html_use_index = True
0.8.30,"If true, the index is split into individual pages for each letter."
0.8.30,html_split_index = False
0.8.30,"If true, links to the reST sources are added to the pages."
0.8.30,html_show_sourcelink = True
0.8.30,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.30,html_show_sphinx = True
0.8.30,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.30,html_show_copyright = True
0.8.30,"If true, an OpenSearch description file will be output, and all pages will"
0.8.30,contain a <link> tag referring to it.  The value of this option must be the
0.8.30,base URL from which the finished HTML is served.
0.8.30,html_use_opensearch = ''
0.8.30,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.30,html_file_suffix = None
0.8.30,Language to be used for generating the HTML full-text search index.
0.8.30,Sphinx supports the following languages:
0.8.30,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.30,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.30,html_search_language = 'en'
0.8.30,"A dictionary with options for the search language support, empty by default."
0.8.30,Now only 'ja' uses this config value
0.8.30,html_search_options = {'type': 'default'}
0.8.30,The name of a javascript file (relative to the configuration directory) that
0.8.30,"implements a search results scorer. If empty, the default will be used."
0.8.30,html_search_scorer = 'scorer.js'
0.8.30,Output file base name for HTML help builder.
0.8.30,-- Options for LaTeX output ---------------------------------------------
0.8.30,The paper size ('letterpaper' or 'a4paper').
0.8.30,"'papersize': 'letterpaper',"
0.8.30,"The font size ('10pt', '11pt' or '12pt')."
0.8.30,"'pointsize': '10pt',"
0.8.30,Additional stuff for the LaTeX preamble.
0.8.30,"'preamble': '',"
0.8.30,Latex figure (float) alignment
0.8.30,"'figure_align': 'htbp',"
0.8.30,Grouping the document tree into LaTeX files. List of tuples
0.8.30,"(source start file, target name, title,"
0.8.30,"author, documentclass [howto, manual, or own class])."
0.8.30,The name of an image file (relative to this directory) to place at the top of
0.8.30,the title page.
0.8.30,latex_logo = None
0.8.30,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.30,not chapters.
0.8.30,latex_use_parts = False
0.8.30,"If true, show page references after internal links."
0.8.30,latex_show_pagerefs = False
0.8.30,"If true, show URL addresses after external links."
0.8.30,latex_show_urls = False
0.8.30,Documents to append as an appendix to all manuals.
0.8.30,latex_appendices = []
0.8.30,"If false, no module index is generated."
0.8.30,latex_domain_indices = True
0.8.30,-- Options for manual page output ---------------------------------------
0.8.30,One entry per manual page. List of tuples
0.8.30,"(source start file, name, description, authors, manual section)."
0.8.30,"If true, show URL addresses after external links."
0.8.30,man_show_urls = False
0.8.30,-- Options for Texinfo output -------------------------------------------
0.8.30,Grouping the document tree into Texinfo files. List of tuples
0.8.30,"(source start file, target name, title, author,"
0.8.30,"dir menu entry, description, category)"
0.8.30,Documents to append as an appendix to all manuals.
0.8.30,texinfo_appendices = []
0.8.30,"If false, no module index is generated."
0.8.30,texinfo_domain_indices = True
0.8.30,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.30,texinfo_show_urls = 'footnote'
0.8.30,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.30,texinfo_no_detailmenu = False
0.8.30,-- Options for Epub output ----------------------------------------------
0.8.30,Bibliographic Dublin Core info.
0.8.30,The basename for the epub file. It defaults to the project name.
0.8.30,epub_basename = project
0.8.30,The HTML theme for the epub output. Since the default themes are not
0.8.30,"optimized for small screen space, using the same theme for HTML and epub"
0.8.30,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.30,visual space.
0.8.30,epub_theme = 'epub'
0.8.30,The language of the text. It defaults to the language option
0.8.30,or 'en' if the language is not set.
0.8.30,epub_language = ''
0.8.30,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.30,epub_scheme = ''
0.8.30,The unique identifier of the text. This can be a ISBN number
0.8.30,or the project homepage.
0.8.30,epub_identifier = ''
0.8.30,A unique identification for the text.
0.8.30,epub_uid = ''
0.8.30,A tuple containing the cover image and cover page html template filenames.
0.8.30,epub_cover = ()
0.8.30,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.30,epub_guide = ()
0.8.30,HTML files that should be inserted before the pages created by sphinx.
0.8.30,The format is a list of tuples containing the path and title.
0.8.30,epub_pre_files = []
0.8.30,HTML files that should be inserted after the pages created by sphinx.
0.8.30,The format is a list of tuples containing the path and title.
0.8.30,epub_post_files = []
0.8.30,A list of files that should not be packed into the epub file.
0.8.30,The depth of the table of contents in toc.ncx.
0.8.30,epub_tocdepth = 3
0.8.30,Allow duplicate toc entries.
0.8.30,epub_tocdup = True
0.8.30,Choose between 'default' and 'includehidden'.
0.8.30,epub_tocscope = 'default'
0.8.30,Fix unsupported image types using the Pillow.
0.8.30,epub_fix_images = False
0.8.30,Scale large images.
0.8.30,epub_max_image_width = 0
0.8.30,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.30,epub_show_urls = 'inline'
0.8.30,"If false, no index is generated."
0.8.30,epub_use_index = True
0.8.29-1,"Import numpy here, only when headers are needed"
0.8.29-1,Add numpy headers to include_dirs
0.8.29-1,Call original build_ext command
0.8.29-1,The dependencies are the same as the contents of requirements.txt
0.8.29-1,"A little ""fancy"" we select from the flattened array reshape back"
0.8.29-1,(Fortran format to get indexing right) and take the product to do an and
0.8.29-1,then convert back to boolean type.
0.8.29-1,Density sparseness is not well defined if there are no
0.8.29-1,internal edges (as per the referenced paper). However
0.8.29-1,MATLAB code from the original authors simply selects the
0.8.29-1,largest of *all* the edges in the case that there are
0.8.29-1,"no internal edges, so we do the same here"
0.8.29-1,"If there are any internal edges, then subselect them out"
0.8.29-1,If there are no internal edges then we want to take the
0.8.29-1,"max over all the edges that exist in the MST, so we simply"
0.8.29-1,do nothing and return all the edges in the MST.
0.8.29-1,-*- coding: utf-8 -*-
0.8.29-1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.29-1,Steve Astels <sastels@gmail.com>
0.8.29-1,John Healy <jchealy@gmail.com>
0.8.29-1,
0.8.29-1,License: BSD 3 clause
0.8.29-1,"Treating this case explicitly, instead of letting"
0.8.29-1,"sklearn.metrics.pairwise_distances handle it,"
0.8.29-1,enables the usage of numpy.inf in the distance
0.8.29-1,matrix to indicate missing distance information.
0.8.29-1,TODO: Check if copying is necessary
0.8.29-1,raise TypeError('Sparse distance matrices not yet supported')
0.8.29-1,Warn if the MST couldn't be constructed around the missing distances
0.8.29-1,mst_linkage_core does not generate a full minimal spanning tree
0.8.29-1,If a tree is required then we must build the edges from the information
0.8.29-1,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.29-1,Sort edges of the min_spanning_tree by weight
0.8.29-1,Convert edge list into standard hierarchical clustering format
0.8.29-1,Check for connected component on X
0.8.29-1,Compute sparse mutual reachability graph
0.8.29-1,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.29-1,Check connected component on mutual reachability
0.8.29-1,"If more than one component, it means that even if the distance matrix X"
0.8.29-1,"has one component, there exists with less than `min_samples` neighbors"
0.8.29-1,Compute the minimum spanning tree for the sparse graph
0.8.29-1,Convert the graph to scipy cluster array format
0.8.29-1,Sort edges of the min_spanning_tree by weight
0.8.29-1,Convert edge list into standard hierarchical clustering format
0.8.29-1,The Cython routines used require contiguous arrays
0.8.29-1,TO DO: Deal with p for minkowski appropriately
0.8.29-1,Get distance to kth nearest neighbour
0.8.29-1,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.29-1,Sort edges of the min_spanning_tree by weight
0.8.29-1,Convert edge list into standard hierarchical clustering format
0.8.29-1,The Cython routines used require contiguous arrays
0.8.29-1,Get distance to kth nearest neighbour
0.8.29-1,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.29-1,Sort edges of the min_spanning_tree by weight
0.8.29-1,Convert edge list into standard hierarchical clustering format
0.8.29-1,Sort edges of the min_spanning_tree by weight
0.8.29-1,Convert edge list into standard hierarchical clustering format
0.8.29-1,Sort edges of the min_spanning_tree by weight
0.8.29-1,Convert edge list into standard hierarchical clustering format
0.8.29-1,Checks input and converts to an nd-array where possible
0.8.29-1,"Only non-sparse, precomputed distance matrices are handled here"
0.8.29-1,and thereby allowed to contain numpy.inf for missing distances
0.8.29-1,Python 2 and 3 compliant string_type checking
0.8.29-1,We can't do much with sparse matrices ...
0.8.29-1,TO DO: Need heuristic to decide when to go to boruvka;
0.8.29-1,still debugging for now
0.8.29-1,TO DO: Need heuristic to decide when to go to boruvka;
0.8.29-1,still debugging for now
0.8.29-1,Inherits from sklearn
0.8.29-1,Non-precomputed matrices may contain non-finite values.
0.8.29-1,Rows with these values
0.8.29-1,Pass only the purely finite indices into hdbscan
0.8.29-1,We will later assign all non-finite points to the background -1 cluster
0.8.29-1,Handle sparse precomputed distance matrices separately
0.8.29-1,"Only non-sparse, precomputed distance matrices are allowed"
0.8.29-1,to have numpy.inf values indicating missing distances
0.8.29-1,"prediction data only applies to the persistent model, so remove"
0.8.29-1,it from the keyword args we pass on the the function
0.8.29-1,remap indices to align with original data in the case of non-finite entries.
0.8.29-1,"Unltimately, for each Ci, we only require the"
0.8.29-1,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.29-1,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.29-1,density separation 'with respect to' Ci.
0.8.29-1,If exactly one of the points is noise
0.8.29-1,Set the density sparseness of the cluster
0.8.29-1,to the sparsest value seen so far.
0.8.29-1,Check whether density separations with
0.8.29-1,respect to each of these clusters can
0.8.29-1,be reduced.
0.8.29-1,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.29-1,This only makes sense if num_clusters = 1 since it has turned out
0.8.29-1,that the MR-MST has no edges between a noise point and a core point.
0.8.29-1,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.29-1,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.29-1,MR-MST might contain an edge with one point in Cj and ther other one
0.8.29-1,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.29-1,another large enough value.
0.8.29-1,
0.8.29-1,TODO: Think of a better yet efficient way to handle this.
0.8.29-1,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
0.8.29-1,Use a previously initialized/trained HDBSCAN
0.8.29-1,Handle the trivial case first.
0.8.29-1,Always generate prediction_data to avoid later woes
0.8.29-1,This will later be chosen according to n_clusters
0.8.29-1,Initialize and train clusterer if one was not previously supplied.
0.8.29-1,Always generate prediction data
0.8.29-1,We do not pass cluster_selection_epsilon here.
0.8.29-1,"While this adds unnecessary computation, it makes the code"
0.8.29-1,easier to read and debug.
0.8.29-1,"Train on 'X'. Do this even if the supplied clusterer was trained,"
0.8.29-1,because we want to make sure it fits 'X'.
0.8.29-1,"Pick an epsilon value right after a split produces n_clusters,"
0.8.29-1,and the don't split further for smaller epsilon (larger lambda)
0.8.29-1,Or use the specified cluster_selection_epsilon
0.8.29-1,"Extract tree related stuff, in order to re-assign labels"
0.8.29-1,Get labels according to the required cluster_selection_epsilon
0.8.29-1,Reflect the related changes in HDBSCAN.
0.8.29-1,PredictionData attached to HDBSCAN should also change.
0.8.29-1,A function re_init is defined in this module to handle this.
0.8.29-1,"From a fitted HDBSCAN model, predict for n_clusters=5"
0.8.29-1,Store prediciton data for later use.
0.8.29-1,and use this prediction data to predict on new points
0.8.29-1,Get number of fitted clusters for later use.
0.8.29-1,We'll need the condensed tree later...
0.8.29-1,"If none of the three arguments: prediction_data, n_clusters,"
0.8.29-1,"and cluster_selection_epsilon are supplied,"
0.8.29-1,then use clusterer's prediciton data directly
0.8.29-1,"If either of n_clusters or cluster_selection_epsilon were supplied,"
0.8.29-1,then build prediction data from these by modifying clusterer's
0.8.29-1,Get prediction data from clusterer
0.8.29-1,Modify prediction_data to reflect new n_clusters
0.8.29-1,"First, make a copy of prediction data to avoid modifying source"
0.8.29-1,Cluster selection method is hold by condensed_tree.
0.8.29-1,Change from 'eom' to 'leaf' if n_clusters is too large.
0.8.29-1,This change does not affect the tree associated with 'clusterer'
0.8.29-1,Re-initialize prediction_data for the specified n_clusters or epsilon
0.8.29-1,============================================================
0.8.29-1,Now we're ready to use prediction_data
0.8.29-1,"The rest of the code is copied from HDBSCAN's approximate_predict,"
0.8.29-1,but modified to use prediction_data instead of clusterer's attribute
0.8.29-1,Extract condensed tree for later use
0.8.29-1,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.29-1,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.29-1,Use the same prediction_data as clusterer's
0.8.29-1,Compute cluster_selection_epsilon so that a flat clustering
0.8.29-1,produces a specified number of n_clusters
0.8.29-1,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.29-1,Create another instance of prediction_data that is consistent
0.8.29-1,with the selected value of epsilon.
0.8.29-1,Flat clustering from prediction data
0.8.29-1,Initialize probabilities
0.8.29-1,k-NN for prediciton points to training set
0.8.29-1,Loop over prediction points to compute probabilities
0.8.29-1,We need to find where in the tree the new point would go
0.8.29-1,for the purposes of outlier membership approximation
0.8.29-1,"Find row in tree where nearest neighbor drops out,"
0.8.29-1,so we can get a lambda value for the nearest neighbor
0.8.29-1,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
0.8.29-1,"Equivalently, this assigns core distance for prediction point as"
0.8.29-1,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
0.8.29-1,Probabilities based on distance to closest exemplar in each cluster:
0.8.29-1,Use new prediction_data that points to exemplars that are specific
0.8.29-1,to the choice of n_clusters
0.8.29-1,Probabilities based on how long the nearest exemplar persists in
0.8.29-1,each cluster (with respect to most persistent exemplar)
0.8.29-1,Use new clusters that are defined by the choice of n_clusters.
0.8.29-1,Merge the two probabilities to produce a single set of probabilities
0.8.29-1,Include probability that the nearest neighbor belongs to a cluster
0.8.29-1,Rename variable so it's easy to understand what's being returned
0.8.29-1,Extract condensed tree for later use
0.8.29-1,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.29-1,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.29-1,Use the same prediction_data as clusterer's
0.8.29-1,Compute cluster_selection_epsilon so that a flat clustering
0.8.29-1,produces a specified number of n_clusters
0.8.29-1,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.29-1,Create another instance of prediction_data that is consistent
0.8.29-1,with the selected value of epsilon.
0.8.29-1,Flat clustering at the chosen epsilon from prediction_data
0.8.29-1,"When no clusters found, return array of 0's"
0.8.29-1,Probabilities based on distance to closest exemplar in each cluster:
0.8.29-1,Use new prediction_data that points to exemplars that are specific
0.8.29-1,to the choice of n_clusters
0.8.29-1,Probabilities based on how long the point persists in
0.8.29-1,each cluster (with respect to most persistent exemplar)
0.8.29-1,Use new clusters that are defined by the choice of n_clusters.
0.8.29-1,Include probability that the point belongs to a cluster
0.8.29-1,Aggregate the three probabilities to produce membership vectors
0.8.29-1,Re-name variable to clarify what's being returned.
0.8.29-1,"With method 'eom', max clusters are produced for epsilon=0,"
0.8.29-1,as computed by
0.8.29-1,Increasing epsilon can only reduce the number of ouput clusters.
0.8.29-1,"To select epsilon, consider all values where clusters are split"
0.8.29-1,Subtract the extra e-12 to avoid numerical errors in comparison
0.8.29-1,"Then, we avoid splitting for all epsilon below this."
0.8.29-1,Use an epsilon value that produces the right number of clusters.
0.8.29-1,The condensed tree of HDBSCAN has this information.
0.8.29-1,Extract the lambda levels (=1/distance) from the condensed tree
0.8.29-1,We don't want values that produce a large cluster and
0.8.29-1,just one or two individual points.
0.8.29-1,Keep only those lambda values corresponding to cluster separation;
0.8.29-1,"i.e., with child_sizes > 1"
0.8.29-1,"Get the unique values, because when two clusters fall out of one,"
0.8.29-1,the entry with lambda is repeated.
0.8.29-1,lambda values are sorted by np.unique.
0.8.29-1,"Now, get epsilon (distance threshold) as 1/lambda"
0.8.29-1,"At this epsilon, n_clusters have been split."
0.8.29-1,Stop splits at epsilons smaller than this.
0.8.29-1,"To allow for numerical errors,"
0.8.29-1,predData must be a pre-trained PredictionData instance from hdbscan
0.8.29-1,"If n_clusters is specified, compute cluster_selection_epsilon;"
0.8.29-1,This is the key modification:
0.8.29-1,Select clusters according to selection method and epsilon.
0.8.29-1,_new_select_clusters is a modification of get_clusters
0.8.29-1,from hdbscan._hdbscan_tree
0.8.29-1,"raw tree, used later to get exemplars and lambda values"
0.8.29-1,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
0.8.29-1,to the cluster labels produced as output
0.8.29-1,Re-compute lambdas and exemplars for selected clusters;
0.8.29-1,max_lambda <=> smallest distance <=> most persistent point(s)
0.8.29-1,Map all sub-clusters of selected cluster to the selected cluster's
0.8.29-1,label in output.
0.8.29-1,Map lambdas too...
0.8.29-1,Create set of exemplar points for later use.
0.8.29-1,Novel points are assigned based on cluster of closest exemplar.
0.8.29-1,"For each selected cluster, get all of its leaves,"
0.8.29-1,"and leaves of leaves, and so on..."
0.8.29-1,Largest lambda => Most persistent points
0.8.29-1,Get the most persistent points
0.8.29-1,Add most persistent points as exemplars
0.8.29-1,Add exemplars for each leaf of each selected cluster.
0.8.29-1,(exclude root)
0.8.29-1,-*- coding: utf-8 -*-
0.8.29-1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.29-1,
0.8.29-1,License: BSD 3 clause
0.8.29-1,"Return the only cluster, the root"
0.8.29-1,We want to get the x and y coordinates for the start of each cluster
0.8.29-1,"Initialize the leaves, since we know where they go, the iterate"
0.8.29-1,"through everything from the leaves back, setting coords as we go"
0.8.29-1,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.29-1,bottoms and widths for each rectangle. We can go through each cluster
0.8.29-1,and do this for each in turn.
0.8.29-1,Ensure we don't try to take log of zero
0.8.29-1,Finally we need the horizontal lines that occur at cluster splits.
0.8.29-1,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.29-1,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.29-1,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.29-1,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.29-1,the chosen clusters.
0.8.29-1,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.29-1,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.29-1,based on the percentile should alleviate the impact on plotting.
0.8.29-1,Set center and height to default values if necessary
0.8.29-1,Ensure the ellipse is visible
0.8.29-1,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.29-1,Use PCA to get down to 32 dimension
0.8.29-1,-*- coding: utf-8 -*-
0.8.29-1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.29-1,
0.8.29-1,License: BSD 3 clause
0.8.29-1,The Cython routines used require contiguous arrays
0.8.29-1,The Cython routines used require contiguous arrays
0.8.29-1,We can't do much with sparse matrices ...
0.8.29-1,Need heuristic to decide when to go to boruvka;
0.8.29-1,still debugging for now
0.8.29-1,Need heuristic to decide when to go to boruvka;
0.8.29-1,still debugging for now
0.8.29-1,Support various prediction methods for predicting cluster membership
0.8.29-1,of new or unseen points. There are several ways to interpret how
0.8.29-1,"to do this correctly, so we provide several methods for"
0.8.29-1,the different use cases that may arise.
0.8.29-1,raw_condensed_tree = condensed_tree.to_numpy()
0.8.29-1,New point departs with the old
0.8.29-1,Find appropriate cluster based on lambda of new point
0.8.29-1,Find appropriate cluster based on lambda of new point
0.8.29-1,"the point is in the dataset, fix lambda for rounding errors"
0.8.29-1,We need to find where in the tree the new point would go
0.8.29-1,for the purposes of outlier membership approximation
0.8.29-1,"When no clusters found, return array of 0's"
0.8.29-1,import pickle
0.8.29-1,from sklearn.cluster.tests.common import generate_clustered_data
0.8.29-1,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.29-1,"number of clusters, ignoring noise if present"
0.8.29-1,"metric is the function reference, not the string key."
0.8.29-1,def test_rsl_unavailable_hierarchy():
0.8.29-1,clusterer = RobustSingleLinkage()
0.8.29-1,with warnings.catch_warnings(record=True) as w:
0.8.29-1,tree = clusterer.cluster_hierarchy_
0.8.29-1,assert len(w) > 0
0.8.29-1,assert tree is None
0.8.29-1,"H, y = shuffle(X, y, random_state=7)"
0.8.29-1,Disable for now -- need to refactor to meet newer standards
0.8.29-1,from sklearn.cluster.tests.common import generate_clustered_data
0.8.29-1,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.29-1,this fails if no $DISPLAY specified
0.8.29-1,"number of clusters, ignoring noise if present"
0.8.29-1,"number of clusters, ignoring noise if present"
0.8.29-1,"H, y = shuffle(X, y, random_state=7)"
0.8.29-1,"metric is the function reference, not the string key."
0.8.29-1,def test_hdbscan_unavailable_attributes():
0.8.29-1,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.29-1,with warnings.catch_warnings(record=True) as w:
0.8.29-1,tree = clusterer.condensed_tree_
0.8.29-1,assert len(w) > 0
0.8.29-1,assert tree is None
0.8.29-1,with warnings.catch_warnings(record=True) as w:
0.8.29-1,tree = clusterer.single_linkage_tree_
0.8.29-1,assert len(w) > 0
0.8.29-1,assert tree is None
0.8.29-1,with warnings.catch_warnings(record=True) as w:
0.8.29-1,scores = clusterer.outlier_scores_
0.8.29-1,assert len(w) > 0
0.8.29-1,assert scores is None
0.8.29-1,with warnings.catch_warnings(record=True) as w:
0.8.29-1,tree = clusterer.minimum_spanning_tree_
0.8.29-1,assert len(w) > 0
0.8.29-1,assert tree is None
0.8.29-1,def test_hdbscan_min_span_tree_availability():
0.8.29-1,clusterer = HDBSCAN().fit(X)
0.8.29-1,tree = clusterer.minimum_spanning_tree_
0.8.29-1,assert tree is None
0.8.29-1,D = distance.squareform(distance.pdist(X))
0.8.29-1,D /= np.max(D)
0.8.29-1,HDBSCAN(metric='precomputed').fit(D)
0.8.29-1,tree = clusterer.minimum_spanning_tree_
0.8.29-1,assert tree is None
0.8.29-1,no prediction data error
0.8.29-1,wrong dimensions error
0.8.29-1,no clusters warning
0.8.29-1,def test_hdbscan_membership_vector():
0.8.29-1,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.29-1,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.29-1,assert_array_almost_equal(
0.8.29-1,"vector,"
0.8.29-1,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.29-1,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.29-1,assert_array_almost_equal(
0.8.29-1,"vector,"
0.8.29-1,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.29-1,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.29-1,assert_array_almost_equal(
0.8.29-1,"vector,"
0.8.29-1,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.29-1,
0.8.29-1,def test_hdbscan_all_points_membership_vectors():
0.8.29-1,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.29-1,vects = all_points_membership_vectors(clusterer)
0.8.29-1,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.29-1,"2.52734246e-001,"
0.8.29-1,8.38299608e-002]))
0.8.29-1,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.29-1,"8.35882503e-002,"
0.8.29-1,1.07356406e-001]))
0.8.29-1,without epsilon we should see many noise points as children of root.
0.8.29-1,for this random seed an epsilon of 0.2 will produce exactly 2 noise
0.8.29-1,points at that cut in single linkage.
0.8.29-1,Disable for now -- need to refactor to meet newer standards
0.8.29-1,Probably not applicable now #
0.8.29-1,def test_dbscan_sparse():
0.8.29-1,def test_dbscan_balltree():
0.8.29-1,def test_pickle():
0.8.29-1,def test_dbscan_core_samples_toy():
0.8.29-1,def test_boundaries():
0.8.29-1,"Given negative, zero and positive denominator and positive numerator"
0.8.29-1,Make sure safe division is always positive and doesn't raise ZeroDivision error
0.8.29-1,Ignore future warnings thrown by sklearn
0.8.29-1,Create a nice dataset with 6 circular clusters and 2 moons
0.8.29-1,"Given, the base HDBSCAN with method 'eom'"
0.8.29-1,"When we ask for flat clustering with same n_clusters,"
0.8.29-1,"Then, the labels and probabilities should match"
0.8.29-1,"Given, the base HDBSCAN with method 'leaf'"
0.8.29-1,"When we ask for flat clustering with same n_clusters,"
0.8.29-1,"Then, the labels and probabilities should match"
0.8.29-1,Method 'eom'...
0.8.29-1,"Given, a flat clustering for required n_clusters,"
0.8.29-1,"When we run the base HDBSCAN using it's epsilon,"
0.8.29-1,"Then, the labels and probabilities should match"
0.8.29-1,Method 'leaf'...
0.8.29-1,"Given, a flat clustering for required n_clusters,"
0.8.29-1,"When we run the base HDBSCAN using it's epsilon,"
0.8.29-1,"Then, the labels and probabilities should match"
0.8.29-1,"Given the max number of clusters that can be produced by 'eom',"
0.8.29-1,(these are produced for epsilon=0) (??? Needs verification)
0.8.29-1,"When we try flat clustering with 'eom' method for more n_clusters,"
0.8.29-1,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.29-1,"the resulting clusterer switches to using method 'leaf',"
0.8.29-1,and the resulting probabilities and labels must match
0.8.29-1,"Given the base HDBSCAN trained on some data,"
0.8.29-1,"When using approximate_predict_flat without specifying n_clusters,"
0.8.29-1,"Then, the clustering should match that due to approximate_predict,"
0.8.29-1,"Given a flat clustering trained for some n_clusters,"
0.8.29-1,"When using approximate_predict_flat without specifying n_clusters,"
0.8.29-1,"Then, the number of clusters produced must match the original n_clusters"
0.8.29-1,and all probabilities are <= 1.
0.8.29-1,"Given a flat clustering trained for some n_clusters,"
0.8.29-1,"When using approximate_predict_flat with specified n_clusters,"
0.8.29-1,"Then, the requested number of clusters must be produced"
0.8.29-1,and all probabilities are <= 1.
0.8.29-1,When using approximate_predict_flat with more clusters
0.8.29-1,"than 'eom' can handle,"
0.8.29-1,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.29-1,But the requested number of clusters must still be produced using 'leaf'
0.8.29-1,and all probabilities are <= 1.
0.8.29-1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.29-1,"When membership_vector_flat is called with new data,"
0.8.29-1,"Then the number of clusters in memberships matches those of clusterer,"
0.8.29-1,and the number of points should equal those in the test set
0.8.29-1,and all probabilities are <= 1.
0.8.29-1,========================================
0.8.29-1,"Given a flat clustering for a specified n_clusters,"
0.8.29-1,"When membership_vector_flat is called with new data,"
0.8.29-1,"Then the number of clusters in memberships matches those of clusterer,"
0.8.29-1,and the number of points should equal those in the test set
0.8.29-1,and all probabilities are <= 1.
0.8.29-1,Ignore user warnings in this function
0.8.29-1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.29-1,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.29-1,"Then the number of clusters in memberships should be as requested,"
0.8.29-1,and the number of points should equal those in the test set
0.8.29-1,and all probabilities are <= 1.
0.8.29-1,========================================
0.8.29-1,"Given a flat clustering for a specified n_clusters,"
0.8.29-1,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.29-1,"Then the number of clusters in memberships should be as requested,"
0.8.29-1,and the number of points should equal those in the test set
0.8.29-1,and all probabilities are <= 1.
0.8.29-1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.29-1,"When all_points_membership_vectors_flat is called,"
0.8.29-1,"Then the number of clusters in memberships matches those of clusterer,"
0.8.29-1,and the number of points should equal those in the training set
0.8.29-1,and all probabilities are <= 1.
0.8.29-1,========================================
0.8.29-1,"Given a flat clustering for a specified n_clusters,"
0.8.29-1,"When all_points_membership_vectors_flat is called,"
0.8.29-1,"Then the number of clusters in memberships matches those of clusterer,"
0.8.29-1,and the number of points should equal those in the training set
0.8.29-1,and all probabilities are <= 1.
0.8.29-1,Ignore user warnings in this function
0.8.29-1,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.29-1,"When all_points_membership_vectors_flat is called for some n_clusters,"
0.8.29-1,"Then the number of clusters in memberships should be as requested,"
0.8.29-1,and the number of points should equal those in the training set
0.8.29-1,and all probabilities are <= 1.
0.8.29-1,========================================
0.8.29-1,"Given a flat clustering for a specified n_clusters,"
0.8.29-1,"When membership_vector_flat is called for some n_clusters,"
0.8.29-1,"Then the number of clusters in memberships should be as requested,"
0.8.29-1,and the number of points should equal those in the training set
0.8.29-1,and all probabilities are <= 1.
0.8.29-1,Generate datasets. We choose the size big enough to see the scalability
0.8.29-1,"of the algorithms, but not too big to avoid too long running times"
0.8.29-1,normalize dataset for easier parameter selection
0.8.29-1,estimate bandwidth for mean shift
0.8.29-1,connectivity matrix for structured Ward
0.8.29-1,make connectivity symmetric
0.8.29-1,create clustering estimators
0.8.29-1,predict cluster memberships
0.8.29-1,plot
0.8.29-1,-*- coding: utf-8 -*-
0.8.29-1,#############################################################################
0.8.29-1,Generate sample data
0.8.29-1,#############################################################################
0.8.29-1,Compute DBSCAN
0.8.29-1,"Number of clusters in labels, ignoring noise if present."
0.8.29-1,#############################################################################
0.8.29-1,Plot result
0.8.29-1,Black removed and is used for noise instead.
0.8.29-1,Black used for noise.
0.8.29-1,Black used for noise.
0.8.29-1,-*- coding: utf-8 -*-
0.8.29-1,
0.8.29-1,"hdbscan documentation build configuration file, created by"
0.8.29-1,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.29-1,
0.8.29-1,This file is execfile()d with the current directory set to its
0.8.29-1,containing dir.
0.8.29-1,
0.8.29-1,Note that not all possible configuration values are present in this
0.8.29-1,autogenerated file.
0.8.29-1,
0.8.29-1,All configuration values have a default; values that are commented out
0.8.29-1,serve to show the default.
0.8.29-1,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.29-1,add these directories to sys.path here. If the directory is relative to the
0.8.29-1,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.29-1,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.29-1,"sys.path.insert(0, os.path.abspath('../'))"
0.8.29-1,-- General configuration ------------------------------------------------
0.8.29-1,"If your documentation needs a minimal Sphinx version, state it here."
0.8.29-1,needs_sphinx = '1.0'
0.8.29-1,"Add any Sphinx extension module names here, as strings. They can be"
0.8.29-1,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.29-1,ones.
0.8.29-1,"'sphinx.ext.napoleon',"
0.8.29-1,'numpy_ext.numpydoc'
0.8.29-1,napoleon_google_docstring = False
0.8.29-1,napoleon_numpy_docstring = True
0.8.29-1,"Add any paths that contain templates here, relative to this directory."
0.8.29-1,The suffix(es) of source filenames.
0.8.29-1,You can specify multiple suffix as a list of string:
0.8.29-1,"source_suffix = ['.rst', '.md']"
0.8.29-1,The encoding of source files.
0.8.29-1,source_encoding = 'utf-8-sig'
0.8.29-1,The master toctree document.
0.8.29-1,General information about the project.
0.8.29-1,"The version info for the project you're documenting, acts as replacement for"
0.8.29-1,"|version| and |release|, also used in various other places throughout the"
0.8.29-1,built documents.
0.8.29-1,
0.8.29-1,The short X.Y version.
0.8.29-1,"The full version, including alpha/beta/rc tags."
0.8.29-1,The language for content autogenerated by Sphinx. Refer to documentation
0.8.29-1,for a list of supported languages.
0.8.29-1,
0.8.29-1,This is also used if you do content translation via gettext catalogs.
0.8.29-1,"Usually you set ""language"" from the command line for these cases."
0.8.29-1,"There are two options for replacing |today|: either, you set today to some"
0.8.29-1,"non-false value, then it is used:"
0.8.29-1,today = ''
0.8.29-1,"Else, today_fmt is used as the format for a strftime call."
0.8.29-1,"today_fmt = '%B %d, %Y'"
0.8.29-1,"List of patterns, relative to source directory, that match files and"
0.8.29-1,directories to ignore when looking for source files.
0.8.29-1,The reST default role (used for this markup: `text`) to use for all
0.8.29-1,documents.
0.8.29-1,default_role = None
0.8.29-1,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.29-1,add_function_parentheses = True
0.8.29-1,"If true, the current module name will be prepended to all description"
0.8.29-1,unit titles (such as .. function::).
0.8.29-1,add_module_names = True
0.8.29-1,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.29-1,output. They are ignored by default.
0.8.29-1,show_authors = False
0.8.29-1,The name of the Pygments (syntax highlighting) style to use.
0.8.29-1,A list of ignored prefixes for module index sorting.
0.8.29-1,modindex_common_prefix = []
0.8.29-1,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.29-1,keep_warnings = False
0.8.29-1,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.29-1,-- Options for HTML output ----------------------------------------------
0.8.29-1,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.29-1,a list of builtin themes.
0.8.29-1,html_theme = 'alabaster'
0.8.29-1,Theme options are theme-specific and customize the look and feel of a theme
0.8.29-1,"further.  For a list of options available for each theme, see the"
0.8.29-1,documentation.
0.8.29-1,html_theme_options = {}
0.8.29-1,"Add any paths that contain custom themes here, relative to this directory."
0.8.29-1,html_theme_path = []
0.8.29-1,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.29-1,"""<project> v<release> documentation""."
0.8.29-1,html_title = None
0.8.29-1,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.29-1,html_short_title = None
0.8.29-1,The name of an image file (relative to this directory) to place at the top
0.8.29-1,of the sidebar.
0.8.29-1,html_logo = None
0.8.29-1,The name of an image file (within the static path) to use as favicon of the
0.8.29-1,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.29-1,pixels large.
0.8.29-1,html_favicon = None
0.8.29-1,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.29-1,"relative to this directory. They are copied after the builtin static files,"
0.8.29-1,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.29-1,Add any extra paths that contain custom files (such as robots.txt or
0.8.29-1,".htaccess) here, relative to this directory. These files are copied"
0.8.29-1,directly to the root of the documentation.
0.8.29-1,html_extra_path = []
0.8.29-1,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.29-1,using the given strftime format.
0.8.29-1,"html_last_updated_fmt = '%b %d, %Y'"
0.8.29-1,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.29-1,typographically correct entities.
0.8.29-1,html_use_smartypants = True
0.8.29-1,"Custom sidebar templates, maps document names to template names."
0.8.29-1,html_sidebars = {}
0.8.29-1,"Additional templates that should be rendered to pages, maps page names to"
0.8.29-1,template names.
0.8.29-1,html_additional_pages = {}
0.8.29-1,"If false, no module index is generated."
0.8.29-1,html_domain_indices = True
0.8.29-1,"If false, no index is generated."
0.8.29-1,html_use_index = True
0.8.29-1,"If true, the index is split into individual pages for each letter."
0.8.29-1,html_split_index = False
0.8.29-1,"If true, links to the reST sources are added to the pages."
0.8.29-1,html_show_sourcelink = True
0.8.29-1,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.29-1,html_show_sphinx = True
0.8.29-1,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.29-1,html_show_copyright = True
0.8.29-1,"If true, an OpenSearch description file will be output, and all pages will"
0.8.29-1,contain a <link> tag referring to it.  The value of this option must be the
0.8.29-1,base URL from which the finished HTML is served.
0.8.29-1,html_use_opensearch = ''
0.8.29-1,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.29-1,html_file_suffix = None
0.8.29-1,Language to be used for generating the HTML full-text search index.
0.8.29-1,Sphinx supports the following languages:
0.8.29-1,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.29-1,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.29-1,html_search_language = 'en'
0.8.29-1,"A dictionary with options for the search language support, empty by default."
0.8.29-1,Now only 'ja' uses this config value
0.8.29-1,html_search_options = {'type': 'default'}
0.8.29-1,The name of a javascript file (relative to the configuration directory) that
0.8.29-1,"implements a search results scorer. If empty, the default will be used."
0.8.29-1,html_search_scorer = 'scorer.js'
0.8.29-1,Output file base name for HTML help builder.
0.8.29-1,-- Options for LaTeX output ---------------------------------------------
0.8.29-1,The paper size ('letterpaper' or 'a4paper').
0.8.29-1,"'papersize': 'letterpaper',"
0.8.29-1,"The font size ('10pt', '11pt' or '12pt')."
0.8.29-1,"'pointsize': '10pt',"
0.8.29-1,Additional stuff for the LaTeX preamble.
0.8.29-1,"'preamble': '',"
0.8.29-1,Latex figure (float) alignment
0.8.29-1,"'figure_align': 'htbp',"
0.8.29-1,Grouping the document tree into LaTeX files. List of tuples
0.8.29-1,"(source start file, target name, title,"
0.8.29-1,"author, documentclass [howto, manual, or own class])."
0.8.29-1,The name of an image file (relative to this directory) to place at the top of
0.8.29-1,the title page.
0.8.29-1,latex_logo = None
0.8.29-1,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.29-1,not chapters.
0.8.29-1,latex_use_parts = False
0.8.29-1,"If true, show page references after internal links."
0.8.29-1,latex_show_pagerefs = False
0.8.29-1,"If true, show URL addresses after external links."
0.8.29-1,latex_show_urls = False
0.8.29-1,Documents to append as an appendix to all manuals.
0.8.29-1,latex_appendices = []
0.8.29-1,"If false, no module index is generated."
0.8.29-1,latex_domain_indices = True
0.8.29-1,-- Options for manual page output ---------------------------------------
0.8.29-1,One entry per manual page. List of tuples
0.8.29-1,"(source start file, name, description, authors, manual section)."
0.8.29-1,"If true, show URL addresses after external links."
0.8.29-1,man_show_urls = False
0.8.29-1,-- Options for Texinfo output -------------------------------------------
0.8.29-1,Grouping the document tree into Texinfo files. List of tuples
0.8.29-1,"(source start file, target name, title, author,"
0.8.29-1,"dir menu entry, description, category)"
0.8.29-1,Documents to append as an appendix to all manuals.
0.8.29-1,texinfo_appendices = []
0.8.29-1,"If false, no module index is generated."
0.8.29-1,texinfo_domain_indices = True
0.8.29-1,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.29-1,texinfo_show_urls = 'footnote'
0.8.29-1,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.29-1,texinfo_no_detailmenu = False
0.8.29-1,-- Options for Epub output ----------------------------------------------
0.8.29-1,Bibliographic Dublin Core info.
0.8.29-1,The basename for the epub file. It defaults to the project name.
0.8.29-1,epub_basename = project
0.8.29-1,The HTML theme for the epub output. Since the default themes are not
0.8.29-1,"optimized for small screen space, using the same theme for HTML and epub"
0.8.29-1,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.29-1,visual space.
0.8.29-1,epub_theme = 'epub'
0.8.29-1,The language of the text. It defaults to the language option
0.8.29-1,or 'en' if the language is not set.
0.8.29-1,epub_language = ''
0.8.29-1,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.29-1,epub_scheme = ''
0.8.29-1,The unique identifier of the text. This can be a ISBN number
0.8.29-1,or the project homepage.
0.8.29-1,epub_identifier = ''
0.8.29-1,A unique identification for the text.
0.8.29-1,epub_uid = ''
0.8.29-1,A tuple containing the cover image and cover page html template filenames.
0.8.29-1,epub_cover = ()
0.8.29-1,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.29-1,epub_guide = ()
0.8.29-1,HTML files that should be inserted before the pages created by sphinx.
0.8.29-1,The format is a list of tuples containing the path and title.
0.8.29-1,epub_pre_files = []
0.8.29-1,HTML files that should be inserted after the pages created by sphinx.
0.8.29-1,The format is a list of tuples containing the path and title.
0.8.29-1,epub_post_files = []
0.8.29-1,A list of files that should not be packed into the epub file.
0.8.29-1,The depth of the table of contents in toc.ncx.
0.8.29-1,epub_tocdepth = 3
0.8.29-1,Allow duplicate toc entries.
0.8.29-1,epub_tocdup = True
0.8.29-1,Choose between 'default' and 'includehidden'.
0.8.29-1,epub_tocscope = 'default'
0.8.29-1,Fix unsupported image types using the Pillow.
0.8.29-1,epub_fix_images = False
0.8.29-1,Scale large images.
0.8.29-1,epub_max_image_width = 0
0.8.29-1,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.29-1,epub_show_urls = 'inline'
0.8.29-1,"If false, no index is generated."
0.8.29-1,epub_use_index = True
0.8.29,"Import numpy here, only when headers are needed"
0.8.29,Add numpy headers to include_dirs
0.8.29,Call original build_ext command
0.8.29,The dependencies are the same as the contents of requirements.txt
0.8.29,"A little ""fancy"" we select from the flattened array reshape back"
0.8.29,(Fortran format to get indexing right) and take the product to do an and
0.8.29,then convert back to boolean type.
0.8.29,Density sparseness is not well defined if there are no
0.8.29,internal edges (as per the referenced paper). However
0.8.29,MATLAB code from the original authors simply selects the
0.8.29,largest of *all* the edges in the case that there are
0.8.29,"no internal edges, so we do the same here"
0.8.29,"If there are any internal edges, then subselect them out"
0.8.29,If there are no internal edges then we want to take the
0.8.29,"max over all the edges that exist in the MST, so we simply"
0.8.29,do nothing and return all the edges in the MST.
0.8.29,-*- coding: utf-8 -*-
0.8.29,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.29,Steve Astels <sastels@gmail.com>
0.8.29,John Healy <jchealy@gmail.com>
0.8.29,
0.8.29,License: BSD 3 clause
0.8.29,"Treating this case explicitly, instead of letting"
0.8.29,"sklearn.metrics.pairwise_distances handle it,"
0.8.29,enables the usage of numpy.inf in the distance
0.8.29,matrix to indicate missing distance information.
0.8.29,TODO: Check if copying is necessary
0.8.29,raise TypeError('Sparse distance matrices not yet supported')
0.8.29,Warn if the MST couldn't be constructed around the missing distances
0.8.29,mst_linkage_core does not generate a full minimal spanning tree
0.8.29,If a tree is required then we must build the edges from the information
0.8.29,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.29,Sort edges of the min_spanning_tree by weight
0.8.29,Convert edge list into standard hierarchical clustering format
0.8.29,Check for connected component on X
0.8.29,Compute sparse mutual reachability graph
0.8.29,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.29,Check connected component on mutual reachability
0.8.29,"If more than one component, it means that even if the distance matrix X"
0.8.29,"has one component, there exists with less than `min_samples` neighbors"
0.8.29,Compute the minimum spanning tree for the sparse graph
0.8.29,Convert the graph to scipy cluster array format
0.8.29,Sort edges of the min_spanning_tree by weight
0.8.29,Convert edge list into standard hierarchical clustering format
0.8.29,The Cython routines used require contiguous arrays
0.8.29,TO DO: Deal with p for minkowski appropriately
0.8.29,Get distance to kth nearest neighbour
0.8.29,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.29,Sort edges of the min_spanning_tree by weight
0.8.29,Convert edge list into standard hierarchical clustering format
0.8.29,The Cython routines used require contiguous arrays
0.8.29,Get distance to kth nearest neighbour
0.8.29,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.29,Sort edges of the min_spanning_tree by weight
0.8.29,Convert edge list into standard hierarchical clustering format
0.8.29,Sort edges of the min_spanning_tree by weight
0.8.29,Convert edge list into standard hierarchical clustering format
0.8.29,Sort edges of the min_spanning_tree by weight
0.8.29,Convert edge list into standard hierarchical clustering format
0.8.29,Checks input and converts to an nd-array where possible
0.8.29,"Only non-sparse, precomputed distance matrices are handled here"
0.8.29,and thereby allowed to contain numpy.inf for missing distances
0.8.29,Python 2 and 3 compliant string_type checking
0.8.29,We can't do much with sparse matrices ...
0.8.29,TO DO: Need heuristic to decide when to go to boruvka;
0.8.29,still debugging for now
0.8.29,TO DO: Need heuristic to decide when to go to boruvka;
0.8.29,still debugging for now
0.8.29,Inherits from sklearn
0.8.29,Non-precomputed matrices may contain non-finite values.
0.8.29,Rows with these values
0.8.29,Pass only the purely finite indices into hdbscan
0.8.29,We will later assign all non-finite points to the background -1 cluster
0.8.29,Handle sparse precomputed distance matrices separately
0.8.29,"Only non-sparse, precomputed distance matrices are allowed"
0.8.29,to have numpy.inf values indicating missing distances
0.8.29,"prediction data only applies to the persistent model, so remove"
0.8.29,it from the keyword args we pass on the the function
0.8.29,remap indices to align with original data in the case of non-finite entries.
0.8.29,"Unltimately, for each Ci, we only require the"
0.8.29,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.29,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.29,density separation 'with respect to' Ci.
0.8.29,If exactly one of the points is noise
0.8.29,Set the density sparseness of the cluster
0.8.29,to the sparsest value seen so far.
0.8.29,Check whether density separations with
0.8.29,respect to each of these clusters can
0.8.29,be reduced.
0.8.29,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.29,This only makes sense if num_clusters = 1 since it has turned out
0.8.29,that the MR-MST has no edges between a noise point and a core point.
0.8.29,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.29,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.29,MR-MST might contain an edge with one point in Cj and ther other one
0.8.29,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.29,another large enough value.
0.8.29,
0.8.29,TODO: Think of a better yet efficient way to handle this.
0.8.29,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
0.8.29,Use a previously initialized/trained HDBSCAN
0.8.29,Handle the trivial case first.
0.8.29,Always generate prediction_data to avoid later woes
0.8.29,This will later be chosen according to n_clusters
0.8.29,Initialize and train clusterer if one was not previously supplied.
0.8.29,Always generate prediction data
0.8.29,We do not pass cluster_selection_epsilon here.
0.8.29,"While this adds unnecessary computation, it makes the code"
0.8.29,easier to read and debug.
0.8.29,"Train on 'X'. Do this even if the supplied clusterer was trained,"
0.8.29,because we want to make sure it fits 'X'.
0.8.29,"Pick an epsilon value right after a split produces n_clusters,"
0.8.29,and the don't split further for smaller epsilon (larger lambda)
0.8.29,Or use the specified cluster_selection_epsilon
0.8.29,"Extract tree related stuff, in order to re-assign labels"
0.8.29,Get labels according to the required cluster_selection_epsilon
0.8.29,Reflect the related changes in HDBSCAN.
0.8.29,PredictionData attached to HDBSCAN should also change.
0.8.29,A function re_init is defined in this module to handle this.
0.8.29,"From a fitted HDBSCAN model, predict for n_clusters=5"
0.8.29,Store prediciton data for later use.
0.8.29,and use this prediction data to predict on new points
0.8.29,Get number of fitted clusters for later use.
0.8.29,We'll need the condensed tree later...
0.8.29,"If none of the three arguments: prediction_data, n_clusters,"
0.8.29,"and cluster_selection_epsilon are supplied,"
0.8.29,then use clusterer's prediciton data directly
0.8.29,"If either of n_clusters or cluster_selection_epsilon were supplied,"
0.8.29,then build prediction data from these by modifying clusterer's
0.8.29,Get prediction data from clusterer
0.8.29,Modify prediction_data to reflect new n_clusters
0.8.29,"First, make a copy of prediction data to avoid modifying source"
0.8.29,Cluster selection method is hold by condensed_tree.
0.8.29,Change from 'eom' to 'leaf' if n_clusters is too large.
0.8.29,This change does not affect the tree associated with 'clusterer'
0.8.29,Re-initialize prediction_data for the specified n_clusters or epsilon
0.8.29,============================================================
0.8.29,Now we're ready to use prediction_data
0.8.29,"The rest of the code is copied from HDBSCAN's approximate_predict,"
0.8.29,but modified to use prediction_data instead of clusterer's attribute
0.8.29,Extract condensed tree for later use
0.8.29,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.29,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.29,Use the same prediction_data as clusterer's
0.8.29,Compute cluster_selection_epsilon so that a flat clustering
0.8.29,produces a specified number of n_clusters
0.8.29,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.29,Create another instance of prediction_data that is consistent
0.8.29,with the selected value of epsilon.
0.8.29,Flat clustering from prediction data
0.8.29,Initialize probabilities
0.8.29,k-NN for prediciton points to training set
0.8.29,Loop over prediction points to compute probabilities
0.8.29,We need to find where in the tree the new point would go
0.8.29,for the purposes of outlier membership approximation
0.8.29,"Find row in tree where nearest neighbor drops out,"
0.8.29,so we can get a lambda value for the nearest neighbor
0.8.29,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
0.8.29,"Equivalently, this assigns core distance for prediction point as"
0.8.29,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
0.8.29,Probabilities based on distance to closest exemplar in each cluster:
0.8.29,Use new prediction_data that points to exemplars that are specific
0.8.29,to the choice of n_clusters
0.8.29,Probabilities based on how long the nearest exemplar persists in
0.8.29,each cluster (with respect to most persistent exemplar)
0.8.29,Use new clusters that are defined by the choice of n_clusters.
0.8.29,Merge the two probabilities to produce a single set of probabilities
0.8.29,Include probability that the nearest neighbor belongs to a cluster
0.8.29,Rename variable so it's easy to understand what's being returned
0.8.29,Extract condensed tree for later use
0.8.29,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.29,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.29,Use the same prediction_data as clusterer's
0.8.29,Compute cluster_selection_epsilon so that a flat clustering
0.8.29,produces a specified number of n_clusters
0.8.29,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.29,Create another instance of prediction_data that is consistent
0.8.29,with the selected value of epsilon.
0.8.29,Flat clustering at the chosen epsilon from prediction_data
0.8.29,"When no clusters found, return array of 0's"
0.8.29,Probabilities based on distance to closest exemplar in each cluster:
0.8.29,Use new prediction_data that points to exemplars that are specific
0.8.29,to the choice of n_clusters
0.8.29,Probabilities based on how long the point persists in
0.8.29,each cluster (with respect to most persistent exemplar)
0.8.29,Use new clusters that are defined by the choice of n_clusters.
0.8.29,Include probability that the point belongs to a cluster
0.8.29,Aggregate the three probabilities to produce membership vectors
0.8.29,Re-name variable to clarify what's being returned.
0.8.29,"With method 'eom', max clusters are produced for epsilon=0,"
0.8.29,as computed by
0.8.29,Increasing epsilon can only reduce the number of ouput clusters.
0.8.29,"To select epsilon, consider all values where clusters are split"
0.8.29,Subtract the extra e-12 to avoid numerical errors in comparison
0.8.29,"Then, we avoid splitting for all epsilon below this."
0.8.29,Use an epsilon value that produces the right number of clusters.
0.8.29,The condensed tree of HDBSCAN has this information.
0.8.29,Extract the lambda levels (=1/distance) from the condensed tree
0.8.29,We don't want values that produce a large cluster and
0.8.29,just one or two individual points.
0.8.29,Keep only those lambda values corresponding to cluster separation;
0.8.29,"i.e., with child_sizes > 1"
0.8.29,"Get the unique values, because when two clusters fall out of one,"
0.8.29,the entry with lambda is repeated.
0.8.29,lambda values are sorted by np.unique.
0.8.29,"Now, get epsilon (distance threshold) as 1/lambda"
0.8.29,"At this epsilon, n_clusters have been split."
0.8.29,Stop splits at epsilons smaller than this.
0.8.29,"To allow for numerical errors,"
0.8.29,predData must be a pre-trained PredictionData instance from hdbscan
0.8.29,"If n_clusters is specified, compute cluster_selection_epsilon;"
0.8.29,This is the key modification:
0.8.29,Select clusters according to selection method and epsilon.
0.8.29,_new_select_clusters is a modification of get_clusters
0.8.29,from hdbscan._hdbscan_tree
0.8.29,"raw tree, used later to get exemplars and lambda values"
0.8.29,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
0.8.29,to the cluster labels produced as output
0.8.29,Re-compute lambdas and exemplars for selected clusters;
0.8.29,max_lambda <=> smallest distance <=> most persistent point(s)
0.8.29,Map all sub-clusters of selected cluster to the selected cluster's
0.8.29,label in output.
0.8.29,Map lambdas too...
0.8.29,Create set of exemplar points for later use.
0.8.29,Novel points are assigned based on cluster of closest exemplar.
0.8.29,"For each selected cluster, get all of its leaves,"
0.8.29,"and leaves of leaves, and so on..."
0.8.29,Largest lambda => Most persistent points
0.8.29,Get the most persistent points
0.8.29,Add most persistent points as exemplars
0.8.29,Add exemplars for each leaf of each selected cluster.
0.8.29,(exclude root)
0.8.29,-*- coding: utf-8 -*-
0.8.29,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.29,
0.8.29,License: BSD 3 clause
0.8.29,"Return the only cluster, the root"
0.8.29,We want to get the x and y coordinates for the start of each cluster
0.8.29,"Initialize the leaves, since we know where they go, the iterate"
0.8.29,"through everything from the leaves back, setting coords as we go"
0.8.29,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.29,bottoms and widths for each rectangle. We can go through each cluster
0.8.29,and do this for each in turn.
0.8.29,Ensure we don't try to take log of zero
0.8.29,Finally we need the horizontal lines that occur at cluster splits.
0.8.29,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.29,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.29,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.29,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.29,the chosen clusters.
0.8.29,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.29,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.29,based on the percentile should alleviate the impact on plotting.
0.8.29,Set center and height to default values if necessary
0.8.29,Ensure the ellipse is visible
0.8.29,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.29,Use PCA to get down to 32 dimension
0.8.29,-*- coding: utf-8 -*-
0.8.29,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.29,
0.8.29,License: BSD 3 clause
0.8.29,The Cython routines used require contiguous arrays
0.8.29,The Cython routines used require contiguous arrays
0.8.29,We can't do much with sparse matrices ...
0.8.29,Need heuristic to decide when to go to boruvka;
0.8.29,still debugging for now
0.8.29,Need heuristic to decide when to go to boruvka;
0.8.29,still debugging for now
0.8.29,Support various prediction methods for predicting cluster membership
0.8.29,of new or unseen points. There are several ways to interpret how
0.8.29,"to do this correctly, so we provide several methods for"
0.8.29,the different use cases that may arise.
0.8.29,raw_condensed_tree = condensed_tree.to_numpy()
0.8.29,New point departs with the old
0.8.29,Find appropriate cluster based on lambda of new point
0.8.29,Find appropriate cluster based on lambda of new point
0.8.29,"the point is in the dataset, fix lambda for rounding errors"
0.8.29,We need to find where in the tree the new point would go
0.8.29,for the purposes of outlier membership approximation
0.8.29,"When no clusters found, return array of 0's"
0.8.29,import pickle
0.8.29,from sklearn.cluster.tests.common import generate_clustered_data
0.8.29,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.29,"number of clusters, ignoring noise if present"
0.8.29,"metric is the function reference, not the string key."
0.8.29,def test_rsl_unavailable_hierarchy():
0.8.29,clusterer = RobustSingleLinkage()
0.8.29,with warnings.catch_warnings(record=True) as w:
0.8.29,tree = clusterer.cluster_hierarchy_
0.8.29,assert len(w) > 0
0.8.29,assert tree is None
0.8.29,"H, y = shuffle(X, y, random_state=7)"
0.8.29,Disable for now -- need to refactor to meet newer standards
0.8.29,from sklearn.cluster.tests.common import generate_clustered_data
0.8.29,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.29,this fails if no $DISPLAY specified
0.8.29,"number of clusters, ignoring noise if present"
0.8.29,"number of clusters, ignoring noise if present"
0.8.29,"H, y = shuffle(X, y, random_state=7)"
0.8.29,"metric is the function reference, not the string key."
0.8.29,def test_hdbscan_unavailable_attributes():
0.8.29,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.29,with warnings.catch_warnings(record=True) as w:
0.8.29,tree = clusterer.condensed_tree_
0.8.29,assert len(w) > 0
0.8.29,assert tree is None
0.8.29,with warnings.catch_warnings(record=True) as w:
0.8.29,tree = clusterer.single_linkage_tree_
0.8.29,assert len(w) > 0
0.8.29,assert tree is None
0.8.29,with warnings.catch_warnings(record=True) as w:
0.8.29,scores = clusterer.outlier_scores_
0.8.29,assert len(w) > 0
0.8.29,assert scores is None
0.8.29,with warnings.catch_warnings(record=True) as w:
0.8.29,tree = clusterer.minimum_spanning_tree_
0.8.29,assert len(w) > 0
0.8.29,assert tree is None
0.8.29,def test_hdbscan_min_span_tree_availability():
0.8.29,clusterer = HDBSCAN().fit(X)
0.8.29,tree = clusterer.minimum_spanning_tree_
0.8.29,assert tree is None
0.8.29,D = distance.squareform(distance.pdist(X))
0.8.29,D /= np.max(D)
0.8.29,HDBSCAN(metric='precomputed').fit(D)
0.8.29,tree = clusterer.minimum_spanning_tree_
0.8.29,assert tree is None
0.8.29,no prediction data error
0.8.29,wrong dimensions error
0.8.29,no clusters warning
0.8.29,def test_hdbscan_membership_vector():
0.8.29,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.29,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.29,assert_array_almost_equal(
0.8.29,"vector,"
0.8.29,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.29,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.29,assert_array_almost_equal(
0.8.29,"vector,"
0.8.29,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.29,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.29,assert_array_almost_equal(
0.8.29,"vector,"
0.8.29,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.29,
0.8.29,def test_hdbscan_all_points_membership_vectors():
0.8.29,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.29,vects = all_points_membership_vectors(clusterer)
0.8.29,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.29,"2.52734246e-001,"
0.8.29,8.38299608e-002]))
0.8.29,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.29,"8.35882503e-002,"
0.8.29,1.07356406e-001]))
0.8.29,without epsilon we should see many noise points as children of root.
0.8.29,for this random seed an epsilon of 0.2 will produce exactly 2 noise
0.8.29,points at that cut in single linkage.
0.8.29,Disable for now -- need to refactor to meet newer standards
0.8.29,Probably not applicable now #
0.8.29,def test_dbscan_sparse():
0.8.29,def test_dbscan_balltree():
0.8.29,def test_pickle():
0.8.29,def test_dbscan_core_samples_toy():
0.8.29,def test_boundaries():
0.8.29,"Given negative, zero and positive denominator and positive numerator"
0.8.29,Make sure safe division is always positive and doesn't raise ZeroDivision error
0.8.29,Ignore future warnings thrown by sklearn
0.8.29,Create a nice dataset with 6 circular clusters and 2 moons
0.8.29,"Given, the base HDBSCAN with method 'eom'"
0.8.29,"When we ask for flat clustering with same n_clusters,"
0.8.29,"Then, the labels and probabilities should match"
0.8.29,"Given, the base HDBSCAN with method 'leaf'"
0.8.29,"When we ask for flat clustering with same n_clusters,"
0.8.29,"Then, the labels and probabilities should match"
0.8.29,Method 'eom'...
0.8.29,"Given, a flat clustering for required n_clusters,"
0.8.29,"When we run the base HDBSCAN using it's epsilon,"
0.8.29,"Then, the labels and probabilities should match"
0.8.29,Method 'leaf'...
0.8.29,"Given, a flat clustering for required n_clusters,"
0.8.29,"When we run the base HDBSCAN using it's epsilon,"
0.8.29,"Then, the labels and probabilities should match"
0.8.29,"Given the max number of clusters that can be produced by 'eom',"
0.8.29,(these are produced for epsilon=0) (??? Needs verification)
0.8.29,"When we try flat clustering with 'eom' method for more n_clusters,"
0.8.29,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.29,"the resulting clusterer switches to using method 'leaf',"
0.8.29,and the resulting probabilities and labels must match
0.8.29,"Given the base HDBSCAN trained on some data,"
0.8.29,"When using approximate_predict_flat without specifying n_clusters,"
0.8.29,"Then, the clustering should match that due to approximate_predict,"
0.8.29,"Given a flat clustering trained for some n_clusters,"
0.8.29,"When using approximate_predict_flat without specifying n_clusters,"
0.8.29,"Then, the number of clusters produced must match the original n_clusters"
0.8.29,and all probabilities are <= 1.
0.8.29,"Given a flat clustering trained for some n_clusters,"
0.8.29,"When using approximate_predict_flat with specified n_clusters,"
0.8.29,"Then, the requested number of clusters must be produced"
0.8.29,and all probabilities are <= 1.
0.8.29,When using approximate_predict_flat with more clusters
0.8.29,"than 'eom' can handle,"
0.8.29,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.29,But the requested number of clusters must still be produced using 'leaf'
0.8.29,and all probabilities are <= 1.
0.8.29,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.29,"When membership_vector_flat is called with new data,"
0.8.29,"Then the number of clusters in memberships matches those of clusterer,"
0.8.29,and the number of points should equal those in the test set
0.8.29,and all probabilities are <= 1.
0.8.29,========================================
0.8.29,"Given a flat clustering for a specified n_clusters,"
0.8.29,"When membership_vector_flat is called with new data,"
0.8.29,"Then the number of clusters in memberships matches those of clusterer,"
0.8.29,and the number of points should equal those in the test set
0.8.29,and all probabilities are <= 1.
0.8.29,Ignore user warnings in this function
0.8.29,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.29,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.29,"Then the number of clusters in memberships should be as requested,"
0.8.29,and the number of points should equal those in the test set
0.8.29,and all probabilities are <= 1.
0.8.29,========================================
0.8.29,"Given a flat clustering for a specified n_clusters,"
0.8.29,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.29,"Then the number of clusters in memberships should be as requested,"
0.8.29,and the number of points should equal those in the test set
0.8.29,and all probabilities are <= 1.
0.8.29,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.29,"When all_points_membership_vectors_flat is called,"
0.8.29,"Then the number of clusters in memberships matches those of clusterer,"
0.8.29,and the number of points should equal those in the training set
0.8.29,and all probabilities are <= 1.
0.8.29,========================================
0.8.29,"Given a flat clustering for a specified n_clusters,"
0.8.29,"When all_points_membership_vectors_flat is called,"
0.8.29,"Then the number of clusters in memberships matches those of clusterer,"
0.8.29,and the number of points should equal those in the training set
0.8.29,and all probabilities are <= 1.
0.8.29,Ignore user warnings in this function
0.8.29,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.29,"When all_points_membership_vectors_flat is called for some n_clusters,"
0.8.29,"Then the number of clusters in memberships should be as requested,"
0.8.29,and the number of points should equal those in the training set
0.8.29,and all probabilities are <= 1.
0.8.29,========================================
0.8.29,"Given a flat clustering for a specified n_clusters,"
0.8.29,"When membership_vector_flat is called for some n_clusters,"
0.8.29,"Then the number of clusters in memberships should be as requested,"
0.8.29,and the number of points should equal those in the training set
0.8.29,and all probabilities are <= 1.
0.8.29,Generate datasets. We choose the size big enough to see the scalability
0.8.29,"of the algorithms, but not too big to avoid too long running times"
0.8.29,normalize dataset for easier parameter selection
0.8.29,estimate bandwidth for mean shift
0.8.29,connectivity matrix for structured Ward
0.8.29,make connectivity symmetric
0.8.29,create clustering estimators
0.8.29,predict cluster memberships
0.8.29,plot
0.8.29,-*- coding: utf-8 -*-
0.8.29,#############################################################################
0.8.29,Generate sample data
0.8.29,#############################################################################
0.8.29,Compute DBSCAN
0.8.29,"Number of clusters in labels, ignoring noise if present."
0.8.29,#############################################################################
0.8.29,Plot result
0.8.29,Black removed and is used for noise instead.
0.8.29,Black used for noise.
0.8.29,Black used for noise.
0.8.29,-*- coding: utf-8 -*-
0.8.29,
0.8.29,"hdbscan documentation build configuration file, created by"
0.8.29,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.29,
0.8.29,This file is execfile()d with the current directory set to its
0.8.29,containing dir.
0.8.29,
0.8.29,Note that not all possible configuration values are present in this
0.8.29,autogenerated file.
0.8.29,
0.8.29,All configuration values have a default; values that are commented out
0.8.29,serve to show the default.
0.8.29,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.29,add these directories to sys.path here. If the directory is relative to the
0.8.29,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.29,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.29,"sys.path.insert(0, os.path.abspath('../'))"
0.8.29,-- General configuration ------------------------------------------------
0.8.29,"If your documentation needs a minimal Sphinx version, state it here."
0.8.29,needs_sphinx = '1.0'
0.8.29,"Add any Sphinx extension module names here, as strings. They can be"
0.8.29,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.29,ones.
0.8.29,"'sphinx.ext.napoleon',"
0.8.29,'numpy_ext.numpydoc'
0.8.29,napoleon_google_docstring = False
0.8.29,napoleon_numpy_docstring = True
0.8.29,"Add any paths that contain templates here, relative to this directory."
0.8.29,The suffix(es) of source filenames.
0.8.29,You can specify multiple suffix as a list of string:
0.8.29,"source_suffix = ['.rst', '.md']"
0.8.29,The encoding of source files.
0.8.29,source_encoding = 'utf-8-sig'
0.8.29,The master toctree document.
0.8.29,General information about the project.
0.8.29,"The version info for the project you're documenting, acts as replacement for"
0.8.29,"|version| and |release|, also used in various other places throughout the"
0.8.29,built documents.
0.8.29,
0.8.29,The short X.Y version.
0.8.29,"The full version, including alpha/beta/rc tags."
0.8.29,The language for content autogenerated by Sphinx. Refer to documentation
0.8.29,for a list of supported languages.
0.8.29,
0.8.29,This is also used if you do content translation via gettext catalogs.
0.8.29,"Usually you set ""language"" from the command line for these cases."
0.8.29,"There are two options for replacing |today|: either, you set today to some"
0.8.29,"non-false value, then it is used:"
0.8.29,today = ''
0.8.29,"Else, today_fmt is used as the format for a strftime call."
0.8.29,"today_fmt = '%B %d, %Y'"
0.8.29,"List of patterns, relative to source directory, that match files and"
0.8.29,directories to ignore when looking for source files.
0.8.29,The reST default role (used for this markup: `text`) to use for all
0.8.29,documents.
0.8.29,default_role = None
0.8.29,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.29,add_function_parentheses = True
0.8.29,"If true, the current module name will be prepended to all description"
0.8.29,unit titles (such as .. function::).
0.8.29,add_module_names = True
0.8.29,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.29,output. They are ignored by default.
0.8.29,show_authors = False
0.8.29,The name of the Pygments (syntax highlighting) style to use.
0.8.29,A list of ignored prefixes for module index sorting.
0.8.29,modindex_common_prefix = []
0.8.29,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.29,keep_warnings = False
0.8.29,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.29,-- Options for HTML output ----------------------------------------------
0.8.29,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.29,a list of builtin themes.
0.8.29,html_theme = 'alabaster'
0.8.29,Theme options are theme-specific and customize the look and feel of a theme
0.8.29,"further.  For a list of options available for each theme, see the"
0.8.29,documentation.
0.8.29,html_theme_options = {}
0.8.29,"Add any paths that contain custom themes here, relative to this directory."
0.8.29,html_theme_path = []
0.8.29,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.29,"""<project> v<release> documentation""."
0.8.29,html_title = None
0.8.29,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.29,html_short_title = None
0.8.29,The name of an image file (relative to this directory) to place at the top
0.8.29,of the sidebar.
0.8.29,html_logo = None
0.8.29,The name of an image file (within the static path) to use as favicon of the
0.8.29,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.29,pixels large.
0.8.29,html_favicon = None
0.8.29,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.29,"relative to this directory. They are copied after the builtin static files,"
0.8.29,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.29,Add any extra paths that contain custom files (such as robots.txt or
0.8.29,".htaccess) here, relative to this directory. These files are copied"
0.8.29,directly to the root of the documentation.
0.8.29,html_extra_path = []
0.8.29,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.29,using the given strftime format.
0.8.29,"html_last_updated_fmt = '%b %d, %Y'"
0.8.29,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.29,typographically correct entities.
0.8.29,html_use_smartypants = True
0.8.29,"Custom sidebar templates, maps document names to template names."
0.8.29,html_sidebars = {}
0.8.29,"Additional templates that should be rendered to pages, maps page names to"
0.8.29,template names.
0.8.29,html_additional_pages = {}
0.8.29,"If false, no module index is generated."
0.8.29,html_domain_indices = True
0.8.29,"If false, no index is generated."
0.8.29,html_use_index = True
0.8.29,"If true, the index is split into individual pages for each letter."
0.8.29,html_split_index = False
0.8.29,"If true, links to the reST sources are added to the pages."
0.8.29,html_show_sourcelink = True
0.8.29,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.29,html_show_sphinx = True
0.8.29,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.29,html_show_copyright = True
0.8.29,"If true, an OpenSearch description file will be output, and all pages will"
0.8.29,contain a <link> tag referring to it.  The value of this option must be the
0.8.29,base URL from which the finished HTML is served.
0.8.29,html_use_opensearch = ''
0.8.29,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.29,html_file_suffix = None
0.8.29,Language to be used for generating the HTML full-text search index.
0.8.29,Sphinx supports the following languages:
0.8.29,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.29,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.29,html_search_language = 'en'
0.8.29,"A dictionary with options for the search language support, empty by default."
0.8.29,Now only 'ja' uses this config value
0.8.29,html_search_options = {'type': 'default'}
0.8.29,The name of a javascript file (relative to the configuration directory) that
0.8.29,"implements a search results scorer. If empty, the default will be used."
0.8.29,html_search_scorer = 'scorer.js'
0.8.29,Output file base name for HTML help builder.
0.8.29,-- Options for LaTeX output ---------------------------------------------
0.8.29,The paper size ('letterpaper' or 'a4paper').
0.8.29,"'papersize': 'letterpaper',"
0.8.29,"The font size ('10pt', '11pt' or '12pt')."
0.8.29,"'pointsize': '10pt',"
0.8.29,Additional stuff for the LaTeX preamble.
0.8.29,"'preamble': '',"
0.8.29,Latex figure (float) alignment
0.8.29,"'figure_align': 'htbp',"
0.8.29,Grouping the document tree into LaTeX files. List of tuples
0.8.29,"(source start file, target name, title,"
0.8.29,"author, documentclass [howto, manual, or own class])."
0.8.29,The name of an image file (relative to this directory) to place at the top of
0.8.29,the title page.
0.8.29,latex_logo = None
0.8.29,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.29,not chapters.
0.8.29,latex_use_parts = False
0.8.29,"If true, show page references after internal links."
0.8.29,latex_show_pagerefs = False
0.8.29,"If true, show URL addresses after external links."
0.8.29,latex_show_urls = False
0.8.29,Documents to append as an appendix to all manuals.
0.8.29,latex_appendices = []
0.8.29,"If false, no module index is generated."
0.8.29,latex_domain_indices = True
0.8.29,-- Options for manual page output ---------------------------------------
0.8.29,One entry per manual page. List of tuples
0.8.29,"(source start file, name, description, authors, manual section)."
0.8.29,"If true, show URL addresses after external links."
0.8.29,man_show_urls = False
0.8.29,-- Options for Texinfo output -------------------------------------------
0.8.29,Grouping the document tree into Texinfo files. List of tuples
0.8.29,"(source start file, target name, title, author,"
0.8.29,"dir menu entry, description, category)"
0.8.29,Documents to append as an appendix to all manuals.
0.8.29,texinfo_appendices = []
0.8.29,"If false, no module index is generated."
0.8.29,texinfo_domain_indices = True
0.8.29,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.29,texinfo_show_urls = 'footnote'
0.8.29,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.29,texinfo_no_detailmenu = False
0.8.29,-- Options for Epub output ----------------------------------------------
0.8.29,Bibliographic Dublin Core info.
0.8.29,The basename for the epub file. It defaults to the project name.
0.8.29,epub_basename = project
0.8.29,The HTML theme for the epub output. Since the default themes are not
0.8.29,"optimized for small screen space, using the same theme for HTML and epub"
0.8.29,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.29,visual space.
0.8.29,epub_theme = 'epub'
0.8.29,The language of the text. It defaults to the language option
0.8.29,or 'en' if the language is not set.
0.8.29,epub_language = ''
0.8.29,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.29,epub_scheme = ''
0.8.29,The unique identifier of the text. This can be a ISBN number
0.8.29,or the project homepage.
0.8.29,epub_identifier = ''
0.8.29,A unique identification for the text.
0.8.29,epub_uid = ''
0.8.29,A tuple containing the cover image and cover page html template filenames.
0.8.29,epub_cover = ()
0.8.29,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.29,epub_guide = ()
0.8.29,HTML files that should be inserted before the pages created by sphinx.
0.8.29,The format is a list of tuples containing the path and title.
0.8.29,epub_pre_files = []
0.8.29,HTML files that should be inserted after the pages created by sphinx.
0.8.29,The format is a list of tuples containing the path and title.
0.8.29,epub_post_files = []
0.8.29,A list of files that should not be packed into the epub file.
0.8.29,The depth of the table of contents in toc.ncx.
0.8.29,epub_tocdepth = 3
0.8.29,Allow duplicate toc entries.
0.8.29,epub_tocdup = True
0.8.29,Choose between 'default' and 'includehidden'.
0.8.29,epub_tocscope = 'default'
0.8.29,Fix unsupported image types using the Pillow.
0.8.29,epub_fix_images = False
0.8.29,Scale large images.
0.8.29,epub_max_image_width = 0
0.8.29,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.29,epub_show_urls = 'inline'
0.8.29,"If false, no index is generated."
0.8.29,epub_use_index = True
0.8.28.wheels,"Import numpy here, only when headers are needed"
0.8.28.wheels,Add numpy headers to include_dirs
0.8.28.wheels,Call original build_ext command
0.8.28.wheels,The dependencies are the same as the contents of requirements.txt
0.8.28.wheels,"A little ""fancy"" we select from the flattened array reshape back"
0.8.28.wheels,(Fortran format to get indexing right) and take the product to do an and
0.8.28.wheels,then convert back to boolean type.
0.8.28.wheels,Density sparseness is not well defined if there are no
0.8.28.wheels,internal edges (as per the referenced paper). However
0.8.28.wheels,MATLAB code from the original authors simply selects the
0.8.28.wheels,largest of *all* the edges in the case that there are
0.8.28.wheels,"no internal edges, so we do the same here"
0.8.28.wheels,"If there are any internal edges, then subselect them out"
0.8.28.wheels,If there are no internal edges then we want to take the
0.8.28.wheels,"max over all the edges that exist in the MST, so we simply"
0.8.28.wheels,do nothing and return all the edges in the MST.
0.8.28.wheels,-*- coding: utf-8 -*-
0.8.28.wheels,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.28.wheels,Steve Astels <sastels@gmail.com>
0.8.28.wheels,John Healy <jchealy@gmail.com>
0.8.28.wheels,
0.8.28.wheels,License: BSD 3 clause
0.8.28.wheels,"Treating this case explicitly, instead of letting"
0.8.28.wheels,"sklearn.metrics.pairwise_distances handle it,"
0.8.28.wheels,enables the usage of numpy.inf in the distance
0.8.28.wheels,matrix to indicate missing distance information.
0.8.28.wheels,TODO: Check if copying is necessary
0.8.28.wheels,raise TypeError('Sparse distance matrices not yet supported')
0.8.28.wheels,Warn if the MST couldn't be constructed around the missing distances
0.8.28.wheels,mst_linkage_core does not generate a full minimal spanning tree
0.8.28.wheels,If a tree is required then we must build the edges from the information
0.8.28.wheels,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.28.wheels,Sort edges of the min_spanning_tree by weight
0.8.28.wheels,Convert edge list into standard hierarchical clustering format
0.8.28.wheels,Check for connected component on X
0.8.28.wheels,Compute sparse mutual reachability graph
0.8.28.wheels,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.28.wheels,Check connected component on mutual reachability
0.8.28.wheels,"If more than one component, it means that even if the distance matrix X"
0.8.28.wheels,"has one component, there exists with less than `min_samples` neighbors"
0.8.28.wheels,Compute the minimum spanning tree for the sparse graph
0.8.28.wheels,Convert the graph to scipy cluster array format
0.8.28.wheels,Sort edges of the min_spanning_tree by weight
0.8.28.wheels,Convert edge list into standard hierarchical clustering format
0.8.28.wheels,The Cython routines used require contiguous arrays
0.8.28.wheels,TO DO: Deal with p for minkowski appropriately
0.8.28.wheels,Get distance to kth nearest neighbour
0.8.28.wheels,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.28.wheels,Sort edges of the min_spanning_tree by weight
0.8.28.wheels,Convert edge list into standard hierarchical clustering format
0.8.28.wheels,The Cython routines used require contiguous arrays
0.8.28.wheels,Get distance to kth nearest neighbour
0.8.28.wheels,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.28.wheels,Sort edges of the min_spanning_tree by weight
0.8.28.wheels,Convert edge list into standard hierarchical clustering format
0.8.28.wheels,Sort edges of the min_spanning_tree by weight
0.8.28.wheels,Convert edge list into standard hierarchical clustering format
0.8.28.wheels,Sort edges of the min_spanning_tree by weight
0.8.28.wheels,Convert edge list into standard hierarchical clustering format
0.8.28.wheels,Checks input and converts to an nd-array where possible
0.8.28.wheels,"Only non-sparse, precomputed distance matrices are handled here"
0.8.28.wheels,and thereby allowed to contain numpy.inf for missing distances
0.8.28.wheels,Python 2 and 3 compliant string_type checking
0.8.28.wheels,We can't do much with sparse matrices ...
0.8.28.wheels,TO DO: Need heuristic to decide when to go to boruvka;
0.8.28.wheels,still debugging for now
0.8.28.wheels,TO DO: Need heuristic to decide when to go to boruvka;
0.8.28.wheels,still debugging for now
0.8.28.wheels,Inherits from sklearn
0.8.28.wheels,Non-precomputed matrices may contain non-finite values.
0.8.28.wheels,Rows with these values
0.8.28.wheels,Pass only the purely finite indices into hdbscan
0.8.28.wheels,We will later assign all non-finite points to the background -1 cluster
0.8.28.wheels,Handle sparse precomputed distance matrices separately
0.8.28.wheels,"Only non-sparse, precomputed distance matrices are allowed"
0.8.28.wheels,to have numpy.inf values indicating missing distances
0.8.28.wheels,"prediction data only applies to the persistent model, so remove"
0.8.28.wheels,it from the keyword args we pass on the the function
0.8.28.wheels,remap indices to align with original data in the case of non-finite entries.
0.8.28.wheels,"Unltimately, for each Ci, we only require the"
0.8.28.wheels,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.28.wheels,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.28.wheels,density separation 'with respect to' Ci.
0.8.28.wheels,If exactly one of the points is noise
0.8.28.wheels,Set the density sparseness of the cluster
0.8.28.wheels,to the sparsest value seen so far.
0.8.28.wheels,Check whether density separations with
0.8.28.wheels,respect to each of these clusters can
0.8.28.wheels,be reduced.
0.8.28.wheels,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.28.wheels,This only makes sense if num_clusters = 1 since it has turned out
0.8.28.wheels,that the MR-MST has no edges between a noise point and a core point.
0.8.28.wheels,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.28.wheels,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.28.wheels,MR-MST might contain an edge with one point in Cj and ther other one
0.8.28.wheels,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.28.wheels,another large enough value.
0.8.28.wheels,
0.8.28.wheels,TODO: Think of a better yet efficient way to handle this.
0.8.28.wheels,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
0.8.28.wheels,Use a previously initialized/trained HDBSCAN
0.8.28.wheels,Handle the trivial case first.
0.8.28.wheels,Always generate prediction_data to avoid later woes
0.8.28.wheels,This will later be chosen according to n_clusters
0.8.28.wheels,Initialize and train clusterer if one was not previously supplied.
0.8.28.wheels,Always generate prediction data
0.8.28.wheels,We do not pass cluster_selection_epsilon here.
0.8.28.wheels,"While this adds unnecessary computation, it makes the code"
0.8.28.wheels,easier to read and debug.
0.8.28.wheels,"Train on 'X'. Do this even if the supplied clusterer was trained,"
0.8.28.wheels,because we want to make sure it fits 'X'.
0.8.28.wheels,"Pick an epsilon value right after a split produces n_clusters,"
0.8.28.wheels,and the don't split further for smaller epsilon (larger lambda)
0.8.28.wheels,Or use the specified cluster_selection_epsilon
0.8.28.wheels,"Extract tree related stuff, in order to re-assign labels"
0.8.28.wheels,Get labels according to the required cluster_selection_epsilon
0.8.28.wheels,Reflect the related changes in HDBSCAN.
0.8.28.wheels,PredictionData attached to HDBSCAN should also change.
0.8.28.wheels,A function re_init is defined in this module to handle this.
0.8.28.wheels,"From a fitted HDBSCAN model, predict for n_clusters=5"
0.8.28.wheels,Store prediciton data for later use.
0.8.28.wheels,and use this prediction data to predict on new points
0.8.28.wheels,Get number of fitted clusters for later use.
0.8.28.wheels,We'll need the condensed tree later...
0.8.28.wheels,"If none of the three arguments: prediction_data, n_clusters,"
0.8.28.wheels,"and cluster_selection_epsilon are supplied,"
0.8.28.wheels,then use clusterer's prediciton data directly
0.8.28.wheels,"If either of n_clusters or cluster_selection_epsilon were supplied,"
0.8.28.wheels,then build prediction data from these by modifying clusterer's
0.8.28.wheels,Get prediction data from clusterer
0.8.28.wheels,Modify prediction_data to reflect new n_clusters
0.8.28.wheels,"First, make a copy of prediction data to avoid modifying source"
0.8.28.wheels,Cluster selection method is hold by condensed_tree.
0.8.28.wheels,Change from 'eom' to 'leaf' if n_clusters is too large.
0.8.28.wheels,This change does not affect the tree associated with 'clusterer'
0.8.28.wheels,Re-initialize prediction_data for the specified n_clusters or epsilon
0.8.28.wheels,============================================================
0.8.28.wheels,Now we're ready to use prediction_data
0.8.28.wheels,"The rest of the code is copied from HDBSCAN's approximate_predict,"
0.8.28.wheels,but modified to use prediction_data instead of clusterer's attribute
0.8.28.wheels,Extract condensed tree for later use
0.8.28.wheels,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.28.wheels,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.28.wheels,Use the same prediction_data as clusterer's
0.8.28.wheels,Compute cluster_selection_epsilon so that a flat clustering
0.8.28.wheels,produces a specified number of n_clusters
0.8.28.wheels,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.28.wheels,Create another instance of prediction_data that is consistent
0.8.28.wheels,with the selected value of epsilon.
0.8.28.wheels,Flat clustering from prediction data
0.8.28.wheels,Initialize probabilities
0.8.28.wheels,k-NN for prediciton points to training set
0.8.28.wheels,Loop over prediction points to compute probabilities
0.8.28.wheels,We need to find where in the tree the new point would go
0.8.28.wheels,for the purposes of outlier membership approximation
0.8.28.wheels,"Find row in tree where nearest neighbor drops out,"
0.8.28.wheels,so we can get a lambda value for the nearest neighbor
0.8.28.wheels,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
0.8.28.wheels,"Equivalently, this assigns core distance for prediction point as"
0.8.28.wheels,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
0.8.28.wheels,Probabilities based on distance to closest exemplar in each cluster:
0.8.28.wheels,Use new prediction_data that points to exemplars that are specific
0.8.28.wheels,to the choice of n_clusters
0.8.28.wheels,Probabilities based on how long the nearest exemplar persists in
0.8.28.wheels,each cluster (with respect to most persistent exemplar)
0.8.28.wheels,Use new clusters that are defined by the choice of n_clusters.
0.8.28.wheels,Merge the two probabilities to produce a single set of probabilities
0.8.28.wheels,Include probability that the nearest neighbor belongs to a cluster
0.8.28.wheels,Rename variable so it's easy to understand what's being returned
0.8.28.wheels,Extract condensed tree for later use
0.8.28.wheels,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.28.wheels,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.28.wheels,Use the same prediction_data as clusterer's
0.8.28.wheels,Compute cluster_selection_epsilon so that a flat clustering
0.8.28.wheels,produces a specified number of n_clusters
0.8.28.wheels,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.28.wheels,Create another instance of prediction_data that is consistent
0.8.28.wheels,with the selected value of epsilon.
0.8.28.wheels,Flat clustering at the chosen epsilon from prediction_data
0.8.28.wheels,"When no clusters found, return array of 0's"
0.8.28.wheels,Probabilities based on distance to closest exemplar in each cluster:
0.8.28.wheels,Use new prediction_data that points to exemplars that are specific
0.8.28.wheels,to the choice of n_clusters
0.8.28.wheels,Probabilities based on how long the point persists in
0.8.28.wheels,each cluster (with respect to most persistent exemplar)
0.8.28.wheels,Use new clusters that are defined by the choice of n_clusters.
0.8.28.wheels,Include probability that the point belongs to a cluster
0.8.28.wheels,Aggregate the three probabilities to produce membership vectors
0.8.28.wheels,Re-name variable to clarify what's being returned.
0.8.28.wheels,"With method 'eom', max clusters are produced for epsilon=0,"
0.8.28.wheels,as computed by
0.8.28.wheels,Increasing epsilon can only reduce the number of ouput clusters.
0.8.28.wheels,"To select epsilon, consider all values where clusters are split"
0.8.28.wheels,Subtract the extra e-12 to avoid numerical errors in comparison
0.8.28.wheels,"Then, we avoid splitting for all epsilon below this."
0.8.28.wheels,Use an epsilon value that produces the right number of clusters.
0.8.28.wheels,The condensed tree of HDBSCAN has this information.
0.8.28.wheels,Extract the lambda levels (=1/distance) from the condensed tree
0.8.28.wheels,We don't want values that produce a large cluster and
0.8.28.wheels,just one or two individual points.
0.8.28.wheels,Keep only those lambda values corresponding to cluster separation;
0.8.28.wheels,"i.e., with child_sizes > 1"
0.8.28.wheels,"Get the unique values, because when two clusters fall out of one,"
0.8.28.wheels,the entry with lambda is repeated.
0.8.28.wheels,lambda values are sorted by np.unique.
0.8.28.wheels,"Now, get epsilon (distance threshold) as 1/lambda"
0.8.28.wheels,"At this epsilon, n_clusters have been split."
0.8.28.wheels,Stop splits at epsilons smaller than this.
0.8.28.wheels,"To allow for numerical errors,"
0.8.28.wheels,predData must be a pre-trained PredictionData instance from hdbscan
0.8.28.wheels,"If n_clusters is specified, compute cluster_selection_epsilon;"
0.8.28.wheels,This is the key modification:
0.8.28.wheels,Select clusters according to selection method and epsilon.
0.8.28.wheels,_new_select_clusters is a modification of get_clusters
0.8.28.wheels,from hdbscan._hdbscan_tree
0.8.28.wheels,"raw tree, used later to get exemplars and lambda values"
0.8.28.wheels,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
0.8.28.wheels,to the cluster labels produced as output
0.8.28.wheels,Re-compute lambdas and exemplars for selected clusters;
0.8.28.wheels,max_lambda <=> smallest distance <=> most persistent point(s)
0.8.28.wheels,Map all sub-clusters of selected cluster to the selected cluster's
0.8.28.wheels,label in output.
0.8.28.wheels,Map lambdas too...
0.8.28.wheels,Create set of exemplar points for later use.
0.8.28.wheels,Novel points are assigned based on cluster of closest exemplar.
0.8.28.wheels,"For each selected cluster, get all of its leaves,"
0.8.28.wheels,"and leaves of leaves, and so on..."
0.8.28.wheels,Largest lambda => Most persistent points
0.8.28.wheels,Get the most persistent points
0.8.28.wheels,Add most persistent points as exemplars
0.8.28.wheels,Add exemplars for each leaf of each selected cluster.
0.8.28.wheels,(exclude root)
0.8.28.wheels,-*- coding: utf-8 -*-
0.8.28.wheels,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.28.wheels,
0.8.28.wheels,License: BSD 3 clause
0.8.28.wheels,"Return the only cluster, the root"
0.8.28.wheels,We want to get the x and y coordinates for the start of each cluster
0.8.28.wheels,"Initialize the leaves, since we know where they go, the iterate"
0.8.28.wheels,"through everything from the leaves back, setting coords as we go"
0.8.28.wheels,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.28.wheels,bottoms and widths for each rectangle. We can go through each cluster
0.8.28.wheels,and do this for each in turn.
0.8.28.wheels,Ensure we don't try to take log of zero
0.8.28.wheels,Finally we need the horizontal lines that occur at cluster splits.
0.8.28.wheels,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.28.wheels,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.28.wheels,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.28.wheels,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.28.wheels,the chosen clusters.
0.8.28.wheels,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.28.wheels,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.28.wheels,based on the percentile should alleviate the impact on plotting.
0.8.28.wheels,Set center and height to default values if necessary
0.8.28.wheels,Ensure the ellipse is visible
0.8.28.wheels,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.28.wheels,Use PCA to get down to 32 dimension
0.8.28.wheels,-*- coding: utf-8 -*-
0.8.28.wheels,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.28.wheels,
0.8.28.wheels,License: BSD 3 clause
0.8.28.wheels,The Cython routines used require contiguous arrays
0.8.28.wheels,The Cython routines used require contiguous arrays
0.8.28.wheels,We can't do much with sparse matrices ...
0.8.28.wheels,Need heuristic to decide when to go to boruvka;
0.8.28.wheels,still debugging for now
0.8.28.wheels,Need heuristic to decide when to go to boruvka;
0.8.28.wheels,still debugging for now
0.8.28.wheels,Support various prediction methods for predicting cluster membership
0.8.28.wheels,of new or unseen points. There are several ways to interpret how
0.8.28.wheels,"to do this correctly, so we provide several methods for"
0.8.28.wheels,the different use cases that may arise.
0.8.28.wheels,raw_condensed_tree = condensed_tree.to_numpy()
0.8.28.wheels,New point departs with the old
0.8.28.wheels,Find appropriate cluster based on lambda of new point
0.8.28.wheels,Find appropriate cluster based on lambda of new point
0.8.28.wheels,"the point is in the dataset, fix lambda for rounding errors"
0.8.28.wheels,We need to find where in the tree the new point would go
0.8.28.wheels,for the purposes of outlier membership approximation
0.8.28.wheels,"When no clusters found, return array of 0's"
0.8.28.wheels,import pickle
0.8.28.wheels,from sklearn.cluster.tests.common import generate_clustered_data
0.8.28.wheels,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.28.wheels,"number of clusters, ignoring noise if present"
0.8.28.wheels,"metric is the function reference, not the string key."
0.8.28.wheels,def test_rsl_unavailable_hierarchy():
0.8.28.wheels,clusterer = RobustSingleLinkage()
0.8.28.wheels,with warnings.catch_warnings(record=True) as w:
0.8.28.wheels,tree = clusterer.cluster_hierarchy_
0.8.28.wheels,assert len(w) > 0
0.8.28.wheels,assert tree is None
0.8.28.wheels,"H, y = shuffle(X, y, random_state=7)"
0.8.28.wheels,Disable for now -- need to refactor to meet newer standards
0.8.28.wheels,from sklearn.cluster.tests.common import generate_clustered_data
0.8.28.wheels,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.28.wheels,this fails if no $DISPLAY specified
0.8.28.wheels,"number of clusters, ignoring noise if present"
0.8.28.wheels,"number of clusters, ignoring noise if present"
0.8.28.wheels,"H, y = shuffle(X, y, random_state=7)"
0.8.28.wheels,"metric is the function reference, not the string key."
0.8.28.wheels,def test_hdbscan_unavailable_attributes():
0.8.28.wheels,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.28.wheels,with warnings.catch_warnings(record=True) as w:
0.8.28.wheels,tree = clusterer.condensed_tree_
0.8.28.wheels,assert len(w) > 0
0.8.28.wheels,assert tree is None
0.8.28.wheels,with warnings.catch_warnings(record=True) as w:
0.8.28.wheels,tree = clusterer.single_linkage_tree_
0.8.28.wheels,assert len(w) > 0
0.8.28.wheels,assert tree is None
0.8.28.wheels,with warnings.catch_warnings(record=True) as w:
0.8.28.wheels,scores = clusterer.outlier_scores_
0.8.28.wheels,assert len(w) > 0
0.8.28.wheels,assert scores is None
0.8.28.wheels,with warnings.catch_warnings(record=True) as w:
0.8.28.wheels,tree = clusterer.minimum_spanning_tree_
0.8.28.wheels,assert len(w) > 0
0.8.28.wheels,assert tree is None
0.8.28.wheels,def test_hdbscan_min_span_tree_availability():
0.8.28.wheels,clusterer = HDBSCAN().fit(X)
0.8.28.wheels,tree = clusterer.minimum_spanning_tree_
0.8.28.wheels,assert tree is None
0.8.28.wheels,D = distance.squareform(distance.pdist(X))
0.8.28.wheels,D /= np.max(D)
0.8.28.wheels,HDBSCAN(metric='precomputed').fit(D)
0.8.28.wheels,tree = clusterer.minimum_spanning_tree_
0.8.28.wheels,assert tree is None
0.8.28.wheels,no prediction data error
0.8.28.wheels,wrong dimensions error
0.8.28.wheels,no clusters warning
0.8.28.wheels,def test_hdbscan_membership_vector():
0.8.28.wheels,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.28.wheels,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.28.wheels,assert_array_almost_equal(
0.8.28.wheels,"vector,"
0.8.28.wheels,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.28.wheels,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.28.wheels,assert_array_almost_equal(
0.8.28.wheels,"vector,"
0.8.28.wheels,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.28.wheels,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.28.wheels,assert_array_almost_equal(
0.8.28.wheels,"vector,"
0.8.28.wheels,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.28.wheels,
0.8.28.wheels,def test_hdbscan_all_points_membership_vectors():
0.8.28.wheels,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.28.wheels,vects = all_points_membership_vectors(clusterer)
0.8.28.wheels,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.28.wheels,"2.52734246e-001,"
0.8.28.wheels,8.38299608e-002]))
0.8.28.wheels,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.28.wheels,"8.35882503e-002,"
0.8.28.wheels,1.07356406e-001]))
0.8.28.wheels,without epsilon we should see many noise points as children of root.
0.8.28.wheels,for this random seed an epsilon of 0.2 will produce exactly 2 noise
0.8.28.wheels,points at that cut in single linkage.
0.8.28.wheels,Disable for now -- need to refactor to meet newer standards
0.8.28.wheels,Probably not applicable now #
0.8.28.wheels,def test_dbscan_sparse():
0.8.28.wheels,def test_dbscan_balltree():
0.8.28.wheels,def test_pickle():
0.8.28.wheels,def test_dbscan_core_samples_toy():
0.8.28.wheels,def test_boundaries():
0.8.28.wheels,"Given negative, zero and positive denominator and positive numerator"
0.8.28.wheels,Make sure safe division is always positive and doesn't raise ZeroDivision error
0.8.28.wheels,Ignore future warnings thrown by sklearn
0.8.28.wheels,Create a nice dataset with 6 circular clusters and 2 moons
0.8.28.wheels,"Given, the base HDBSCAN with method 'eom'"
0.8.28.wheels,"When we ask for flat clustering with same n_clusters,"
0.8.28.wheels,"Then, the labels and probabilities should match"
0.8.28.wheels,"Given, the base HDBSCAN with method 'leaf'"
0.8.28.wheels,"When we ask for flat clustering with same n_clusters,"
0.8.28.wheels,"Then, the labels and probabilities should match"
0.8.28.wheels,Method 'eom'...
0.8.28.wheels,"Given, a flat clustering for required n_clusters,"
0.8.28.wheels,"When we run the base HDBSCAN using it's epsilon,"
0.8.28.wheels,"Then, the labels and probabilities should match"
0.8.28.wheels,Method 'leaf'...
0.8.28.wheels,"Given, a flat clustering for required n_clusters,"
0.8.28.wheels,"When we run the base HDBSCAN using it's epsilon,"
0.8.28.wheels,"Then, the labels and probabilities should match"
0.8.28.wheels,"Given the max number of clusters that can be produced by 'eom',"
0.8.28.wheels,(these are produced for epsilon=0) (??? Needs verification)
0.8.28.wheels,"When we try flat clustering with 'eom' method for more n_clusters,"
0.8.28.wheels,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.28.wheels,"the resulting clusterer switches to using method 'leaf',"
0.8.28.wheels,and the resulting probabilities and labels must match
0.8.28.wheels,"Given the base HDBSCAN trained on some data,"
0.8.28.wheels,"When using approximate_predict_flat without specifying n_clusters,"
0.8.28.wheels,"Then, the clustering should match that due to approximate_predict,"
0.8.28.wheels,"Given a flat clustering trained for some n_clusters,"
0.8.28.wheels,"When using approximate_predict_flat without specifying n_clusters,"
0.8.28.wheels,"Then, the number of clusters produced must match the original n_clusters"
0.8.28.wheels,and all probabilities are <= 1.
0.8.28.wheels,"Given a flat clustering trained for some n_clusters,"
0.8.28.wheels,"When using approximate_predict_flat with specified n_clusters,"
0.8.28.wheels,"Then, the requested number of clusters must be produced"
0.8.28.wheels,and all probabilities are <= 1.
0.8.28.wheels,When using approximate_predict_flat with more clusters
0.8.28.wheels,"than 'eom' can handle,"
0.8.28.wheels,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.28.wheels,But the requested number of clusters must still be produced using 'leaf'
0.8.28.wheels,and all probabilities are <= 1.
0.8.28.wheels,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.28.wheels,"When membership_vector_flat is called with new data,"
0.8.28.wheels,"Then the number of clusters in memberships matches those of clusterer,"
0.8.28.wheels,and the number of points should equal those in the test set
0.8.28.wheels,and all probabilities are <= 1.
0.8.28.wheels,========================================
0.8.28.wheels,"Given a flat clustering for a specified n_clusters,"
0.8.28.wheels,"When membership_vector_flat is called with new data,"
0.8.28.wheels,"Then the number of clusters in memberships matches those of clusterer,"
0.8.28.wheels,and the number of points should equal those in the test set
0.8.28.wheels,and all probabilities are <= 1.
0.8.28.wheels,Ignore user warnings in this function
0.8.28.wheels,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.28.wheels,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.28.wheels,"Then the number of clusters in memberships should be as requested,"
0.8.28.wheels,and the number of points should equal those in the test set
0.8.28.wheels,and all probabilities are <= 1.
0.8.28.wheels,========================================
0.8.28.wheels,"Given a flat clustering for a specified n_clusters,"
0.8.28.wheels,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.28.wheels,"Then the number of clusters in memberships should be as requested,"
0.8.28.wheels,and the number of points should equal those in the test set
0.8.28.wheels,and all probabilities are <= 1.
0.8.28.wheels,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.28.wheels,"When all_points_membership_vectors_flat is called,"
0.8.28.wheels,"Then the number of clusters in memberships matches those of clusterer,"
0.8.28.wheels,and the number of points should equal those in the training set
0.8.28.wheels,and all probabilities are <= 1.
0.8.28.wheels,========================================
0.8.28.wheels,"Given a flat clustering for a specified n_clusters,"
0.8.28.wheels,"When all_points_membership_vectors_flat is called,"
0.8.28.wheels,"Then the number of clusters in memberships matches those of clusterer,"
0.8.28.wheels,and the number of points should equal those in the training set
0.8.28.wheels,and all probabilities are <= 1.
0.8.28.wheels,Ignore user warnings in this function
0.8.28.wheels,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.28.wheels,"When all_points_membership_vectors_flat is called for some n_clusters,"
0.8.28.wheels,"Then the number of clusters in memberships should be as requested,"
0.8.28.wheels,and the number of points should equal those in the training set
0.8.28.wheels,and all probabilities are <= 1.
0.8.28.wheels,========================================
0.8.28.wheels,"Given a flat clustering for a specified n_clusters,"
0.8.28.wheels,"When membership_vector_flat is called for some n_clusters,"
0.8.28.wheels,"Then the number of clusters in memberships should be as requested,"
0.8.28.wheels,and the number of points should equal those in the training set
0.8.28.wheels,and all probabilities are <= 1.
0.8.28.wheels,Generate datasets. We choose the size big enough to see the scalability
0.8.28.wheels,"of the algorithms, but not too big to avoid too long running times"
0.8.28.wheels,normalize dataset for easier parameter selection
0.8.28.wheels,estimate bandwidth for mean shift
0.8.28.wheels,connectivity matrix for structured Ward
0.8.28.wheels,make connectivity symmetric
0.8.28.wheels,create clustering estimators
0.8.28.wheels,predict cluster memberships
0.8.28.wheels,plot
0.8.28.wheels,-*- coding: utf-8 -*-
0.8.28.wheels,#############################################################################
0.8.28.wheels,Generate sample data
0.8.28.wheels,#############################################################################
0.8.28.wheels,Compute DBSCAN
0.8.28.wheels,"Number of clusters in labels, ignoring noise if present."
0.8.28.wheels,#############################################################################
0.8.28.wheels,Plot result
0.8.28.wheels,Black removed and is used for noise instead.
0.8.28.wheels,Black used for noise.
0.8.28.wheels,Black used for noise.
0.8.28.wheels,-*- coding: utf-8 -*-
0.8.28.wheels,
0.8.28.wheels,"hdbscan documentation build configuration file, created by"
0.8.28.wheels,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.28.wheels,
0.8.28.wheels,This file is execfile()d with the current directory set to its
0.8.28.wheels,containing dir.
0.8.28.wheels,
0.8.28.wheels,Note that not all possible configuration values are present in this
0.8.28.wheels,autogenerated file.
0.8.28.wheels,
0.8.28.wheels,All configuration values have a default; values that are commented out
0.8.28.wheels,serve to show the default.
0.8.28.wheels,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.28.wheels,add these directories to sys.path here. If the directory is relative to the
0.8.28.wheels,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.28.wheels,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.28.wheels,"sys.path.insert(0, os.path.abspath('../'))"
0.8.28.wheels,-- General configuration ------------------------------------------------
0.8.28.wheels,"If your documentation needs a minimal Sphinx version, state it here."
0.8.28.wheels,needs_sphinx = '1.0'
0.8.28.wheels,"Add any Sphinx extension module names here, as strings. They can be"
0.8.28.wheels,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.28.wheels,ones.
0.8.28.wheels,"'sphinx.ext.napoleon',"
0.8.28.wheels,'numpy_ext.numpydoc'
0.8.28.wheels,napoleon_google_docstring = False
0.8.28.wheels,napoleon_numpy_docstring = True
0.8.28.wheels,"Add any paths that contain templates here, relative to this directory."
0.8.28.wheels,The suffix(es) of source filenames.
0.8.28.wheels,You can specify multiple suffix as a list of string:
0.8.28.wheels,"source_suffix = ['.rst', '.md']"
0.8.28.wheels,The encoding of source files.
0.8.28.wheels,source_encoding = 'utf-8-sig'
0.8.28.wheels,The master toctree document.
0.8.28.wheels,General information about the project.
0.8.28.wheels,"The version info for the project you're documenting, acts as replacement for"
0.8.28.wheels,"|version| and |release|, also used in various other places throughout the"
0.8.28.wheels,built documents.
0.8.28.wheels,
0.8.28.wheels,The short X.Y version.
0.8.28.wheels,"The full version, including alpha/beta/rc tags."
0.8.28.wheels,The language for content autogenerated by Sphinx. Refer to documentation
0.8.28.wheels,for a list of supported languages.
0.8.28.wheels,
0.8.28.wheels,This is also used if you do content translation via gettext catalogs.
0.8.28.wheels,"Usually you set ""language"" from the command line for these cases."
0.8.28.wheels,"There are two options for replacing |today|: either, you set today to some"
0.8.28.wheels,"non-false value, then it is used:"
0.8.28.wheels,today = ''
0.8.28.wheels,"Else, today_fmt is used as the format for a strftime call."
0.8.28.wheels,"today_fmt = '%B %d, %Y'"
0.8.28.wheels,"List of patterns, relative to source directory, that match files and"
0.8.28.wheels,directories to ignore when looking for source files.
0.8.28.wheels,The reST default role (used for this markup: `text`) to use for all
0.8.28.wheels,documents.
0.8.28.wheels,default_role = None
0.8.28.wheels,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.28.wheels,add_function_parentheses = True
0.8.28.wheels,"If true, the current module name will be prepended to all description"
0.8.28.wheels,unit titles (such as .. function::).
0.8.28.wheels,add_module_names = True
0.8.28.wheels,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.28.wheels,output. They are ignored by default.
0.8.28.wheels,show_authors = False
0.8.28.wheels,The name of the Pygments (syntax highlighting) style to use.
0.8.28.wheels,A list of ignored prefixes for module index sorting.
0.8.28.wheels,modindex_common_prefix = []
0.8.28.wheels,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.28.wheels,keep_warnings = False
0.8.28.wheels,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.28.wheels,-- Options for HTML output ----------------------------------------------
0.8.28.wheels,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.28.wheels,a list of builtin themes.
0.8.28.wheels,html_theme = 'alabaster'
0.8.28.wheels,Theme options are theme-specific and customize the look and feel of a theme
0.8.28.wheels,"further.  For a list of options available for each theme, see the"
0.8.28.wheels,documentation.
0.8.28.wheels,html_theme_options = {}
0.8.28.wheels,"Add any paths that contain custom themes here, relative to this directory."
0.8.28.wheels,html_theme_path = []
0.8.28.wheels,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.28.wheels,"""<project> v<release> documentation""."
0.8.28.wheels,html_title = None
0.8.28.wheels,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.28.wheels,html_short_title = None
0.8.28.wheels,The name of an image file (relative to this directory) to place at the top
0.8.28.wheels,of the sidebar.
0.8.28.wheels,html_logo = None
0.8.28.wheels,The name of an image file (within the static path) to use as favicon of the
0.8.28.wheels,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.28.wheels,pixels large.
0.8.28.wheels,html_favicon = None
0.8.28.wheels,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.28.wheels,"relative to this directory. They are copied after the builtin static files,"
0.8.28.wheels,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.28.wheels,Add any extra paths that contain custom files (such as robots.txt or
0.8.28.wheels,".htaccess) here, relative to this directory. These files are copied"
0.8.28.wheels,directly to the root of the documentation.
0.8.28.wheels,html_extra_path = []
0.8.28.wheels,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.28.wheels,using the given strftime format.
0.8.28.wheels,"html_last_updated_fmt = '%b %d, %Y'"
0.8.28.wheels,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.28.wheels,typographically correct entities.
0.8.28.wheels,html_use_smartypants = True
0.8.28.wheels,"Custom sidebar templates, maps document names to template names."
0.8.28.wheels,html_sidebars = {}
0.8.28.wheels,"Additional templates that should be rendered to pages, maps page names to"
0.8.28.wheels,template names.
0.8.28.wheels,html_additional_pages = {}
0.8.28.wheels,"If false, no module index is generated."
0.8.28.wheels,html_domain_indices = True
0.8.28.wheels,"If false, no index is generated."
0.8.28.wheels,html_use_index = True
0.8.28.wheels,"If true, the index is split into individual pages for each letter."
0.8.28.wheels,html_split_index = False
0.8.28.wheels,"If true, links to the reST sources are added to the pages."
0.8.28.wheels,html_show_sourcelink = True
0.8.28.wheels,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.28.wheels,html_show_sphinx = True
0.8.28.wheels,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.28.wheels,html_show_copyright = True
0.8.28.wheels,"If true, an OpenSearch description file will be output, and all pages will"
0.8.28.wheels,contain a <link> tag referring to it.  The value of this option must be the
0.8.28.wheels,base URL from which the finished HTML is served.
0.8.28.wheels,html_use_opensearch = ''
0.8.28.wheels,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.28.wheels,html_file_suffix = None
0.8.28.wheels,Language to be used for generating the HTML full-text search index.
0.8.28.wheels,Sphinx supports the following languages:
0.8.28.wheels,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.28.wheels,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.28.wheels,html_search_language = 'en'
0.8.28.wheels,"A dictionary with options for the search language support, empty by default."
0.8.28.wheels,Now only 'ja' uses this config value
0.8.28.wheels,html_search_options = {'type': 'default'}
0.8.28.wheels,The name of a javascript file (relative to the configuration directory) that
0.8.28.wheels,"implements a search results scorer. If empty, the default will be used."
0.8.28.wheels,html_search_scorer = 'scorer.js'
0.8.28.wheels,Output file base name for HTML help builder.
0.8.28.wheels,-- Options for LaTeX output ---------------------------------------------
0.8.28.wheels,The paper size ('letterpaper' or 'a4paper').
0.8.28.wheels,"'papersize': 'letterpaper',"
0.8.28.wheels,"The font size ('10pt', '11pt' or '12pt')."
0.8.28.wheels,"'pointsize': '10pt',"
0.8.28.wheels,Additional stuff for the LaTeX preamble.
0.8.28.wheels,"'preamble': '',"
0.8.28.wheels,Latex figure (float) alignment
0.8.28.wheels,"'figure_align': 'htbp',"
0.8.28.wheels,Grouping the document tree into LaTeX files. List of tuples
0.8.28.wheels,"(source start file, target name, title,"
0.8.28.wheels,"author, documentclass [howto, manual, or own class])."
0.8.28.wheels,The name of an image file (relative to this directory) to place at the top of
0.8.28.wheels,the title page.
0.8.28.wheels,latex_logo = None
0.8.28.wheels,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.28.wheels,not chapters.
0.8.28.wheels,latex_use_parts = False
0.8.28.wheels,"If true, show page references after internal links."
0.8.28.wheels,latex_show_pagerefs = False
0.8.28.wheels,"If true, show URL addresses after external links."
0.8.28.wheels,latex_show_urls = False
0.8.28.wheels,Documents to append as an appendix to all manuals.
0.8.28.wheels,latex_appendices = []
0.8.28.wheels,"If false, no module index is generated."
0.8.28.wheels,latex_domain_indices = True
0.8.28.wheels,-- Options for manual page output ---------------------------------------
0.8.28.wheels,One entry per manual page. List of tuples
0.8.28.wheels,"(source start file, name, description, authors, manual section)."
0.8.28.wheels,"If true, show URL addresses after external links."
0.8.28.wheels,man_show_urls = False
0.8.28.wheels,-- Options for Texinfo output -------------------------------------------
0.8.28.wheels,Grouping the document tree into Texinfo files. List of tuples
0.8.28.wheels,"(source start file, target name, title, author,"
0.8.28.wheels,"dir menu entry, description, category)"
0.8.28.wheels,Documents to append as an appendix to all manuals.
0.8.28.wheels,texinfo_appendices = []
0.8.28.wheels,"If false, no module index is generated."
0.8.28.wheels,texinfo_domain_indices = True
0.8.28.wheels,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.28.wheels,texinfo_show_urls = 'footnote'
0.8.28.wheels,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.28.wheels,texinfo_no_detailmenu = False
0.8.28.wheels,-- Options for Epub output ----------------------------------------------
0.8.28.wheels,Bibliographic Dublin Core info.
0.8.28.wheels,The basename for the epub file. It defaults to the project name.
0.8.28.wheels,epub_basename = project
0.8.28.wheels,The HTML theme for the epub output. Since the default themes are not
0.8.28.wheels,"optimized for small screen space, using the same theme for HTML and epub"
0.8.28.wheels,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.28.wheels,visual space.
0.8.28.wheels,epub_theme = 'epub'
0.8.28.wheels,The language of the text. It defaults to the language option
0.8.28.wheels,or 'en' if the language is not set.
0.8.28.wheels,epub_language = ''
0.8.28.wheels,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.28.wheels,epub_scheme = ''
0.8.28.wheels,The unique identifier of the text. This can be a ISBN number
0.8.28.wheels,or the project homepage.
0.8.28.wheels,epub_identifier = ''
0.8.28.wheels,A unique identification for the text.
0.8.28.wheels,epub_uid = ''
0.8.28.wheels,A tuple containing the cover image and cover page html template filenames.
0.8.28.wheels,epub_cover = ()
0.8.28.wheels,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.28.wheels,epub_guide = ()
0.8.28.wheels,HTML files that should be inserted before the pages created by sphinx.
0.8.28.wheels,The format is a list of tuples containing the path and title.
0.8.28.wheels,epub_pre_files = []
0.8.28.wheels,HTML files that should be inserted after the pages created by sphinx.
0.8.28.wheels,The format is a list of tuples containing the path and title.
0.8.28.wheels,epub_post_files = []
0.8.28.wheels,A list of files that should not be packed into the epub file.
0.8.28.wheels,The depth of the table of contents in toc.ncx.
0.8.28.wheels,epub_tocdepth = 3
0.8.28.wheels,Allow duplicate toc entries.
0.8.28.wheels,epub_tocdup = True
0.8.28.wheels,Choose between 'default' and 'includehidden'.
0.8.28.wheels,epub_tocscope = 'default'
0.8.28.wheels,Fix unsupported image types using the Pillow.
0.8.28.wheels,epub_fix_images = False
0.8.28.wheels,Scale large images.
0.8.28.wheels,epub_max_image_width = 0
0.8.28.wheels,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.28.wheels,epub_show_urls = 'inline'
0.8.28.wheels,"If false, no index is generated."
0.8.28.wheels,epub_use_index = True
0.8.28,"Import numpy here, only when headers are needed"
0.8.28,Add numpy headers to include_dirs
0.8.28,Call original build_ext command
0.8.28,The dependencies are the same as the contents of requirements.txt
0.8.28,"A little ""fancy"" we select from the flattened array reshape back"
0.8.28,(Fortran format to get indexing right) and take the product to do an and
0.8.28,then convert back to boolean type.
0.8.28,Density sparseness is not well defined if there are no
0.8.28,internal edges (as per the referenced paper). However
0.8.28,MATLAB code from the original authors simply selects the
0.8.28,largest of *all* the edges in the case that there are
0.8.28,"no internal edges, so we do the same here"
0.8.28,"If there are any internal edges, then subselect them out"
0.8.28,If there are no internal edges then we want to take the
0.8.28,"max over all the edges that exist in the MST, so we simply"
0.8.28,do nothing and return all the edges in the MST.
0.8.28,-*- coding: utf-8 -*-
0.8.28,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.28,Steve Astels <sastels@gmail.com>
0.8.28,John Healy <jchealy@gmail.com>
0.8.28,
0.8.28,License: BSD 3 clause
0.8.28,"Treating this case explicitly, instead of letting"
0.8.28,"sklearn.metrics.pairwise_distances handle it,"
0.8.28,enables the usage of numpy.inf in the distance
0.8.28,matrix to indicate missing distance information.
0.8.28,TODO: Check if copying is necessary
0.8.28,raise TypeError('Sparse distance matrices not yet supported')
0.8.28,Warn if the MST couldn't be constructed around the missing distances
0.8.28,mst_linkage_core does not generate a full minimal spanning tree
0.8.28,If a tree is required then we must build the edges from the information
0.8.28,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.28,Sort edges of the min_spanning_tree by weight
0.8.28,Convert edge list into standard hierarchical clustering format
0.8.28,Check for connected component on X
0.8.28,Compute sparse mutual reachability graph
0.8.28,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.28,Check connected component on mutual reachability
0.8.28,"If more than one component, it means that even if the distance matrix X"
0.8.28,"has one component, there exists with less than `min_samples` neighbors"
0.8.28,Compute the minimum spanning tree for the sparse graph
0.8.28,Convert the graph to scipy cluster array format
0.8.28,Sort edges of the min_spanning_tree by weight
0.8.28,Convert edge list into standard hierarchical clustering format
0.8.28,The Cython routines used require contiguous arrays
0.8.28,TO DO: Deal with p for minkowski appropriately
0.8.28,Get distance to kth nearest neighbour
0.8.28,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.28,Sort edges of the min_spanning_tree by weight
0.8.28,Convert edge list into standard hierarchical clustering format
0.8.28,The Cython routines used require contiguous arrays
0.8.28,Get distance to kth nearest neighbour
0.8.28,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.28,Sort edges of the min_spanning_tree by weight
0.8.28,Convert edge list into standard hierarchical clustering format
0.8.28,Sort edges of the min_spanning_tree by weight
0.8.28,Convert edge list into standard hierarchical clustering format
0.8.28,Sort edges of the min_spanning_tree by weight
0.8.28,Convert edge list into standard hierarchical clustering format
0.8.28,Checks input and converts to an nd-array where possible
0.8.28,"Only non-sparse, precomputed distance matrices are handled here"
0.8.28,and thereby allowed to contain numpy.inf for missing distances
0.8.28,Python 2 and 3 compliant string_type checking
0.8.28,We can't do much with sparse matrices ...
0.8.28,TO DO: Need heuristic to decide when to go to boruvka;
0.8.28,still debugging for now
0.8.28,TO DO: Need heuristic to decide when to go to boruvka;
0.8.28,still debugging for now
0.8.28,Inherits from sklearn
0.8.28,Non-precomputed matrices may contain non-finite values.
0.8.28,Rows with these values
0.8.28,Pass only the purely finite indices into hdbscan
0.8.28,We will later assign all non-finite points to the background -1 cluster
0.8.28,Handle sparse precomputed distance matrices separately
0.8.28,"Only non-sparse, precomputed distance matrices are allowed"
0.8.28,to have numpy.inf values indicating missing distances
0.8.28,"prediction data only applies to the persistent model, so remove"
0.8.28,it from the keyword args we pass on the the function
0.8.28,remap indices to align with original data in the case of non-finite entries.
0.8.28,"Unltimately, for each Ci, we only require the"
0.8.28,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.28,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.28,density separation 'with respect to' Ci.
0.8.28,If exactly one of the points is noise
0.8.28,Set the density sparseness of the cluster
0.8.28,to the sparsest value seen so far.
0.8.28,Check whether density separations with
0.8.28,respect to each of these clusters can
0.8.28,be reduced.
0.8.28,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.28,This only makes sense if num_clusters = 1 since it has turned out
0.8.28,that the MR-MST has no edges between a noise point and a core point.
0.8.28,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.28,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.28,MR-MST might contain an edge with one point in Cj and ther other one
0.8.28,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.28,another large enough value.
0.8.28,
0.8.28,TODO: Think of a better yet efficient way to handle this.
0.8.28,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
0.8.28,Use a previously initialized/trained HDBSCAN
0.8.28,Handle the trivial case first.
0.8.28,Always generate prediction_data to avoid later woes
0.8.28,This will later be chosen according to n_clusters
0.8.28,Initialize and train clusterer if one was not previously supplied.
0.8.28,Always generate prediction data
0.8.28,We do not pass cluster_selection_epsilon here.
0.8.28,"While this adds unnecessary computation, it makes the code"
0.8.28,easier to read and debug.
0.8.28,"Train on 'X'. Do this even if the supplied clusterer was trained,"
0.8.28,because we want to make sure it fits 'X'.
0.8.28,"Pick an epsilon value right after a split produces n_clusters,"
0.8.28,and the don't split further for smaller epsilon (larger lambda)
0.8.28,Or use the specified cluster_selection_epsilon
0.8.28,"Extract tree related stuff, in order to re-assign labels"
0.8.28,Get labels according to the required cluster_selection_epsilon
0.8.28,Reflect the related changes in HDBSCAN.
0.8.28,PredictionData attached to HDBSCAN should also change.
0.8.28,A function re_init is defined in this module to handle this.
0.8.28,"From a fitted HDBSCAN model, predict for n_clusters=5"
0.8.28,Store prediciton data for later use.
0.8.28,and use this prediction data to predict on new points
0.8.28,Get number of fitted clusters for later use.
0.8.28,We'll need the condensed tree later...
0.8.28,"If none of the three arguments: prediction_data, n_clusters,"
0.8.28,"and cluster_selection_epsilon are supplied,"
0.8.28,then use clusterer's prediciton data directly
0.8.28,"If either of n_clusters or cluster_selection_epsilon were supplied,"
0.8.28,then build prediction data from these by modifying clusterer's
0.8.28,Get prediction data from clusterer
0.8.28,Modify prediction_data to reflect new n_clusters
0.8.28,"First, make a copy of prediction data to avoid modifying source"
0.8.28,Cluster selection method is hold by condensed_tree.
0.8.28,Change from 'eom' to 'leaf' if n_clusters is too large.
0.8.28,This change does not affect the tree associated with 'clusterer'
0.8.28,Re-initialize prediction_data for the specified n_clusters or epsilon
0.8.28,============================================================
0.8.28,Now we're ready to use prediction_data
0.8.28,"The rest of the code is copied from HDBSCAN's approximate_predict,"
0.8.28,but modified to use prediction_data instead of clusterer's attribute
0.8.28,Extract condensed tree for later use
0.8.28,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.28,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.28,Use the same prediction_data as clusterer's
0.8.28,Compute cluster_selection_epsilon so that a flat clustering
0.8.28,produces a specified number of n_clusters
0.8.28,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.28,Create another instance of prediction_data that is consistent
0.8.28,with the selected value of epsilon.
0.8.28,Flat clustering from prediction data
0.8.28,Initialize probabilities
0.8.28,k-NN for prediciton points to training set
0.8.28,Loop over prediction points to compute probabilities
0.8.28,We need to find where in the tree the new point would go
0.8.28,for the purposes of outlier membership approximation
0.8.28,"Find row in tree where nearest neighbor drops out,"
0.8.28,so we can get a lambda value for the nearest neighbor
0.8.28,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
0.8.28,"Equivalently, this assigns core distance for prediction point as"
0.8.28,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
0.8.28,Probabilities based on distance to closest exemplar in each cluster:
0.8.28,Use new prediction_data that points to exemplars that are specific
0.8.28,to the choice of n_clusters
0.8.28,Probabilities based on how long the nearest exemplar persists in
0.8.28,each cluster (with respect to most persistent exemplar)
0.8.28,Use new clusters that are defined by the choice of n_clusters.
0.8.28,Merge the two probabilities to produce a single set of probabilities
0.8.28,Include probability that the nearest neighbor belongs to a cluster
0.8.28,Rename variable so it's easy to understand what's being returned
0.8.28,Extract condensed tree for later use
0.8.28,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.28,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.28,Use the same prediction_data as clusterer's
0.8.28,Compute cluster_selection_epsilon so that a flat clustering
0.8.28,produces a specified number of n_clusters
0.8.28,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.28,Create another instance of prediction_data that is consistent
0.8.28,with the selected value of epsilon.
0.8.28,Flat clustering at the chosen epsilon from prediction_data
0.8.28,"When no clusters found, return array of 0's"
0.8.28,Probabilities based on distance to closest exemplar in each cluster:
0.8.28,Use new prediction_data that points to exemplars that are specific
0.8.28,to the choice of n_clusters
0.8.28,Probabilities based on how long the point persists in
0.8.28,each cluster (with respect to most persistent exemplar)
0.8.28,Use new clusters that are defined by the choice of n_clusters.
0.8.28,Include probability that the point belongs to a cluster
0.8.28,Aggregate the three probabilities to produce membership vectors
0.8.28,Re-name variable to clarify what's being returned.
0.8.28,"With method 'eom', max clusters are produced for epsilon=0,"
0.8.28,as computed by
0.8.28,Increasing epsilon can only reduce the number of ouput clusters.
0.8.28,"To select epsilon, consider all values where clusters are split"
0.8.28,Subtract the extra e-12 to avoid numerical errors in comparison
0.8.28,"Then, we avoid splitting for all epsilon below this."
0.8.28,Use an epsilon value that produces the right number of clusters.
0.8.28,The condensed tree of HDBSCAN has this information.
0.8.28,Extract the lambda levels (=1/distance) from the condensed tree
0.8.28,We don't want values that produce a large cluster and
0.8.28,just one or two individual points.
0.8.28,Keep only those lambda values corresponding to cluster separation;
0.8.28,"i.e., with child_sizes > 1"
0.8.28,"Get the unique values, because when two clusters fall out of one,"
0.8.28,the entry with lambda is repeated.
0.8.28,lambda values are sorted by np.unique.
0.8.28,"Now, get epsilon (distance threshold) as 1/lambda"
0.8.28,"At this epsilon, n_clusters have been split."
0.8.28,Stop splits at epsilons smaller than this.
0.8.28,"To allow for numerical errors,"
0.8.28,predData must be a pre-trained PredictionData instance from hdbscan
0.8.28,"If n_clusters is specified, compute cluster_selection_epsilon;"
0.8.28,This is the key modification:
0.8.28,Select clusters according to selection method and epsilon.
0.8.28,_new_select_clusters is a modification of get_clusters
0.8.28,from hdbscan._hdbscan_tree
0.8.28,"raw tree, used later to get exemplars and lambda values"
0.8.28,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
0.8.28,to the cluster labels produced as output
0.8.28,Re-compute lambdas and exemplars for selected clusters;
0.8.28,max_lambda <=> smallest distance <=> most persistent point(s)
0.8.28,Map all sub-clusters of selected cluster to the selected cluster's
0.8.28,label in output.
0.8.28,Map lambdas too...
0.8.28,Create set of exemplar points for later use.
0.8.28,Novel points are assigned based on cluster of closest exemplar.
0.8.28,"For each selected cluster, get all of its leaves,"
0.8.28,"and leaves of leaves, and so on..."
0.8.28,Largest lambda => Most persistent points
0.8.28,Get the most persistent points
0.8.28,Add most persistent points as exemplars
0.8.28,Add exemplars for each leaf of each selected cluster.
0.8.28,(exclude root)
0.8.28,-*- coding: utf-8 -*-
0.8.28,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.28,
0.8.28,License: BSD 3 clause
0.8.28,"Return the only cluster, the root"
0.8.28,We want to get the x and y coordinates for the start of each cluster
0.8.28,"Initialize the leaves, since we know where they go, the iterate"
0.8.28,"through everything from the leaves back, setting coords as we go"
0.8.28,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.28,bottoms and widths for each rectangle. We can go through each cluster
0.8.28,and do this for each in turn.
0.8.28,Ensure we don't try to take log of zero
0.8.28,Finally we need the horizontal lines that occur at cluster splits.
0.8.28,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.28,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.28,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.28,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.28,the chosen clusters.
0.8.28,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.28,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.28,based on the percentile should alleviate the impact on plotting.
0.8.28,Set center and height to default values if necessary
0.8.28,Ensure the ellipse is visible
0.8.28,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.28,Use PCA to get down to 32 dimension
0.8.28,-*- coding: utf-8 -*-
0.8.28,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.28,
0.8.28,License: BSD 3 clause
0.8.28,The Cython routines used require contiguous arrays
0.8.28,The Cython routines used require contiguous arrays
0.8.28,We can't do much with sparse matrices ...
0.8.28,Need heuristic to decide when to go to boruvka;
0.8.28,still debugging for now
0.8.28,Need heuristic to decide when to go to boruvka;
0.8.28,still debugging for now
0.8.28,Support various prediction methods for predicting cluster membership
0.8.28,of new or unseen points. There are several ways to interpret how
0.8.28,"to do this correctly, so we provide several methods for"
0.8.28,the different use cases that may arise.
0.8.28,raw_condensed_tree = condensed_tree.to_numpy()
0.8.28,New point departs with the old
0.8.28,Find appropriate cluster based on lambda of new point
0.8.28,Find appropriate cluster based on lambda of new point
0.8.28,"the point is in the dataset, fix lambda for rounding errors"
0.8.28,We need to find where in the tree the new point would go
0.8.28,for the purposes of outlier membership approximation
0.8.28,"When no clusters found, return array of 0's"
0.8.28,import pickle
0.8.28,from sklearn.cluster.tests.common import generate_clustered_data
0.8.28,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.28,"number of clusters, ignoring noise if present"
0.8.28,"metric is the function reference, not the string key."
0.8.28,def test_rsl_unavailable_hierarchy():
0.8.28,clusterer = RobustSingleLinkage()
0.8.28,with warnings.catch_warnings(record=True) as w:
0.8.28,tree = clusterer.cluster_hierarchy_
0.8.28,assert len(w) > 0
0.8.28,assert tree is None
0.8.28,"H, y = shuffle(X, y, random_state=7)"
0.8.28,Disable for now -- need to refactor to meet newer standards
0.8.28,from sklearn.cluster.tests.common import generate_clustered_data
0.8.28,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.28,this fails if no $DISPLAY specified
0.8.28,"number of clusters, ignoring noise if present"
0.8.28,"number of clusters, ignoring noise if present"
0.8.28,"H, y = shuffle(X, y, random_state=7)"
0.8.28,"metric is the function reference, not the string key."
0.8.28,def test_hdbscan_unavailable_attributes():
0.8.28,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.28,with warnings.catch_warnings(record=True) as w:
0.8.28,tree = clusterer.condensed_tree_
0.8.28,assert len(w) > 0
0.8.28,assert tree is None
0.8.28,with warnings.catch_warnings(record=True) as w:
0.8.28,tree = clusterer.single_linkage_tree_
0.8.28,assert len(w) > 0
0.8.28,assert tree is None
0.8.28,with warnings.catch_warnings(record=True) as w:
0.8.28,scores = clusterer.outlier_scores_
0.8.28,assert len(w) > 0
0.8.28,assert scores is None
0.8.28,with warnings.catch_warnings(record=True) as w:
0.8.28,tree = clusterer.minimum_spanning_tree_
0.8.28,assert len(w) > 0
0.8.28,assert tree is None
0.8.28,def test_hdbscan_min_span_tree_availability():
0.8.28,clusterer = HDBSCAN().fit(X)
0.8.28,tree = clusterer.minimum_spanning_tree_
0.8.28,assert tree is None
0.8.28,D = distance.squareform(distance.pdist(X))
0.8.28,D /= np.max(D)
0.8.28,HDBSCAN(metric='precomputed').fit(D)
0.8.28,tree = clusterer.minimum_spanning_tree_
0.8.28,assert tree is None
0.8.28,no prediction data error
0.8.28,wrong dimensions error
0.8.28,no clusters warning
0.8.28,def test_hdbscan_membership_vector():
0.8.28,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.28,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.28,assert_array_almost_equal(
0.8.28,"vector,"
0.8.28,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.28,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.28,assert_array_almost_equal(
0.8.28,"vector,"
0.8.28,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.28,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.28,assert_array_almost_equal(
0.8.28,"vector,"
0.8.28,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.28,
0.8.28,def test_hdbscan_all_points_membership_vectors():
0.8.28,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.28,vects = all_points_membership_vectors(clusterer)
0.8.28,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.28,"2.52734246e-001,"
0.8.28,8.38299608e-002]))
0.8.28,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.28,"8.35882503e-002,"
0.8.28,1.07356406e-001]))
0.8.28,without epsilon we should see many noise points as children of root.
0.8.28,for this random seed an epsilon of 0.2 will produce exactly 2 noise
0.8.28,points at that cut in single linkage.
0.8.28,Disable for now -- need to refactor to meet newer standards
0.8.28,Probably not applicable now #
0.8.28,def test_dbscan_sparse():
0.8.28,def test_dbscan_balltree():
0.8.28,def test_pickle():
0.8.28,def test_dbscan_core_samples_toy():
0.8.28,def test_boundaries():
0.8.28,"Given negative, zero and positive denominator and positive numerator"
0.8.28,Make sure safe division is always positive and doesn't raise ZeroDivision error
0.8.28,Ignore future warnings thrown by sklearn
0.8.28,Create a nice dataset with 6 circular clusters and 2 moons
0.8.28,"Given, the base HDBSCAN with method 'eom'"
0.8.28,"When we ask for flat clustering with same n_clusters,"
0.8.28,"Then, the labels and probabilities should match"
0.8.28,"Given, the base HDBSCAN with method 'leaf'"
0.8.28,"When we ask for flat clustering with same n_clusters,"
0.8.28,"Then, the labels and probabilities should match"
0.8.28,Method 'eom'...
0.8.28,"Given, a flat clustering for required n_clusters,"
0.8.28,"When we run the base HDBSCAN using it's epsilon,"
0.8.28,"Then, the labels and probabilities should match"
0.8.28,Method 'leaf'...
0.8.28,"Given, a flat clustering for required n_clusters,"
0.8.28,"When we run the base HDBSCAN using it's epsilon,"
0.8.28,"Then, the labels and probabilities should match"
0.8.28,"Given the max number of clusters that can be produced by 'eom',"
0.8.28,(these are produced for epsilon=0) (??? Needs verification)
0.8.28,"When we try flat clustering with 'eom' method for more n_clusters,"
0.8.28,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.28,"the resulting clusterer switches to using method 'leaf',"
0.8.28,and the resulting probabilities and labels must match
0.8.28,"Given the base HDBSCAN trained on some data,"
0.8.28,"When using approximate_predict_flat without specifying n_clusters,"
0.8.28,"Then, the clustering should match that due to approximate_predict,"
0.8.28,"Given a flat clustering trained for some n_clusters,"
0.8.28,"When using approximate_predict_flat without specifying n_clusters,"
0.8.28,"Then, the number of clusters produced must match the original n_clusters"
0.8.28,and all probabilities are <= 1.
0.8.28,"Given a flat clustering trained for some n_clusters,"
0.8.28,"When using approximate_predict_flat with specified n_clusters,"
0.8.28,"Then, the requested number of clusters must be produced"
0.8.28,and all probabilities are <= 1.
0.8.28,When using approximate_predict_flat with more clusters
0.8.28,"than 'eom' can handle,"
0.8.28,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.28,But the requested number of clusters must still be produced using 'leaf'
0.8.28,and all probabilities are <= 1.
0.8.28,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.28,"When membership_vector_flat is called with new data,"
0.8.28,"Then the number of clusters in memberships matches those of clusterer,"
0.8.28,and the number of points should equal those in the test set
0.8.28,and all probabilities are <= 1.
0.8.28,========================================
0.8.28,"Given a flat clustering for a specified n_clusters,"
0.8.28,"When membership_vector_flat is called with new data,"
0.8.28,"Then the number of clusters in memberships matches those of clusterer,"
0.8.28,and the number of points should equal those in the test set
0.8.28,and all probabilities are <= 1.
0.8.28,Ignore user warnings in this function
0.8.28,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.28,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.28,"Then the number of clusters in memberships should be as requested,"
0.8.28,and the number of points should equal those in the test set
0.8.28,and all probabilities are <= 1.
0.8.28,========================================
0.8.28,"Given a flat clustering for a specified n_clusters,"
0.8.28,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.28,"Then the number of clusters in memberships should be as requested,"
0.8.28,and the number of points should equal those in the test set
0.8.28,and all probabilities are <= 1.
0.8.28,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.28,"When all_points_membership_vectors_flat is called,"
0.8.28,"Then the number of clusters in memberships matches those of clusterer,"
0.8.28,and the number of points should equal those in the training set
0.8.28,and all probabilities are <= 1.
0.8.28,========================================
0.8.28,"Given a flat clustering for a specified n_clusters,"
0.8.28,"When all_points_membership_vectors_flat is called,"
0.8.28,"Then the number of clusters in memberships matches those of clusterer,"
0.8.28,and the number of points should equal those in the training set
0.8.28,and all probabilities are <= 1.
0.8.28,Ignore user warnings in this function
0.8.28,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.28,"When all_points_membership_vectors_flat is called for some n_clusters,"
0.8.28,"Then the number of clusters in memberships should be as requested,"
0.8.28,and the number of points should equal those in the training set
0.8.28,and all probabilities are <= 1.
0.8.28,========================================
0.8.28,"Given a flat clustering for a specified n_clusters,"
0.8.28,"When membership_vector_flat is called for some n_clusters,"
0.8.28,"Then the number of clusters in memberships should be as requested,"
0.8.28,and the number of points should equal those in the training set
0.8.28,and all probabilities are <= 1.
0.8.28,Generate datasets. We choose the size big enough to see the scalability
0.8.28,"of the algorithms, but not too big to avoid too long running times"
0.8.28,normalize dataset for easier parameter selection
0.8.28,estimate bandwidth for mean shift
0.8.28,connectivity matrix for structured Ward
0.8.28,make connectivity symmetric
0.8.28,create clustering estimators
0.8.28,predict cluster memberships
0.8.28,plot
0.8.28,-*- coding: utf-8 -*-
0.8.28,#############################################################################
0.8.28,Generate sample data
0.8.28,#############################################################################
0.8.28,Compute DBSCAN
0.8.28,"Number of clusters in labels, ignoring noise if present."
0.8.28,#############################################################################
0.8.28,Plot result
0.8.28,Black removed and is used for noise instead.
0.8.28,Black used for noise.
0.8.28,Black used for noise.
0.8.28,-*- coding: utf-8 -*-
0.8.28,
0.8.28,"hdbscan documentation build configuration file, created by"
0.8.28,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.28,
0.8.28,This file is execfile()d with the current directory set to its
0.8.28,containing dir.
0.8.28,
0.8.28,Note that not all possible configuration values are present in this
0.8.28,autogenerated file.
0.8.28,
0.8.28,All configuration values have a default; values that are commented out
0.8.28,serve to show the default.
0.8.28,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.28,add these directories to sys.path here. If the directory is relative to the
0.8.28,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.28,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.28,"sys.path.insert(0, os.path.abspath('../'))"
0.8.28,-- General configuration ------------------------------------------------
0.8.28,"If your documentation needs a minimal Sphinx version, state it here."
0.8.28,needs_sphinx = '1.0'
0.8.28,"Add any Sphinx extension module names here, as strings. They can be"
0.8.28,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.28,ones.
0.8.28,"'sphinx.ext.napoleon',"
0.8.28,'numpy_ext.numpydoc'
0.8.28,napoleon_google_docstring = False
0.8.28,napoleon_numpy_docstring = True
0.8.28,"Add any paths that contain templates here, relative to this directory."
0.8.28,The suffix(es) of source filenames.
0.8.28,You can specify multiple suffix as a list of string:
0.8.28,"source_suffix = ['.rst', '.md']"
0.8.28,The encoding of source files.
0.8.28,source_encoding = 'utf-8-sig'
0.8.28,The master toctree document.
0.8.28,General information about the project.
0.8.28,"The version info for the project you're documenting, acts as replacement for"
0.8.28,"|version| and |release|, also used in various other places throughout the"
0.8.28,built documents.
0.8.28,
0.8.28,The short X.Y version.
0.8.28,"The full version, including alpha/beta/rc tags."
0.8.28,The language for content autogenerated by Sphinx. Refer to documentation
0.8.28,for a list of supported languages.
0.8.28,
0.8.28,This is also used if you do content translation via gettext catalogs.
0.8.28,"Usually you set ""language"" from the command line for these cases."
0.8.28,"There are two options for replacing |today|: either, you set today to some"
0.8.28,"non-false value, then it is used:"
0.8.28,today = ''
0.8.28,"Else, today_fmt is used as the format for a strftime call."
0.8.28,"today_fmt = '%B %d, %Y'"
0.8.28,"List of patterns, relative to source directory, that match files and"
0.8.28,directories to ignore when looking for source files.
0.8.28,The reST default role (used for this markup: `text`) to use for all
0.8.28,documents.
0.8.28,default_role = None
0.8.28,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.28,add_function_parentheses = True
0.8.28,"If true, the current module name will be prepended to all description"
0.8.28,unit titles (such as .. function::).
0.8.28,add_module_names = True
0.8.28,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.28,output. They are ignored by default.
0.8.28,show_authors = False
0.8.28,The name of the Pygments (syntax highlighting) style to use.
0.8.28,A list of ignored prefixes for module index sorting.
0.8.28,modindex_common_prefix = []
0.8.28,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.28,keep_warnings = False
0.8.28,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.28,-- Options for HTML output ----------------------------------------------
0.8.28,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.28,a list of builtin themes.
0.8.28,html_theme = 'alabaster'
0.8.28,Theme options are theme-specific and customize the look and feel of a theme
0.8.28,"further.  For a list of options available for each theme, see the"
0.8.28,documentation.
0.8.28,html_theme_options = {}
0.8.28,"Add any paths that contain custom themes here, relative to this directory."
0.8.28,html_theme_path = []
0.8.28,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.28,"""<project> v<release> documentation""."
0.8.28,html_title = None
0.8.28,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.28,html_short_title = None
0.8.28,The name of an image file (relative to this directory) to place at the top
0.8.28,of the sidebar.
0.8.28,html_logo = None
0.8.28,The name of an image file (within the static path) to use as favicon of the
0.8.28,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.28,pixels large.
0.8.28,html_favicon = None
0.8.28,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.28,"relative to this directory. They are copied after the builtin static files,"
0.8.28,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.28,Add any extra paths that contain custom files (such as robots.txt or
0.8.28,".htaccess) here, relative to this directory. These files are copied"
0.8.28,directly to the root of the documentation.
0.8.28,html_extra_path = []
0.8.28,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.28,using the given strftime format.
0.8.28,"html_last_updated_fmt = '%b %d, %Y'"
0.8.28,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.28,typographically correct entities.
0.8.28,html_use_smartypants = True
0.8.28,"Custom sidebar templates, maps document names to template names."
0.8.28,html_sidebars = {}
0.8.28,"Additional templates that should be rendered to pages, maps page names to"
0.8.28,template names.
0.8.28,html_additional_pages = {}
0.8.28,"If false, no module index is generated."
0.8.28,html_domain_indices = True
0.8.28,"If false, no index is generated."
0.8.28,html_use_index = True
0.8.28,"If true, the index is split into individual pages for each letter."
0.8.28,html_split_index = False
0.8.28,"If true, links to the reST sources are added to the pages."
0.8.28,html_show_sourcelink = True
0.8.28,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.28,html_show_sphinx = True
0.8.28,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.28,html_show_copyright = True
0.8.28,"If true, an OpenSearch description file will be output, and all pages will"
0.8.28,contain a <link> tag referring to it.  The value of this option must be the
0.8.28,base URL from which the finished HTML is served.
0.8.28,html_use_opensearch = ''
0.8.28,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.28,html_file_suffix = None
0.8.28,Language to be used for generating the HTML full-text search index.
0.8.28,Sphinx supports the following languages:
0.8.28,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.28,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.28,html_search_language = 'en'
0.8.28,"A dictionary with options for the search language support, empty by default."
0.8.28,Now only 'ja' uses this config value
0.8.28,html_search_options = {'type': 'default'}
0.8.28,The name of a javascript file (relative to the configuration directory) that
0.8.28,"implements a search results scorer. If empty, the default will be used."
0.8.28,html_search_scorer = 'scorer.js'
0.8.28,Output file base name for HTML help builder.
0.8.28,-- Options for LaTeX output ---------------------------------------------
0.8.28,The paper size ('letterpaper' or 'a4paper').
0.8.28,"'papersize': 'letterpaper',"
0.8.28,"The font size ('10pt', '11pt' or '12pt')."
0.8.28,"'pointsize': '10pt',"
0.8.28,Additional stuff for the LaTeX preamble.
0.8.28,"'preamble': '',"
0.8.28,Latex figure (float) alignment
0.8.28,"'figure_align': 'htbp',"
0.8.28,Grouping the document tree into LaTeX files. List of tuples
0.8.28,"(source start file, target name, title,"
0.8.28,"author, documentclass [howto, manual, or own class])."
0.8.28,The name of an image file (relative to this directory) to place at the top of
0.8.28,the title page.
0.8.28,latex_logo = None
0.8.28,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.28,not chapters.
0.8.28,latex_use_parts = False
0.8.28,"If true, show page references after internal links."
0.8.28,latex_show_pagerefs = False
0.8.28,"If true, show URL addresses after external links."
0.8.28,latex_show_urls = False
0.8.28,Documents to append as an appendix to all manuals.
0.8.28,latex_appendices = []
0.8.28,"If false, no module index is generated."
0.8.28,latex_domain_indices = True
0.8.28,-- Options for manual page output ---------------------------------------
0.8.28,One entry per manual page. List of tuples
0.8.28,"(source start file, name, description, authors, manual section)."
0.8.28,"If true, show URL addresses after external links."
0.8.28,man_show_urls = False
0.8.28,-- Options for Texinfo output -------------------------------------------
0.8.28,Grouping the document tree into Texinfo files. List of tuples
0.8.28,"(source start file, target name, title, author,"
0.8.28,"dir menu entry, description, category)"
0.8.28,Documents to append as an appendix to all manuals.
0.8.28,texinfo_appendices = []
0.8.28,"If false, no module index is generated."
0.8.28,texinfo_domain_indices = True
0.8.28,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.28,texinfo_show_urls = 'footnote'
0.8.28,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.28,texinfo_no_detailmenu = False
0.8.28,-- Options for Epub output ----------------------------------------------
0.8.28,Bibliographic Dublin Core info.
0.8.28,The basename for the epub file. It defaults to the project name.
0.8.28,epub_basename = project
0.8.28,The HTML theme for the epub output. Since the default themes are not
0.8.28,"optimized for small screen space, using the same theme for HTML and epub"
0.8.28,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.28,visual space.
0.8.28,epub_theme = 'epub'
0.8.28,The language of the text. It defaults to the language option
0.8.28,or 'en' if the language is not set.
0.8.28,epub_language = ''
0.8.28,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.28,epub_scheme = ''
0.8.28,The unique identifier of the text. This can be a ISBN number
0.8.28,or the project homepage.
0.8.28,epub_identifier = ''
0.8.28,A unique identification for the text.
0.8.28,epub_uid = ''
0.8.28,A tuple containing the cover image and cover page html template filenames.
0.8.28,epub_cover = ()
0.8.28,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.28,epub_guide = ()
0.8.28,HTML files that should be inserted before the pages created by sphinx.
0.8.28,The format is a list of tuples containing the path and title.
0.8.28,epub_pre_files = []
0.8.28,HTML files that should be inserted after the pages created by sphinx.
0.8.28,The format is a list of tuples containing the path and title.
0.8.28,epub_post_files = []
0.8.28,A list of files that should not be packed into the epub file.
0.8.28,The depth of the table of contents in toc.ncx.
0.8.28,epub_tocdepth = 3
0.8.28,Allow duplicate toc entries.
0.8.28,epub_tocdup = True
0.8.28,Choose between 'default' and 'includehidden'.
0.8.28,epub_tocscope = 'default'
0.8.28,Fix unsupported image types using the Pillow.
0.8.28,epub_fix_images = False
0.8.28,Scale large images.
0.8.28,epub_max_image_width = 0
0.8.28,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.28,epub_show_urls = 'inline'
0.8.28,"If false, no index is generated."
0.8.28,epub_use_index = True
0.8.27,"Import numpy here, only when headers are needed"
0.8.27,Add numpy headers to include_dirs
0.8.27,Call original build_ext command
0.8.27,The dependencies are the same as the contents of requirements.txt
0.8.27,"A little ""fancy"" we select from the flattened array reshape back"
0.8.27,(Fortran format to get indexing right) and take the product to do an and
0.8.27,then convert back to boolean type.
0.8.27,Density sparseness is not well defined if there are no
0.8.27,internal edges (as per the referenced paper). However
0.8.27,MATLAB code from the original authors simply selects the
0.8.27,largest of *all* the edges in the case that there are
0.8.27,"no internal edges, so we do the same here"
0.8.27,"If there are any internal edges, then subselect them out"
0.8.27,If there are no internal edges then we want to take the
0.8.27,"max over all the edges that exist in the MST, so we simply"
0.8.27,do nothing and return all the edges in the MST.
0.8.27,-*- coding: utf-8 -*-
0.8.27,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.27,Steve Astels <sastels@gmail.com>
0.8.27,John Healy <jchealy@gmail.com>
0.8.27,
0.8.27,License: BSD 3 clause
0.8.27,"Treating this case explicitly, instead of letting"
0.8.27,"sklearn.metrics.pairwise_distances handle it,"
0.8.27,enables the usage of numpy.inf in the distance
0.8.27,matrix to indicate missing distance information.
0.8.27,TODO: Check if copying is necessary
0.8.27,raise TypeError('Sparse distance matrices not yet supported')
0.8.27,Warn if the MST couldn't be constructed around the missing distances
0.8.27,mst_linkage_core does not generate a full minimal spanning tree
0.8.27,If a tree is required then we must build the edges from the information
0.8.27,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.27,Sort edges of the min_spanning_tree by weight
0.8.27,Convert edge list into standard hierarchical clustering format
0.8.27,Check for connected component on X
0.8.27,Compute sparse mutual reachability graph
0.8.27,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.27,Check connected component on mutual reachability
0.8.27,"If more than one component, it means that even if the distance matrix X"
0.8.27,"has one component, there exists with less than `min_samples` neighbors"
0.8.27,Compute the minimum spanning tree for the sparse graph
0.8.27,Convert the graph to scipy cluster array format
0.8.27,Sort edges of the min_spanning_tree by weight
0.8.27,Convert edge list into standard hierarchical clustering format
0.8.27,The Cython routines used require contiguous arrays
0.8.27,TO DO: Deal with p for minkowski appropriately
0.8.27,Get distance to kth nearest neighbour
0.8.27,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.27,Sort edges of the min_spanning_tree by weight
0.8.27,Convert edge list into standard hierarchical clustering format
0.8.27,The Cython routines used require contiguous arrays
0.8.27,Get distance to kth nearest neighbour
0.8.27,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.27,Sort edges of the min_spanning_tree by weight
0.8.27,Convert edge list into standard hierarchical clustering format
0.8.27,Sort edges of the min_spanning_tree by weight
0.8.27,Convert edge list into standard hierarchical clustering format
0.8.27,Sort edges of the min_spanning_tree by weight
0.8.27,Convert edge list into standard hierarchical clustering format
0.8.27,Checks input and converts to an nd-array where possible
0.8.27,"Only non-sparse, precomputed distance matrices are handled here"
0.8.27,and thereby allowed to contain numpy.inf for missing distances
0.8.27,Python 2 and 3 compliant string_type checking
0.8.27,We can't do much with sparse matrices ...
0.8.27,TO DO: Need heuristic to decide when to go to boruvka;
0.8.27,still debugging for now
0.8.27,TO DO: Need heuristic to decide when to go to boruvka;
0.8.27,still debugging for now
0.8.27,Inherits from sklearn
0.8.27,Non-precomputed matrices may contain non-finite values.
0.8.27,Rows with these values
0.8.27,Pass only the purely finite indices into hdbscan
0.8.27,We will later assign all non-finite points to the background -1 cluster
0.8.27,Handle sparse precomputed distance matrices separately
0.8.27,"Only non-sparse, precomputed distance matrices are allowed"
0.8.27,to have numpy.inf values indicating missing distances
0.8.27,"prediction data only applies to the persistent model, so remove"
0.8.27,it from the keyword args we pass on the the function
0.8.27,remap indices to align with original data in the case of non-finite entries.
0.8.27,"Unltimately, for each Ci, we only require the"
0.8.27,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.27,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.27,density separation 'with respect to' Ci.
0.8.27,If exactly one of the points is noise
0.8.27,Set the density sparseness of the cluster
0.8.27,to the sparsest value seen so far.
0.8.27,Check whether density separations with
0.8.27,respect to each of these clusters can
0.8.27,be reduced.
0.8.27,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.27,This only makes sense if num_clusters = 1 since it has turned out
0.8.27,that the MR-MST has no edges between a noise point and a core point.
0.8.27,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.27,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.27,MR-MST might contain an edge with one point in Cj and ther other one
0.8.27,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.27,another large enough value.
0.8.27,
0.8.27,TODO: Think of a better yet efficient way to handle this.
0.8.27,Extract flat clustering from HDBSCAN's hierarchy for 7 clusters
0.8.27,Use a previously initialized/trained HDBSCAN
0.8.27,Handle the trivial case first.
0.8.27,Always generate prediction_data to avoid later woes
0.8.27,This will later be chosen according to n_clusters
0.8.27,Initialize and train clusterer if one was not previously supplied.
0.8.27,Always generate prediction data
0.8.27,We do not pass cluster_selection_epsilon here.
0.8.27,"While this adds unnecessary computation, it makes the code"
0.8.27,easier to read and debug.
0.8.27,"Train on 'X'. Do this even if the supplied clusterer was trained,"
0.8.27,because we want to make sure it fits 'X'.
0.8.27,"Pick an epsilon value right after a split produces n_clusters,"
0.8.27,and the don't split further for smaller epsilon (larger lambda)
0.8.27,Or use the specified cluster_selection_epsilon
0.8.27,"Extract tree related stuff, in order to re-assign labels"
0.8.27,Get labels according to the required cluster_selection_epsilon
0.8.27,Reflect the related changes in HDBSCAN.
0.8.27,PredictionData attached to HDBSCAN should also change.
0.8.27,A function re_init is defined in this module to handle this.
0.8.27,"From a fitted HDBSCAN model, predict for n_clusters=5"
0.8.27,Store prediciton data for later use.
0.8.27,and use this prediction data to predict on new points
0.8.27,Get number of fitted clusters for later use.
0.8.27,We'll need the condensed tree later...
0.8.27,"If none of the three arguments: prediction_data, n_clusters,"
0.8.27,"and cluster_selection_epsilon are supplied,"
0.8.27,then use clusterer's prediciton data directly
0.8.27,"If either of n_clusters or cluster_selection_epsilon were supplied,"
0.8.27,then build prediction data from these by modifying clusterer's
0.8.27,Get prediction data from clusterer
0.8.27,Modify prediction_data to reflect new n_clusters
0.8.27,"First, make a copy of prediction data to avoid modifying source"
0.8.27,Cluster selection method is hold by condensed_tree.
0.8.27,Change from 'eom' to 'leaf' if n_clusters is too large.
0.8.27,This change does not affect the tree associated with 'clusterer'
0.8.27,Re-initialize prediction_data for the specified n_clusters or epsilon
0.8.27,============================================================
0.8.27,Now we're ready to use prediction_data
0.8.27,"The rest of the code is copied from HDBSCAN's approximate_predict,"
0.8.27,but modified to use prediction_data instead of clusterer's attribute
0.8.27,Extract condensed tree for later use
0.8.27,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.27,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.27,Use the same prediction_data as clusterer's
0.8.27,Compute cluster_selection_epsilon so that a flat clustering
0.8.27,produces a specified number of n_clusters
0.8.27,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.27,Create another instance of prediction_data that is consistent
0.8.27,with the selected value of epsilon.
0.8.27,Flat clustering from prediction data
0.8.27,Initialize probabilities
0.8.27,k-NN for prediciton points to training set
0.8.27,Loop over prediction points to compute probabilities
0.8.27,We need to find where in the tree the new point would go
0.8.27,for the purposes of outlier membership approximation
0.8.27,"Find row in tree where nearest neighbor drops out,"
0.8.27,so we can get a lambda value for the nearest neighbor
0.8.27,"Assign lambda as min(lambda-to-neighbor, neighbor's-lambda-to-tree)"
0.8.27,"Equivalently, this assigns core distance for prediction point as"
0.8.27,"max(dist-to-neighbor, neighbor's-dist-to-tree)"
0.8.27,Probabilities based on distance to closest exemplar in each cluster:
0.8.27,Use new prediction_data that points to exemplars that are specific
0.8.27,to the choice of n_clusters
0.8.27,Probabilities based on how long the nearest exemplar persists in
0.8.27,each cluster (with respect to most persistent exemplar)
0.8.27,Use new clusters that are defined by the choice of n_clusters.
0.8.27,Merge the two probabilities to produce a single set of probabilities
0.8.27,Include probability that the nearest neighbor belongs to a cluster
0.8.27,Rename variable so it's easy to understand what's being returned
0.8.27,Extract condensed tree for later use
0.8.27,Choose flat clustering based on cluster_selection_epsilon or n_clusters.
0.8.27,"If neither is specified, use clusterer's cluster_selection_epsilon"
0.8.27,Use the same prediction_data as clusterer's
0.8.27,Compute cluster_selection_epsilon so that a flat clustering
0.8.27,produces a specified number of n_clusters
0.8.27,"With method 'eom', we may fail to get 'n_clusters' clusters. So,"
0.8.27,Create another instance of prediction_data that is consistent
0.8.27,with the selected value of epsilon.
0.8.27,Flat clustering at the chosen epsilon from prediction_data
0.8.27,"When no clusters found, return array of 0's"
0.8.27,Probabilities based on distance to closest exemplar in each cluster:
0.8.27,Use new prediction_data that points to exemplars that are specific
0.8.27,to the choice of n_clusters
0.8.27,Probabilities based on how long the point persists in
0.8.27,each cluster (with respect to most persistent exemplar)
0.8.27,Use new clusters that are defined by the choice of n_clusters.
0.8.27,Include probability that the point belongs to a cluster
0.8.27,Aggregate the three probabilities to produce membership vectors
0.8.27,Re-name variable to clarify what's being returned.
0.8.27,"With method 'eom', max clusters are produced for epsilon=0,"
0.8.27,as computed by
0.8.27,Increasing epsilon can only reduce the number of ouput clusters.
0.8.27,"To select epsilon, consider all values where clusters are split"
0.8.27,Subtract the extra e-12 to avoid numerical errors in comparison
0.8.27,"Then, we avoid splitting for all epsilon below this."
0.8.27,Use an epsilon value that produces the right number of clusters.
0.8.27,The condensed tree of HDBSCAN has this information.
0.8.27,Extract the lambda levels (=1/distance) from the condensed tree
0.8.27,We don't want values that produce a large cluster and
0.8.27,just one or two individual points.
0.8.27,Keep only those lambda values corresponding to cluster separation;
0.8.27,"i.e., with child_sizes > 1"
0.8.27,"Get the unique values, because when two clusters fall out of one,"
0.8.27,the entry with lambda is repeated.
0.8.27,lambda values are sorted by np.unique.
0.8.27,"Now, get epsilon (distance threshold) as 1/lambda"
0.8.27,"At this epsilon, n_clusters have been split."
0.8.27,Stop splits at epsilons smaller than this.
0.8.27,"To allow for numerical errors,"
0.8.27,predData must be a pre-trained PredictionData instance from hdbscan
0.8.27,"If n_clusters is specified, compute cluster_selection_epsilon;"
0.8.27,This is the key modification:
0.8.27,Select clusters according to selection method and epsilon.
0.8.27,_new_select_clusters is a modification of get_clusters
0.8.27,from hdbscan._hdbscan_tree
0.8.27,"raw tree, used later to get exemplars and lambda values"
0.8.27,"Re-do the cluster map: Map cluster numbers in tree (N, N+1, ..)"
0.8.27,to the cluster labels produced as output
0.8.27,Re-compute lambdas and exemplars for selected clusters;
0.8.27,max_lambda <=> smallest distance <=> most persistent point(s)
0.8.27,Map all sub-clusters of selected cluster to the selected cluster's
0.8.27,label in output.
0.8.27,Map lambdas too...
0.8.27,Create set of exemplar points for later use.
0.8.27,Novel points are assigned based on cluster of closest exemplar.
0.8.27,"For each selected cluster, get all of its leaves,"
0.8.27,"and leaves of leaves, and so on..."
0.8.27,Largest lambda => Most persistent points
0.8.27,Get the most persistent points
0.8.27,Add most persistent points as exemplars
0.8.27,Add exemplars for each leaf of each selected cluster.
0.8.27,(exclude root)
0.8.27,-*- coding: utf-8 -*-
0.8.27,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.27,
0.8.27,License: BSD 3 clause
0.8.27,"Return the only cluster, the root"
0.8.27,We want to get the x and y coordinates for the start of each cluster
0.8.27,"Initialize the leaves, since we know where they go, the iterate"
0.8.27,"through everything from the leaves back, setting coords as we go"
0.8.27,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.27,bottoms and widths for each rectangle. We can go through each cluster
0.8.27,and do this for each in turn.
0.8.27,Ensure we don't try to take log of zero
0.8.27,Finally we need the horizontal lines that occur at cluster splits.
0.8.27,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.27,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.27,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.27,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.27,the chosen clusters.
0.8.27,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.27,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.27,based on the percentile should alleviate the impact on plotting.
0.8.27,Set center and height to default values if necessary
0.8.27,Ensure the ellipse is visible
0.8.27,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.27,Use PCA to get down to 32 dimension
0.8.27,-*- coding: utf-8 -*-
0.8.27,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.27,
0.8.27,License: BSD 3 clause
0.8.27,The Cython routines used require contiguous arrays
0.8.27,The Cython routines used require contiguous arrays
0.8.27,We can't do much with sparse matrices ...
0.8.27,Need heuristic to decide when to go to boruvka;
0.8.27,still debugging for now
0.8.27,Need heuristic to decide when to go to boruvka;
0.8.27,still debugging for now
0.8.27,Support various prediction methods for predicting cluster membership
0.8.27,of new or unseen points. There are several ways to interpret how
0.8.27,"to do this correctly, so we provide several methods for"
0.8.27,the different use cases that may arise.
0.8.27,raw_condensed_tree = condensed_tree.to_numpy()
0.8.27,New point departs with the old
0.8.27,Find appropriate cluster based on lambda of new point
0.8.27,Find appropriate cluster based on lambda of new point
0.8.27,"the point is in the dataset, fix lambda for rounding errors"
0.8.27,We need to find where in the tree the new point would go
0.8.27,for the purposes of outlier membership approximation
0.8.27,"When no clusters found, return array of 0's"
0.8.27,import pickle
0.8.27,from sklearn.cluster.tests.common import generate_clustered_data
0.8.27,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.27,"number of clusters, ignoring noise if present"
0.8.27,"metric is the function reference, not the string key."
0.8.27,def test_rsl_unavailable_hierarchy():
0.8.27,clusterer = RobustSingleLinkage()
0.8.27,with warnings.catch_warnings(record=True) as w:
0.8.27,tree = clusterer.cluster_hierarchy_
0.8.27,assert len(w) > 0
0.8.27,assert tree is None
0.8.27,"H, y = shuffle(X, y, random_state=7)"
0.8.27,Disable for now -- need to refactor to meet newer standards
0.8.27,from sklearn.cluster.tests.common import generate_clustered_data
0.8.27,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.27,this fails if no $DISPLAY specified
0.8.27,"number of clusters, ignoring noise if present"
0.8.27,"number of clusters, ignoring noise if present"
0.8.27,"H, y = shuffle(X, y, random_state=7)"
0.8.27,"metric is the function reference, not the string key."
0.8.27,def test_hdbscan_unavailable_attributes():
0.8.27,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.27,with warnings.catch_warnings(record=True) as w:
0.8.27,tree = clusterer.condensed_tree_
0.8.27,assert len(w) > 0
0.8.27,assert tree is None
0.8.27,with warnings.catch_warnings(record=True) as w:
0.8.27,tree = clusterer.single_linkage_tree_
0.8.27,assert len(w) > 0
0.8.27,assert tree is None
0.8.27,with warnings.catch_warnings(record=True) as w:
0.8.27,scores = clusterer.outlier_scores_
0.8.27,assert len(w) > 0
0.8.27,assert scores is None
0.8.27,with warnings.catch_warnings(record=True) as w:
0.8.27,tree = clusterer.minimum_spanning_tree_
0.8.27,assert len(w) > 0
0.8.27,assert tree is None
0.8.27,def test_hdbscan_min_span_tree_availability():
0.8.27,clusterer = HDBSCAN().fit(X)
0.8.27,tree = clusterer.minimum_spanning_tree_
0.8.27,assert tree is None
0.8.27,D = distance.squareform(distance.pdist(X))
0.8.27,D /= np.max(D)
0.8.27,HDBSCAN(metric='precomputed').fit(D)
0.8.27,tree = clusterer.minimum_spanning_tree_
0.8.27,assert tree is None
0.8.27,no prediction data error
0.8.27,wrong dimensions error
0.8.27,no clusters warning
0.8.27,def test_hdbscan_membership_vector():
0.8.27,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.27,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.27,assert_array_almost_equal(
0.8.27,"vector,"
0.8.27,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.27,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.27,assert_array_almost_equal(
0.8.27,"vector,"
0.8.27,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.27,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.27,assert_array_almost_equal(
0.8.27,"vector,"
0.8.27,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.27,
0.8.27,def test_hdbscan_all_points_membership_vectors():
0.8.27,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.27,vects = all_points_membership_vectors(clusterer)
0.8.27,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.27,"2.52734246e-001,"
0.8.27,8.38299608e-002]))
0.8.27,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.27,"8.35882503e-002,"
0.8.27,1.07356406e-001]))
0.8.27,without epsilon we should see many noise points as children of root.
0.8.27,for this random seed an epsilon of 0.2 will produce exactly 2 noise
0.8.27,points at that cut in single linkage.
0.8.27,Disable for now -- need to refactor to meet newer standards
0.8.27,Probably not applicable now #
0.8.27,def test_dbscan_sparse():
0.8.27,def test_dbscan_balltree():
0.8.27,def test_pickle():
0.8.27,def test_dbscan_core_samples_toy():
0.8.27,def test_boundaries():
0.8.27,"Given negative, zero and positive denominator and positive numerator"
0.8.27,Make sure safe division is always positive and doesn't raise ZeroDivision error
0.8.27,Ignore future warnings thrown by sklearn
0.8.27,Create a nice dataset with 6 circular clusters and 2 moons
0.8.27,"Given, the base HDBSCAN with method 'eom'"
0.8.27,"When we ask for flat clustering with same n_clusters,"
0.8.27,"Then, the labels and probabilities should match"
0.8.27,"Given, the base HDBSCAN with method 'leaf'"
0.8.27,"When we ask for flat clustering with same n_clusters,"
0.8.27,"Then, the labels and probabilities should match"
0.8.27,Method 'eom'...
0.8.27,"Given, a flat clustering for required n_clusters,"
0.8.27,"When we run the base HDBSCAN using it's epsilon,"
0.8.27,"Then, the labels and probabilities should match"
0.8.27,Method 'leaf'...
0.8.27,"Given, a flat clustering for required n_clusters,"
0.8.27,"When we run the base HDBSCAN using it's epsilon,"
0.8.27,"Then, the labels and probabilities should match"
0.8.27,"Given the max number of clusters that can be produced by 'eom',"
0.8.27,(these are produced for epsilon=0) (??? Needs verification)
0.8.27,"When we try flat clustering with 'eom' method for more n_clusters,"
0.8.27,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.27,"the resulting clusterer switches to using method 'leaf',"
0.8.27,and the resulting probabilities and labels must match
0.8.27,"Given the base HDBSCAN trained on some data,"
0.8.27,"When using approximate_predict_flat without specifying n_clusters,"
0.8.27,"Then, the clustering should match that due to approximate_predict,"
0.8.27,"Given a flat clustering trained for some n_clusters,"
0.8.27,"When using approximate_predict_flat without specifying n_clusters,"
0.8.27,"Then, the number of clusters produced must match the original n_clusters"
0.8.27,and all probabilities are <= 1.
0.8.27,"Given a flat clustering trained for some n_clusters,"
0.8.27,"When using approximate_predict_flat with specified n_clusters,"
0.8.27,"Then, the requested number of clusters must be produced"
0.8.27,and all probabilities are <= 1.
0.8.27,When using approximate_predict_flat with more clusters
0.8.27,"than 'eom' can handle,"
0.8.27,"Then, a warning is raised saying 'eom' can't get this clustering,"
0.8.27,But the requested number of clusters must still be produced using 'leaf'
0.8.27,and all probabilities are <= 1.
0.8.27,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.27,"When membership_vector_flat is called with new data,"
0.8.27,"Then the number of clusters in memberships matches those of clusterer,"
0.8.27,and the number of points should equal those in the test set
0.8.27,and all probabilities are <= 1.
0.8.27,========================================
0.8.27,"Given a flat clustering for a specified n_clusters,"
0.8.27,"When membership_vector_flat is called with new data,"
0.8.27,"Then the number of clusters in memberships matches those of clusterer,"
0.8.27,and the number of points should equal those in the test set
0.8.27,and all probabilities are <= 1.
0.8.27,Ignore user warnings in this function
0.8.27,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.27,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.27,"Then the number of clusters in memberships should be as requested,"
0.8.27,and the number of points should equal those in the test set
0.8.27,and all probabilities are <= 1.
0.8.27,========================================
0.8.27,"Given a flat clustering for a specified n_clusters,"
0.8.27,"When membership_vector_flat is called with new data for some n_clusters,"
0.8.27,"Then the number of clusters in memberships should be as requested,"
0.8.27,and the number of points should equal those in the test set
0.8.27,and all probabilities are <= 1.
0.8.27,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.27,"When all_points_membership_vectors_flat is called,"
0.8.27,"Then the number of clusters in memberships matches those of clusterer,"
0.8.27,and the number of points should equal those in the training set
0.8.27,and all probabilities are <= 1.
0.8.27,========================================
0.8.27,"Given a flat clustering for a specified n_clusters,"
0.8.27,"When all_points_membership_vectors_flat is called,"
0.8.27,"Then the number of clusters in memberships matches those of clusterer,"
0.8.27,and the number of points should equal those in the training set
0.8.27,and all probabilities are <= 1.
0.8.27,Ignore user warnings in this function
0.8.27,"Given a flat clustering trained for n_clusters picked by HDBSCAN,"
0.8.27,"When all_points_membership_vectors_flat is called for some n_clusters,"
0.8.27,"Then the number of clusters in memberships should be as requested,"
0.8.27,and the number of points should equal those in the training set
0.8.27,and all probabilities are <= 1.
0.8.27,========================================
0.8.27,"Given a flat clustering for a specified n_clusters,"
0.8.27,"When membership_vector_flat is called for some n_clusters,"
0.8.27,"Then the number of clusters in memberships should be as requested,"
0.8.27,and the number of points should equal those in the training set
0.8.27,and all probabilities are <= 1.
0.8.27,Generate datasets. We choose the size big enough to see the scalability
0.8.27,"of the algorithms, but not too big to avoid too long running times"
0.8.27,normalize dataset for easier parameter selection
0.8.27,estimate bandwidth for mean shift
0.8.27,connectivity matrix for structured Ward
0.8.27,make connectivity symmetric
0.8.27,create clustering estimators
0.8.27,predict cluster memberships
0.8.27,plot
0.8.27,-*- coding: utf-8 -*-
0.8.27,#############################################################################
0.8.27,Generate sample data
0.8.27,#############################################################################
0.8.27,Compute DBSCAN
0.8.27,"Number of clusters in labels, ignoring noise if present."
0.8.27,#############################################################################
0.8.27,Plot result
0.8.27,Black removed and is used for noise instead.
0.8.27,Black used for noise.
0.8.27,Black used for noise.
0.8.27,-*- coding: utf-8 -*-
0.8.27,
0.8.27,"hdbscan documentation build configuration file, created by"
0.8.27,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.27,
0.8.27,This file is execfile()d with the current directory set to its
0.8.27,containing dir.
0.8.27,
0.8.27,Note that not all possible configuration values are present in this
0.8.27,autogenerated file.
0.8.27,
0.8.27,All configuration values have a default; values that are commented out
0.8.27,serve to show the default.
0.8.27,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.27,add these directories to sys.path here. If the directory is relative to the
0.8.27,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.27,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.27,"sys.path.insert(0, os.path.abspath('../'))"
0.8.27,-- General configuration ------------------------------------------------
0.8.27,"If your documentation needs a minimal Sphinx version, state it here."
0.8.27,needs_sphinx = '1.0'
0.8.27,"Add any Sphinx extension module names here, as strings. They can be"
0.8.27,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.27,ones.
0.8.27,"'sphinx.ext.napoleon',"
0.8.27,'numpy_ext.numpydoc'
0.8.27,napoleon_google_docstring = False
0.8.27,napoleon_numpy_docstring = True
0.8.27,"Add any paths that contain templates here, relative to this directory."
0.8.27,The suffix(es) of source filenames.
0.8.27,You can specify multiple suffix as a list of string:
0.8.27,"source_suffix = ['.rst', '.md']"
0.8.27,The encoding of source files.
0.8.27,source_encoding = 'utf-8-sig'
0.8.27,The master toctree document.
0.8.27,General information about the project.
0.8.27,"The version info for the project you're documenting, acts as replacement for"
0.8.27,"|version| and |release|, also used in various other places throughout the"
0.8.27,built documents.
0.8.27,
0.8.27,The short X.Y version.
0.8.27,"The full version, including alpha/beta/rc tags."
0.8.27,The language for content autogenerated by Sphinx. Refer to documentation
0.8.27,for a list of supported languages.
0.8.27,
0.8.27,This is also used if you do content translation via gettext catalogs.
0.8.27,"Usually you set ""language"" from the command line for these cases."
0.8.27,"There are two options for replacing |today|: either, you set today to some"
0.8.27,"non-false value, then it is used:"
0.8.27,today = ''
0.8.27,"Else, today_fmt is used as the format for a strftime call."
0.8.27,"today_fmt = '%B %d, %Y'"
0.8.27,"List of patterns, relative to source directory, that match files and"
0.8.27,directories to ignore when looking for source files.
0.8.27,The reST default role (used for this markup: `text`) to use for all
0.8.27,documents.
0.8.27,default_role = None
0.8.27,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.27,add_function_parentheses = True
0.8.27,"If true, the current module name will be prepended to all description"
0.8.27,unit titles (such as .. function::).
0.8.27,add_module_names = True
0.8.27,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.27,output. They are ignored by default.
0.8.27,show_authors = False
0.8.27,The name of the Pygments (syntax highlighting) style to use.
0.8.27,A list of ignored prefixes for module index sorting.
0.8.27,modindex_common_prefix = []
0.8.27,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.27,keep_warnings = False
0.8.27,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.27,-- Options for HTML output ----------------------------------------------
0.8.27,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.27,a list of builtin themes.
0.8.27,html_theme = 'alabaster'
0.8.27,Theme options are theme-specific and customize the look and feel of a theme
0.8.27,"further.  For a list of options available for each theme, see the"
0.8.27,documentation.
0.8.27,html_theme_options = {}
0.8.27,"Add any paths that contain custom themes here, relative to this directory."
0.8.27,html_theme_path = []
0.8.27,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.27,"""<project> v<release> documentation""."
0.8.27,html_title = None
0.8.27,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.27,html_short_title = None
0.8.27,The name of an image file (relative to this directory) to place at the top
0.8.27,of the sidebar.
0.8.27,html_logo = None
0.8.27,The name of an image file (within the static path) to use as favicon of the
0.8.27,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.27,pixels large.
0.8.27,html_favicon = None
0.8.27,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.27,"relative to this directory. They are copied after the builtin static files,"
0.8.27,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.27,Add any extra paths that contain custom files (such as robots.txt or
0.8.27,".htaccess) here, relative to this directory. These files are copied"
0.8.27,directly to the root of the documentation.
0.8.27,html_extra_path = []
0.8.27,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.27,using the given strftime format.
0.8.27,"html_last_updated_fmt = '%b %d, %Y'"
0.8.27,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.27,typographically correct entities.
0.8.27,html_use_smartypants = True
0.8.27,"Custom sidebar templates, maps document names to template names."
0.8.27,html_sidebars = {}
0.8.27,"Additional templates that should be rendered to pages, maps page names to"
0.8.27,template names.
0.8.27,html_additional_pages = {}
0.8.27,"If false, no module index is generated."
0.8.27,html_domain_indices = True
0.8.27,"If false, no index is generated."
0.8.27,html_use_index = True
0.8.27,"If true, the index is split into individual pages for each letter."
0.8.27,html_split_index = False
0.8.27,"If true, links to the reST sources are added to the pages."
0.8.27,html_show_sourcelink = True
0.8.27,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.27,html_show_sphinx = True
0.8.27,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.27,html_show_copyright = True
0.8.27,"If true, an OpenSearch description file will be output, and all pages will"
0.8.27,contain a <link> tag referring to it.  The value of this option must be the
0.8.27,base URL from which the finished HTML is served.
0.8.27,html_use_opensearch = ''
0.8.27,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.27,html_file_suffix = None
0.8.27,Language to be used for generating the HTML full-text search index.
0.8.27,Sphinx supports the following languages:
0.8.27,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.27,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.27,html_search_language = 'en'
0.8.27,"A dictionary with options for the search language support, empty by default."
0.8.27,Now only 'ja' uses this config value
0.8.27,html_search_options = {'type': 'default'}
0.8.27,The name of a javascript file (relative to the configuration directory) that
0.8.27,"implements a search results scorer. If empty, the default will be used."
0.8.27,html_search_scorer = 'scorer.js'
0.8.27,Output file base name for HTML help builder.
0.8.27,-- Options for LaTeX output ---------------------------------------------
0.8.27,The paper size ('letterpaper' or 'a4paper').
0.8.27,"'papersize': 'letterpaper',"
0.8.27,"The font size ('10pt', '11pt' or '12pt')."
0.8.27,"'pointsize': '10pt',"
0.8.27,Additional stuff for the LaTeX preamble.
0.8.27,"'preamble': '',"
0.8.27,Latex figure (float) alignment
0.8.27,"'figure_align': 'htbp',"
0.8.27,Grouping the document tree into LaTeX files. List of tuples
0.8.27,"(source start file, target name, title,"
0.8.27,"author, documentclass [howto, manual, or own class])."
0.8.27,The name of an image file (relative to this directory) to place at the top of
0.8.27,the title page.
0.8.27,latex_logo = None
0.8.27,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.27,not chapters.
0.8.27,latex_use_parts = False
0.8.27,"If true, show page references after internal links."
0.8.27,latex_show_pagerefs = False
0.8.27,"If true, show URL addresses after external links."
0.8.27,latex_show_urls = False
0.8.27,Documents to append as an appendix to all manuals.
0.8.27,latex_appendices = []
0.8.27,"If false, no module index is generated."
0.8.27,latex_domain_indices = True
0.8.27,-- Options for manual page output ---------------------------------------
0.8.27,One entry per manual page. List of tuples
0.8.27,"(source start file, name, description, authors, manual section)."
0.8.27,"If true, show URL addresses after external links."
0.8.27,man_show_urls = False
0.8.27,-- Options for Texinfo output -------------------------------------------
0.8.27,Grouping the document tree into Texinfo files. List of tuples
0.8.27,"(source start file, target name, title, author,"
0.8.27,"dir menu entry, description, category)"
0.8.27,Documents to append as an appendix to all manuals.
0.8.27,texinfo_appendices = []
0.8.27,"If false, no module index is generated."
0.8.27,texinfo_domain_indices = True
0.8.27,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.27,texinfo_show_urls = 'footnote'
0.8.27,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.27,texinfo_no_detailmenu = False
0.8.27,-- Options for Epub output ----------------------------------------------
0.8.27,Bibliographic Dublin Core info.
0.8.27,The basename for the epub file. It defaults to the project name.
0.8.27,epub_basename = project
0.8.27,The HTML theme for the epub output. Since the default themes are not
0.8.27,"optimized for small screen space, using the same theme for HTML and epub"
0.8.27,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.27,visual space.
0.8.27,epub_theme = 'epub'
0.8.27,The language of the text. It defaults to the language option
0.8.27,or 'en' if the language is not set.
0.8.27,epub_language = ''
0.8.27,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.27,epub_scheme = ''
0.8.27,The unique identifier of the text. This can be a ISBN number
0.8.27,or the project homepage.
0.8.27,epub_identifier = ''
0.8.27,A unique identification for the text.
0.8.27,epub_uid = ''
0.8.27,A tuple containing the cover image and cover page html template filenames.
0.8.27,epub_cover = ()
0.8.27,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.27,epub_guide = ()
0.8.27,HTML files that should be inserted before the pages created by sphinx.
0.8.27,The format is a list of tuples containing the path and title.
0.8.27,epub_pre_files = []
0.8.27,HTML files that should be inserted after the pages created by sphinx.
0.8.27,The format is a list of tuples containing the path and title.
0.8.27,epub_post_files = []
0.8.27,A list of files that should not be packed into the epub file.
0.8.27,The depth of the table of contents in toc.ncx.
0.8.27,epub_tocdepth = 3
0.8.27,Allow duplicate toc entries.
0.8.27,epub_tocdup = True
0.8.27,Choose between 'default' and 'includehidden'.
0.8.27,epub_tocscope = 'default'
0.8.27,Fix unsupported image types using the Pillow.
0.8.27,epub_fix_images = False
0.8.27,Scale large images.
0.8.27,epub_max_image_width = 0
0.8.27,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.27,epub_show_urls = 'inline'
0.8.27,"If false, no index is generated."
0.8.27,epub_use_index = True
0.8.26,"Import numpy here, only when headers are needed"
0.8.26,Add numpy headers to include_dirs
0.8.26,Call original build_ext command
0.8.26,The dependencies are the same as the contents of requirements.txt
0.8.26,"A little ""fancy"" we select from the flattened array reshape back"
0.8.26,(Fortran format to get indexing right) and take the product to do an and
0.8.26,then convert back to boolean type.
0.8.26,Density sparseness is not well defined if there are no
0.8.26,internal edges (as per the referenced paper). However
0.8.26,MATLAB code from the original authors simply selects the
0.8.26,largest of *all* the edges in the case that there are
0.8.26,"no internal edges, so we do the same here"
0.8.26,"If there are any internal edges, then subselect them out"
0.8.26,If there are no internal edges then we want to take the
0.8.26,"max over all the edges that exist in the MST, so we simply"
0.8.26,do nothing and return all the edges in the MST.
0.8.26,-*- coding: utf-8 -*-
0.8.26,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.26,Steve Astels <sastels@gmail.com>
0.8.26,John Healy <jchealy@gmail.com>
0.8.26,
0.8.26,License: BSD 3 clause
0.8.26,"Treating this case explicitly, instead of letting"
0.8.26,"sklearn.metrics.pairwise_distances handle it,"
0.8.26,enables the usage of numpy.inf in the distance
0.8.26,matrix to indicate missing distance information.
0.8.26,TODO: Check if copying is necessary
0.8.26,raise TypeError('Sparse distance matrices not yet supported')
0.8.26,Warn if the MST couldn't be constructed around the missing distances
0.8.26,mst_linkage_core does not generate a full minimal spanning tree
0.8.26,If a tree is required then we must build the edges from the information
0.8.26,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.26,Sort edges of the min_spanning_tree by weight
0.8.26,Convert edge list into standard hierarchical clustering format
0.8.26,Check for connected component on X
0.8.26,Compute sparse mutual reachability graph
0.8.26,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.26,Check connected component on mutual reachability
0.8.26,"If more than one component, it means that even if the distance matrix X"
0.8.26,"has one component, there exists with less than `min_samples` neighbors"
0.8.26,Compute the minimum spanning tree for the sparse graph
0.8.26,Convert the graph to scipy cluster array format
0.8.26,Sort edges of the min_spanning_tree by weight
0.8.26,Convert edge list into standard hierarchical clustering format
0.8.26,The Cython routines used require contiguous arrays
0.8.26,TO DO: Deal with p for minkowski appropriately
0.8.26,Get distance to kth nearest neighbour
0.8.26,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.26,Sort edges of the min_spanning_tree by weight
0.8.26,Convert edge list into standard hierarchical clustering format
0.8.26,The Cython routines used require contiguous arrays
0.8.26,Get distance to kth nearest neighbour
0.8.26,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.26,Sort edges of the min_spanning_tree by weight
0.8.26,Convert edge list into standard hierarchical clustering format
0.8.26,Sort edges of the min_spanning_tree by weight
0.8.26,Convert edge list into standard hierarchical clustering format
0.8.26,Sort edges of the min_spanning_tree by weight
0.8.26,Convert edge list into standard hierarchical clustering format
0.8.26,Checks input and converts to an nd-array where possible
0.8.26,"Only non-sparse, precomputed distance matrices are handled here"
0.8.26,and thereby allowed to contain numpy.inf for missing distances
0.8.26,Python 2 and 3 compliant string_type checking
0.8.26,We can't do much with sparse matrices ...
0.8.26,TO DO: Need heuristic to decide when to go to boruvka;
0.8.26,still debugging for now
0.8.26,TO DO: Need heuristic to decide when to go to boruvka;
0.8.26,still debugging for now
0.8.26,Inherits from sklearn
0.8.26,Handle sparse precomputed distance matrices separately
0.8.26,"Only non-sparse, precomputed distance matrices are allowed"
0.8.26,to have numpy.inf values indicating missing distances
0.8.26,"prediction data only applies to the persistent model, so remove"
0.8.26,it from the keyword args we pass on the the function
0.8.26,"Unltimately, for each Ci, we only require the"
0.8.26,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.26,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.26,density separation 'with respect to' Ci.
0.8.26,If exactly one of the points is noise
0.8.26,Set the density sparseness of the cluster
0.8.26,to the sparsest value seen so far.
0.8.26,Check whether density separations with
0.8.26,respect to each of these clusters can
0.8.26,be reduced.
0.8.26,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.26,This only makes sense if num_clusters = 1 since it has turned out
0.8.26,that the MR-MST has no edges between a noise point and a core point.
0.8.26,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.26,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.26,MR-MST might contain an edge with one point in Cj and ther other one
0.8.26,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.26,another large enough value.
0.8.26,
0.8.26,TODO: Think of a better yet efficient way to handle this.
0.8.26,-*- coding: utf-8 -*-
0.8.26,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.26,
0.8.26,License: BSD 3 clause
0.8.26,"Return the only cluster, the root"
0.8.26,We want to get the x and y coordinates for the start of each cluster
0.8.26,"Initialize the leaves, since we know where they go, the iterate"
0.8.26,"through everything from the leaves back, setting coords as we go"
0.8.26,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.26,bottoms and widths for each rectangle. We can go through each cluster
0.8.26,and do this for each in turn.
0.8.26,Ensure we don't try to take log of zero
0.8.26,Finally we need the horizontal lines that occur at cluster splits.
0.8.26,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.26,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.26,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.26,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.26,the chosen clusters.
0.8.26,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.26,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.26,based on the percentile should alleviate the impact on plotting.
0.8.26,Set center and height to default values if necessary
0.8.26,Ensure the ellipse is visible
0.8.26,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.26,Use PCA to get down to 32 dimension
0.8.26,-*- coding: utf-8 -*-
0.8.26,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.26,
0.8.26,License: BSD 3 clause
0.8.26,The Cython routines used require contiguous arrays
0.8.26,The Cython routines used require contiguous arrays
0.8.26,We can't do much with sparse matrices ...
0.8.26,Need heuristic to decide when to go to boruvka;
0.8.26,still debugging for now
0.8.26,Need heuristic to decide when to go to boruvka;
0.8.26,still debugging for now
0.8.26,Support various prediction methods for predicting cluster membership
0.8.26,of new or unseen points. There are several ways to interpret how
0.8.26,"to do this correctly, so we provide several methods for"
0.8.26,the different use cases that may arise.
0.8.26,raw_condensed_tree = condensed_tree.to_numpy()
0.8.26,New point departs with the old
0.8.26,Find appropriate cluster based on lambda of new point
0.8.26,Find appropriate cluster based on lambda of new point
0.8.26,We need to find where in the tree the new point would go
0.8.26,for the purposes of outlier membership approximation
0.8.26,"When no clusters found, return array of 0's"
0.8.26,import pickle
0.8.26,from sklearn.cluster.tests.common import generate_clustered_data
0.8.26,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.26,"number of clusters, ignoring noise if present"
0.8.26,"metric is the function reference, not the string key."
0.8.26,def test_rsl_unavailable_hierarchy():
0.8.26,clusterer = RobustSingleLinkage()
0.8.26,with warnings.catch_warnings(record=True) as w:
0.8.26,tree = clusterer.cluster_hierarchy_
0.8.26,assert len(w) > 0
0.8.26,assert tree is None
0.8.26,"H, y = shuffle(X, y, random_state=7)"
0.8.26,Disable for now -- need to refactor to meet newer standards
0.8.26,import pickle
0.8.26,from sklearn.cluster.tests.common import generate_clustered_data
0.8.26,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.26,this fails if no $DISPLAY specified
0.8.26,"number of clusters, ignoring noise if present"
0.8.26,"number of clusters, ignoring noise if present"
0.8.26,"H, y = shuffle(X, y, random_state=7)"
0.8.26,"metric is the function reference, not the string key."
0.8.26,def test_hdbscan_unavailable_attributes():
0.8.26,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.26,with warnings.catch_warnings(record=True) as w:
0.8.26,tree = clusterer.condensed_tree_
0.8.26,assert len(w) > 0
0.8.26,assert tree is None
0.8.26,with warnings.catch_warnings(record=True) as w:
0.8.26,tree = clusterer.single_linkage_tree_
0.8.26,assert len(w) > 0
0.8.26,assert tree is None
0.8.26,with warnings.catch_warnings(record=True) as w:
0.8.26,scores = clusterer.outlier_scores_
0.8.26,assert len(w) > 0
0.8.26,assert scores is None
0.8.26,with warnings.catch_warnings(record=True) as w:
0.8.26,tree = clusterer.minimum_spanning_tree_
0.8.26,assert len(w) > 0
0.8.26,assert tree is None
0.8.26,def test_hdbscan_min_span_tree_availability():
0.8.26,clusterer = HDBSCAN().fit(X)
0.8.26,tree = clusterer.minimum_spanning_tree_
0.8.26,assert tree is None
0.8.26,D = distance.squareform(distance.pdist(X))
0.8.26,D /= np.max(D)
0.8.26,HDBSCAN(metric='precomputed').fit(D)
0.8.26,tree = clusterer.minimum_spanning_tree_
0.8.26,assert tree is None
0.8.26,def test_hdbscan_membership_vector():
0.8.26,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.26,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.26,assert_array_almost_equal(
0.8.26,"vector,"
0.8.26,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.26,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.26,assert_array_almost_equal(
0.8.26,"vector,"
0.8.26,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.26,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.26,assert_array_almost_equal(
0.8.26,"vector,"
0.8.26,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.26,
0.8.26,def test_hdbscan_all_points_membership_vectors():
0.8.26,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.26,vects = all_points_membership_vectors(clusterer)
0.8.26,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.26,"2.52734246e-001,"
0.8.26,8.38299608e-002]))
0.8.26,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.26,"8.35882503e-002,"
0.8.26,1.07356406e-001]))
0.8.26,Disable for now -- need to refactor to meet newer standards
0.8.26,Probably not applicable now #
0.8.26,def test_dbscan_sparse():
0.8.26,def test_dbscan_balltree():
0.8.26,def test_pickle():
0.8.26,def test_dbscan_core_samples_toy():
0.8.26,def test_boundaries():
0.8.26,Generate datasets. We choose the size big enough to see the scalability
0.8.26,"of the algorithms, but not too big to avoid too long running times"
0.8.26,normalize dataset for easier parameter selection
0.8.26,estimate bandwidth for mean shift
0.8.26,connectivity matrix for structured Ward
0.8.26,make connectivity symmetric
0.8.26,create clustering estimators
0.8.26,predict cluster memberships
0.8.26,plot
0.8.26,-*- coding: utf-8 -*-
0.8.26,#############################################################################
0.8.26,Generate sample data
0.8.26,#############################################################################
0.8.26,Compute DBSCAN
0.8.26,"Number of clusters in labels, ignoring noise if present."
0.8.26,#############################################################################
0.8.26,Plot result
0.8.26,Black removed and is used for noise instead.
0.8.26,Black used for noise.
0.8.26,Black used for noise.
0.8.26,-*- coding: utf-8 -*-
0.8.26,
0.8.26,"hdbscan documentation build configuration file, created by"
0.8.26,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.26,
0.8.26,This file is execfile()d with the current directory set to its
0.8.26,containing dir.
0.8.26,
0.8.26,Note that not all possible configuration values are present in this
0.8.26,autogenerated file.
0.8.26,
0.8.26,All configuration values have a default; values that are commented out
0.8.26,serve to show the default.
0.8.26,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.26,add these directories to sys.path here. If the directory is relative to the
0.8.26,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.26,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.26,"sys.path.insert(0, os.path.abspath('../'))"
0.8.26,-- General configuration ------------------------------------------------
0.8.26,"If your documentation needs a minimal Sphinx version, state it here."
0.8.26,needs_sphinx = '1.0'
0.8.26,"Add any Sphinx extension module names here, as strings. They can be"
0.8.26,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.26,ones.
0.8.26,"'sphinx.ext.napoleon',"
0.8.26,'numpy_ext.numpydoc'
0.8.26,napoleon_google_docstring = False
0.8.26,napoleon_numpy_docstring = True
0.8.26,"Add any paths that contain templates here, relative to this directory."
0.8.26,The suffix(es) of source filenames.
0.8.26,You can specify multiple suffix as a list of string:
0.8.26,"source_suffix = ['.rst', '.md']"
0.8.26,The encoding of source files.
0.8.26,source_encoding = 'utf-8-sig'
0.8.26,The master toctree document.
0.8.26,General information about the project.
0.8.26,"The version info for the project you're documenting, acts as replacement for"
0.8.26,"|version| and |release|, also used in various other places throughout the"
0.8.26,built documents.
0.8.26,
0.8.26,The short X.Y version.
0.8.26,"The full version, including alpha/beta/rc tags."
0.8.26,The language for content autogenerated by Sphinx. Refer to documentation
0.8.26,for a list of supported languages.
0.8.26,
0.8.26,This is also used if you do content translation via gettext catalogs.
0.8.26,"Usually you set ""language"" from the command line for these cases."
0.8.26,"There are two options for replacing |today|: either, you set today to some"
0.8.26,"non-false value, then it is used:"
0.8.26,today = ''
0.8.26,"Else, today_fmt is used as the format for a strftime call."
0.8.26,"today_fmt = '%B %d, %Y'"
0.8.26,"List of patterns, relative to source directory, that match files and"
0.8.26,directories to ignore when looking for source files.
0.8.26,The reST default role (used for this markup: `text`) to use for all
0.8.26,documents.
0.8.26,default_role = None
0.8.26,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.26,add_function_parentheses = True
0.8.26,"If true, the current module name will be prepended to all description"
0.8.26,unit titles (such as .. function::).
0.8.26,add_module_names = True
0.8.26,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.26,output. They are ignored by default.
0.8.26,show_authors = False
0.8.26,The name of the Pygments (syntax highlighting) style to use.
0.8.26,A list of ignored prefixes for module index sorting.
0.8.26,modindex_common_prefix = []
0.8.26,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.26,keep_warnings = False
0.8.26,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.26,-- Options for HTML output ----------------------------------------------
0.8.26,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.26,a list of builtin themes.
0.8.26,html_theme = 'alabaster'
0.8.26,Theme options are theme-specific and customize the look and feel of a theme
0.8.26,"further.  For a list of options available for each theme, see the"
0.8.26,documentation.
0.8.26,html_theme_options = {}
0.8.26,"Add any paths that contain custom themes here, relative to this directory."
0.8.26,html_theme_path = []
0.8.26,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.26,"""<project> v<release> documentation""."
0.8.26,html_title = None
0.8.26,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.26,html_short_title = None
0.8.26,The name of an image file (relative to this directory) to place at the top
0.8.26,of the sidebar.
0.8.26,html_logo = None
0.8.26,The name of an image file (within the static path) to use as favicon of the
0.8.26,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.26,pixels large.
0.8.26,html_favicon = None
0.8.26,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.26,"relative to this directory. They are copied after the builtin static files,"
0.8.26,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.26,Add any extra paths that contain custom files (such as robots.txt or
0.8.26,".htaccess) here, relative to this directory. These files are copied"
0.8.26,directly to the root of the documentation.
0.8.26,html_extra_path = []
0.8.26,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.26,using the given strftime format.
0.8.26,"html_last_updated_fmt = '%b %d, %Y'"
0.8.26,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.26,typographically correct entities.
0.8.26,html_use_smartypants = True
0.8.26,"Custom sidebar templates, maps document names to template names."
0.8.26,html_sidebars = {}
0.8.26,"Additional templates that should be rendered to pages, maps page names to"
0.8.26,template names.
0.8.26,html_additional_pages = {}
0.8.26,"If false, no module index is generated."
0.8.26,html_domain_indices = True
0.8.26,"If false, no index is generated."
0.8.26,html_use_index = True
0.8.26,"If true, the index is split into individual pages for each letter."
0.8.26,html_split_index = False
0.8.26,"If true, links to the reST sources are added to the pages."
0.8.26,html_show_sourcelink = True
0.8.26,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.26,html_show_sphinx = True
0.8.26,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.26,html_show_copyright = True
0.8.26,"If true, an OpenSearch description file will be output, and all pages will"
0.8.26,contain a <link> tag referring to it.  The value of this option must be the
0.8.26,base URL from which the finished HTML is served.
0.8.26,html_use_opensearch = ''
0.8.26,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.26,html_file_suffix = None
0.8.26,Language to be used for generating the HTML full-text search index.
0.8.26,Sphinx supports the following languages:
0.8.26,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.26,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.26,html_search_language = 'en'
0.8.26,"A dictionary with options for the search language support, empty by default."
0.8.26,Now only 'ja' uses this config value
0.8.26,html_search_options = {'type': 'default'}
0.8.26,The name of a javascript file (relative to the configuration directory) that
0.8.26,"implements a search results scorer. If empty, the default will be used."
0.8.26,html_search_scorer = 'scorer.js'
0.8.26,Output file base name for HTML help builder.
0.8.26,-- Options for LaTeX output ---------------------------------------------
0.8.26,The paper size ('letterpaper' or 'a4paper').
0.8.26,"'papersize': 'letterpaper',"
0.8.26,"The font size ('10pt', '11pt' or '12pt')."
0.8.26,"'pointsize': '10pt',"
0.8.26,Additional stuff for the LaTeX preamble.
0.8.26,"'preamble': '',"
0.8.26,Latex figure (float) alignment
0.8.26,"'figure_align': 'htbp',"
0.8.26,Grouping the document tree into LaTeX files. List of tuples
0.8.26,"(source start file, target name, title,"
0.8.26,"author, documentclass [howto, manual, or own class])."
0.8.26,The name of an image file (relative to this directory) to place at the top of
0.8.26,the title page.
0.8.26,latex_logo = None
0.8.26,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.26,not chapters.
0.8.26,latex_use_parts = False
0.8.26,"If true, show page references after internal links."
0.8.26,latex_show_pagerefs = False
0.8.26,"If true, show URL addresses after external links."
0.8.26,latex_show_urls = False
0.8.26,Documents to append as an appendix to all manuals.
0.8.26,latex_appendices = []
0.8.26,"If false, no module index is generated."
0.8.26,latex_domain_indices = True
0.8.26,-- Options for manual page output ---------------------------------------
0.8.26,One entry per manual page. List of tuples
0.8.26,"(source start file, name, description, authors, manual section)."
0.8.26,"If true, show URL addresses after external links."
0.8.26,man_show_urls = False
0.8.26,-- Options for Texinfo output -------------------------------------------
0.8.26,Grouping the document tree into Texinfo files. List of tuples
0.8.26,"(source start file, target name, title, author,"
0.8.26,"dir menu entry, description, category)"
0.8.26,Documents to append as an appendix to all manuals.
0.8.26,texinfo_appendices = []
0.8.26,"If false, no module index is generated."
0.8.26,texinfo_domain_indices = True
0.8.26,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.26,texinfo_show_urls = 'footnote'
0.8.26,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.26,texinfo_no_detailmenu = False
0.8.26,-- Options for Epub output ----------------------------------------------
0.8.26,Bibliographic Dublin Core info.
0.8.26,The basename for the epub file. It defaults to the project name.
0.8.26,epub_basename = project
0.8.26,The HTML theme for the epub output. Since the default themes are not
0.8.26,"optimized for small screen space, using the same theme for HTML and epub"
0.8.26,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.26,visual space.
0.8.26,epub_theme = 'epub'
0.8.26,The language of the text. It defaults to the language option
0.8.26,or 'en' if the language is not set.
0.8.26,epub_language = ''
0.8.26,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.26,epub_scheme = ''
0.8.26,The unique identifier of the text. This can be a ISBN number
0.8.26,or the project homepage.
0.8.26,epub_identifier = ''
0.8.26,A unique identification for the text.
0.8.26,epub_uid = ''
0.8.26,A tuple containing the cover image and cover page html template filenames.
0.8.26,epub_cover = ()
0.8.26,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.26,epub_guide = ()
0.8.26,HTML files that should be inserted before the pages created by sphinx.
0.8.26,The format is a list of tuples containing the path and title.
0.8.26,epub_pre_files = []
0.8.26,HTML files that should be inserted after the pages created by sphinx.
0.8.26,The format is a list of tuples containing the path and title.
0.8.26,epub_post_files = []
0.8.26,A list of files that should not be packed into the epub file.
0.8.26,The depth of the table of contents in toc.ncx.
0.8.26,epub_tocdepth = 3
0.8.26,Allow duplicate toc entries.
0.8.26,epub_tocdup = True
0.8.26,Choose between 'default' and 'includehidden'.
0.8.26,epub_tocscope = 'default'
0.8.26,Fix unsupported image types using the Pillow.
0.8.26,epub_fix_images = False
0.8.26,Scale large images.
0.8.26,epub_max_image_width = 0
0.8.26,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.26,epub_show_urls = 'inline'
0.8.26,"If false, no index is generated."
0.8.26,epub_use_index = True
0.8.24,"Import numpy here, only when headers are needed"
0.8.24,Add numpy headers to include_dirs
0.8.24,Call original build_ext command
0.8.24,The dependencies are the same as the contents of requirements.txt
0.8.24,"A little ""fancy"" we select from the flattened array reshape back"
0.8.24,(Fortran format to get indexing right) and take the product to do an and
0.8.24,then convert back to boolean type.
0.8.24,Density sparseness is not well defined if there are no
0.8.24,internal edges (as per the referenced paper). However
0.8.24,MATLAB code from the original authors simply selects the
0.8.24,largest of *all* the edges in the case that there are
0.8.24,"no internal edges, so we do the same here"
0.8.24,"If there are any internal edges, then subselect them out"
0.8.24,If there are no internal edges then we want to take the
0.8.24,"max over all the edges that exist in the MST, so we simply"
0.8.24,do nothing and return all the edges in the MST.
0.8.24,-*- coding: utf-8 -*-
0.8.24,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.24,Steve Astels <sastels@gmail.com>
0.8.24,John Healy <jchealy@gmail.com>
0.8.24,
0.8.24,License: BSD 3 clause
0.8.24,"Treating this case explicitly, instead of letting"
0.8.24,"sklearn.metrics.pairwise_distances handle it,"
0.8.24,enables the usage of numpy.inf in the distance
0.8.24,matrix to indicate missing distance information.
0.8.24,TODO: Check if copying is necessary
0.8.24,raise TypeError('Sparse distance matrices not yet supported')
0.8.24,Warn if the MST couldn't be constructed around the missing distances
0.8.24,mst_linkage_core does not generate a full minimal spanning tree
0.8.24,If a tree is required then we must build the edges from the information
0.8.24,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.24,Sort edges of the min_spanning_tree by weight
0.8.24,Convert edge list into standard hierarchical clustering format
0.8.24,Check for connected component on X
0.8.24,Compute sparse mutual reachability graph
0.8.24,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.24,Check connected component on mutual reachability
0.8.24,"If more than one component, it means that even if the distance matrix X"
0.8.24,"has one component, there exists with less than `min_samples` neighbors"
0.8.24,Compute the minimum spanning tree for the sparse graph
0.8.24,Convert the graph to scipy cluster array format
0.8.24,Sort edges of the min_spanning_tree by weight
0.8.24,Convert edge list into standard hierarchical clustering format
0.8.24,The Cython routines used require contiguous arrays
0.8.24,TO DO: Deal with p for minkowski appropriately
0.8.24,Get distance to kth nearest neighbour
0.8.24,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.24,Sort edges of the min_spanning_tree by weight
0.8.24,Convert edge list into standard hierarchical clustering format
0.8.24,The Cython routines used require contiguous arrays
0.8.24,Get distance to kth nearest neighbour
0.8.24,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.24,Sort edges of the min_spanning_tree by weight
0.8.24,Convert edge list into standard hierarchical clustering format
0.8.24,Sort edges of the min_spanning_tree by weight
0.8.24,Convert edge list into standard hierarchical clustering format
0.8.24,Sort edges of the min_spanning_tree by weight
0.8.24,Convert edge list into standard hierarchical clustering format
0.8.24,Checks input and converts to an nd-array where possible
0.8.24,"Only non-sparse, precomputed distance matrices are handled here"
0.8.24,and thereby allowed to contain numpy.inf for missing distances
0.8.24,Python 2 and 3 compliant string_type checking
0.8.24,We can't do much with sparse matrices ...
0.8.24,TO DO: Need heuristic to decide when to go to boruvka;
0.8.24,still debugging for now
0.8.24,TO DO: Need heuristic to decide when to go to boruvka;
0.8.24,still debugging for now
0.8.24,Inherits from sklearn
0.8.24,Handle sparse precomputed distance matrices separately
0.8.24,"Only non-sparse, precomputed distance matrices are allowed"
0.8.24,to have numpy.inf values indicating missing distances
0.8.24,"prediction data only applies to the persistent model, so remove"
0.8.24,it from the keyword args we pass on the the function
0.8.24,"Unltimately, for each Ci, we only require the"
0.8.24,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.24,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.24,density separation 'with respect to' Ci.
0.8.24,If exactly one of the points is noise
0.8.24,Set the density sparseness of the cluster
0.8.24,to the sparsest value seen so far.
0.8.24,Check whether density separations with
0.8.24,respect to each of these clusters can
0.8.24,be reduced.
0.8.24,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.24,This only makes sense if num_clusters = 1 since it has turned out
0.8.24,that the MR-MST has no edges between a noise point and a core point.
0.8.24,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.24,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.24,MR-MST might contain an edge with one point in Cj and ther other one
0.8.24,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.24,another large enough value.
0.8.24,
0.8.24,TODO: Think of a better yet efficient way to handle this.
0.8.24,-*- coding: utf-8 -*-
0.8.24,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.24,
0.8.24,License: BSD 3 clause
0.8.24,"Return the only cluster, the root"
0.8.24,We want to get the x and y coordinates for the start of each cluster
0.8.24,"Initialize the leaves, since we know where they go, the iterate"
0.8.24,"through everything from the leaves back, setting coords as we go"
0.8.24,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.24,bottoms and widths for each rectangle. We can go through each cluster
0.8.24,and do this for each in turn.
0.8.24,Ensure we don't try to take log of zero
0.8.24,Finally we need the horizontal lines that occur at cluster splits.
0.8.24,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.24,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.24,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.24,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.24,the chosen clusters.
0.8.24,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.24,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.24,based on the percentile should alleviate the impact on plotting.
0.8.24,Set center and height to default values if necessary
0.8.24,Ensure the ellipse is visible
0.8.24,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.24,Use PCA to get down to 32 dimension
0.8.24,-*- coding: utf-8 -*-
0.8.24,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.24,
0.8.24,License: BSD 3 clause
0.8.24,The Cython routines used require contiguous arrays
0.8.24,The Cython routines used require contiguous arrays
0.8.24,We can't do much with sparse matrices ...
0.8.24,Need heuristic to decide when to go to boruvka;
0.8.24,still debugging for now
0.8.24,Need heuristic to decide when to go to boruvka;
0.8.24,still debugging for now
0.8.24,Support various prediction methods for predicting cluster membership
0.8.24,of new or unseen points. There are several ways to interpret how
0.8.24,"to do this correctly, so we provide several methods for"
0.8.24,the different use cases that may arise.
0.8.24,raw_condensed_tree = condensed_tree.to_numpy()
0.8.24,New point departs with the old
0.8.24,Find appropriate cluster based on lambda of new point
0.8.24,Find appropriate cluster based on lambda of new point
0.8.24,We need to find where in the tree the new point would go
0.8.24,for the purposes of outlier membership approximation
0.8.24,"When no clusters found, return array of 0's"
0.8.24,import pickle
0.8.24,from sklearn.cluster.tests.common import generate_clustered_data
0.8.24,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.24,"number of clusters, ignoring noise if present"
0.8.24,"metric is the function reference, not the string key."
0.8.24,def test_rsl_unavailable_hierarchy():
0.8.24,clusterer = RobustSingleLinkage()
0.8.24,with warnings.catch_warnings(record=True) as w:
0.8.24,tree = clusterer.cluster_hierarchy_
0.8.24,assert len(w) > 0
0.8.24,assert tree is None
0.8.24,"H, y = shuffle(X, y, random_state=7)"
0.8.24,Disable for now -- need to refactor to meet newer standards
0.8.24,import pickle
0.8.24,from sklearn.cluster.tests.common import generate_clustered_data
0.8.24,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.24,this fails if no $DISPLAY specified
0.8.24,"number of clusters, ignoring noise if present"
0.8.24,"number of clusters, ignoring noise if present"
0.8.24,"H, y = shuffle(X, y, random_state=7)"
0.8.24,"metric is the function reference, not the string key."
0.8.24,def test_hdbscan_unavailable_attributes():
0.8.24,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.24,with warnings.catch_warnings(record=True) as w:
0.8.24,tree = clusterer.condensed_tree_
0.8.24,assert len(w) > 0
0.8.24,assert tree is None
0.8.24,with warnings.catch_warnings(record=True) as w:
0.8.24,tree = clusterer.single_linkage_tree_
0.8.24,assert len(w) > 0
0.8.24,assert tree is None
0.8.24,with warnings.catch_warnings(record=True) as w:
0.8.24,scores = clusterer.outlier_scores_
0.8.24,assert len(w) > 0
0.8.24,assert scores is None
0.8.24,with warnings.catch_warnings(record=True) as w:
0.8.24,tree = clusterer.minimum_spanning_tree_
0.8.24,assert len(w) > 0
0.8.24,assert tree is None
0.8.24,def test_hdbscan_min_span_tree_availability():
0.8.24,clusterer = HDBSCAN().fit(X)
0.8.24,tree = clusterer.minimum_spanning_tree_
0.8.24,assert tree is None
0.8.24,D = distance.squareform(distance.pdist(X))
0.8.24,D /= np.max(D)
0.8.24,HDBSCAN(metric='precomputed').fit(D)
0.8.24,tree = clusterer.minimum_spanning_tree_
0.8.24,assert tree is None
0.8.24,def test_hdbscan_membership_vector():
0.8.24,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.24,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.24,assert_array_almost_equal(
0.8.24,"vector,"
0.8.24,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.24,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.24,assert_array_almost_equal(
0.8.24,"vector,"
0.8.24,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.24,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.24,assert_array_almost_equal(
0.8.24,"vector,"
0.8.24,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.24,
0.8.24,def test_hdbscan_all_points_membership_vectors():
0.8.24,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.24,vects = all_points_membership_vectors(clusterer)
0.8.24,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.24,"2.52734246e-001,"
0.8.24,8.38299608e-002]))
0.8.24,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.24,"8.35882503e-002,"
0.8.24,1.07356406e-001]))
0.8.24,Disable for now -- need to refactor to meet newer standards
0.8.24,Probably not applicable now #
0.8.24,def test_dbscan_sparse():
0.8.24,def test_dbscan_balltree():
0.8.24,def test_pickle():
0.8.24,def test_dbscan_core_samples_toy():
0.8.24,def test_boundaries():
0.8.24,Generate datasets. We choose the size big enough to see the scalability
0.8.24,"of the algorithms, but not too big to avoid too long running times"
0.8.24,normalize dataset for easier parameter selection
0.8.24,estimate bandwidth for mean shift
0.8.24,connectivity matrix for structured Ward
0.8.24,make connectivity symmetric
0.8.24,create clustering estimators
0.8.24,predict cluster memberships
0.8.24,plot
0.8.24,-*- coding: utf-8 -*-
0.8.24,#############################################################################
0.8.24,Generate sample data
0.8.24,#############################################################################
0.8.24,Compute DBSCAN
0.8.24,"Number of clusters in labels, ignoring noise if present."
0.8.24,#############################################################################
0.8.24,Plot result
0.8.24,Black removed and is used for noise instead.
0.8.24,Black used for noise.
0.8.24,Black used for noise.
0.8.24,-*- coding: utf-8 -*-
0.8.24,
0.8.24,"hdbscan documentation build configuration file, created by"
0.8.24,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.24,
0.8.24,This file is execfile()d with the current directory set to its
0.8.24,containing dir.
0.8.24,
0.8.24,Note that not all possible configuration values are present in this
0.8.24,autogenerated file.
0.8.24,
0.8.24,All configuration values have a default; values that are commented out
0.8.24,serve to show the default.
0.8.24,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.24,add these directories to sys.path here. If the directory is relative to the
0.8.24,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.24,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.24,"sys.path.insert(0, os.path.abspath('../'))"
0.8.24,-- General configuration ------------------------------------------------
0.8.24,"If your documentation needs a minimal Sphinx version, state it here."
0.8.24,needs_sphinx = '1.0'
0.8.24,"Add any Sphinx extension module names here, as strings. They can be"
0.8.24,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.24,ones.
0.8.24,"'sphinx.ext.napoleon',"
0.8.24,'numpy_ext.numpydoc'
0.8.24,napoleon_google_docstring = False
0.8.24,napoleon_numpy_docstring = True
0.8.24,"Add any paths that contain templates here, relative to this directory."
0.8.24,The suffix(es) of source filenames.
0.8.24,You can specify multiple suffix as a list of string:
0.8.24,"source_suffix = ['.rst', '.md']"
0.8.24,The encoding of source files.
0.8.24,source_encoding = 'utf-8-sig'
0.8.24,The master toctree document.
0.8.24,General information about the project.
0.8.24,"The version info for the project you're documenting, acts as replacement for"
0.8.24,"|version| and |release|, also used in various other places throughout the"
0.8.24,built documents.
0.8.24,
0.8.24,The short X.Y version.
0.8.24,"The full version, including alpha/beta/rc tags."
0.8.24,The language for content autogenerated by Sphinx. Refer to documentation
0.8.24,for a list of supported languages.
0.8.24,
0.8.24,This is also used if you do content translation via gettext catalogs.
0.8.24,"Usually you set ""language"" from the command line for these cases."
0.8.24,"There are two options for replacing |today|: either, you set today to some"
0.8.24,"non-false value, then it is used:"
0.8.24,today = ''
0.8.24,"Else, today_fmt is used as the format for a strftime call."
0.8.24,"today_fmt = '%B %d, %Y'"
0.8.24,"List of patterns, relative to source directory, that match files and"
0.8.24,directories to ignore when looking for source files.
0.8.24,The reST default role (used for this markup: `text`) to use for all
0.8.24,documents.
0.8.24,default_role = None
0.8.24,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.24,add_function_parentheses = True
0.8.24,"If true, the current module name will be prepended to all description"
0.8.24,unit titles (such as .. function::).
0.8.24,add_module_names = True
0.8.24,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.24,output. They are ignored by default.
0.8.24,show_authors = False
0.8.24,The name of the Pygments (syntax highlighting) style to use.
0.8.24,A list of ignored prefixes for module index sorting.
0.8.24,modindex_common_prefix = []
0.8.24,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.24,keep_warnings = False
0.8.24,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.24,-- Options for HTML output ----------------------------------------------
0.8.24,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.24,a list of builtin themes.
0.8.24,html_theme = 'alabaster'
0.8.24,Theme options are theme-specific and customize the look and feel of a theme
0.8.24,"further.  For a list of options available for each theme, see the"
0.8.24,documentation.
0.8.24,html_theme_options = {}
0.8.24,"Add any paths that contain custom themes here, relative to this directory."
0.8.24,html_theme_path = []
0.8.24,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.24,"""<project> v<release> documentation""."
0.8.24,html_title = None
0.8.24,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.24,html_short_title = None
0.8.24,The name of an image file (relative to this directory) to place at the top
0.8.24,of the sidebar.
0.8.24,html_logo = None
0.8.24,The name of an image file (within the static path) to use as favicon of the
0.8.24,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.24,pixels large.
0.8.24,html_favicon = None
0.8.24,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.24,"relative to this directory. They are copied after the builtin static files,"
0.8.24,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.24,Add any extra paths that contain custom files (such as robots.txt or
0.8.24,".htaccess) here, relative to this directory. These files are copied"
0.8.24,directly to the root of the documentation.
0.8.24,html_extra_path = []
0.8.24,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.24,using the given strftime format.
0.8.24,"html_last_updated_fmt = '%b %d, %Y'"
0.8.24,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.24,typographically correct entities.
0.8.24,html_use_smartypants = True
0.8.24,"Custom sidebar templates, maps document names to template names."
0.8.24,html_sidebars = {}
0.8.24,"Additional templates that should be rendered to pages, maps page names to"
0.8.24,template names.
0.8.24,html_additional_pages = {}
0.8.24,"If false, no module index is generated."
0.8.24,html_domain_indices = True
0.8.24,"If false, no index is generated."
0.8.24,html_use_index = True
0.8.24,"If true, the index is split into individual pages for each letter."
0.8.24,html_split_index = False
0.8.24,"If true, links to the reST sources are added to the pages."
0.8.24,html_show_sourcelink = True
0.8.24,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.24,html_show_sphinx = True
0.8.24,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.24,html_show_copyright = True
0.8.24,"If true, an OpenSearch description file will be output, and all pages will"
0.8.24,contain a <link> tag referring to it.  The value of this option must be the
0.8.24,base URL from which the finished HTML is served.
0.8.24,html_use_opensearch = ''
0.8.24,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.24,html_file_suffix = None
0.8.24,Language to be used for generating the HTML full-text search index.
0.8.24,Sphinx supports the following languages:
0.8.24,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.24,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.24,html_search_language = 'en'
0.8.24,"A dictionary with options for the search language support, empty by default."
0.8.24,Now only 'ja' uses this config value
0.8.24,html_search_options = {'type': 'default'}
0.8.24,The name of a javascript file (relative to the configuration directory) that
0.8.24,"implements a search results scorer. If empty, the default will be used."
0.8.24,html_search_scorer = 'scorer.js'
0.8.24,Output file base name for HTML help builder.
0.8.24,-- Options for LaTeX output ---------------------------------------------
0.8.24,The paper size ('letterpaper' or 'a4paper').
0.8.24,"'papersize': 'letterpaper',"
0.8.24,"The font size ('10pt', '11pt' or '12pt')."
0.8.24,"'pointsize': '10pt',"
0.8.24,Additional stuff for the LaTeX preamble.
0.8.24,"'preamble': '',"
0.8.24,Latex figure (float) alignment
0.8.24,"'figure_align': 'htbp',"
0.8.24,Grouping the document tree into LaTeX files. List of tuples
0.8.24,"(source start file, target name, title,"
0.8.24,"author, documentclass [howto, manual, or own class])."
0.8.24,The name of an image file (relative to this directory) to place at the top of
0.8.24,the title page.
0.8.24,latex_logo = None
0.8.24,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.24,not chapters.
0.8.24,latex_use_parts = False
0.8.24,"If true, show page references after internal links."
0.8.24,latex_show_pagerefs = False
0.8.24,"If true, show URL addresses after external links."
0.8.24,latex_show_urls = False
0.8.24,Documents to append as an appendix to all manuals.
0.8.24,latex_appendices = []
0.8.24,"If false, no module index is generated."
0.8.24,latex_domain_indices = True
0.8.24,-- Options for manual page output ---------------------------------------
0.8.24,One entry per manual page. List of tuples
0.8.24,"(source start file, name, description, authors, manual section)."
0.8.24,"If true, show URL addresses after external links."
0.8.24,man_show_urls = False
0.8.24,-- Options for Texinfo output -------------------------------------------
0.8.24,Grouping the document tree into Texinfo files. List of tuples
0.8.24,"(source start file, target name, title, author,"
0.8.24,"dir menu entry, description, category)"
0.8.24,Documents to append as an appendix to all manuals.
0.8.24,texinfo_appendices = []
0.8.24,"If false, no module index is generated."
0.8.24,texinfo_domain_indices = True
0.8.24,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.24,texinfo_show_urls = 'footnote'
0.8.24,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.24,texinfo_no_detailmenu = False
0.8.24,-- Options for Epub output ----------------------------------------------
0.8.24,Bibliographic Dublin Core info.
0.8.24,The basename for the epub file. It defaults to the project name.
0.8.24,epub_basename = project
0.8.24,The HTML theme for the epub output. Since the default themes are not
0.8.24,"optimized for small screen space, using the same theme for HTML and epub"
0.8.24,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.24,visual space.
0.8.24,epub_theme = 'epub'
0.8.24,The language of the text. It defaults to the language option
0.8.24,or 'en' if the language is not set.
0.8.24,epub_language = ''
0.8.24,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.24,epub_scheme = ''
0.8.24,The unique identifier of the text. This can be a ISBN number
0.8.24,or the project homepage.
0.8.24,epub_identifier = ''
0.8.24,A unique identification for the text.
0.8.24,epub_uid = ''
0.8.24,A tuple containing the cover image and cover page html template filenames.
0.8.24,epub_cover = ()
0.8.24,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.24,epub_guide = ()
0.8.24,HTML files that should be inserted before the pages created by sphinx.
0.8.24,The format is a list of tuples containing the path and title.
0.8.24,epub_pre_files = []
0.8.24,HTML files that should be inserted after the pages created by sphinx.
0.8.24,The format is a list of tuples containing the path and title.
0.8.24,epub_post_files = []
0.8.24,A list of files that should not be packed into the epub file.
0.8.24,The depth of the table of contents in toc.ncx.
0.8.24,epub_tocdepth = 3
0.8.24,Allow duplicate toc entries.
0.8.24,epub_tocdup = True
0.8.24,Choose between 'default' and 'includehidden'.
0.8.24,epub_tocscope = 'default'
0.8.24,Fix unsupported image types using the Pillow.
0.8.24,epub_fix_images = False
0.8.24,Scale large images.
0.8.24,epub_max_image_width = 0
0.8.24,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.24,epub_show_urls = 'inline'
0.8.24,"If false, no index is generated."
0.8.24,epub_use_index = True
0.8.23,"Import numpy here, only when headers are needed"
0.8.23,Add numpy headers to include_dirs
0.8.23,Call original build_ext command
0.8.23,The dependencies are the same as the contents of requirements.txt
0.8.23,"A little ""fancy"" we select from the flattened array reshape back"
0.8.23,(Fortran format to get indexing right) and take the product to do an and
0.8.23,then convert back to boolean type.
0.8.23,Density sparseness is not well defined if there are no
0.8.23,internal edges (as per the referenced paper). However
0.8.23,MATLAB code from the original authors simply selects the
0.8.23,largest of *all* the edges in the case that there are
0.8.23,"no internal edges, so we do the same here"
0.8.23,"If there are any internal edges, then subselect them out"
0.8.23,If there are no internal edges then we want to take the
0.8.23,"max over all the edges that exist in the MST, so we simply"
0.8.23,do nothing and return all the edges in the MST.
0.8.23,-*- coding: utf-8 -*-
0.8.23,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.23,Steve Astels <sastels@gmail.com>
0.8.23,John Healy <jchealy@gmail.com>
0.8.23,
0.8.23,License: BSD 3 clause
0.8.23,"Treating this case explicitly, instead of letting"
0.8.23,"sklearn.metrics.pairwise_distances handle it,"
0.8.23,enables the usage of numpy.inf in the distance
0.8.23,matrix to indicate missing distance information.
0.8.23,TODO: Check if copying is necessary
0.8.23,raise TypeError('Sparse distance matrices not yet supported')
0.8.23,Warn if the MST couldn't be constructed around the missing distances
0.8.23,mst_linkage_core does not generate a full minimal spanning tree
0.8.23,If a tree is required then we must build the edges from the information
0.8.23,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.23,Sort edges of the min_spanning_tree by weight
0.8.23,Convert edge list into standard hierarchical clustering format
0.8.23,Check for connected component on X
0.8.23,Compute sparse mutual reachability graph
0.8.23,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.23,Check connected component on mutual reachability
0.8.23,"If more than one component, it means that even if the distance matrix X"
0.8.23,"has one component, there exists with less than `min_samples` neighbors"
0.8.23,Compute the minimum spanning tree for the sparse graph
0.8.23,Convert the graph to scipy cluster array format
0.8.23,Sort edges of the min_spanning_tree by weight
0.8.23,Convert edge list into standard hierarchical clustering format
0.8.23,The Cython routines used require contiguous arrays
0.8.23,TO DO: Deal with p for minkowski appropriately
0.8.23,Get distance to kth nearest neighbour
0.8.23,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.23,Sort edges of the min_spanning_tree by weight
0.8.23,Convert edge list into standard hierarchical clustering format
0.8.23,The Cython routines used require contiguous arrays
0.8.23,Get distance to kth nearest neighbour
0.8.23,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.23,Sort edges of the min_spanning_tree by weight
0.8.23,Convert edge list into standard hierarchical clustering format
0.8.23,Sort edges of the min_spanning_tree by weight
0.8.23,Convert edge list into standard hierarchical clustering format
0.8.23,Sort edges of the min_spanning_tree by weight
0.8.23,Convert edge list into standard hierarchical clustering format
0.8.23,Checks input and converts to an nd-array where possible
0.8.23,"Only non-sparse, precomputed distance matrices are handled here"
0.8.23,and thereby allowed to contain numpy.inf for missing distances
0.8.23,Python 2 and 3 compliant string_type checking
0.8.23,We can't do much with sparse matrices ...
0.8.23,TO DO: Need heuristic to decide when to go to boruvka;
0.8.23,still debugging for now
0.8.23,TO DO: Need heuristic to decide when to go to boruvka;
0.8.23,still debugging for now
0.8.23,Inherits from sklearn
0.8.23,Handle sparse precomputed distance matrices separately
0.8.23,"Only non-sparse, precomputed distance matrices are allowed"
0.8.23,to have numpy.inf values indicating missing distances
0.8.23,"prediction data only applies to the persistent model, so remove"
0.8.23,it from the keyword args we pass on the the function
0.8.23,"Unltimately, for each Ci, we only require the"
0.8.23,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.23,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.23,density separation 'with respect to' Ci.
0.8.23,If exactly one of the points is noise
0.8.23,Set the density sparseness of the cluster
0.8.23,to the sparsest value seen so far.
0.8.23,Check whether density separations with
0.8.23,respect to each of these clusters can
0.8.23,be reduced.
0.8.23,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.23,This only makes sense if num_clusters = 1 since it has turned out
0.8.23,that the MR-MST has no edges between a noise point and a core point.
0.8.23,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.23,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.23,MR-MST might contain an edge with one point in Cj and ther other one
0.8.23,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.23,another large enough value.
0.8.23,
0.8.23,TODO: Think of a better yet efficient way to handle this.
0.8.23,-*- coding: utf-8 -*-
0.8.23,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.23,
0.8.23,License: BSD 3 clause
0.8.23,"Return the only cluster, the root"
0.8.23,We want to get the x and y coordinates for the start of each cluster
0.8.23,"Initialize the leaves, since we know where they go, the iterate"
0.8.23,"through everything from the leaves back, setting coords as we go"
0.8.23,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.23,bottoms and widths for each rectangle. We can go through each cluster
0.8.23,and do this for each in turn.
0.8.23,Ensure we don't try to take log of zero
0.8.23,Finally we need the horizontal lines that occur at cluster splits.
0.8.23,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.23,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.23,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.23,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.23,the chosen clusters.
0.8.23,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.23,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.23,based on the percentile should alleviate the impact on plotting.
0.8.23,Set center and height to default values if necessary
0.8.23,Ensure the ellipse is visible
0.8.23,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.23,Use PCA to get down to 32 dimension
0.8.23,-*- coding: utf-8 -*-
0.8.23,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.23,
0.8.23,License: BSD 3 clause
0.8.23,The Cython routines used require contiguous arrays
0.8.23,The Cython routines used require contiguous arrays
0.8.23,We can't do much with sparse matrices ...
0.8.23,Need heuristic to decide when to go to boruvka;
0.8.23,still debugging for now
0.8.23,Need heuristic to decide when to go to boruvka;
0.8.23,still debugging for now
0.8.23,Support various prediction methods for predicting cluster membership
0.8.23,of new or unseen points. There are several ways to interpret how
0.8.23,"to do this correctly, so we provide several methods for"
0.8.23,the different use cases that may arise.
0.8.23,raw_condensed_tree = condensed_tree.to_numpy()
0.8.23,New point departs with the old
0.8.23,Find appropriate cluster based on lambda of new point
0.8.23,Find appropriate cluster based on lambda of new point
0.8.23,We need to find where in the tree the new point would go
0.8.23,for the purposes of outlier membership approximation
0.8.23,"When no clusters found, return array of 0's"
0.8.23,import pickle
0.8.23,from sklearn.cluster.tests.common import generate_clustered_data
0.8.23,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.23,"number of clusters, ignoring noise if present"
0.8.23,"metric is the function reference, not the string key."
0.8.23,def test_rsl_unavailable_hierarchy():
0.8.23,clusterer = RobustSingleLinkage()
0.8.23,with warnings.catch_warnings(record=True) as w:
0.8.23,tree = clusterer.cluster_hierarchy_
0.8.23,assert len(w) > 0
0.8.23,assert tree is None
0.8.23,"H, y = shuffle(X, y, random_state=7)"
0.8.23,Disable for now -- need to refactor to meet newer standards
0.8.23,import pickle
0.8.23,from sklearn.cluster.tests.common import generate_clustered_data
0.8.23,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.23,this fails if no $DISPLAY specified
0.8.23,"number of clusters, ignoring noise if present"
0.8.23,"number of clusters, ignoring noise if present"
0.8.23,"H, y = shuffle(X, y, random_state=7)"
0.8.23,"metric is the function reference, not the string key."
0.8.23,def test_hdbscan_unavailable_attributes():
0.8.23,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.23,with warnings.catch_warnings(record=True) as w:
0.8.23,tree = clusterer.condensed_tree_
0.8.23,assert len(w) > 0
0.8.23,assert tree is None
0.8.23,with warnings.catch_warnings(record=True) as w:
0.8.23,tree = clusterer.single_linkage_tree_
0.8.23,assert len(w) > 0
0.8.23,assert tree is None
0.8.23,with warnings.catch_warnings(record=True) as w:
0.8.23,scores = clusterer.outlier_scores_
0.8.23,assert len(w) > 0
0.8.23,assert scores is None
0.8.23,with warnings.catch_warnings(record=True) as w:
0.8.23,tree = clusterer.minimum_spanning_tree_
0.8.23,assert len(w) > 0
0.8.23,assert tree is None
0.8.23,def test_hdbscan_min_span_tree_availability():
0.8.23,clusterer = HDBSCAN().fit(X)
0.8.23,tree = clusterer.minimum_spanning_tree_
0.8.23,assert tree is None
0.8.23,D = distance.squareform(distance.pdist(X))
0.8.23,D /= np.max(D)
0.8.23,HDBSCAN(metric='precomputed').fit(D)
0.8.23,tree = clusterer.minimum_spanning_tree_
0.8.23,assert tree is None
0.8.23,def test_hdbscan_membership_vector():
0.8.23,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.23,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.23,assert_array_almost_equal(
0.8.23,"vector,"
0.8.23,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.23,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.23,assert_array_almost_equal(
0.8.23,"vector,"
0.8.23,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.23,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.23,assert_array_almost_equal(
0.8.23,"vector,"
0.8.23,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.23,
0.8.23,def test_hdbscan_all_points_membership_vectors():
0.8.23,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.23,vects = all_points_membership_vectors(clusterer)
0.8.23,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.23,"2.52734246e-001,"
0.8.23,8.38299608e-002]))
0.8.23,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.23,"8.35882503e-002,"
0.8.23,1.07356406e-001]))
0.8.23,Disable for now -- need to refactor to meet newer standards
0.8.23,Probably not applicable now #
0.8.23,def test_dbscan_sparse():
0.8.23,def test_dbscan_balltree():
0.8.23,def test_pickle():
0.8.23,def test_dbscan_core_samples_toy():
0.8.23,def test_boundaries():
0.8.23,Generate datasets. We choose the size big enough to see the scalability
0.8.23,"of the algorithms, but not too big to avoid too long running times"
0.8.23,normalize dataset for easier parameter selection
0.8.23,estimate bandwidth for mean shift
0.8.23,connectivity matrix for structured Ward
0.8.23,make connectivity symmetric
0.8.23,create clustering estimators
0.8.23,predict cluster memberships
0.8.23,plot
0.8.23,-*- coding: utf-8 -*-
0.8.23,#############################################################################
0.8.23,Generate sample data
0.8.23,#############################################################################
0.8.23,Compute DBSCAN
0.8.23,"Number of clusters in labels, ignoring noise if present."
0.8.23,#############################################################################
0.8.23,Plot result
0.8.23,Black removed and is used for noise instead.
0.8.23,Black used for noise.
0.8.23,Black used for noise.
0.8.23,-*- coding: utf-8 -*-
0.8.23,
0.8.23,"hdbscan documentation build configuration file, created by"
0.8.23,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.23,
0.8.23,This file is execfile()d with the current directory set to its
0.8.23,containing dir.
0.8.23,
0.8.23,Note that not all possible configuration values are present in this
0.8.23,autogenerated file.
0.8.23,
0.8.23,All configuration values have a default; values that are commented out
0.8.23,serve to show the default.
0.8.23,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.23,add these directories to sys.path here. If the directory is relative to the
0.8.23,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.23,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.23,"sys.path.insert(0, os.path.abspath('../'))"
0.8.23,-- General configuration ------------------------------------------------
0.8.23,"If your documentation needs a minimal Sphinx version, state it here."
0.8.23,needs_sphinx = '1.0'
0.8.23,"Add any Sphinx extension module names here, as strings. They can be"
0.8.23,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.23,ones.
0.8.23,"'sphinx.ext.napoleon',"
0.8.23,'numpy_ext.numpydoc'
0.8.23,napoleon_google_docstring = False
0.8.23,napoleon_numpy_docstring = True
0.8.23,"Add any paths that contain templates here, relative to this directory."
0.8.23,The suffix(es) of source filenames.
0.8.23,You can specify multiple suffix as a list of string:
0.8.23,"source_suffix = ['.rst', '.md']"
0.8.23,The encoding of source files.
0.8.23,source_encoding = 'utf-8-sig'
0.8.23,The master toctree document.
0.8.23,General information about the project.
0.8.23,"The version info for the project you're documenting, acts as replacement for"
0.8.23,"|version| and |release|, also used in various other places throughout the"
0.8.23,built documents.
0.8.23,
0.8.23,The short X.Y version.
0.8.23,"The full version, including alpha/beta/rc tags."
0.8.23,The language for content autogenerated by Sphinx. Refer to documentation
0.8.23,for a list of supported languages.
0.8.23,
0.8.23,This is also used if you do content translation via gettext catalogs.
0.8.23,"Usually you set ""language"" from the command line for these cases."
0.8.23,"There are two options for replacing |today|: either, you set today to some"
0.8.23,"non-false value, then it is used:"
0.8.23,today = ''
0.8.23,"Else, today_fmt is used as the format for a strftime call."
0.8.23,"today_fmt = '%B %d, %Y'"
0.8.23,"List of patterns, relative to source directory, that match files and"
0.8.23,directories to ignore when looking for source files.
0.8.23,The reST default role (used for this markup: `text`) to use for all
0.8.23,documents.
0.8.23,default_role = None
0.8.23,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.23,add_function_parentheses = True
0.8.23,"If true, the current module name will be prepended to all description"
0.8.23,unit titles (such as .. function::).
0.8.23,add_module_names = True
0.8.23,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.23,output. They are ignored by default.
0.8.23,show_authors = False
0.8.23,The name of the Pygments (syntax highlighting) style to use.
0.8.23,A list of ignored prefixes for module index sorting.
0.8.23,modindex_common_prefix = []
0.8.23,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.23,keep_warnings = False
0.8.23,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.23,-- Options for HTML output ----------------------------------------------
0.8.23,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.23,a list of builtin themes.
0.8.23,html_theme = 'alabaster'
0.8.23,Theme options are theme-specific and customize the look and feel of a theme
0.8.23,"further.  For a list of options available for each theme, see the"
0.8.23,documentation.
0.8.23,html_theme_options = {}
0.8.23,"Add any paths that contain custom themes here, relative to this directory."
0.8.23,html_theme_path = []
0.8.23,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.23,"""<project> v<release> documentation""."
0.8.23,html_title = None
0.8.23,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.23,html_short_title = None
0.8.23,The name of an image file (relative to this directory) to place at the top
0.8.23,of the sidebar.
0.8.23,html_logo = None
0.8.23,The name of an image file (within the static path) to use as favicon of the
0.8.23,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.23,pixels large.
0.8.23,html_favicon = None
0.8.23,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.23,"relative to this directory. They are copied after the builtin static files,"
0.8.23,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.23,Add any extra paths that contain custom files (such as robots.txt or
0.8.23,".htaccess) here, relative to this directory. These files are copied"
0.8.23,directly to the root of the documentation.
0.8.23,html_extra_path = []
0.8.23,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.23,using the given strftime format.
0.8.23,"html_last_updated_fmt = '%b %d, %Y'"
0.8.23,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.23,typographically correct entities.
0.8.23,html_use_smartypants = True
0.8.23,"Custom sidebar templates, maps document names to template names."
0.8.23,html_sidebars = {}
0.8.23,"Additional templates that should be rendered to pages, maps page names to"
0.8.23,template names.
0.8.23,html_additional_pages = {}
0.8.23,"If false, no module index is generated."
0.8.23,html_domain_indices = True
0.8.23,"If false, no index is generated."
0.8.23,html_use_index = True
0.8.23,"If true, the index is split into individual pages for each letter."
0.8.23,html_split_index = False
0.8.23,"If true, links to the reST sources are added to the pages."
0.8.23,html_show_sourcelink = True
0.8.23,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.23,html_show_sphinx = True
0.8.23,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.23,html_show_copyright = True
0.8.23,"If true, an OpenSearch description file will be output, and all pages will"
0.8.23,contain a <link> tag referring to it.  The value of this option must be the
0.8.23,base URL from which the finished HTML is served.
0.8.23,html_use_opensearch = ''
0.8.23,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.23,html_file_suffix = None
0.8.23,Language to be used for generating the HTML full-text search index.
0.8.23,Sphinx supports the following languages:
0.8.23,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.23,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.23,html_search_language = 'en'
0.8.23,"A dictionary with options for the search language support, empty by default."
0.8.23,Now only 'ja' uses this config value
0.8.23,html_search_options = {'type': 'default'}
0.8.23,The name of a javascript file (relative to the configuration directory) that
0.8.23,"implements a search results scorer. If empty, the default will be used."
0.8.23,html_search_scorer = 'scorer.js'
0.8.23,Output file base name for HTML help builder.
0.8.23,-- Options for LaTeX output ---------------------------------------------
0.8.23,The paper size ('letterpaper' or 'a4paper').
0.8.23,"'papersize': 'letterpaper',"
0.8.23,"The font size ('10pt', '11pt' or '12pt')."
0.8.23,"'pointsize': '10pt',"
0.8.23,Additional stuff for the LaTeX preamble.
0.8.23,"'preamble': '',"
0.8.23,Latex figure (float) alignment
0.8.23,"'figure_align': 'htbp',"
0.8.23,Grouping the document tree into LaTeX files. List of tuples
0.8.23,"(source start file, target name, title,"
0.8.23,"author, documentclass [howto, manual, or own class])."
0.8.23,The name of an image file (relative to this directory) to place at the top of
0.8.23,the title page.
0.8.23,latex_logo = None
0.8.23,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.23,not chapters.
0.8.23,latex_use_parts = False
0.8.23,"If true, show page references after internal links."
0.8.23,latex_show_pagerefs = False
0.8.23,"If true, show URL addresses after external links."
0.8.23,latex_show_urls = False
0.8.23,Documents to append as an appendix to all manuals.
0.8.23,latex_appendices = []
0.8.23,"If false, no module index is generated."
0.8.23,latex_domain_indices = True
0.8.23,-- Options for manual page output ---------------------------------------
0.8.23,One entry per manual page. List of tuples
0.8.23,"(source start file, name, description, authors, manual section)."
0.8.23,"If true, show URL addresses after external links."
0.8.23,man_show_urls = False
0.8.23,-- Options for Texinfo output -------------------------------------------
0.8.23,Grouping the document tree into Texinfo files. List of tuples
0.8.23,"(source start file, target name, title, author,"
0.8.23,"dir menu entry, description, category)"
0.8.23,Documents to append as an appendix to all manuals.
0.8.23,texinfo_appendices = []
0.8.23,"If false, no module index is generated."
0.8.23,texinfo_domain_indices = True
0.8.23,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.23,texinfo_show_urls = 'footnote'
0.8.23,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.23,texinfo_no_detailmenu = False
0.8.23,-- Options for Epub output ----------------------------------------------
0.8.23,Bibliographic Dublin Core info.
0.8.23,The basename for the epub file. It defaults to the project name.
0.8.23,epub_basename = project
0.8.23,The HTML theme for the epub output. Since the default themes are not
0.8.23,"optimized for small screen space, using the same theme for HTML and epub"
0.8.23,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.23,visual space.
0.8.23,epub_theme = 'epub'
0.8.23,The language of the text. It defaults to the language option
0.8.23,or 'en' if the language is not set.
0.8.23,epub_language = ''
0.8.23,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.23,epub_scheme = ''
0.8.23,The unique identifier of the text. This can be a ISBN number
0.8.23,or the project homepage.
0.8.23,epub_identifier = ''
0.8.23,A unique identification for the text.
0.8.23,epub_uid = ''
0.8.23,A tuple containing the cover image and cover page html template filenames.
0.8.23,epub_cover = ()
0.8.23,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.23,epub_guide = ()
0.8.23,HTML files that should be inserted before the pages created by sphinx.
0.8.23,The format is a list of tuples containing the path and title.
0.8.23,epub_pre_files = []
0.8.23,HTML files that should be inserted after the pages created by sphinx.
0.8.23,The format is a list of tuples containing the path and title.
0.8.23,epub_post_files = []
0.8.23,A list of files that should not be packed into the epub file.
0.8.23,The depth of the table of contents in toc.ncx.
0.8.23,epub_tocdepth = 3
0.8.23,Allow duplicate toc entries.
0.8.23,epub_tocdup = True
0.8.23,Choose between 'default' and 'includehidden'.
0.8.23,epub_tocscope = 'default'
0.8.23,Fix unsupported image types using the Pillow.
0.8.23,epub_fix_images = False
0.8.23,Scale large images.
0.8.23,epub_max_image_width = 0
0.8.23,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.23,epub_show_urls = 'inline'
0.8.23,"If false, no index is generated."
0.8.23,epub_use_index = True
0.8.20,"Import numpy here, only when headers are needed"
0.8.20,Add numpy headers to include_dirs
0.8.20,Call original build_ext command
0.8.20,The dependencies are the same as the contents of requirements.txt
0.8.20,"A little ""fancy"" we select from the flattened array reshape back"
0.8.20,(Fortran format to get indexing right) and take the product to do an and
0.8.20,then convert back to boolean type.
0.8.20,Density sparseness is not well defined if there are no
0.8.20,internal edges (as per the referenced paper). However
0.8.20,MATLAB code from the original authors simply selects the
0.8.20,largest of *all* the edges in the case that there are
0.8.20,"no internal edges, so we do the same here"
0.8.20,"If there are any internal edges, then subselect them out"
0.8.20,If there are no internal edges then we want to take the
0.8.20,"max over all the edges that exist in the MST, so we simply"
0.8.20,do nothing and return all the edges in the MST.
0.8.20,-*- coding: utf-8 -*-
0.8.20,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.20,Steve Astels <sastels@gmail.com>
0.8.20,John Healy <jchealy@gmail.com>
0.8.20,
0.8.20,License: BSD 3 clause
0.8.20,"Treating this case explicitly, instead of letting"
0.8.20,"sklearn.metrics.pairwise_distances handle it,"
0.8.20,enables the usage of numpy.inf in the distance
0.8.20,matrix to indicate missing distance information.
0.8.20,TODO: Check if copying is necessary
0.8.20,raise TypeError('Sparse distance matrices not yet supported')
0.8.20,Warn if the MST couldn't be constructed around the missing distances
0.8.20,mst_linkage_core does not generate a full minimal spanning tree
0.8.20,If a tree is required then we must build the edges from the information
0.8.20,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.20,Sort edges of the min_spanning_tree by weight
0.8.20,Convert edge list into standard hierarchical clustering format
0.8.20,Check for connected component on X
0.8.20,Compute sparse mutual reachability graph
0.8.20,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.20,Check connected component on mutual reachability
0.8.20,"If more than one component, it means that even if the distance matrix X"
0.8.20,"has one component, there exists with less than `min_samples` neighbors"
0.8.20,Compute the minimum spanning tree for the sparse graph
0.8.20,Convert the graph to scipy cluster array format
0.8.20,Sort edges of the min_spanning_tree by weight
0.8.20,Convert edge list into standard hierarchical clustering format
0.8.20,The Cython routines used require contiguous arrays
0.8.20,TO DO: Deal with p for minkowski appropriately
0.8.20,Get distance to kth nearest neighbour
0.8.20,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.20,Sort edges of the min_spanning_tree by weight
0.8.20,Convert edge list into standard hierarchical clustering format
0.8.20,The Cython routines used require contiguous arrays
0.8.20,Get distance to kth nearest neighbour
0.8.20,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.20,Sort edges of the min_spanning_tree by weight
0.8.20,Convert edge list into standard hierarchical clustering format
0.8.20,Sort edges of the min_spanning_tree by weight
0.8.20,Convert edge list into standard hierarchical clustering format
0.8.20,Sort edges of the min_spanning_tree by weight
0.8.20,Convert edge list into standard hierarchical clustering format
0.8.20,Checks input and converts to an nd-array where possible
0.8.20,"Only non-sparse, precomputed distance matrices are handled here"
0.8.20,and thereby allowed to contain numpy.inf for missing distances
0.8.20,Python 2 and 3 compliant string_type checking
0.8.20,We can't do much with sparse matrices ...
0.8.20,TO DO: Need heuristic to decide when to go to boruvka;
0.8.20,still debugging for now
0.8.20,TO DO: Need heuristic to decide when to go to boruvka;
0.8.20,still debugging for now
0.8.20,Inherits from sklearn
0.8.20,Handle sparse precomputed distance matrices separately
0.8.20,"Only non-sparse, precomputed distance matrices are allowed"
0.8.20,to have numpy.inf values indicating missing distances
0.8.20,"prediction data only applies to the persistent model, so remove"
0.8.20,it from the keyword args we pass on the the function
0.8.20,"Unltimately, for each Ci, we only require the"
0.8.20,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.20,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.20,density separation 'with respect to' Ci.
0.8.20,If exactly one of the points is noise
0.8.20,Set the density sparseness of the cluster
0.8.20,to the sparsest value seen so far.
0.8.20,Check whether density separations with
0.8.20,respect to each of these clusters can
0.8.20,be reduced.
0.8.20,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.20,This only makes sense if num_clusters = 1 since it has turned out
0.8.20,that the MR-MST has no edges between a noise point and a core point.
0.8.20,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.20,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.20,MR-MST might contain an edge with one point in Cj and ther other one
0.8.20,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.20,another large enough value.
0.8.20,
0.8.20,TODO: Think of a better yet efficient way to handle this.
0.8.20,-*- coding: utf-8 -*-
0.8.20,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.20,
0.8.20,License: BSD 3 clause
0.8.20,"Return the only cluster, the root"
0.8.20,We want to get the x and y coordinates for the start of each cluster
0.8.20,"Initialize the leaves, since we know where they go, the iterate"
0.8.20,"through everything from the leaves back, setting coords as we go"
0.8.20,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.20,bottoms and widths for each rectangle. We can go through each cluster
0.8.20,and do this for each in turn.
0.8.20,Ensure we don't try to take log of zero
0.8.20,Finally we need the horizontal lines that occur at cluster splits.
0.8.20,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.20,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.20,Extract the chosen cluster bounds. If enough duplicate data points exist in the
0.8.20,data the lambda value might be infinite. This breaks labeling and highlighting
0.8.20,the chosen clusters.
0.8.20,Extract the plot range of the y-axis and set default center and height values for ellipses.
0.8.20,Extremly dense clusters might result in near infinite lambda values. Setting max_height
0.8.20,based on the percentile should alleviate the impact on plotting.
0.8.20,Set center and height to default values if necessary
0.8.20,Ensure the ellipse is visible
0.8.20,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.20,Use PCA to get down to 32 dimension
0.8.20,-*- coding: utf-8 -*-
0.8.20,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.20,
0.8.20,License: BSD 3 clause
0.8.20,The Cython routines used require contiguous arrays
0.8.20,The Cython routines used require contiguous arrays
0.8.20,We can't do much with sparse matrices ...
0.8.20,Need heuristic to decide when to go to boruvka;
0.8.20,still debugging for now
0.8.20,Need heuristic to decide when to go to boruvka;
0.8.20,still debugging for now
0.8.20,Support various prediction methods for predicting cluster membership
0.8.20,of new or unseen points. There are several ways to interpret how
0.8.20,"to do this correctly, so we provide several methods for"
0.8.20,the different use cases that may arise.
0.8.20,raw_condensed_tree = condensed_tree.to_numpy()
0.8.20,New point departs with the old
0.8.20,Find appropriate cluster based on lambda of new point
0.8.20,Find appropriate cluster based on lambda of new point
0.8.20,We need to find where in the tree the new point would go
0.8.20,for the purposes of outlier membership approximation
0.8.20,"When no clusters found, return array of 0's"
0.8.20,import pickle
0.8.20,from sklearn.cluster.tests.common import generate_clustered_data
0.8.20,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.20,"number of clusters, ignoring noise if present"
0.8.20,"metric is the function reference, not the string key."
0.8.20,def test_rsl_unavailable_hierarchy():
0.8.20,clusterer = RobustSingleLinkage()
0.8.20,with warnings.catch_warnings(record=True) as w:
0.8.20,tree = clusterer.cluster_hierarchy_
0.8.20,assert len(w) > 0
0.8.20,assert tree is None
0.8.20,"H, y = shuffle(X, y, random_state=7)"
0.8.20,Disable for now -- need to refactor to meet newer standards
0.8.20,import pickle
0.8.20,from sklearn.cluster.tests.common import generate_clustered_data
0.8.20,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.20,"number of clusters, ignoring noise if present"
0.8.20,"number of clusters, ignoring noise if present"
0.8.20,"H, y = shuffle(X, y, random_state=7)"
0.8.20,"metric is the function reference, not the string key."
0.8.20,def test_hdbscan_unavailable_attributes():
0.8.20,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.20,with warnings.catch_warnings(record=True) as w:
0.8.20,tree = clusterer.condensed_tree_
0.8.20,assert len(w) > 0
0.8.20,assert tree is None
0.8.20,with warnings.catch_warnings(record=True) as w:
0.8.20,tree = clusterer.single_linkage_tree_
0.8.20,assert len(w) > 0
0.8.20,assert tree is None
0.8.20,with warnings.catch_warnings(record=True) as w:
0.8.20,scores = clusterer.outlier_scores_
0.8.20,assert len(w) > 0
0.8.20,assert scores is None
0.8.20,with warnings.catch_warnings(record=True) as w:
0.8.20,tree = clusterer.minimum_spanning_tree_
0.8.20,assert len(w) > 0
0.8.20,assert tree is None
0.8.20,def test_hdbscan_min_span_tree_availability():
0.8.20,clusterer = HDBSCAN().fit(X)
0.8.20,tree = clusterer.minimum_spanning_tree_
0.8.20,assert tree is None
0.8.20,D = distance.squareform(distance.pdist(X))
0.8.20,D /= np.max(D)
0.8.20,HDBSCAN(metric='precomputed').fit(D)
0.8.20,tree = clusterer.minimum_spanning_tree_
0.8.20,assert tree is None
0.8.20,def test_hdbscan_membership_vector():
0.8.20,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.20,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.20,assert_array_almost_equal(
0.8.20,"vector,"
0.8.20,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.20,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.20,assert_array_almost_equal(
0.8.20,"vector,"
0.8.20,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.20,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.20,assert_array_almost_equal(
0.8.20,"vector,"
0.8.20,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.20,
0.8.20,def test_hdbscan_all_points_membership_vectors():
0.8.20,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.20,vects = all_points_membership_vectors(clusterer)
0.8.20,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.20,"2.52734246e-001,"
0.8.20,8.38299608e-002]))
0.8.20,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.20,"8.35882503e-002,"
0.8.20,1.07356406e-001]))
0.8.20,Disable for now -- need to refactor to meet newer standards
0.8.20,Probably not applicable now #
0.8.20,def test_dbscan_sparse():
0.8.20,def test_dbscan_balltree():
0.8.20,def test_pickle():
0.8.20,def test_dbscan_core_samples_toy():
0.8.20,def test_boundaries():
0.8.20,Generate datasets. We choose the size big enough to see the scalability
0.8.20,"of the algorithms, but not too big to avoid too long running times"
0.8.20,normalize dataset for easier parameter selection
0.8.20,estimate bandwidth for mean shift
0.8.20,connectivity matrix for structured Ward
0.8.20,make connectivity symmetric
0.8.20,create clustering estimators
0.8.20,predict cluster memberships
0.8.20,plot
0.8.20,-*- coding: utf-8 -*-
0.8.20,#############################################################################
0.8.20,Generate sample data
0.8.20,#############################################################################
0.8.20,Compute DBSCAN
0.8.20,"Number of clusters in labels, ignoring noise if present."
0.8.20,#############################################################################
0.8.20,Plot result
0.8.20,Black removed and is used for noise instead.
0.8.20,Black used for noise.
0.8.20,Black used for noise.
0.8.20,-*- coding: utf-8 -*-
0.8.20,
0.8.20,"hdbscan documentation build configuration file, created by"
0.8.20,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.20,
0.8.20,This file is execfile()d with the current directory set to its
0.8.20,containing dir.
0.8.20,
0.8.20,Note that not all possible configuration values are present in this
0.8.20,autogenerated file.
0.8.20,
0.8.20,All configuration values have a default; values that are commented out
0.8.20,serve to show the default.
0.8.20,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.20,add these directories to sys.path here. If the directory is relative to the
0.8.20,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.20,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.20,"sys.path.insert(0, os.path.abspath('../'))"
0.8.20,-- General configuration ------------------------------------------------
0.8.20,"If your documentation needs a minimal Sphinx version, state it here."
0.8.20,needs_sphinx = '1.0'
0.8.20,"Add any Sphinx extension module names here, as strings. They can be"
0.8.20,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.20,ones.
0.8.20,"'sphinx.ext.napoleon',"
0.8.20,'numpy_ext.numpydoc'
0.8.20,napoleon_google_docstring = False
0.8.20,napoleon_numpy_docstring = True
0.8.20,"Add any paths that contain templates here, relative to this directory."
0.8.20,The suffix(es) of source filenames.
0.8.20,You can specify multiple suffix as a list of string:
0.8.20,"source_suffix = ['.rst', '.md']"
0.8.20,The encoding of source files.
0.8.20,source_encoding = 'utf-8-sig'
0.8.20,The master toctree document.
0.8.20,General information about the project.
0.8.20,"The version info for the project you're documenting, acts as replacement for"
0.8.20,"|version| and |release|, also used in various other places throughout the"
0.8.20,built documents.
0.8.20,
0.8.20,The short X.Y version.
0.8.20,"The full version, including alpha/beta/rc tags."
0.8.20,The language for content autogenerated by Sphinx. Refer to documentation
0.8.20,for a list of supported languages.
0.8.20,
0.8.20,This is also used if you do content translation via gettext catalogs.
0.8.20,"Usually you set ""language"" from the command line for these cases."
0.8.20,"There are two options for replacing |today|: either, you set today to some"
0.8.20,"non-false value, then it is used:"
0.8.20,today = ''
0.8.20,"Else, today_fmt is used as the format for a strftime call."
0.8.20,"today_fmt = '%B %d, %Y'"
0.8.20,"List of patterns, relative to source directory, that match files and"
0.8.20,directories to ignore when looking for source files.
0.8.20,The reST default role (used for this markup: `text`) to use for all
0.8.20,documents.
0.8.20,default_role = None
0.8.20,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.20,add_function_parentheses = True
0.8.20,"If true, the current module name will be prepended to all description"
0.8.20,unit titles (such as .. function::).
0.8.20,add_module_names = True
0.8.20,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.20,output. They are ignored by default.
0.8.20,show_authors = False
0.8.20,The name of the Pygments (syntax highlighting) style to use.
0.8.20,A list of ignored prefixes for module index sorting.
0.8.20,modindex_common_prefix = []
0.8.20,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.20,keep_warnings = False
0.8.20,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.20,-- Options for HTML output ----------------------------------------------
0.8.20,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.20,a list of builtin themes.
0.8.20,html_theme = 'alabaster'
0.8.20,Theme options are theme-specific and customize the look and feel of a theme
0.8.20,"further.  For a list of options available for each theme, see the"
0.8.20,documentation.
0.8.20,html_theme_options = {}
0.8.20,"Add any paths that contain custom themes here, relative to this directory."
0.8.20,html_theme_path = []
0.8.20,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.20,"""<project> v<release> documentation""."
0.8.20,html_title = None
0.8.20,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.20,html_short_title = None
0.8.20,The name of an image file (relative to this directory) to place at the top
0.8.20,of the sidebar.
0.8.20,html_logo = None
0.8.20,The name of an image file (within the static path) to use as favicon of the
0.8.20,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.20,pixels large.
0.8.20,html_favicon = None
0.8.20,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.20,"relative to this directory. They are copied after the builtin static files,"
0.8.20,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.20,Add any extra paths that contain custom files (such as robots.txt or
0.8.20,".htaccess) here, relative to this directory. These files are copied"
0.8.20,directly to the root of the documentation.
0.8.20,html_extra_path = []
0.8.20,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.20,using the given strftime format.
0.8.20,"html_last_updated_fmt = '%b %d, %Y'"
0.8.20,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.20,typographically correct entities.
0.8.20,html_use_smartypants = True
0.8.20,"Custom sidebar templates, maps document names to template names."
0.8.20,html_sidebars = {}
0.8.20,"Additional templates that should be rendered to pages, maps page names to"
0.8.20,template names.
0.8.20,html_additional_pages = {}
0.8.20,"If false, no module index is generated."
0.8.20,html_domain_indices = True
0.8.20,"If false, no index is generated."
0.8.20,html_use_index = True
0.8.20,"If true, the index is split into individual pages for each letter."
0.8.20,html_split_index = False
0.8.20,"If true, links to the reST sources are added to the pages."
0.8.20,html_show_sourcelink = True
0.8.20,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.20,html_show_sphinx = True
0.8.20,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.20,html_show_copyright = True
0.8.20,"If true, an OpenSearch description file will be output, and all pages will"
0.8.20,contain a <link> tag referring to it.  The value of this option must be the
0.8.20,base URL from which the finished HTML is served.
0.8.20,html_use_opensearch = ''
0.8.20,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.20,html_file_suffix = None
0.8.20,Language to be used for generating the HTML full-text search index.
0.8.20,Sphinx supports the following languages:
0.8.20,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.20,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.20,html_search_language = 'en'
0.8.20,"A dictionary with options for the search language support, empty by default."
0.8.20,Now only 'ja' uses this config value
0.8.20,html_search_options = {'type': 'default'}
0.8.20,The name of a javascript file (relative to the configuration directory) that
0.8.20,"implements a search results scorer. If empty, the default will be used."
0.8.20,html_search_scorer = 'scorer.js'
0.8.20,Output file base name for HTML help builder.
0.8.20,-- Options for LaTeX output ---------------------------------------------
0.8.20,The paper size ('letterpaper' or 'a4paper').
0.8.20,"'papersize': 'letterpaper',"
0.8.20,"The font size ('10pt', '11pt' or '12pt')."
0.8.20,"'pointsize': '10pt',"
0.8.20,Additional stuff for the LaTeX preamble.
0.8.20,"'preamble': '',"
0.8.20,Latex figure (float) alignment
0.8.20,"'figure_align': 'htbp',"
0.8.20,Grouping the document tree into LaTeX files. List of tuples
0.8.20,"(source start file, target name, title,"
0.8.20,"author, documentclass [howto, manual, or own class])."
0.8.20,The name of an image file (relative to this directory) to place at the top of
0.8.20,the title page.
0.8.20,latex_logo = None
0.8.20,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.20,not chapters.
0.8.20,latex_use_parts = False
0.8.20,"If true, show page references after internal links."
0.8.20,latex_show_pagerefs = False
0.8.20,"If true, show URL addresses after external links."
0.8.20,latex_show_urls = False
0.8.20,Documents to append as an appendix to all manuals.
0.8.20,latex_appendices = []
0.8.20,"If false, no module index is generated."
0.8.20,latex_domain_indices = True
0.8.20,-- Options for manual page output ---------------------------------------
0.8.20,One entry per manual page. List of tuples
0.8.20,"(source start file, name, description, authors, manual section)."
0.8.20,"If true, show URL addresses after external links."
0.8.20,man_show_urls = False
0.8.20,-- Options for Texinfo output -------------------------------------------
0.8.20,Grouping the document tree into Texinfo files. List of tuples
0.8.20,"(source start file, target name, title, author,"
0.8.20,"dir menu entry, description, category)"
0.8.20,Documents to append as an appendix to all manuals.
0.8.20,texinfo_appendices = []
0.8.20,"If false, no module index is generated."
0.8.20,texinfo_domain_indices = True
0.8.20,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.20,texinfo_show_urls = 'footnote'
0.8.20,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.20,texinfo_no_detailmenu = False
0.8.20,-- Options for Epub output ----------------------------------------------
0.8.20,Bibliographic Dublin Core info.
0.8.20,The basename for the epub file. It defaults to the project name.
0.8.20,epub_basename = project
0.8.20,The HTML theme for the epub output. Since the default themes are not
0.8.20,"optimized for small screen space, using the same theme for HTML and epub"
0.8.20,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.20,visual space.
0.8.20,epub_theme = 'epub'
0.8.20,The language of the text. It defaults to the language option
0.8.20,or 'en' if the language is not set.
0.8.20,epub_language = ''
0.8.20,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.20,epub_scheme = ''
0.8.20,The unique identifier of the text. This can be a ISBN number
0.8.20,or the project homepage.
0.8.20,epub_identifier = ''
0.8.20,A unique identification for the text.
0.8.20,epub_uid = ''
0.8.20,A tuple containing the cover image and cover page html template filenames.
0.8.20,epub_cover = ()
0.8.20,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.20,epub_guide = ()
0.8.20,HTML files that should be inserted before the pages created by sphinx.
0.8.20,The format is a list of tuples containing the path and title.
0.8.20,epub_pre_files = []
0.8.20,HTML files that should be inserted after the pages created by sphinx.
0.8.20,The format is a list of tuples containing the path and title.
0.8.20,epub_post_files = []
0.8.20,A list of files that should not be packed into the epub file.
0.8.20,The depth of the table of contents in toc.ncx.
0.8.20,epub_tocdepth = 3
0.8.20,Allow duplicate toc entries.
0.8.20,epub_tocdup = True
0.8.20,Choose between 'default' and 'includehidden'.
0.8.20,epub_tocscope = 'default'
0.8.20,Fix unsupported image types using the Pillow.
0.8.20,epub_fix_images = False
0.8.20,Scale large images.
0.8.20,epub_max_image_width = 0
0.8.20,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.20,epub_show_urls = 'inline'
0.8.20,"If false, no index is generated."
0.8.20,epub_use_index = True
0.8.19,"Import numpy here, only when headers are needed"
0.8.19,Add numpy headers to include_dirs
0.8.19,Call original build_ext command
0.8.19,The dependencies are the same as the contents of requirements.txt
0.8.19,"A little ""fancy"" we select from the flattened array reshape back"
0.8.19,(Fortran format to get indexing right) and take the product to do an and
0.8.19,then convert back to boolean type.
0.8.19,Density sparseness is not well defined if there are no
0.8.19,internal edges (as per the referenced paper). However
0.8.19,MATLAB code from the original authors simply selects the
0.8.19,largest of *all* the edges in the case that there are
0.8.19,"no internal edges, so we do the same here"
0.8.19,"If there are any internal edges, then subselect them out"
0.8.19,If there are no internal edges then we want to take the
0.8.19,"max over all the edges that exist in the MST, so we simply"
0.8.19,do nothing and return all the edges in the MST.
0.8.19,-*- coding: utf-8 -*-
0.8.19,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.19,Steve Astels <sastels@gmail.com>
0.8.19,John Healy <jchealy@gmail.com>
0.8.19,
0.8.19,License: BSD 3 clause
0.8.19,"Treating this case explicitly, instead of letting"
0.8.19,"sklearn.metrics.pairwise_distances handle it,"
0.8.19,enables the usage of numpy.inf in the distance
0.8.19,matrix to indicate missing distance information.
0.8.19,TODO: Check if copying is necessary
0.8.19,raise TypeError('Sparse distance matrices not yet supported')
0.8.19,Warn if the MST couldn't be constructed around the missing distances
0.8.19,mst_linkage_core does not generate a full minimal spanning tree
0.8.19,If a tree is required then we must build the edges from the information
0.8.19,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.19,Sort edges of the min_spanning_tree by weight
0.8.19,Convert edge list into standard hierarchical clustering format
0.8.19,Check for connected component on X
0.8.19,Compute sparse mutual reachability graph
0.8.19,"if max_dist > 0, max distance to use when the reachability is infinite"
0.8.19,Check connected component on mutual reachability
0.8.19,"If more than one component, it means that even if the distance matrix X"
0.8.19,"has one component, there exists with less than `min_samples` neighbors"
0.8.19,Compute the minimum spanning tree for the sparse graph
0.8.19,Convert the graph to scipy cluster array format
0.8.19,Sort edges of the min_spanning_tree by weight
0.8.19,Convert edge list into standard hierarchical clustering format
0.8.19,The Cython routines used require contiguous arrays
0.8.19,TO DO: Deal with p for minkowski appropriately
0.8.19,Get distance to kth nearest neighbour
0.8.19,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.19,Sort edges of the min_spanning_tree by weight
0.8.19,Convert edge list into standard hierarchical clustering format
0.8.19,The Cython routines used require contiguous arrays
0.8.19,Get distance to kth nearest neighbour
0.8.19,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.19,Sort edges of the min_spanning_tree by weight
0.8.19,Convert edge list into standard hierarchical clustering format
0.8.19,Sort edges of the min_spanning_tree by weight
0.8.19,Convert edge list into standard hierarchical clustering format
0.8.19,Sort edges of the min_spanning_tree by weight
0.8.19,Convert edge list into standard hierarchical clustering format
0.8.19,Checks input and converts to an nd-array where possible
0.8.19,"Only non-sparse, precomputed distance matrices are handled here"
0.8.19,and thereby allowed to contain numpy.inf for missing distances
0.8.19,Python 2 and 3 compliant string_type checking
0.8.19,We can't do much with sparse matrices ...
0.8.19,TO DO: Need heuristic to decide when to go to boruvka;
0.8.19,still debugging for now
0.8.19,TO DO: Need heuristic to decide when to go to boruvka;
0.8.19,still debugging for now
0.8.19,Inherits from sklearn
0.8.19,Handle sparse precomputed distance matrices separately
0.8.19,"Only non-sparse, precomputed distance matrices are allowed"
0.8.19,to have numpy.inf values indicating missing distances
0.8.19,"prediction data only applies to the persistent model, so remove"
0.8.19,it from the keyword args we pass on the the function
0.8.19,"Unltimately, for each Ci, we only require the"
0.8.19,"minimum of DSPC(Ci, Cj) over all Cj != Ci."
0.8.19,"So let's call this value DSPC_wrt(Ci), i.e."
0.8.19,density separation 'with respect to' Ci.
0.8.19,If exactly one of the points is noise
0.8.19,Set the density sparseness of the cluster
0.8.19,to the sparsest value seen so far.
0.8.19,Check whether density separations with
0.8.19,respect to each of these clusters can
0.8.19,be reduced.
0.8.19,"In case min_outlier_sep is still np.inf, we assign a new value to it."
0.8.19,This only makes sense if num_clusters = 1 since it has turned out
0.8.19,that the MR-MST has no edges between a noise point and a core point.
0.8.19,DSPC_wrt[Ci] might be infinite if the connected component for Ci is
0.8.19,"an ""island"" in the MR-MST. Whereas for other clusters Cj and Ck, the"
0.8.19,MR-MST might contain an edge with one point in Cj and ther other one
0.8.19,"in Ck. Here, we replace the infinite density separation of Ci by"
0.8.19,another large enough value.
0.8.19,
0.8.19,TODO: Think of a better yet efficient way to handle this.
0.8.19,-*- coding: utf-8 -*-
0.8.19,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.19,
0.8.19,License: BSD 3 clause
0.8.19,"Return the only cluster, the root"
0.8.19,We want to get the x and y coordinates for the start of each cluster
0.8.19,"Initialize the leaves, since we know where they go, the iterate"
0.8.19,"through everything from the leaves back, setting coords as we go"
0.8.19,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.19,bottoms and widths for each rectangle. We can go through each cluster
0.8.19,and do this for each in turn.
0.8.19,Ensure we don't try to take log of zero
0.8.19,Finally we need the horizontal lines that occur at cluster splits.
0.8.19,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.19,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.19,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.19,Use PCA to get down to 32 dimension
0.8.19,-*- coding: utf-8 -*-
0.8.19,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.19,
0.8.19,License: BSD 3 clause
0.8.19,The Cython routines used require contiguous arrays
0.8.19,The Cython routines used require contiguous arrays
0.8.19,We can't do much with sparse matrices ...
0.8.19,Need heuristic to decide when to go to boruvka;
0.8.19,still debugging for now
0.8.19,Need heuristic to decide when to go to boruvka;
0.8.19,still debugging for now
0.8.19,Support various prediction methods for predicting cluster membership
0.8.19,of new or unseen points. There are several ways to interpret how
0.8.19,"to do this correctly, so we provide several methods for"
0.8.19,the different use cases that may arise.
0.8.19,raw_condensed_tree = condensed_tree.to_numpy()
0.8.19,New point departs with the old
0.8.19,Find appropriate cluster based on lambda of new point
0.8.19,Find appropriate cluster based on lambda of new point
0.8.19,We need to find where in the tree the new point would go
0.8.19,for the purposes of outlier membership approximation
0.8.19,"When no clusters found, return array of 0's"
0.8.19,import pickle
0.8.19,from sklearn.cluster.tests.common import generate_clustered_data
0.8.19,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.19,"number of clusters, ignoring noise if present"
0.8.19,"metric is the function reference, not the string key."
0.8.19,def test_rsl_unavailable_hierarchy():
0.8.19,clusterer = RobustSingleLinkage()
0.8.19,with warnings.catch_warnings(record=True) as w:
0.8.19,tree = clusterer.cluster_hierarchy_
0.8.19,assert len(w) > 0
0.8.19,assert tree is None
0.8.19,"H, y = shuffle(X, y, random_state=7)"
0.8.19,import pickle
0.8.19,from sklearn.cluster.tests.common import generate_clustered_data
0.8.19,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.19,"number of clusters, ignoring noise if present"
0.8.19,"number of clusters, ignoring noise if present"
0.8.19,"H, y = shuffle(X, y, random_state=7)"
0.8.19,"metric is the function reference, not the string key."
0.8.19,def test_hdbscan_unavailable_attributes():
0.8.19,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.19,with warnings.catch_warnings(record=True) as w:
0.8.19,tree = clusterer.condensed_tree_
0.8.19,assert len(w) > 0
0.8.19,assert tree is None
0.8.19,with warnings.catch_warnings(record=True) as w:
0.8.19,tree = clusterer.single_linkage_tree_
0.8.19,assert len(w) > 0
0.8.19,assert tree is None
0.8.19,with warnings.catch_warnings(record=True) as w:
0.8.19,scores = clusterer.outlier_scores_
0.8.19,assert len(w) > 0
0.8.19,assert scores is None
0.8.19,with warnings.catch_warnings(record=True) as w:
0.8.19,tree = clusterer.minimum_spanning_tree_
0.8.19,assert len(w) > 0
0.8.19,assert tree is None
0.8.19,def test_hdbscan_min_span_tree_availability():
0.8.19,clusterer = HDBSCAN().fit(X)
0.8.19,tree = clusterer.minimum_spanning_tree_
0.8.19,assert tree is None
0.8.19,D = distance.squareform(distance.pdist(X))
0.8.19,D /= np.max(D)
0.8.19,HDBSCAN(metric='precomputed').fit(D)
0.8.19,tree = clusterer.minimum_spanning_tree_
0.8.19,assert tree is None
0.8.19,def test_hdbscan_membership_vector():
0.8.19,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.19,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.19,assert_array_almost_equal(
0.8.19,"vector,"
0.8.19,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.19,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.19,assert_array_almost_equal(
0.8.19,"vector,"
0.8.19,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.19,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.19,assert_array_almost_equal(
0.8.19,"vector,"
0.8.19,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.19,
0.8.19,def test_hdbscan_all_points_membership_vectors():
0.8.19,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.19,vects = all_points_membership_vectors(clusterer)
0.8.19,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.19,"2.52734246e-001,"
0.8.19,8.38299608e-002]))
0.8.19,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.19,"8.35882503e-002,"
0.8.19,1.07356406e-001]))
0.8.19,Probably not applicable now #
0.8.19,def test_dbscan_sparse():
0.8.19,def test_dbscan_balltree():
0.8.19,def test_pickle():
0.8.19,def test_dbscan_core_samples_toy():
0.8.19,def test_boundaries():
0.8.19,Generate datasets. We choose the size big enough to see the scalability
0.8.19,"of the algorithms, but not too big to avoid too long running times"
0.8.19,normalize dataset for easier parameter selection
0.8.19,estimate bandwidth for mean shift
0.8.19,connectivity matrix for structured Ward
0.8.19,make connectivity symmetric
0.8.19,create clustering estimators
0.8.19,predict cluster memberships
0.8.19,plot
0.8.19,-*- coding: utf-8 -*-
0.8.19,#############################################################################
0.8.19,Generate sample data
0.8.19,#############################################################################
0.8.19,Compute DBSCAN
0.8.19,"Number of clusters in labels, ignoring noise if present."
0.8.19,#############################################################################
0.8.19,Plot result
0.8.19,Black removed and is used for noise instead.
0.8.19,Black used for noise.
0.8.19,Black used for noise.
0.8.19,-*- coding: utf-8 -*-
0.8.19,
0.8.19,"hdbscan documentation build configuration file, created by"
0.8.19,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.19,
0.8.19,This file is execfile()d with the current directory set to its
0.8.19,containing dir.
0.8.19,
0.8.19,Note that not all possible configuration values are present in this
0.8.19,autogenerated file.
0.8.19,
0.8.19,All configuration values have a default; values that are commented out
0.8.19,serve to show the default.
0.8.19,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.19,add these directories to sys.path here. If the directory is relative to the
0.8.19,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.19,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.19,"sys.path.insert(0, os.path.abspath('../'))"
0.8.19,-- General configuration ------------------------------------------------
0.8.19,"If your documentation needs a minimal Sphinx version, state it here."
0.8.19,needs_sphinx = '1.0'
0.8.19,"Add any Sphinx extension module names here, as strings. They can be"
0.8.19,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.19,ones.
0.8.19,"'sphinx.ext.napoleon',"
0.8.19,'numpy_ext.numpydoc'
0.8.19,napoleon_google_docstring = False
0.8.19,napoleon_numpy_docstring = True
0.8.19,"Add any paths that contain templates here, relative to this directory."
0.8.19,The suffix(es) of source filenames.
0.8.19,You can specify multiple suffix as a list of string:
0.8.19,"source_suffix = ['.rst', '.md']"
0.8.19,The encoding of source files.
0.8.19,source_encoding = 'utf-8-sig'
0.8.19,The master toctree document.
0.8.19,General information about the project.
0.8.19,"The version info for the project you're documenting, acts as replacement for"
0.8.19,"|version| and |release|, also used in various other places throughout the"
0.8.19,built documents.
0.8.19,
0.8.19,The short X.Y version.
0.8.19,"The full version, including alpha/beta/rc tags."
0.8.19,The language for content autogenerated by Sphinx. Refer to documentation
0.8.19,for a list of supported languages.
0.8.19,
0.8.19,This is also used if you do content translation via gettext catalogs.
0.8.19,"Usually you set ""language"" from the command line for these cases."
0.8.19,"There are two options for replacing |today|: either, you set today to some"
0.8.19,"non-false value, then it is used:"
0.8.19,today = ''
0.8.19,"Else, today_fmt is used as the format for a strftime call."
0.8.19,"today_fmt = '%B %d, %Y'"
0.8.19,"List of patterns, relative to source directory, that match files and"
0.8.19,directories to ignore when looking for source files.
0.8.19,The reST default role (used for this markup: `text`) to use for all
0.8.19,documents.
0.8.19,default_role = None
0.8.19,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.19,add_function_parentheses = True
0.8.19,"If true, the current module name will be prepended to all description"
0.8.19,unit titles (such as .. function::).
0.8.19,add_module_names = True
0.8.19,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.19,output. They are ignored by default.
0.8.19,show_authors = False
0.8.19,The name of the Pygments (syntax highlighting) style to use.
0.8.19,A list of ignored prefixes for module index sorting.
0.8.19,modindex_common_prefix = []
0.8.19,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.19,keep_warnings = False
0.8.19,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.19,-- Options for HTML output ----------------------------------------------
0.8.19,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.19,a list of builtin themes.
0.8.19,html_theme = 'alabaster'
0.8.19,Theme options are theme-specific and customize the look and feel of a theme
0.8.19,"further.  For a list of options available for each theme, see the"
0.8.19,documentation.
0.8.19,html_theme_options = {}
0.8.19,"Add any paths that contain custom themes here, relative to this directory."
0.8.19,html_theme_path = []
0.8.19,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.19,"""<project> v<release> documentation""."
0.8.19,html_title = None
0.8.19,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.19,html_short_title = None
0.8.19,The name of an image file (relative to this directory) to place at the top
0.8.19,of the sidebar.
0.8.19,html_logo = None
0.8.19,The name of an image file (within the static path) to use as favicon of the
0.8.19,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.19,pixels large.
0.8.19,html_favicon = None
0.8.19,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.19,"relative to this directory. They are copied after the builtin static files,"
0.8.19,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.19,Add any extra paths that contain custom files (such as robots.txt or
0.8.19,".htaccess) here, relative to this directory. These files are copied"
0.8.19,directly to the root of the documentation.
0.8.19,html_extra_path = []
0.8.19,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.19,using the given strftime format.
0.8.19,"html_last_updated_fmt = '%b %d, %Y'"
0.8.19,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.19,typographically correct entities.
0.8.19,html_use_smartypants = True
0.8.19,"Custom sidebar templates, maps document names to template names."
0.8.19,html_sidebars = {}
0.8.19,"Additional templates that should be rendered to pages, maps page names to"
0.8.19,template names.
0.8.19,html_additional_pages = {}
0.8.19,"If false, no module index is generated."
0.8.19,html_domain_indices = True
0.8.19,"If false, no index is generated."
0.8.19,html_use_index = True
0.8.19,"If true, the index is split into individual pages for each letter."
0.8.19,html_split_index = False
0.8.19,"If true, links to the reST sources are added to the pages."
0.8.19,html_show_sourcelink = True
0.8.19,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.19,html_show_sphinx = True
0.8.19,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.19,html_show_copyright = True
0.8.19,"If true, an OpenSearch description file will be output, and all pages will"
0.8.19,contain a <link> tag referring to it.  The value of this option must be the
0.8.19,base URL from which the finished HTML is served.
0.8.19,html_use_opensearch = ''
0.8.19,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.19,html_file_suffix = None
0.8.19,Language to be used for generating the HTML full-text search index.
0.8.19,Sphinx supports the following languages:
0.8.19,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.19,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.19,html_search_language = 'en'
0.8.19,"A dictionary with options for the search language support, empty by default."
0.8.19,Now only 'ja' uses this config value
0.8.19,html_search_options = {'type': 'default'}
0.8.19,The name of a javascript file (relative to the configuration directory) that
0.8.19,"implements a search results scorer. If empty, the default will be used."
0.8.19,html_search_scorer = 'scorer.js'
0.8.19,Output file base name for HTML help builder.
0.8.19,-- Options for LaTeX output ---------------------------------------------
0.8.19,The paper size ('letterpaper' or 'a4paper').
0.8.19,"'papersize': 'letterpaper',"
0.8.19,"The font size ('10pt', '11pt' or '12pt')."
0.8.19,"'pointsize': '10pt',"
0.8.19,Additional stuff for the LaTeX preamble.
0.8.19,"'preamble': '',"
0.8.19,Latex figure (float) alignment
0.8.19,"'figure_align': 'htbp',"
0.8.19,Grouping the document tree into LaTeX files. List of tuples
0.8.19,"(source start file, target name, title,"
0.8.19,"author, documentclass [howto, manual, or own class])."
0.8.19,The name of an image file (relative to this directory) to place at the top of
0.8.19,the title page.
0.8.19,latex_logo = None
0.8.19,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.19,not chapters.
0.8.19,latex_use_parts = False
0.8.19,"If true, show page references after internal links."
0.8.19,latex_show_pagerefs = False
0.8.19,"If true, show URL addresses after external links."
0.8.19,latex_show_urls = False
0.8.19,Documents to append as an appendix to all manuals.
0.8.19,latex_appendices = []
0.8.19,"If false, no module index is generated."
0.8.19,latex_domain_indices = True
0.8.19,-- Options for manual page output ---------------------------------------
0.8.19,One entry per manual page. List of tuples
0.8.19,"(source start file, name, description, authors, manual section)."
0.8.19,"If true, show URL addresses after external links."
0.8.19,man_show_urls = False
0.8.19,-- Options for Texinfo output -------------------------------------------
0.8.19,Grouping the document tree into Texinfo files. List of tuples
0.8.19,"(source start file, target name, title, author,"
0.8.19,"dir menu entry, description, category)"
0.8.19,Documents to append as an appendix to all manuals.
0.8.19,texinfo_appendices = []
0.8.19,"If false, no module index is generated."
0.8.19,texinfo_domain_indices = True
0.8.19,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.19,texinfo_show_urls = 'footnote'
0.8.19,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.19,texinfo_no_detailmenu = False
0.8.19,-- Options for Epub output ----------------------------------------------
0.8.19,Bibliographic Dublin Core info.
0.8.19,The basename for the epub file. It defaults to the project name.
0.8.19,epub_basename = project
0.8.19,The HTML theme for the epub output. Since the default themes are not
0.8.19,"optimized for small screen space, using the same theme for HTML and epub"
0.8.19,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.19,visual space.
0.8.19,epub_theme = 'epub'
0.8.19,The language of the text. It defaults to the language option
0.8.19,or 'en' if the language is not set.
0.8.19,epub_language = ''
0.8.19,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.19,epub_scheme = ''
0.8.19,The unique identifier of the text. This can be a ISBN number
0.8.19,or the project homepage.
0.8.19,epub_identifier = ''
0.8.19,A unique identification for the text.
0.8.19,epub_uid = ''
0.8.19,A tuple containing the cover image and cover page html template filenames.
0.8.19,epub_cover = ()
0.8.19,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.19,epub_guide = ()
0.8.19,HTML files that should be inserted before the pages created by sphinx.
0.8.19,The format is a list of tuples containing the path and title.
0.8.19,epub_pre_files = []
0.8.19,HTML files that should be inserted after the pages created by sphinx.
0.8.19,The format is a list of tuples containing the path and title.
0.8.19,epub_post_files = []
0.8.19,A list of files that should not be packed into the epub file.
0.8.19,The depth of the table of contents in toc.ncx.
0.8.19,epub_tocdepth = 3
0.8.19,Allow duplicate toc entries.
0.8.19,epub_tocdup = True
0.8.19,Choose between 'default' and 'includehidden'.
0.8.19,epub_tocscope = 'default'
0.8.19,Fix unsupported image types using the Pillow.
0.8.19,epub_fix_images = False
0.8.19,Scale large images.
0.8.19,epub_max_image_width = 0
0.8.19,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.19,epub_show_urls = 'inline'
0.8.19,"If false, no index is generated."
0.8.19,epub_use_index = True
0.8.18,"Import numpy here, only when headers are needed"
0.8.18,Add numpy headers to include_dirs
0.8.18,Call original build_ext command
0.8.18,The dependencies are the same as the contents of requirements.txt
0.8.18,"A little ""fancy"" we select from the flattened array reshape back"
0.8.18,(Fortran format to get indexing right) and take the product to do an and
0.8.18,then convert back to boolean type.
0.8.18,Density sparseness is not well defined if there are no
0.8.18,internal edges (as per the referenced paper). However
0.8.18,MATLAB code from the original authors simply selects the
0.8.18,largest of *all* the edges in the case that there are
0.8.18,"no internal edges, so we do the same here"
0.8.18,"If there are any internal edges, then subselect them out"
0.8.18,If there are no internal edges then we want to take the
0.8.18,"max over all the edges that exist in the MST, so we simply"
0.8.18,do nothing and return all the edges in the MST.
0.8.18,-*- coding: utf-8 -*-
0.8.18,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.18,Steve Astels <sastels@gmail.com>
0.8.18,John Healy <jchealy@gmail.com>
0.8.18,
0.8.18,License: BSD 3 clause
0.8.18,"Treating this case explicitly, instead of letting"
0.8.18,"sklearn.metrics.pairwise_distances handle it,"
0.8.18,enables the usage of numpy.inf in the distance
0.8.18,matrix to indicate missing distance information.
0.8.18,TODO: Check if copying is necessary
0.8.18,raise TypeError('Sparse distance matrices not yet supported')
0.8.18,Warn if the MST couldn't be constructed around the missing distances
0.8.18,mst_linkage_core does not generate a full minimal spanning tree
0.8.18,If a tree is required then we must build the edges from the information
0.8.18,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.18,Sort edges of the min_spanning_tree by weight
0.8.18,Convert edge list into standard hierarchical clustering format
0.8.18,Compute sparse mutual reachability graph
0.8.18,Compute the minimum spanning tree for the sparse graph
0.8.18,Convert the graph to scipy cluster array format
0.8.18,Sort edges of the min_spanning_tree by weight
0.8.18,Convert edge list into standard hierarchical clustering format
0.8.18,The Cython routines used require contiguous arrays
0.8.18,TO DO: Deal with p for minkowski appropriately
0.8.18,Get distance to kth nearest neighbour
0.8.18,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.18,Sort edges of the min_spanning_tree by weight
0.8.18,Convert edge list into standard hierarchical clustering format
0.8.18,The Cython routines used require contiguous arrays
0.8.18,Get distance to kth nearest neighbour
0.8.18,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.18,Sort edges of the min_spanning_tree by weight
0.8.18,Convert edge list into standard hierarchical clustering format
0.8.18,Sort edges of the min_spanning_tree by weight
0.8.18,Convert edge list into standard hierarchical clustering format
0.8.18,Sort edges of the min_spanning_tree by weight
0.8.18,Convert edge list into standard hierarchical clustering format
0.8.18,Checks input and converts to an nd-array where possible
0.8.18,"Only non-sparse, precomputed distance matrices are handled here"
0.8.18,and thereby allowed to contain numpy.inf for missing distances
0.8.18,Python 2 and 3 compliant string_type checking
0.8.18,We can't do much with sparse matrices ...
0.8.18,TO DO: Need heuristic to decide when to go to boruvka;
0.8.18,still debugging for now
0.8.18,TO DO: Need heuristic to decide when to go to boruvka;
0.8.18,still debugging for now
0.8.18,Inherits from sklearn
0.8.18,Handle sparse precomputed distance matrices separately
0.8.18,"Only non-sparse, precomputed distance matrices are allowed"
0.8.18,to have numpy.inf values indicating missing distances
0.8.18,"prediction data only applies to the persistent model, so remove"
0.8.18,it from the keyword args we pass on the the function
0.8.18,-*- coding: utf-8 -*-
0.8.18,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.18,
0.8.18,License: BSD 3 clause
0.8.18,"Return the only cluster, the root"
0.8.18,We want to get the x and y coordinates for the start of each cluster
0.8.18,"Initialize the leaves, since we know where they go, the iterate"
0.8.18,"through everything from the leaves back, setting coords as we go"
0.8.18,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.18,bottoms and widths for each rectangle. We can go through each cluster
0.8.18,and do this for each in turn.
0.8.18,Ensure we don't try to take log of zero
0.8.18,Finally we need the horizontal lines that occur at cluster splits.
0.8.18,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.18,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.18,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.18,Use PCA to get down to 32 dimension
0.8.18,-*- coding: utf-8 -*-
0.8.18,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.18,
0.8.18,License: BSD 3 clause
0.8.18,The Cython routines used require contiguous arrays
0.8.18,The Cython routines used require contiguous arrays
0.8.18,We can't do much with sparse matrices ...
0.8.18,Need heuristic to decide when to go to boruvka;
0.8.18,still debugging for now
0.8.18,Need heuristic to decide when to go to boruvka;
0.8.18,still debugging for now
0.8.18,Support various prediction methods for predicting cluster membership
0.8.18,of new or unseen points. There are several ways to interpret how
0.8.18,"to do this correctly, so we provide several methods for"
0.8.18,the different use cases that may arise.
0.8.18,raw_condensed_tree = condensed_tree.to_numpy()
0.8.18,New point departs with the old
0.8.18,Find appropriate cluster based on lambda of new point
0.8.18,Find appropriate cluster based on lambda of new point
0.8.18,We need to find where in the tree the new point would go
0.8.18,for the purposes of outlier membership approximation
0.8.18,"When no clusters found, return array of 0's"
0.8.18,import pickle
0.8.18,from sklearn.cluster.tests.common import generate_clustered_data
0.8.18,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.18,"number of clusters, ignoring noise if present"
0.8.18,"metric is the function reference, not the string key."
0.8.18,def test_rsl_unavailable_hierarchy():
0.8.18,clusterer = RobustSingleLinkage()
0.8.18,with warnings.catch_warnings(record=True) as w:
0.8.18,tree = clusterer.cluster_hierarchy_
0.8.18,assert len(w) > 0
0.8.18,assert tree is None
0.8.18,"H, y = shuffle(X, y, random_state=7)"
0.8.18,import pickle
0.8.18,from sklearn.cluster.tests.common import generate_clustered_data
0.8.18,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.18,"number of clusters, ignoring noise if present"
0.8.18,"number of clusters, ignoring noise if present"
0.8.18,"H, y = shuffle(X, y, random_state=7)"
0.8.18,"metric is the function reference, not the string key."
0.8.18,def test_hdbscan_unavailable_attributes():
0.8.18,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.18,with warnings.catch_warnings(record=True) as w:
0.8.18,tree = clusterer.condensed_tree_
0.8.18,assert len(w) > 0
0.8.18,assert tree is None
0.8.18,with warnings.catch_warnings(record=True) as w:
0.8.18,tree = clusterer.single_linkage_tree_
0.8.18,assert len(w) > 0
0.8.18,assert tree is None
0.8.18,with warnings.catch_warnings(record=True) as w:
0.8.18,scores = clusterer.outlier_scores_
0.8.18,assert len(w) > 0
0.8.18,assert scores is None
0.8.18,with warnings.catch_warnings(record=True) as w:
0.8.18,tree = clusterer.minimum_spanning_tree_
0.8.18,assert len(w) > 0
0.8.18,assert tree is None
0.8.18,def test_hdbscan_min_span_tree_availability():
0.8.18,clusterer = HDBSCAN().fit(X)
0.8.18,tree = clusterer.minimum_spanning_tree_
0.8.18,assert tree is None
0.8.18,D = distance.squareform(distance.pdist(X))
0.8.18,D /= np.max(D)
0.8.18,HDBSCAN(metric='precomputed').fit(D)
0.8.18,tree = clusterer.minimum_spanning_tree_
0.8.18,assert tree is None
0.8.18,def test_hdbscan_membership_vector():
0.8.18,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.18,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.18,assert_array_almost_equal(
0.8.18,"vector,"
0.8.18,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.18,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.18,assert_array_almost_equal(
0.8.18,"vector,"
0.8.18,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.18,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.18,assert_array_almost_equal(
0.8.18,"vector,"
0.8.18,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.18,
0.8.18,def test_hdbscan_all_points_membership_vectors():
0.8.18,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.18,vects = all_points_membership_vectors(clusterer)
0.8.18,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.18,"2.52734246e-001,"
0.8.18,8.38299608e-002]))
0.8.18,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.18,"8.35882503e-002,"
0.8.18,1.07356406e-001]))
0.8.18,Probably not applicable now #
0.8.18,def test_dbscan_sparse():
0.8.18,def test_dbscan_balltree():
0.8.18,def test_pickle():
0.8.18,def test_dbscan_core_samples_toy():
0.8.18,def test_boundaries():
0.8.18,Generate datasets. We choose the size big enough to see the scalability
0.8.18,"of the algorithms, but not too big to avoid too long running times"
0.8.18,normalize dataset for easier parameter selection
0.8.18,estimate bandwidth for mean shift
0.8.18,connectivity matrix for structured Ward
0.8.18,make connectivity symmetric
0.8.18,create clustering estimators
0.8.18,predict cluster memberships
0.8.18,plot
0.8.18,-*- coding: utf-8 -*-
0.8.18,#############################################################################
0.8.18,Generate sample data
0.8.18,#############################################################################
0.8.18,Compute DBSCAN
0.8.18,"Number of clusters in labels, ignoring noise if present."
0.8.18,#############################################################################
0.8.18,Plot result
0.8.18,Black removed and is used for noise instead.
0.8.18,Black used for noise.
0.8.18,Black used for noise.
0.8.18,-*- coding: utf-8 -*-
0.8.18,
0.8.18,"hdbscan documentation build configuration file, created by"
0.8.18,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.18,
0.8.18,This file is execfile()d with the current directory set to its
0.8.18,containing dir.
0.8.18,
0.8.18,Note that not all possible configuration values are present in this
0.8.18,autogenerated file.
0.8.18,
0.8.18,All configuration values have a default; values that are commented out
0.8.18,serve to show the default.
0.8.18,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.18,add these directories to sys.path here. If the directory is relative to the
0.8.18,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.18,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.18,"sys.path.insert(0, os.path.abspath('../'))"
0.8.18,-- General configuration ------------------------------------------------
0.8.18,"If your documentation needs a minimal Sphinx version, state it here."
0.8.18,needs_sphinx = '1.0'
0.8.18,"Add any Sphinx extension module names here, as strings. They can be"
0.8.18,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.18,ones.
0.8.18,"'sphinx.ext.napoleon',"
0.8.18,'numpy_ext.numpydoc'
0.8.18,napoleon_google_docstring = False
0.8.18,napoleon_numpy_docstring = True
0.8.18,"Add any paths that contain templates here, relative to this directory."
0.8.18,The suffix(es) of source filenames.
0.8.18,You can specify multiple suffix as a list of string:
0.8.18,"source_suffix = ['.rst', '.md']"
0.8.18,The encoding of source files.
0.8.18,source_encoding = 'utf-8-sig'
0.8.18,The master toctree document.
0.8.18,General information about the project.
0.8.18,"The version info for the project you're documenting, acts as replacement for"
0.8.18,"|version| and |release|, also used in various other places throughout the"
0.8.18,built documents.
0.8.18,
0.8.18,The short X.Y version.
0.8.18,"The full version, including alpha/beta/rc tags."
0.8.18,The language for content autogenerated by Sphinx. Refer to documentation
0.8.18,for a list of supported languages.
0.8.18,
0.8.18,This is also used if you do content translation via gettext catalogs.
0.8.18,"Usually you set ""language"" from the command line for these cases."
0.8.18,"There are two options for replacing |today|: either, you set today to some"
0.8.18,"non-false value, then it is used:"
0.8.18,today = ''
0.8.18,"Else, today_fmt is used as the format for a strftime call."
0.8.18,"today_fmt = '%B %d, %Y'"
0.8.18,"List of patterns, relative to source directory, that match files and"
0.8.18,directories to ignore when looking for source files.
0.8.18,The reST default role (used for this markup: `text`) to use for all
0.8.18,documents.
0.8.18,default_role = None
0.8.18,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.18,add_function_parentheses = True
0.8.18,"If true, the current module name will be prepended to all description"
0.8.18,unit titles (such as .. function::).
0.8.18,add_module_names = True
0.8.18,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.18,output. They are ignored by default.
0.8.18,show_authors = False
0.8.18,The name of the Pygments (syntax highlighting) style to use.
0.8.18,A list of ignored prefixes for module index sorting.
0.8.18,modindex_common_prefix = []
0.8.18,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.18,keep_warnings = False
0.8.18,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.18,-- Options for HTML output ----------------------------------------------
0.8.18,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.18,a list of builtin themes.
0.8.18,html_theme = 'alabaster'
0.8.18,Theme options are theme-specific and customize the look and feel of a theme
0.8.18,"further.  For a list of options available for each theme, see the"
0.8.18,documentation.
0.8.18,html_theme_options = {}
0.8.18,"Add any paths that contain custom themes here, relative to this directory."
0.8.18,html_theme_path = []
0.8.18,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.18,"""<project> v<release> documentation""."
0.8.18,html_title = None
0.8.18,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.18,html_short_title = None
0.8.18,The name of an image file (relative to this directory) to place at the top
0.8.18,of the sidebar.
0.8.18,html_logo = None
0.8.18,The name of an image file (within the static path) to use as favicon of the
0.8.18,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.18,pixels large.
0.8.18,html_favicon = None
0.8.18,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.18,"relative to this directory. They are copied after the builtin static files,"
0.8.18,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.18,Add any extra paths that contain custom files (such as robots.txt or
0.8.18,".htaccess) here, relative to this directory. These files are copied"
0.8.18,directly to the root of the documentation.
0.8.18,html_extra_path = []
0.8.18,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.18,using the given strftime format.
0.8.18,"html_last_updated_fmt = '%b %d, %Y'"
0.8.18,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.18,typographically correct entities.
0.8.18,html_use_smartypants = True
0.8.18,"Custom sidebar templates, maps document names to template names."
0.8.18,html_sidebars = {}
0.8.18,"Additional templates that should be rendered to pages, maps page names to"
0.8.18,template names.
0.8.18,html_additional_pages = {}
0.8.18,"If false, no module index is generated."
0.8.18,html_domain_indices = True
0.8.18,"If false, no index is generated."
0.8.18,html_use_index = True
0.8.18,"If true, the index is split into individual pages for each letter."
0.8.18,html_split_index = False
0.8.18,"If true, links to the reST sources are added to the pages."
0.8.18,html_show_sourcelink = True
0.8.18,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.18,html_show_sphinx = True
0.8.18,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.18,html_show_copyright = True
0.8.18,"If true, an OpenSearch description file will be output, and all pages will"
0.8.18,contain a <link> tag referring to it.  The value of this option must be the
0.8.18,base URL from which the finished HTML is served.
0.8.18,html_use_opensearch = ''
0.8.18,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.18,html_file_suffix = None
0.8.18,Language to be used for generating the HTML full-text search index.
0.8.18,Sphinx supports the following languages:
0.8.18,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.18,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.18,html_search_language = 'en'
0.8.18,"A dictionary with options for the search language support, empty by default."
0.8.18,Now only 'ja' uses this config value
0.8.18,html_search_options = {'type': 'default'}
0.8.18,The name of a javascript file (relative to the configuration directory) that
0.8.18,"implements a search results scorer. If empty, the default will be used."
0.8.18,html_search_scorer = 'scorer.js'
0.8.18,Output file base name for HTML help builder.
0.8.18,-- Options for LaTeX output ---------------------------------------------
0.8.18,The paper size ('letterpaper' or 'a4paper').
0.8.18,"'papersize': 'letterpaper',"
0.8.18,"The font size ('10pt', '11pt' or '12pt')."
0.8.18,"'pointsize': '10pt',"
0.8.18,Additional stuff for the LaTeX preamble.
0.8.18,"'preamble': '',"
0.8.18,Latex figure (float) alignment
0.8.18,"'figure_align': 'htbp',"
0.8.18,Grouping the document tree into LaTeX files. List of tuples
0.8.18,"(source start file, target name, title,"
0.8.18,"author, documentclass [howto, manual, or own class])."
0.8.18,The name of an image file (relative to this directory) to place at the top of
0.8.18,the title page.
0.8.18,latex_logo = None
0.8.18,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.18,not chapters.
0.8.18,latex_use_parts = False
0.8.18,"If true, show page references after internal links."
0.8.18,latex_show_pagerefs = False
0.8.18,"If true, show URL addresses after external links."
0.8.18,latex_show_urls = False
0.8.18,Documents to append as an appendix to all manuals.
0.8.18,latex_appendices = []
0.8.18,"If false, no module index is generated."
0.8.18,latex_domain_indices = True
0.8.18,-- Options for manual page output ---------------------------------------
0.8.18,One entry per manual page. List of tuples
0.8.18,"(source start file, name, description, authors, manual section)."
0.8.18,"If true, show URL addresses after external links."
0.8.18,man_show_urls = False
0.8.18,-- Options for Texinfo output -------------------------------------------
0.8.18,Grouping the document tree into Texinfo files. List of tuples
0.8.18,"(source start file, target name, title, author,"
0.8.18,"dir menu entry, description, category)"
0.8.18,Documents to append as an appendix to all manuals.
0.8.18,texinfo_appendices = []
0.8.18,"If false, no module index is generated."
0.8.18,texinfo_domain_indices = True
0.8.18,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.18,texinfo_show_urls = 'footnote'
0.8.18,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.18,texinfo_no_detailmenu = False
0.8.18,-- Options for Epub output ----------------------------------------------
0.8.18,Bibliographic Dublin Core info.
0.8.18,The basename for the epub file. It defaults to the project name.
0.8.18,epub_basename = project
0.8.18,The HTML theme for the epub output. Since the default themes are not
0.8.18,"optimized for small screen space, using the same theme for HTML and epub"
0.8.18,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.18,visual space.
0.8.18,epub_theme = 'epub'
0.8.18,The language of the text. It defaults to the language option
0.8.18,or 'en' if the language is not set.
0.8.18,epub_language = ''
0.8.18,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.18,epub_scheme = ''
0.8.18,The unique identifier of the text. This can be a ISBN number
0.8.18,or the project homepage.
0.8.18,epub_identifier = ''
0.8.18,A unique identification for the text.
0.8.18,epub_uid = ''
0.8.18,A tuple containing the cover image and cover page html template filenames.
0.8.18,epub_cover = ()
0.8.18,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.18,epub_guide = ()
0.8.18,HTML files that should be inserted before the pages created by sphinx.
0.8.18,The format is a list of tuples containing the path and title.
0.8.18,epub_pre_files = []
0.8.18,HTML files that should be inserted after the pages created by sphinx.
0.8.18,The format is a list of tuples containing the path and title.
0.8.18,epub_post_files = []
0.8.18,A list of files that should not be packed into the epub file.
0.8.18,The depth of the table of contents in toc.ncx.
0.8.18,epub_tocdepth = 3
0.8.18,Allow duplicate toc entries.
0.8.18,epub_tocdup = True
0.8.18,Choose between 'default' and 'includehidden'.
0.8.18,epub_tocscope = 'default'
0.8.18,Fix unsupported image types using the Pillow.
0.8.18,epub_fix_images = False
0.8.18,Scale large images.
0.8.18,epub_max_image_width = 0
0.8.18,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.18,epub_show_urls = 'inline'
0.8.18,"If false, no index is generated."
0.8.18,epub_use_index = True
0.8.17,"Import numpy here, only when headers are needed"
0.8.17,Add numpy headers to include_dirs
0.8.17,Call original build_ext command
0.8.17,"A little ""fancy"" we select from the flattened array reshape back"
0.8.17,(Fortran format to get indexing right) and take the product to do an and
0.8.17,then convert back to boolean type.
0.8.17,Density sparseness is not well defined if there are no
0.8.17,internal edges (as per the referenced paper). However
0.8.17,MATLAB code from the original authors simply selects the
0.8.17,largest of *all* the edges in the case that there are
0.8.17,"no internal edges, so we do the same here"
0.8.17,"If there are any internal edges, then subselect them out"
0.8.17,If there are no internal edges then we want to take the
0.8.17,"max over all the edges that exist in the MST, so we simply"
0.8.17,do nothing and return all the edges in the MST.
0.8.17,-*- coding: utf-8 -*-
0.8.17,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.17,Steve Astels <sastels@gmail.com>
0.8.17,John Healy <jchealy@gmail.com>
0.8.17,
0.8.17,License: BSD 3 clause
0.8.17,"Treating this case explicitly, instead of letting"
0.8.17,"sklearn.metrics.pairwise_distances handle it,"
0.8.17,enables the usage of numpy.inf in the distance
0.8.17,matrix to indicate missing distance information.
0.8.17,TODO: Check if copying is necessary
0.8.17,raise TypeError('Sparse distance matrices not yet supported')
0.8.17,Warn if the MST couldn't be constructed around the missing distances
0.8.17,mst_linkage_core does not generate a full minimal spanning tree
0.8.17,If a tree is required then we must build the edges from the information
0.8.17,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.17,Sort edges of the min_spanning_tree by weight
0.8.17,Convert edge list into standard hierarchical clustering format
0.8.17,Compute sparse mutual reachability graph
0.8.17,Compute the minimum spanning tree for the sparse graph
0.8.17,Convert the graph to scipy cluster array format
0.8.17,Sort edges of the min_spanning_tree by weight
0.8.17,Convert edge list into standard hierarchical clustering format
0.8.17,The Cython routines used require contiguous arrays
0.8.17,TO DO: Deal with p for minkowski appropriately
0.8.17,Get distance to kth nearest neighbour
0.8.17,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.17,Sort edges of the min_spanning_tree by weight
0.8.17,Convert edge list into standard hierarchical clustering format
0.8.17,The Cython routines used require contiguous arrays
0.8.17,Get distance to kth nearest neighbour
0.8.17,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.17,Sort edges of the min_spanning_tree by weight
0.8.17,Convert edge list into standard hierarchical clustering format
0.8.17,Sort edges of the min_spanning_tree by weight
0.8.17,Convert edge list into standard hierarchical clustering format
0.8.17,Sort edges of the min_spanning_tree by weight
0.8.17,Convert edge list into standard hierarchical clustering format
0.8.17,Checks input and converts to an nd-array where possible
0.8.17,"Only non-sparse, precomputed distance matrices are handled here"
0.8.17,and thereby allowed to contain numpy.inf for missing distances
0.8.17,Python 2 and 3 compliant string_type checking
0.8.17,We can't do much with sparse matrices ...
0.8.17,TO DO: Need heuristic to decide when to go to boruvka;
0.8.17,still debugging for now
0.8.17,TO DO: Need heuristic to decide when to go to boruvka;
0.8.17,still debugging for now
0.8.17,Inherits from sklearn
0.8.17,Handle sparse precomputed distance matrices separately
0.8.17,"Only non-sparse, precomputed distance matrices are allowed"
0.8.17,to have numpy.inf values indicating missing distances
0.8.17,"prediction data only applies to the persistent model, so remove"
0.8.17,it from the keyword args we pass on the the function
0.8.17,-*- coding: utf-8 -*-
0.8.17,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.17,
0.8.17,License: BSD 3 clause
0.8.17,"Return the only cluster, the root"
0.8.17,We want to get the x and y coordinates for the start of each cluster
0.8.17,"Initialize the leaves, since we know where they go, the iterate"
0.8.17,"through everything from the leaves back, setting coords as we go"
0.8.17,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.17,bottoms and widths for each rectangle. We can go through each cluster
0.8.17,and do this for each in turn.
0.8.17,Ensure we don't try to take log of zero
0.8.17,Finally we need the horizontal lines that occur at cluster splits.
0.8.17,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.17,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.17,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.17,Use PCA to get down to 32 dimension
0.8.17,-*- coding: utf-8 -*-
0.8.17,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.17,
0.8.17,License: BSD 3 clause
0.8.17,The Cython routines used require contiguous arrays
0.8.17,The Cython routines used require contiguous arrays
0.8.17,We can't do much with sparse matrices ...
0.8.17,Need heuristic to decide when to go to boruvka;
0.8.17,still debugging for now
0.8.17,Need heuristic to decide when to go to boruvka;
0.8.17,still debugging for now
0.8.17,Support various prediction methods for predicting cluster membership
0.8.17,of new or unseen points. There are several ways to interpret how
0.8.17,"to do this correctly, so we provide several methods for"
0.8.17,the different use cases that may arise.
0.8.17,raw_condensed_tree = condensed_tree.to_numpy()
0.8.17,New point departs with the old
0.8.17,Find appropriate cluster based on lambda of new point
0.8.17,Find appropriate cluster based on lambda of new point
0.8.17,We need to find where in the tree the new point would go
0.8.17,for the purposes of outlier membership approximation
0.8.17,"When no clusters found, return array of 0's"
0.8.17,import pickle
0.8.17,from sklearn.cluster.tests.common import generate_clustered_data
0.8.17,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.17,"number of clusters, ignoring noise if present"
0.8.17,"metric is the function reference, not the string key."
0.8.17,def test_rsl_unavailable_hierarchy():
0.8.17,clusterer = RobustSingleLinkage()
0.8.17,with warnings.catch_warnings(record=True) as w:
0.8.17,tree = clusterer.cluster_hierarchy_
0.8.17,assert len(w) > 0
0.8.17,assert tree is None
0.8.17,"H, y = shuffle(X, y, random_state=7)"
0.8.17,import pickle
0.8.17,from sklearn.cluster.tests.common import generate_clustered_data
0.8.17,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.17,"number of clusters, ignoring noise if present"
0.8.17,"number of clusters, ignoring noise if present"
0.8.17,"H, y = shuffle(X, y, random_state=7)"
0.8.17,"metric is the function reference, not the string key."
0.8.17,def test_hdbscan_unavailable_attributes():
0.8.17,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.17,with warnings.catch_warnings(record=True) as w:
0.8.17,tree = clusterer.condensed_tree_
0.8.17,assert len(w) > 0
0.8.17,assert tree is None
0.8.17,with warnings.catch_warnings(record=True) as w:
0.8.17,tree = clusterer.single_linkage_tree_
0.8.17,assert len(w) > 0
0.8.17,assert tree is None
0.8.17,with warnings.catch_warnings(record=True) as w:
0.8.17,scores = clusterer.outlier_scores_
0.8.17,assert len(w) > 0
0.8.17,assert scores is None
0.8.17,with warnings.catch_warnings(record=True) as w:
0.8.17,tree = clusterer.minimum_spanning_tree_
0.8.17,assert len(w) > 0
0.8.17,assert tree is None
0.8.17,def test_hdbscan_min_span_tree_availability():
0.8.17,clusterer = HDBSCAN().fit(X)
0.8.17,tree = clusterer.minimum_spanning_tree_
0.8.17,assert tree is None
0.8.17,D = distance.squareform(distance.pdist(X))
0.8.17,D /= np.max(D)
0.8.17,HDBSCAN(metric='precomputed').fit(D)
0.8.17,tree = clusterer.minimum_spanning_tree_
0.8.17,assert tree is None
0.8.17,def test_hdbscan_membership_vector():
0.8.17,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.17,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.17,assert_array_almost_equal(
0.8.17,"vector,"
0.8.17,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.17,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.17,assert_array_almost_equal(
0.8.17,"vector,"
0.8.17,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.17,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.17,assert_array_almost_equal(
0.8.17,"vector,"
0.8.17,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.17,
0.8.17,def test_hdbscan_all_points_membership_vectors():
0.8.17,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.17,vects = all_points_membership_vectors(clusterer)
0.8.17,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.17,"2.52734246e-001,"
0.8.17,8.38299608e-002]))
0.8.17,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.17,"8.35882503e-002,"
0.8.17,1.07356406e-001]))
0.8.17,Probably not applicable now #
0.8.17,def test_dbscan_sparse():
0.8.17,def test_dbscan_balltree():
0.8.17,def test_pickle():
0.8.17,def test_dbscan_core_samples_toy():
0.8.17,def test_boundaries():
0.8.17,Generate datasets. We choose the size big enough to see the scalability
0.8.17,"of the algorithms, but not too big to avoid too long running times"
0.8.17,normalize dataset for easier parameter selection
0.8.17,estimate bandwidth for mean shift
0.8.17,connectivity matrix for structured Ward
0.8.17,make connectivity symmetric
0.8.17,create clustering estimators
0.8.17,predict cluster memberships
0.8.17,plot
0.8.17,-*- coding: utf-8 -*-
0.8.17,#############################################################################
0.8.17,Generate sample data
0.8.17,#############################################################################
0.8.17,Compute DBSCAN
0.8.17,"Number of clusters in labels, ignoring noise if present."
0.8.17,#############################################################################
0.8.17,Plot result
0.8.17,Black removed and is used for noise instead.
0.8.17,Black used for noise.
0.8.17,Black used for noise.
0.8.17,-*- coding: utf-8 -*-
0.8.17,
0.8.17,"hdbscan documentation build configuration file, created by"
0.8.17,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.17,
0.8.17,This file is execfile()d with the current directory set to its
0.8.17,containing dir.
0.8.17,
0.8.17,Note that not all possible configuration values are present in this
0.8.17,autogenerated file.
0.8.17,
0.8.17,All configuration values have a default; values that are commented out
0.8.17,serve to show the default.
0.8.17,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.17,add these directories to sys.path here. If the directory is relative to the
0.8.17,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.17,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.17,"sys.path.insert(0, os.path.abspath('../'))"
0.8.17,-- General configuration ------------------------------------------------
0.8.17,"If your documentation needs a minimal Sphinx version, state it here."
0.8.17,needs_sphinx = '1.0'
0.8.17,"Add any Sphinx extension module names here, as strings. They can be"
0.8.17,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.17,ones.
0.8.17,"'sphinx.ext.napoleon',"
0.8.17,'numpy_ext.numpydoc'
0.8.17,napoleon_google_docstring = False
0.8.17,napoleon_numpy_docstring = True
0.8.17,"Add any paths that contain templates here, relative to this directory."
0.8.17,The suffix(es) of source filenames.
0.8.17,You can specify multiple suffix as a list of string:
0.8.17,"source_suffix = ['.rst', '.md']"
0.8.17,The encoding of source files.
0.8.17,source_encoding = 'utf-8-sig'
0.8.17,The master toctree document.
0.8.17,General information about the project.
0.8.17,"The version info for the project you're documenting, acts as replacement for"
0.8.17,"|version| and |release|, also used in various other places throughout the"
0.8.17,built documents.
0.8.17,
0.8.17,The short X.Y version.
0.8.17,"The full version, including alpha/beta/rc tags."
0.8.17,The language for content autogenerated by Sphinx. Refer to documentation
0.8.17,for a list of supported languages.
0.8.17,
0.8.17,This is also used if you do content translation via gettext catalogs.
0.8.17,"Usually you set ""language"" from the command line for these cases."
0.8.17,"There are two options for replacing |today|: either, you set today to some"
0.8.17,"non-false value, then it is used:"
0.8.17,today = ''
0.8.17,"Else, today_fmt is used as the format for a strftime call."
0.8.17,"today_fmt = '%B %d, %Y'"
0.8.17,"List of patterns, relative to source directory, that match files and"
0.8.17,directories to ignore when looking for source files.
0.8.17,The reST default role (used for this markup: `text`) to use for all
0.8.17,documents.
0.8.17,default_role = None
0.8.17,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.17,add_function_parentheses = True
0.8.17,"If true, the current module name will be prepended to all description"
0.8.17,unit titles (such as .. function::).
0.8.17,add_module_names = True
0.8.17,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.17,output. They are ignored by default.
0.8.17,show_authors = False
0.8.17,The name of the Pygments (syntax highlighting) style to use.
0.8.17,A list of ignored prefixes for module index sorting.
0.8.17,modindex_common_prefix = []
0.8.17,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.17,keep_warnings = False
0.8.17,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.17,-- Options for HTML output ----------------------------------------------
0.8.17,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.17,a list of builtin themes.
0.8.17,html_theme = 'alabaster'
0.8.17,Theme options are theme-specific and customize the look and feel of a theme
0.8.17,"further.  For a list of options available for each theme, see the"
0.8.17,documentation.
0.8.17,html_theme_options = {}
0.8.17,"Add any paths that contain custom themes here, relative to this directory."
0.8.17,html_theme_path = []
0.8.17,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.17,"""<project> v<release> documentation""."
0.8.17,html_title = None
0.8.17,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.17,html_short_title = None
0.8.17,The name of an image file (relative to this directory) to place at the top
0.8.17,of the sidebar.
0.8.17,html_logo = None
0.8.17,The name of an image file (within the static path) to use as favicon of the
0.8.17,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.17,pixels large.
0.8.17,html_favicon = None
0.8.17,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.17,"relative to this directory. They are copied after the builtin static files,"
0.8.17,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.17,Add any extra paths that contain custom files (such as robots.txt or
0.8.17,".htaccess) here, relative to this directory. These files are copied"
0.8.17,directly to the root of the documentation.
0.8.17,html_extra_path = []
0.8.17,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.17,using the given strftime format.
0.8.17,"html_last_updated_fmt = '%b %d, %Y'"
0.8.17,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.17,typographically correct entities.
0.8.17,html_use_smartypants = True
0.8.17,"Custom sidebar templates, maps document names to template names."
0.8.17,html_sidebars = {}
0.8.17,"Additional templates that should be rendered to pages, maps page names to"
0.8.17,template names.
0.8.17,html_additional_pages = {}
0.8.17,"If false, no module index is generated."
0.8.17,html_domain_indices = True
0.8.17,"If false, no index is generated."
0.8.17,html_use_index = True
0.8.17,"If true, the index is split into individual pages for each letter."
0.8.17,html_split_index = False
0.8.17,"If true, links to the reST sources are added to the pages."
0.8.17,html_show_sourcelink = True
0.8.17,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.17,html_show_sphinx = True
0.8.17,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.17,html_show_copyright = True
0.8.17,"If true, an OpenSearch description file will be output, and all pages will"
0.8.17,contain a <link> tag referring to it.  The value of this option must be the
0.8.17,base URL from which the finished HTML is served.
0.8.17,html_use_opensearch = ''
0.8.17,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.17,html_file_suffix = None
0.8.17,Language to be used for generating the HTML full-text search index.
0.8.17,Sphinx supports the following languages:
0.8.17,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.17,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.17,html_search_language = 'en'
0.8.17,"A dictionary with options for the search language support, empty by default."
0.8.17,Now only 'ja' uses this config value
0.8.17,html_search_options = {'type': 'default'}
0.8.17,The name of a javascript file (relative to the configuration directory) that
0.8.17,"implements a search results scorer. If empty, the default will be used."
0.8.17,html_search_scorer = 'scorer.js'
0.8.17,Output file base name for HTML help builder.
0.8.17,-- Options for LaTeX output ---------------------------------------------
0.8.17,The paper size ('letterpaper' or 'a4paper').
0.8.17,"'papersize': 'letterpaper',"
0.8.17,"The font size ('10pt', '11pt' or '12pt')."
0.8.17,"'pointsize': '10pt',"
0.8.17,Additional stuff for the LaTeX preamble.
0.8.17,"'preamble': '',"
0.8.17,Latex figure (float) alignment
0.8.17,"'figure_align': 'htbp',"
0.8.17,Grouping the document tree into LaTeX files. List of tuples
0.8.17,"(source start file, target name, title,"
0.8.17,"author, documentclass [howto, manual, or own class])."
0.8.17,The name of an image file (relative to this directory) to place at the top of
0.8.17,the title page.
0.8.17,latex_logo = None
0.8.17,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.17,not chapters.
0.8.17,latex_use_parts = False
0.8.17,"If true, show page references after internal links."
0.8.17,latex_show_pagerefs = False
0.8.17,"If true, show URL addresses after external links."
0.8.17,latex_show_urls = False
0.8.17,Documents to append as an appendix to all manuals.
0.8.17,latex_appendices = []
0.8.17,"If false, no module index is generated."
0.8.17,latex_domain_indices = True
0.8.17,-- Options for manual page output ---------------------------------------
0.8.17,One entry per manual page. List of tuples
0.8.17,"(source start file, name, description, authors, manual section)."
0.8.17,"If true, show URL addresses after external links."
0.8.17,man_show_urls = False
0.8.17,-- Options for Texinfo output -------------------------------------------
0.8.17,Grouping the document tree into Texinfo files. List of tuples
0.8.17,"(source start file, target name, title, author,"
0.8.17,"dir menu entry, description, category)"
0.8.17,Documents to append as an appendix to all manuals.
0.8.17,texinfo_appendices = []
0.8.17,"If false, no module index is generated."
0.8.17,texinfo_domain_indices = True
0.8.17,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.17,texinfo_show_urls = 'footnote'
0.8.17,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.17,texinfo_no_detailmenu = False
0.8.17,-- Options for Epub output ----------------------------------------------
0.8.17,Bibliographic Dublin Core info.
0.8.17,The basename for the epub file. It defaults to the project name.
0.8.17,epub_basename = project
0.8.17,The HTML theme for the epub output. Since the default themes are not
0.8.17,"optimized for small screen space, using the same theme for HTML and epub"
0.8.17,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.17,visual space.
0.8.17,epub_theme = 'epub'
0.8.17,The language of the text. It defaults to the language option
0.8.17,or 'en' if the language is not set.
0.8.17,epub_language = ''
0.8.17,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.17,epub_scheme = ''
0.8.17,The unique identifier of the text. This can be a ISBN number
0.8.17,or the project homepage.
0.8.17,epub_identifier = ''
0.8.17,A unique identification for the text.
0.8.17,epub_uid = ''
0.8.17,A tuple containing the cover image and cover page html template filenames.
0.8.17,epub_cover = ()
0.8.17,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.17,epub_guide = ()
0.8.17,HTML files that should be inserted before the pages created by sphinx.
0.8.17,The format is a list of tuples containing the path and title.
0.8.17,epub_pre_files = []
0.8.17,HTML files that should be inserted after the pages created by sphinx.
0.8.17,The format is a list of tuples containing the path and title.
0.8.17,epub_post_files = []
0.8.17,A list of files that should not be packed into the epub file.
0.8.17,The depth of the table of contents in toc.ncx.
0.8.17,epub_tocdepth = 3
0.8.17,Allow duplicate toc entries.
0.8.17,epub_tocdup = True
0.8.17,Choose between 'default' and 'includehidden'.
0.8.17,epub_tocscope = 'default'
0.8.17,Fix unsupported image types using the Pillow.
0.8.17,epub_fix_images = False
0.8.17,Scale large images.
0.8.17,epub_max_image_width = 0
0.8.17,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.17,epub_show_urls = 'inline'
0.8.17,"If false, no index is generated."
0.8.17,epub_use_index = True
0.8.16,"Import numpy here, only when headers are needed"
0.8.16,Add numpy headers to include_dirs
0.8.16,Call original build_ext command
0.8.16,"A little ""fancy"" we select from the flattened array reshape back"
0.8.16,(Fortran format to get indexing right) and take the product to do an and
0.8.16,then convert back to boolean type.
0.8.16,Density sparseness is not well defined if there are no
0.8.16,internal edges (as per the referenced paper). However
0.8.16,MATLAB code from the original authors simply selects the
0.8.16,largest of *all* the edges in the case that there are
0.8.16,"no internal edges, so we do the same here"
0.8.16,"If there are any internal edges, then subselect them out"
0.8.16,If there are no internal edges then we want to take the
0.8.16,"max over all the edges that exist in the MST, so we simply"
0.8.16,do nothing and return all the edges in the MST.
0.8.16,-*- coding: utf-8 -*-
0.8.16,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.16,Steve Astels <sastels@gmail.com>
0.8.16,John Healy <jchealy@gmail.com>
0.8.16,
0.8.16,License: BSD 3 clause
0.8.16,"Treating this case explicitly, instead of letting"
0.8.16,"sklearn.metrics.pairwise_distances handle it,"
0.8.16,enables the usage of numpy.inf in the distance
0.8.16,matrix to indicate missing distance information.
0.8.16,TODO: Check if copying is necessary
0.8.16,raise TypeError('Sparse distance matrices not yet supported')
0.8.16,Warn if the MST couldn't be constructed around the missing distances
0.8.16,mst_linkage_core does not generate a full minimal spanning tree
0.8.16,If a tree is required then we must build the edges from the information
0.8.16,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.16,Sort edges of the min_spanning_tree by weight
0.8.16,Convert edge list into standard hierarchical clustering format
0.8.16,Compute sparse mutual reachability graph
0.8.16,Compute the minimum spanning tree for the sparse graph
0.8.16,Convert the graph to scipy cluster array format
0.8.16,Sort edges of the min_spanning_tree by weight
0.8.16,Convert edge list into standard hierarchical clustering format
0.8.16,The Cython routines used require contiguous arrays
0.8.16,TO DO: Deal with p for minkowski appropriately
0.8.16,Get distance to kth nearest neighbour
0.8.16,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.16,Sort edges of the min_spanning_tree by weight
0.8.16,Convert edge list into standard hierarchical clustering format
0.8.16,The Cython routines used require contiguous arrays
0.8.16,Get distance to kth nearest neighbour
0.8.16,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.16,Sort edges of the min_spanning_tree by weight
0.8.16,Convert edge list into standard hierarchical clustering format
0.8.16,Sort edges of the min_spanning_tree by weight
0.8.16,Convert edge list into standard hierarchical clustering format
0.8.16,Sort edges of the min_spanning_tree by weight
0.8.16,Convert edge list into standard hierarchical clustering format
0.8.16,Checks input and converts to an nd-array where possible
0.8.16,"Only non-sparse, precomputed distance matrices are handled here"
0.8.16,and thereby allowed to contain numpy.inf for missing distances
0.8.16,Python 2 and 3 compliant string_type checking
0.8.16,We can't do much with sparse matrices ...
0.8.16,TO DO: Need heuristic to decide when to go to boruvka;
0.8.16,still debugging for now
0.8.16,TO DO: Need heuristic to decide when to go to boruvka;
0.8.16,still debugging for now
0.8.16,Inherits from sklearn
0.8.16,Handle sparse precomputed distance matrices separately
0.8.16,"Only non-sparse, precomputed distance matrices are allowed"
0.8.16,to have numpy.inf values indicating missing distances
0.8.16,"prediction data only applies to the persistent model, so remove"
0.8.16,it from the keyword args we pass on the the function
0.8.16,-*- coding: utf-8 -*-
0.8.16,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.16,
0.8.16,License: BSD 3 clause
0.8.16,"Return the only cluster, the root"
0.8.16,We want to get the x and y coordinates for the start of each cluster
0.8.16,"Initialize the leaves, since we know where they go, the iterate"
0.8.16,"through everything from the leaves back, setting coords as we go"
0.8.16,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.16,bottoms and widths for each rectangle. We can go through each cluster
0.8.16,and do this for each in turn.
0.8.16,Ensure we don't try to take log of zero
0.8.16,Finally we need the horizontal lines that occur at cluster splits.
0.8.16,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.16,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.16,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.16,Use PCA to get down to 32 dimension
0.8.16,-*- coding: utf-8 -*-
0.8.16,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.16,
0.8.16,License: BSD 3 clause
0.8.16,The Cython routines used require contiguous arrays
0.8.16,The Cython routines used require contiguous arrays
0.8.16,We can't do much with sparse matrices ...
0.8.16,Need heuristic to decide when to go to boruvka;
0.8.16,still debugging for now
0.8.16,Need heuristic to decide when to go to boruvka;
0.8.16,still debugging for now
0.8.16,Support various prediction methods for predicting cluster membership
0.8.16,of new or unseen points. There are several ways to interpret how
0.8.16,"to do this correctly, so we provide several methods for"
0.8.16,the different use cases that may arise.
0.8.16,raw_condensed_tree = condensed_tree.to_numpy()
0.8.16,New point departs with the old
0.8.16,Find appropriate cluster based on lambda of new point
0.8.16,Find appropriate cluster based on lambda of new point
0.8.16,We need to find where in the tree the new point would go
0.8.16,for the purposes of outlier membership approximation
0.8.16,"When no clusters found, return array of 0's"
0.8.16,import pickle
0.8.16,from sklearn.cluster.tests.common import generate_clustered_data
0.8.16,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.16,"number of clusters, ignoring noise if present"
0.8.16,"metric is the function reference, not the string key."
0.8.16,def test_rsl_unavailable_hierarchy():
0.8.16,clusterer = RobustSingleLinkage()
0.8.16,with warnings.catch_warnings(record=True) as w:
0.8.16,tree = clusterer.cluster_hierarchy_
0.8.16,assert len(w) > 0
0.8.16,assert tree is None
0.8.16,"H, y = shuffle(X, y, random_state=7)"
0.8.16,import pickle
0.8.16,from sklearn.cluster.tests.common import generate_clustered_data
0.8.16,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.16,"number of clusters, ignoring noise if present"
0.8.16,"number of clusters, ignoring noise if present"
0.8.16,"H, y = shuffle(X, y, random_state=7)"
0.8.16,"metric is the function reference, not the string key."
0.8.16,def test_hdbscan_unavailable_attributes():
0.8.16,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.16,with warnings.catch_warnings(record=True) as w:
0.8.16,tree = clusterer.condensed_tree_
0.8.16,assert len(w) > 0
0.8.16,assert tree is None
0.8.16,with warnings.catch_warnings(record=True) as w:
0.8.16,tree = clusterer.single_linkage_tree_
0.8.16,assert len(w) > 0
0.8.16,assert tree is None
0.8.16,with warnings.catch_warnings(record=True) as w:
0.8.16,scores = clusterer.outlier_scores_
0.8.16,assert len(w) > 0
0.8.16,assert scores is None
0.8.16,with warnings.catch_warnings(record=True) as w:
0.8.16,tree = clusterer.minimum_spanning_tree_
0.8.16,assert len(w) > 0
0.8.16,assert tree is None
0.8.16,def test_hdbscan_min_span_tree_availability():
0.8.16,clusterer = HDBSCAN().fit(X)
0.8.16,tree = clusterer.minimum_spanning_tree_
0.8.16,assert tree is None
0.8.16,D = distance.squareform(distance.pdist(X))
0.8.16,D /= np.max(D)
0.8.16,HDBSCAN(metric='precomputed').fit(D)
0.8.16,tree = clusterer.minimum_spanning_tree_
0.8.16,assert tree is None
0.8.16,def test_hdbscan_membership_vector():
0.8.16,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.16,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.16,assert_array_almost_equal(
0.8.16,"vector,"
0.8.16,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.16,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.16,assert_array_almost_equal(
0.8.16,"vector,"
0.8.16,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.16,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.16,assert_array_almost_equal(
0.8.16,"vector,"
0.8.16,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.16,
0.8.16,def test_hdbscan_all_points_membership_vectors():
0.8.16,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.16,vects = all_points_membership_vectors(clusterer)
0.8.16,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.16,"2.52734246e-001,"
0.8.16,8.38299608e-002]))
0.8.16,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.16,"8.35882503e-002,"
0.8.16,1.07356406e-001]))
0.8.16,Probably not applicable now #
0.8.16,def test_dbscan_sparse():
0.8.16,def test_dbscan_balltree():
0.8.16,def test_pickle():
0.8.16,def test_dbscan_core_samples_toy():
0.8.16,def test_boundaries():
0.8.16,Generate datasets. We choose the size big enough to see the scalability
0.8.16,"of the algorithms, but not too big to avoid too long running times"
0.8.16,normalize dataset for easier parameter selection
0.8.16,estimate bandwidth for mean shift
0.8.16,connectivity matrix for structured Ward
0.8.16,make connectivity symmetric
0.8.16,create clustering estimators
0.8.16,predict cluster memberships
0.8.16,plot
0.8.16,-*- coding: utf-8 -*-
0.8.16,#############################################################################
0.8.16,Generate sample data
0.8.16,#############################################################################
0.8.16,Compute DBSCAN
0.8.16,"Number of clusters in labels, ignoring noise if present."
0.8.16,#############################################################################
0.8.16,Plot result
0.8.16,Black removed and is used for noise instead.
0.8.16,Black used for noise.
0.8.16,Black used for noise.
0.8.16,-*- coding: utf-8 -*-
0.8.16,
0.8.16,"hdbscan documentation build configuration file, created by"
0.8.16,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.16,
0.8.16,This file is execfile()d with the current directory set to its
0.8.16,containing dir.
0.8.16,
0.8.16,Note that not all possible configuration values are present in this
0.8.16,autogenerated file.
0.8.16,
0.8.16,All configuration values have a default; values that are commented out
0.8.16,serve to show the default.
0.8.16,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.16,add these directories to sys.path here. If the directory is relative to the
0.8.16,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.16,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.16,"sys.path.insert(0, os.path.abspath('../'))"
0.8.16,-- General configuration ------------------------------------------------
0.8.16,"If your documentation needs a minimal Sphinx version, state it here."
0.8.16,needs_sphinx = '1.0'
0.8.16,"Add any Sphinx extension module names here, as strings. They can be"
0.8.16,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.16,ones.
0.8.16,"'sphinx.ext.napoleon',"
0.8.16,'numpy_ext.numpydoc'
0.8.16,napoleon_google_docstring = False
0.8.16,napoleon_numpy_docstring = True
0.8.16,"Add any paths that contain templates here, relative to this directory."
0.8.16,The suffix(es) of source filenames.
0.8.16,You can specify multiple suffix as a list of string:
0.8.16,"source_suffix = ['.rst', '.md']"
0.8.16,The encoding of source files.
0.8.16,source_encoding = 'utf-8-sig'
0.8.16,The master toctree document.
0.8.16,General information about the project.
0.8.16,"The version info for the project you're documenting, acts as replacement for"
0.8.16,"|version| and |release|, also used in various other places throughout the"
0.8.16,built documents.
0.8.16,
0.8.16,The short X.Y version.
0.8.16,"The full version, including alpha/beta/rc tags."
0.8.16,The language for content autogenerated by Sphinx. Refer to documentation
0.8.16,for a list of supported languages.
0.8.16,
0.8.16,This is also used if you do content translation via gettext catalogs.
0.8.16,"Usually you set ""language"" from the command line for these cases."
0.8.16,"There are two options for replacing |today|: either, you set today to some"
0.8.16,"non-false value, then it is used:"
0.8.16,today = ''
0.8.16,"Else, today_fmt is used as the format for a strftime call."
0.8.16,"today_fmt = '%B %d, %Y'"
0.8.16,"List of patterns, relative to source directory, that match files and"
0.8.16,directories to ignore when looking for source files.
0.8.16,The reST default role (used for this markup: `text`) to use for all
0.8.16,documents.
0.8.16,default_role = None
0.8.16,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.16,add_function_parentheses = True
0.8.16,"If true, the current module name will be prepended to all description"
0.8.16,unit titles (such as .. function::).
0.8.16,add_module_names = True
0.8.16,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.16,output. They are ignored by default.
0.8.16,show_authors = False
0.8.16,The name of the Pygments (syntax highlighting) style to use.
0.8.16,A list of ignored prefixes for module index sorting.
0.8.16,modindex_common_prefix = []
0.8.16,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.16,keep_warnings = False
0.8.16,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.16,-- Options for HTML output ----------------------------------------------
0.8.16,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.16,a list of builtin themes.
0.8.16,html_theme = 'alabaster'
0.8.16,Theme options are theme-specific and customize the look and feel of a theme
0.8.16,"further.  For a list of options available for each theme, see the"
0.8.16,documentation.
0.8.16,html_theme_options = {}
0.8.16,"Add any paths that contain custom themes here, relative to this directory."
0.8.16,html_theme_path = []
0.8.16,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.16,"""<project> v<release> documentation""."
0.8.16,html_title = None
0.8.16,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.16,html_short_title = None
0.8.16,The name of an image file (relative to this directory) to place at the top
0.8.16,of the sidebar.
0.8.16,html_logo = None
0.8.16,The name of an image file (within the static path) to use as favicon of the
0.8.16,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.16,pixels large.
0.8.16,html_favicon = None
0.8.16,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.16,"relative to this directory. They are copied after the builtin static files,"
0.8.16,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.16,Add any extra paths that contain custom files (such as robots.txt or
0.8.16,".htaccess) here, relative to this directory. These files are copied"
0.8.16,directly to the root of the documentation.
0.8.16,html_extra_path = []
0.8.16,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.16,using the given strftime format.
0.8.16,"html_last_updated_fmt = '%b %d, %Y'"
0.8.16,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.16,typographically correct entities.
0.8.16,html_use_smartypants = True
0.8.16,"Custom sidebar templates, maps document names to template names."
0.8.16,html_sidebars = {}
0.8.16,"Additional templates that should be rendered to pages, maps page names to"
0.8.16,template names.
0.8.16,html_additional_pages = {}
0.8.16,"If false, no module index is generated."
0.8.16,html_domain_indices = True
0.8.16,"If false, no index is generated."
0.8.16,html_use_index = True
0.8.16,"If true, the index is split into individual pages for each letter."
0.8.16,html_split_index = False
0.8.16,"If true, links to the reST sources are added to the pages."
0.8.16,html_show_sourcelink = True
0.8.16,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.16,html_show_sphinx = True
0.8.16,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.16,html_show_copyright = True
0.8.16,"If true, an OpenSearch description file will be output, and all pages will"
0.8.16,contain a <link> tag referring to it.  The value of this option must be the
0.8.16,base URL from which the finished HTML is served.
0.8.16,html_use_opensearch = ''
0.8.16,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.16,html_file_suffix = None
0.8.16,Language to be used for generating the HTML full-text search index.
0.8.16,Sphinx supports the following languages:
0.8.16,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.16,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.16,html_search_language = 'en'
0.8.16,"A dictionary with options for the search language support, empty by default."
0.8.16,Now only 'ja' uses this config value
0.8.16,html_search_options = {'type': 'default'}
0.8.16,The name of a javascript file (relative to the configuration directory) that
0.8.16,"implements a search results scorer. If empty, the default will be used."
0.8.16,html_search_scorer = 'scorer.js'
0.8.16,Output file base name for HTML help builder.
0.8.16,-- Options for LaTeX output ---------------------------------------------
0.8.16,The paper size ('letterpaper' or 'a4paper').
0.8.16,"'papersize': 'letterpaper',"
0.8.16,"The font size ('10pt', '11pt' or '12pt')."
0.8.16,"'pointsize': '10pt',"
0.8.16,Additional stuff for the LaTeX preamble.
0.8.16,"'preamble': '',"
0.8.16,Latex figure (float) alignment
0.8.16,"'figure_align': 'htbp',"
0.8.16,Grouping the document tree into LaTeX files. List of tuples
0.8.16,"(source start file, target name, title,"
0.8.16,"author, documentclass [howto, manual, or own class])."
0.8.16,The name of an image file (relative to this directory) to place at the top of
0.8.16,the title page.
0.8.16,latex_logo = None
0.8.16,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.16,not chapters.
0.8.16,latex_use_parts = False
0.8.16,"If true, show page references after internal links."
0.8.16,latex_show_pagerefs = False
0.8.16,"If true, show URL addresses after external links."
0.8.16,latex_show_urls = False
0.8.16,Documents to append as an appendix to all manuals.
0.8.16,latex_appendices = []
0.8.16,"If false, no module index is generated."
0.8.16,latex_domain_indices = True
0.8.16,-- Options for manual page output ---------------------------------------
0.8.16,One entry per manual page. List of tuples
0.8.16,"(source start file, name, description, authors, manual section)."
0.8.16,"If true, show URL addresses after external links."
0.8.16,man_show_urls = False
0.8.16,-- Options for Texinfo output -------------------------------------------
0.8.16,Grouping the document tree into Texinfo files. List of tuples
0.8.16,"(source start file, target name, title, author,"
0.8.16,"dir menu entry, description, category)"
0.8.16,Documents to append as an appendix to all manuals.
0.8.16,texinfo_appendices = []
0.8.16,"If false, no module index is generated."
0.8.16,texinfo_domain_indices = True
0.8.16,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.16,texinfo_show_urls = 'footnote'
0.8.16,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.16,texinfo_no_detailmenu = False
0.8.16,-- Options for Epub output ----------------------------------------------
0.8.16,Bibliographic Dublin Core info.
0.8.16,The basename for the epub file. It defaults to the project name.
0.8.16,epub_basename = project
0.8.16,The HTML theme for the epub output. Since the default themes are not
0.8.16,"optimized for small screen space, using the same theme for HTML and epub"
0.8.16,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.16,visual space.
0.8.16,epub_theme = 'epub'
0.8.16,The language of the text. It defaults to the language option
0.8.16,or 'en' if the language is not set.
0.8.16,epub_language = ''
0.8.16,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.16,epub_scheme = ''
0.8.16,The unique identifier of the text. This can be a ISBN number
0.8.16,or the project homepage.
0.8.16,epub_identifier = ''
0.8.16,A unique identification for the text.
0.8.16,epub_uid = ''
0.8.16,A tuple containing the cover image and cover page html template filenames.
0.8.16,epub_cover = ()
0.8.16,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.16,epub_guide = ()
0.8.16,HTML files that should be inserted before the pages created by sphinx.
0.8.16,The format is a list of tuples containing the path and title.
0.8.16,epub_pre_files = []
0.8.16,HTML files that should be inserted after the pages created by sphinx.
0.8.16,The format is a list of tuples containing the path and title.
0.8.16,epub_post_files = []
0.8.16,A list of files that should not be packed into the epub file.
0.8.16,The depth of the table of contents in toc.ncx.
0.8.16,epub_tocdepth = 3
0.8.16,Allow duplicate toc entries.
0.8.16,epub_tocdup = True
0.8.16,Choose between 'default' and 'includehidden'.
0.8.16,epub_tocscope = 'default'
0.8.16,Fix unsupported image types using the Pillow.
0.8.16,epub_fix_images = False
0.8.16,Scale large images.
0.8.16,epub_max_image_width = 0
0.8.16,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.16,epub_show_urls = 'inline'
0.8.16,"If false, no index is generated."
0.8.16,epub_use_index = True
0.8.15,"Import numpy here, only when headers are needed"
0.8.15,Add numpy headers to include_dirs
0.8.15,Call original build_ext command
0.8.15,"A little ""fancy"" we select from the flattened array reshape back"
0.8.15,(Fortran format to get indexing right) and take the product to do an and
0.8.15,then convert back to boolean type.
0.8.15,Density sparseness is not well defined if there are no
0.8.15,internal edges (as per the referenced paper). However
0.8.15,MATLAB code from the original authors simply selects the
0.8.15,largest of *all* the edges in the case that there are
0.8.15,"no internal edges, so we do the same here"
0.8.15,"If there are any internal edges, then subselect them out"
0.8.15,If there are no internal edges then we want to take the
0.8.15,"max over all the edges that exist in the MST, so we simply"
0.8.15,do nothing and return all the edges in the MST.
0.8.15,-*- coding: utf-8 -*-
0.8.15,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.15,Steve Astels <sastels@gmail.com>
0.8.15,John Healy <jchealy@gmail.com>
0.8.15,
0.8.15,License: BSD 3 clause
0.8.15,"Treating this case explicitly, instead of letting"
0.8.15,"sklearn.metrics.pairwise_distances handle it,"
0.8.15,enables the usage of numpy.inf in the distance
0.8.15,matrix to indicate missing distance information.
0.8.15,TODO: Check if copying is necessary
0.8.15,raise TypeError('Sparse distance matrices not yet supported')
0.8.15,Warn if the MST couldn't be constructed around the missing distances
0.8.15,mst_linkage_core does not generate a full minimal spanning tree
0.8.15,If a tree is required then we must build the edges from the information
0.8.15,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.15,Sort edges of the min_spanning_tree by weight
0.8.15,Convert edge list into standard hierarchical clustering format
0.8.15,Compute sparse mutual reachability graph
0.8.15,Compute the minimum spanning tree for the sparse graph
0.8.15,Convert the graph to scipy cluster array format
0.8.15,Sort edges of the min_spanning_tree by weight
0.8.15,Convert edge list into standard hierarchical clustering format
0.8.15,The Cython routines used require contiguous arrays
0.8.15,TO DO: Deal with p for minkowski appropriately
0.8.15,Get distance to kth nearest neighbour
0.8.15,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.15,Sort edges of the min_spanning_tree by weight
0.8.15,Convert edge list into standard hierarchical clustering format
0.8.15,The Cython routines used require contiguous arrays
0.8.15,Get distance to kth nearest neighbour
0.8.15,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.15,Sort edges of the min_spanning_tree by weight
0.8.15,Convert edge list into standard hierarchical clustering format
0.8.15,Sort edges of the min_spanning_tree by weight
0.8.15,Convert edge list into standard hierarchical clustering format
0.8.15,Sort edges of the min_spanning_tree by weight
0.8.15,Convert edge list into standard hierarchical clustering format
0.8.15,Checks input and converts to an nd-array where possible
0.8.15,"Only non-sparse, precomputed distance matrices are handled here"
0.8.15,and thereby allowed to contain numpy.inf for missing distances
0.8.15,Python 2 and 3 compliant string_type checking
0.8.15,We can't do much with sparse matrices ...
0.8.15,TO DO: Need heuristic to decide when to go to boruvka;
0.8.15,still debugging for now
0.8.15,TO DO: Need heuristic to decide when to go to boruvka;
0.8.15,still debugging for now
0.8.15,Inherits from sklearn
0.8.15,Handle sparse precomputed distance matrices separately
0.8.15,"Only non-sparse, precomputed distance matrices are allowed"
0.8.15,to have numpy.inf values indicating missing distances
0.8.15,"prediction data only applies to the persistent model, so remove"
0.8.15,it from the keyword args we pass on the the function
0.8.15,-*- coding: utf-8 -*-
0.8.15,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.15,
0.8.15,License: BSD 3 clause
0.8.15,"Return the only cluster, the root"
0.8.15,We want to get the x and y coordinates for the start of each cluster
0.8.15,"Initialize the leaves, since we know where they go, the iterate"
0.8.15,"through everything from the leaves back, setting coords as we go"
0.8.15,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.15,bottoms and widths for each rectangle. We can go through each cluster
0.8.15,and do this for each in turn.
0.8.15,Ensure we don't try to take log of zero
0.8.15,Finally we need the horizontal lines that occur at cluster splits.
0.8.15,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.15,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.15,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.15,Use PCA to get down to 32 dimension
0.8.15,-*- coding: utf-8 -*-
0.8.15,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.15,
0.8.15,License: BSD 3 clause
0.8.15,The Cython routines used require contiguous arrays
0.8.15,The Cython routines used require contiguous arrays
0.8.15,We can't do much with sparse matrices ...
0.8.15,Need heuristic to decide when to go to boruvka;
0.8.15,still debugging for now
0.8.15,Need heuristic to decide when to go to boruvka;
0.8.15,still debugging for now
0.8.15,Support various prediction methods for predicting cluster membership
0.8.15,of new or unseen points. There are several ways to interpret how
0.8.15,"to do this correctly, so we provide several methods for"
0.8.15,the different use cases that may arise.
0.8.15,raw_condensed_tree = condensed_tree.to_numpy()
0.8.15,New point departs with the old
0.8.15,Find appropriate cluster based on lambda of new point
0.8.15,Find appropriate cluster based on lambda of new point
0.8.15,We need to find where in the tree the new point would go
0.8.15,for the purposes of outlier membership approximation
0.8.15,"When no clusters found, return array of 0's"
0.8.15,import pickle
0.8.15,from sklearn.cluster.tests.common import generate_clustered_data
0.8.15,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.15,"number of clusters, ignoring noise if present"
0.8.15,"metric is the function reference, not the string key."
0.8.15,def test_rsl_unavailable_hierarchy():
0.8.15,clusterer = RobustSingleLinkage()
0.8.15,with warnings.catch_warnings(record=True) as w:
0.8.15,tree = clusterer.cluster_hierarchy_
0.8.15,assert len(w) > 0
0.8.15,assert tree is None
0.8.15,"H, y = shuffle(X, y, random_state=7)"
0.8.15,import pickle
0.8.15,from sklearn.cluster.tests.common import generate_clustered_data
0.8.15,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.15,"number of clusters, ignoring noise if present"
0.8.15,"number of clusters, ignoring noise if present"
0.8.15,"H, y = shuffle(X, y, random_state=7)"
0.8.15,"metric is the function reference, not the string key."
0.8.15,def test_hdbscan_unavailable_attributes():
0.8.15,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.15,with warnings.catch_warnings(record=True) as w:
0.8.15,tree = clusterer.condensed_tree_
0.8.15,assert len(w) > 0
0.8.15,assert tree is None
0.8.15,with warnings.catch_warnings(record=True) as w:
0.8.15,tree = clusterer.single_linkage_tree_
0.8.15,assert len(w) > 0
0.8.15,assert tree is None
0.8.15,with warnings.catch_warnings(record=True) as w:
0.8.15,scores = clusterer.outlier_scores_
0.8.15,assert len(w) > 0
0.8.15,assert scores is None
0.8.15,with warnings.catch_warnings(record=True) as w:
0.8.15,tree = clusterer.minimum_spanning_tree_
0.8.15,assert len(w) > 0
0.8.15,assert tree is None
0.8.15,def test_hdbscan_min_span_tree_availability():
0.8.15,clusterer = HDBSCAN().fit(X)
0.8.15,tree = clusterer.minimum_spanning_tree_
0.8.15,assert tree is None
0.8.15,D = distance.squareform(distance.pdist(X))
0.8.15,D /= np.max(D)
0.8.15,HDBSCAN(metric='precomputed').fit(D)
0.8.15,tree = clusterer.minimum_spanning_tree_
0.8.15,assert tree is None
0.8.15,def test_hdbscan_membership_vector():
0.8.15,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.15,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.15,assert_array_almost_equal(
0.8.15,"vector,"
0.8.15,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.15,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.15,assert_array_almost_equal(
0.8.15,"vector,"
0.8.15,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.15,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.15,assert_array_almost_equal(
0.8.15,"vector,"
0.8.15,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.15,
0.8.15,def test_hdbscan_all_points_membership_vectors():
0.8.15,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.15,vects = all_points_membership_vectors(clusterer)
0.8.15,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.15,"2.52734246e-001,"
0.8.15,8.38299608e-002]))
0.8.15,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.15,"8.35882503e-002,"
0.8.15,1.07356406e-001]))
0.8.15,Probably not applicable now #
0.8.15,def test_dbscan_sparse():
0.8.15,def test_dbscan_balltree():
0.8.15,def test_pickle():
0.8.15,def test_dbscan_core_samples_toy():
0.8.15,def test_boundaries():
0.8.15,Generate datasets. We choose the size big enough to see the scalability
0.8.15,"of the algorithms, but not too big to avoid too long running times"
0.8.15,normalize dataset for easier parameter selection
0.8.15,estimate bandwidth for mean shift
0.8.15,connectivity matrix for structured Ward
0.8.15,make connectivity symmetric
0.8.15,create clustering estimators
0.8.15,predict cluster memberships
0.8.15,plot
0.8.15,-*- coding: utf-8 -*-
0.8.15,#############################################################################
0.8.15,Generate sample data
0.8.15,#############################################################################
0.8.15,Compute DBSCAN
0.8.15,"Number of clusters in labels, ignoring noise if present."
0.8.15,#############################################################################
0.8.15,Plot result
0.8.15,Black removed and is used for noise instead.
0.8.15,Black used for noise.
0.8.15,Black used for noise.
0.8.15,-*- coding: utf-8 -*-
0.8.15,
0.8.15,"hdbscan documentation build configuration file, created by"
0.8.15,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.15,
0.8.15,This file is execfile()d with the current directory set to its
0.8.15,containing dir.
0.8.15,
0.8.15,Note that not all possible configuration values are present in this
0.8.15,autogenerated file.
0.8.15,
0.8.15,All configuration values have a default; values that are commented out
0.8.15,serve to show the default.
0.8.15,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.15,add these directories to sys.path here. If the directory is relative to the
0.8.15,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.15,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.15,"sys.path.insert(0, os.path.abspath('../'))"
0.8.15,-- General configuration ------------------------------------------------
0.8.15,"If your documentation needs a minimal Sphinx version, state it here."
0.8.15,needs_sphinx = '1.0'
0.8.15,"Add any Sphinx extension module names here, as strings. They can be"
0.8.15,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.15,ones.
0.8.15,"'sphinx.ext.napoleon',"
0.8.15,'numpy_ext.numpydoc'
0.8.15,napoleon_google_docstring = False
0.8.15,napoleon_numpy_docstring = True
0.8.15,"Add any paths that contain templates here, relative to this directory."
0.8.15,The suffix(es) of source filenames.
0.8.15,You can specify multiple suffix as a list of string:
0.8.15,"source_suffix = ['.rst', '.md']"
0.8.15,The encoding of source files.
0.8.15,source_encoding = 'utf-8-sig'
0.8.15,The master toctree document.
0.8.15,General information about the project.
0.8.15,"The version info for the project you're documenting, acts as replacement for"
0.8.15,"|version| and |release|, also used in various other places throughout the"
0.8.15,built documents.
0.8.15,
0.8.15,The short X.Y version.
0.8.15,"The full version, including alpha/beta/rc tags."
0.8.15,The language for content autogenerated by Sphinx. Refer to documentation
0.8.15,for a list of supported languages.
0.8.15,
0.8.15,This is also used if you do content translation via gettext catalogs.
0.8.15,"Usually you set ""language"" from the command line for these cases."
0.8.15,"There are two options for replacing |today|: either, you set today to some"
0.8.15,"non-false value, then it is used:"
0.8.15,today = ''
0.8.15,"Else, today_fmt is used as the format for a strftime call."
0.8.15,"today_fmt = '%B %d, %Y'"
0.8.15,"List of patterns, relative to source directory, that match files and"
0.8.15,directories to ignore when looking for source files.
0.8.15,The reST default role (used for this markup: `text`) to use for all
0.8.15,documents.
0.8.15,default_role = None
0.8.15,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.15,add_function_parentheses = True
0.8.15,"If true, the current module name will be prepended to all description"
0.8.15,unit titles (such as .. function::).
0.8.15,add_module_names = True
0.8.15,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.15,output. They are ignored by default.
0.8.15,show_authors = False
0.8.15,The name of the Pygments (syntax highlighting) style to use.
0.8.15,A list of ignored prefixes for module index sorting.
0.8.15,modindex_common_prefix = []
0.8.15,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.15,keep_warnings = False
0.8.15,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.15,-- Options for HTML output ----------------------------------------------
0.8.15,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.15,a list of builtin themes.
0.8.15,html_theme = 'alabaster'
0.8.15,Theme options are theme-specific and customize the look and feel of a theme
0.8.15,"further.  For a list of options available for each theme, see the"
0.8.15,documentation.
0.8.15,html_theme_options = {}
0.8.15,"Add any paths that contain custom themes here, relative to this directory."
0.8.15,html_theme_path = []
0.8.15,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.15,"""<project> v<release> documentation""."
0.8.15,html_title = None
0.8.15,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.15,html_short_title = None
0.8.15,The name of an image file (relative to this directory) to place at the top
0.8.15,of the sidebar.
0.8.15,html_logo = None
0.8.15,The name of an image file (within the static path) to use as favicon of the
0.8.15,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.15,pixels large.
0.8.15,html_favicon = None
0.8.15,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.15,"relative to this directory. They are copied after the builtin static files,"
0.8.15,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.15,Add any extra paths that contain custom files (such as robots.txt or
0.8.15,".htaccess) here, relative to this directory. These files are copied"
0.8.15,directly to the root of the documentation.
0.8.15,html_extra_path = []
0.8.15,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.15,using the given strftime format.
0.8.15,"html_last_updated_fmt = '%b %d, %Y'"
0.8.15,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.15,typographically correct entities.
0.8.15,html_use_smartypants = True
0.8.15,"Custom sidebar templates, maps document names to template names."
0.8.15,html_sidebars = {}
0.8.15,"Additional templates that should be rendered to pages, maps page names to"
0.8.15,template names.
0.8.15,html_additional_pages = {}
0.8.15,"If false, no module index is generated."
0.8.15,html_domain_indices = True
0.8.15,"If false, no index is generated."
0.8.15,html_use_index = True
0.8.15,"If true, the index is split into individual pages for each letter."
0.8.15,html_split_index = False
0.8.15,"If true, links to the reST sources are added to the pages."
0.8.15,html_show_sourcelink = True
0.8.15,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.15,html_show_sphinx = True
0.8.15,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.15,html_show_copyright = True
0.8.15,"If true, an OpenSearch description file will be output, and all pages will"
0.8.15,contain a <link> tag referring to it.  The value of this option must be the
0.8.15,base URL from which the finished HTML is served.
0.8.15,html_use_opensearch = ''
0.8.15,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.15,html_file_suffix = None
0.8.15,Language to be used for generating the HTML full-text search index.
0.8.15,Sphinx supports the following languages:
0.8.15,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.15,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.15,html_search_language = 'en'
0.8.15,"A dictionary with options for the search language support, empty by default."
0.8.15,Now only 'ja' uses this config value
0.8.15,html_search_options = {'type': 'default'}
0.8.15,The name of a javascript file (relative to the configuration directory) that
0.8.15,"implements a search results scorer. If empty, the default will be used."
0.8.15,html_search_scorer = 'scorer.js'
0.8.15,Output file base name for HTML help builder.
0.8.15,-- Options for LaTeX output ---------------------------------------------
0.8.15,The paper size ('letterpaper' or 'a4paper').
0.8.15,"'papersize': 'letterpaper',"
0.8.15,"The font size ('10pt', '11pt' or '12pt')."
0.8.15,"'pointsize': '10pt',"
0.8.15,Additional stuff for the LaTeX preamble.
0.8.15,"'preamble': '',"
0.8.15,Latex figure (float) alignment
0.8.15,"'figure_align': 'htbp',"
0.8.15,Grouping the document tree into LaTeX files. List of tuples
0.8.15,"(source start file, target name, title,"
0.8.15,"author, documentclass [howto, manual, or own class])."
0.8.15,The name of an image file (relative to this directory) to place at the top of
0.8.15,the title page.
0.8.15,latex_logo = None
0.8.15,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.15,not chapters.
0.8.15,latex_use_parts = False
0.8.15,"If true, show page references after internal links."
0.8.15,latex_show_pagerefs = False
0.8.15,"If true, show URL addresses after external links."
0.8.15,latex_show_urls = False
0.8.15,Documents to append as an appendix to all manuals.
0.8.15,latex_appendices = []
0.8.15,"If false, no module index is generated."
0.8.15,latex_domain_indices = True
0.8.15,-- Options for manual page output ---------------------------------------
0.8.15,One entry per manual page. List of tuples
0.8.15,"(source start file, name, description, authors, manual section)."
0.8.15,"If true, show URL addresses after external links."
0.8.15,man_show_urls = False
0.8.15,-- Options for Texinfo output -------------------------------------------
0.8.15,Grouping the document tree into Texinfo files. List of tuples
0.8.15,"(source start file, target name, title, author,"
0.8.15,"dir menu entry, description, category)"
0.8.15,Documents to append as an appendix to all manuals.
0.8.15,texinfo_appendices = []
0.8.15,"If false, no module index is generated."
0.8.15,texinfo_domain_indices = True
0.8.15,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.15,texinfo_show_urls = 'footnote'
0.8.15,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.15,texinfo_no_detailmenu = False
0.8.15,-- Options for Epub output ----------------------------------------------
0.8.15,Bibliographic Dublin Core info.
0.8.15,The basename for the epub file. It defaults to the project name.
0.8.15,epub_basename = project
0.8.15,The HTML theme for the epub output. Since the default themes are not
0.8.15,"optimized for small screen space, using the same theme for HTML and epub"
0.8.15,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.15,visual space.
0.8.15,epub_theme = 'epub'
0.8.15,The language of the text. It defaults to the language option
0.8.15,or 'en' if the language is not set.
0.8.15,epub_language = ''
0.8.15,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.15,epub_scheme = ''
0.8.15,The unique identifier of the text. This can be a ISBN number
0.8.15,or the project homepage.
0.8.15,epub_identifier = ''
0.8.15,A unique identification for the text.
0.8.15,epub_uid = ''
0.8.15,A tuple containing the cover image and cover page html template filenames.
0.8.15,epub_cover = ()
0.8.15,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.15,epub_guide = ()
0.8.15,HTML files that should be inserted before the pages created by sphinx.
0.8.15,The format is a list of tuples containing the path and title.
0.8.15,epub_pre_files = []
0.8.15,HTML files that should be inserted after the pages created by sphinx.
0.8.15,The format is a list of tuples containing the path and title.
0.8.15,epub_post_files = []
0.8.15,A list of files that should not be packed into the epub file.
0.8.15,The depth of the table of contents in toc.ncx.
0.8.15,epub_tocdepth = 3
0.8.15,Allow duplicate toc entries.
0.8.15,epub_tocdup = True
0.8.15,Choose between 'default' and 'includehidden'.
0.8.15,epub_tocscope = 'default'
0.8.15,Fix unsupported image types using the Pillow.
0.8.15,epub_fix_images = False
0.8.15,Scale large images.
0.8.15,epub_max_image_width = 0
0.8.15,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.15,epub_show_urls = 'inline'
0.8.15,"If false, no index is generated."
0.8.15,epub_use_index = True
0.8.14,"Import numpy here, only when headers are needed"
0.8.14,Add numpy headers to include_dirs
0.8.14,Call original build_ext command
0.8.14,"A little ""fancy"" we select from the flattened array reshape back"
0.8.14,(Fortran format to get indexing right) and take the product to do an and
0.8.14,then convert back to boolean type.
0.8.14,Density sparseness is not well defined if there are no
0.8.14,internal edges (as per the referenced paper). However
0.8.14,MATLAB code from the original authors simply selects the
0.8.14,largest of *all* the edges in the case that there are
0.8.14,"no internal edges, so we do the same here"
0.8.14,"If there are any internal edges, then subselect them out"
0.8.14,If there are no internal edges then we want to take the
0.8.14,"max over all the edges that exist in the MST, so we simply"
0.8.14,do nothing and return all the edges in the MST.
0.8.14,-*- coding: utf-8 -*-
0.8.14,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.14,Steve Astels <sastels@gmail.com>
0.8.14,John Healy <jchealy@gmail.com>
0.8.14,
0.8.14,License: BSD 3 clause
0.8.14,"Treating this case explicitly, instead of letting"
0.8.14,"sklearn.metrics.pairwise_distances handle it,"
0.8.14,enables the usage of numpy.inf in the distance
0.8.14,matrix to indicate missing distance information.
0.8.14,TODO: Check if copying is necessary
0.8.14,raise TypeError('Sparse distance matrices not yet supported')
0.8.14,Warn if the MST couldn't be constructed around the missing distances
0.8.14,mst_linkage_core does not generate a full minimal spanning tree
0.8.14,If a tree is required then we must build the edges from the information
0.8.14,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.14,Sort edges of the min_spanning_tree by weight
0.8.14,Convert edge list into standard hierarchical clustering format
0.8.14,Compute sparse mutual reachability graph
0.8.14,Compute the minimum spanning tree for the sparse graph
0.8.14,Convert the graph to scipy cluster array format
0.8.14,Sort edges of the min_spanning_tree by weight
0.8.14,Convert edge list into standard hierarchical clustering format
0.8.14,The Cython routines used require contiguous arrays
0.8.14,TO DO: Deal with p for minkowski appropriately
0.8.14,Get distance to kth nearest neighbour
0.8.14,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.14,Sort edges of the min_spanning_tree by weight
0.8.14,Convert edge list into standard hierarchical clustering format
0.8.14,The Cython routines used require contiguous arrays
0.8.14,Get distance to kth nearest neighbour
0.8.14,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.14,Sort edges of the min_spanning_tree by weight
0.8.14,Convert edge list into standard hierarchical clustering format
0.8.14,Sort edges of the min_spanning_tree by weight
0.8.14,Convert edge list into standard hierarchical clustering format
0.8.14,Sort edges of the min_spanning_tree by weight
0.8.14,Convert edge list into standard hierarchical clustering format
0.8.14,Checks input and converts to an nd-array where possible
0.8.14,"Only non-sparse, precomputed distance matrices are handled here"
0.8.14,and thereby allowed to contain numpy.inf for missing distances
0.8.14,Python 2 and 3 compliant string_type checking
0.8.14,We can't do much with sparse matrices ...
0.8.14,TO DO: Need heuristic to decide when to go to boruvka;
0.8.14,still debugging for now
0.8.14,TO DO: Need heuristic to decide when to go to boruvka;
0.8.14,still debugging for now
0.8.14,Inherits from sklearn
0.8.14,Handle sparse precomputed distance matrices separately
0.8.14,"Only non-sparse, precomputed distance matrices are allowed"
0.8.14,to have numpy.inf values indicating missing distances
0.8.14,"prediction data only applies to the persistent model, so remove"
0.8.14,it from the keyword args we pass on the the function
0.8.14,-*- coding: utf-8 -*-
0.8.14,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.14,
0.8.14,License: BSD 3 clause
0.8.14,"Return the only cluster, the root"
0.8.14,We want to get the x and y coordinates for the start of each cluster
0.8.14,"Initialize the leaves, since we know where they go, the iterate"
0.8.14,"through everything from the leaves back, setting coords as we go"
0.8.14,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.14,bottoms and widths for each rectangle. We can go through each cluster
0.8.14,and do this for each in turn.
0.8.14,Ensure we don't try to take log of zero
0.8.14,Finally we need the horizontal lines that occur at cluster splits.
0.8.14,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.14,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.14,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.14,Use PCA to get down to 32 dimension
0.8.14,-*- coding: utf-8 -*-
0.8.14,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.14,
0.8.14,License: BSD 3 clause
0.8.14,The Cython routines used require contiguous arrays
0.8.14,The Cython routines used require contiguous arrays
0.8.14,We can't do much with sparse matrices ...
0.8.14,Need heuristic to decide when to go to boruvka;
0.8.14,still debugging for now
0.8.14,Need heuristic to decide when to go to boruvka;
0.8.14,still debugging for now
0.8.14,Support various prediction methods for predicting cluster membership
0.8.14,of new or unseen points. There are several ways to interpret how
0.8.14,"to do this correctly, so we provide several methods for"
0.8.14,the different use cases that may arise.
0.8.14,raw_condensed_tree = condensed_tree.to_numpy()
0.8.14,New point departs with the old
0.8.14,Find appropriate cluster based on lambda of new point
0.8.14,Find appropriate cluster based on lambda of new point
0.8.14,We need to find where in the tree the new point would go
0.8.14,for the purposes of outlier membership approximation
0.8.14,"When no clusters found, return array of 0's"
0.8.14,import pickle
0.8.14,from sklearn.cluster.tests.common import generate_clustered_data
0.8.14,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.14,"number of clusters, ignoring noise if present"
0.8.14,"metric is the function reference, not the string key."
0.8.14,def test_rsl_unavailable_hierarchy():
0.8.14,clusterer = RobustSingleLinkage()
0.8.14,with warnings.catch_warnings(record=True) as w:
0.8.14,tree = clusterer.cluster_hierarchy_
0.8.14,assert len(w) > 0
0.8.14,assert tree is None
0.8.14,"H, y = shuffle(X, y, random_state=7)"
0.8.14,import pickle
0.8.14,from sklearn.cluster.tests.common import generate_clustered_data
0.8.14,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.14,"number of clusters, ignoring noise if present"
0.8.14,"number of clusters, ignoring noise if present"
0.8.14,"H, y = shuffle(X, y, random_state=7)"
0.8.14,"metric is the function reference, not the string key."
0.8.14,def test_hdbscan_unavailable_attributes():
0.8.14,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.14,with warnings.catch_warnings(record=True) as w:
0.8.14,tree = clusterer.condensed_tree_
0.8.14,assert len(w) > 0
0.8.14,assert tree is None
0.8.14,with warnings.catch_warnings(record=True) as w:
0.8.14,tree = clusterer.single_linkage_tree_
0.8.14,assert len(w) > 0
0.8.14,assert tree is None
0.8.14,with warnings.catch_warnings(record=True) as w:
0.8.14,scores = clusterer.outlier_scores_
0.8.14,assert len(w) > 0
0.8.14,assert scores is None
0.8.14,with warnings.catch_warnings(record=True) as w:
0.8.14,tree = clusterer.minimum_spanning_tree_
0.8.14,assert len(w) > 0
0.8.14,assert tree is None
0.8.14,def test_hdbscan_min_span_tree_availability():
0.8.14,clusterer = HDBSCAN().fit(X)
0.8.14,tree = clusterer.minimum_spanning_tree_
0.8.14,assert tree is None
0.8.14,D = distance.squareform(distance.pdist(X))
0.8.14,D /= np.max(D)
0.8.14,HDBSCAN(metric='precomputed').fit(D)
0.8.14,tree = clusterer.minimum_spanning_tree_
0.8.14,assert tree is None
0.8.14,def test_hdbscan_membership_vector():
0.8.14,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.14,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.14,assert_array_almost_equal(
0.8.14,"vector,"
0.8.14,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.14,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.14,assert_array_almost_equal(
0.8.14,"vector,"
0.8.14,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.14,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.14,assert_array_almost_equal(
0.8.14,"vector,"
0.8.14,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.14,
0.8.14,def test_hdbscan_all_points_membership_vectors():
0.8.14,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.14,vects = all_points_membership_vectors(clusterer)
0.8.14,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.14,"2.52734246e-001,"
0.8.14,8.38299608e-002]))
0.8.14,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.14,"8.35882503e-002,"
0.8.14,1.07356406e-001]))
0.8.14,Probably not applicable now #
0.8.14,def test_dbscan_sparse():
0.8.14,def test_dbscan_balltree():
0.8.14,def test_pickle():
0.8.14,def test_dbscan_core_samples_toy():
0.8.14,def test_boundaries():
0.8.14,Generate datasets. We choose the size big enough to see the scalability
0.8.14,"of the algorithms, but not too big to avoid too long running times"
0.8.14,normalize dataset for easier parameter selection
0.8.14,estimate bandwidth for mean shift
0.8.14,connectivity matrix for structured Ward
0.8.14,make connectivity symmetric
0.8.14,create clustering estimators
0.8.14,predict cluster memberships
0.8.14,plot
0.8.14,-*- coding: utf-8 -*-
0.8.14,#############################################################################
0.8.14,Generate sample data
0.8.14,#############################################################################
0.8.14,Compute DBSCAN
0.8.14,"Number of clusters in labels, ignoring noise if present."
0.8.14,#############################################################################
0.8.14,Plot result
0.8.14,Black removed and is used for noise instead.
0.8.14,Black used for noise.
0.8.14,Black used for noise.
0.8.14,-*- coding: utf-8 -*-
0.8.14,
0.8.14,"hdbscan documentation build configuration file, created by"
0.8.14,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.14,
0.8.14,This file is execfile()d with the current directory set to its
0.8.14,containing dir.
0.8.14,
0.8.14,Note that not all possible configuration values are present in this
0.8.14,autogenerated file.
0.8.14,
0.8.14,All configuration values have a default; values that are commented out
0.8.14,serve to show the default.
0.8.14,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.14,add these directories to sys.path here. If the directory is relative to the
0.8.14,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.14,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.14,"sys.path.insert(0, os.path.abspath('../'))"
0.8.14,-- General configuration ------------------------------------------------
0.8.14,"If your documentation needs a minimal Sphinx version, state it here."
0.8.14,needs_sphinx = '1.0'
0.8.14,"Add any Sphinx extension module names here, as strings. They can be"
0.8.14,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.14,ones.
0.8.14,"'sphinx.ext.napoleon',"
0.8.14,'numpy_ext.numpydoc'
0.8.14,napoleon_google_docstring = False
0.8.14,napoleon_numpy_docstring = True
0.8.14,"Add any paths that contain templates here, relative to this directory."
0.8.14,The suffix(es) of source filenames.
0.8.14,You can specify multiple suffix as a list of string:
0.8.14,"source_suffix = ['.rst', '.md']"
0.8.14,The encoding of source files.
0.8.14,source_encoding = 'utf-8-sig'
0.8.14,The master toctree document.
0.8.14,General information about the project.
0.8.14,"The version info for the project you're documenting, acts as replacement for"
0.8.14,"|version| and |release|, also used in various other places throughout the"
0.8.14,built documents.
0.8.14,
0.8.14,The short X.Y version.
0.8.14,"The full version, including alpha/beta/rc tags."
0.8.14,The language for content autogenerated by Sphinx. Refer to documentation
0.8.14,for a list of supported languages.
0.8.14,
0.8.14,This is also used if you do content translation via gettext catalogs.
0.8.14,"Usually you set ""language"" from the command line for these cases."
0.8.14,"There are two options for replacing |today|: either, you set today to some"
0.8.14,"non-false value, then it is used:"
0.8.14,today = ''
0.8.14,"Else, today_fmt is used as the format for a strftime call."
0.8.14,"today_fmt = '%B %d, %Y'"
0.8.14,"List of patterns, relative to source directory, that match files and"
0.8.14,directories to ignore when looking for source files.
0.8.14,The reST default role (used for this markup: `text`) to use for all
0.8.14,documents.
0.8.14,default_role = None
0.8.14,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.14,add_function_parentheses = True
0.8.14,"If true, the current module name will be prepended to all description"
0.8.14,unit titles (such as .. function::).
0.8.14,add_module_names = True
0.8.14,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.14,output. They are ignored by default.
0.8.14,show_authors = False
0.8.14,The name of the Pygments (syntax highlighting) style to use.
0.8.14,A list of ignored prefixes for module index sorting.
0.8.14,modindex_common_prefix = []
0.8.14,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.14,keep_warnings = False
0.8.14,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.14,-- Options for HTML output ----------------------------------------------
0.8.14,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.14,a list of builtin themes.
0.8.14,html_theme = 'alabaster'
0.8.14,Theme options are theme-specific and customize the look and feel of a theme
0.8.14,"further.  For a list of options available for each theme, see the"
0.8.14,documentation.
0.8.14,html_theme_options = {}
0.8.14,"Add any paths that contain custom themes here, relative to this directory."
0.8.14,html_theme_path = []
0.8.14,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.14,"""<project> v<release> documentation""."
0.8.14,html_title = None
0.8.14,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.14,html_short_title = None
0.8.14,The name of an image file (relative to this directory) to place at the top
0.8.14,of the sidebar.
0.8.14,html_logo = None
0.8.14,The name of an image file (within the static path) to use as favicon of the
0.8.14,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.14,pixels large.
0.8.14,html_favicon = None
0.8.14,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.14,"relative to this directory. They are copied after the builtin static files,"
0.8.14,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.14,Add any extra paths that contain custom files (such as robots.txt or
0.8.14,".htaccess) here, relative to this directory. These files are copied"
0.8.14,directly to the root of the documentation.
0.8.14,html_extra_path = []
0.8.14,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.14,using the given strftime format.
0.8.14,"html_last_updated_fmt = '%b %d, %Y'"
0.8.14,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.14,typographically correct entities.
0.8.14,html_use_smartypants = True
0.8.14,"Custom sidebar templates, maps document names to template names."
0.8.14,html_sidebars = {}
0.8.14,"Additional templates that should be rendered to pages, maps page names to"
0.8.14,template names.
0.8.14,html_additional_pages = {}
0.8.14,"If false, no module index is generated."
0.8.14,html_domain_indices = True
0.8.14,"If false, no index is generated."
0.8.14,html_use_index = True
0.8.14,"If true, the index is split into individual pages for each letter."
0.8.14,html_split_index = False
0.8.14,"If true, links to the reST sources are added to the pages."
0.8.14,html_show_sourcelink = True
0.8.14,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.14,html_show_sphinx = True
0.8.14,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.14,html_show_copyright = True
0.8.14,"If true, an OpenSearch description file will be output, and all pages will"
0.8.14,contain a <link> tag referring to it.  The value of this option must be the
0.8.14,base URL from which the finished HTML is served.
0.8.14,html_use_opensearch = ''
0.8.14,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.14,html_file_suffix = None
0.8.14,Language to be used for generating the HTML full-text search index.
0.8.14,Sphinx supports the following languages:
0.8.14,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.14,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.14,html_search_language = 'en'
0.8.14,"A dictionary with options for the search language support, empty by default."
0.8.14,Now only 'ja' uses this config value
0.8.14,html_search_options = {'type': 'default'}
0.8.14,The name of a javascript file (relative to the configuration directory) that
0.8.14,"implements a search results scorer. If empty, the default will be used."
0.8.14,html_search_scorer = 'scorer.js'
0.8.14,Output file base name for HTML help builder.
0.8.14,-- Options for LaTeX output ---------------------------------------------
0.8.14,The paper size ('letterpaper' or 'a4paper').
0.8.14,"'papersize': 'letterpaper',"
0.8.14,"The font size ('10pt', '11pt' or '12pt')."
0.8.14,"'pointsize': '10pt',"
0.8.14,Additional stuff for the LaTeX preamble.
0.8.14,"'preamble': '',"
0.8.14,Latex figure (float) alignment
0.8.14,"'figure_align': 'htbp',"
0.8.14,Grouping the document tree into LaTeX files. List of tuples
0.8.14,"(source start file, target name, title,"
0.8.14,"author, documentclass [howto, manual, or own class])."
0.8.14,The name of an image file (relative to this directory) to place at the top of
0.8.14,the title page.
0.8.14,latex_logo = None
0.8.14,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.14,not chapters.
0.8.14,latex_use_parts = False
0.8.14,"If true, show page references after internal links."
0.8.14,latex_show_pagerefs = False
0.8.14,"If true, show URL addresses after external links."
0.8.14,latex_show_urls = False
0.8.14,Documents to append as an appendix to all manuals.
0.8.14,latex_appendices = []
0.8.14,"If false, no module index is generated."
0.8.14,latex_domain_indices = True
0.8.14,-- Options for manual page output ---------------------------------------
0.8.14,One entry per manual page. List of tuples
0.8.14,"(source start file, name, description, authors, manual section)."
0.8.14,"If true, show URL addresses after external links."
0.8.14,man_show_urls = False
0.8.14,-- Options for Texinfo output -------------------------------------------
0.8.14,Grouping the document tree into Texinfo files. List of tuples
0.8.14,"(source start file, target name, title, author,"
0.8.14,"dir menu entry, description, category)"
0.8.14,Documents to append as an appendix to all manuals.
0.8.14,texinfo_appendices = []
0.8.14,"If false, no module index is generated."
0.8.14,texinfo_domain_indices = True
0.8.14,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.14,texinfo_show_urls = 'footnote'
0.8.14,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.14,texinfo_no_detailmenu = False
0.8.14,-- Options for Epub output ----------------------------------------------
0.8.14,Bibliographic Dublin Core info.
0.8.14,The basename for the epub file. It defaults to the project name.
0.8.14,epub_basename = project
0.8.14,The HTML theme for the epub output. Since the default themes are not
0.8.14,"optimized for small screen space, using the same theme for HTML and epub"
0.8.14,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.14,visual space.
0.8.14,epub_theme = 'epub'
0.8.14,The language of the text. It defaults to the language option
0.8.14,or 'en' if the language is not set.
0.8.14,epub_language = ''
0.8.14,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.14,epub_scheme = ''
0.8.14,The unique identifier of the text. This can be a ISBN number
0.8.14,or the project homepage.
0.8.14,epub_identifier = ''
0.8.14,A unique identification for the text.
0.8.14,epub_uid = ''
0.8.14,A tuple containing the cover image and cover page html template filenames.
0.8.14,epub_cover = ()
0.8.14,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.14,epub_guide = ()
0.8.14,HTML files that should be inserted before the pages created by sphinx.
0.8.14,The format is a list of tuples containing the path and title.
0.8.14,epub_pre_files = []
0.8.14,HTML files that should be inserted after the pages created by sphinx.
0.8.14,The format is a list of tuples containing the path and title.
0.8.14,epub_post_files = []
0.8.14,A list of files that should not be packed into the epub file.
0.8.14,The depth of the table of contents in toc.ncx.
0.8.14,epub_tocdepth = 3
0.8.14,Allow duplicate toc entries.
0.8.14,epub_tocdup = True
0.8.14,Choose between 'default' and 'includehidden'.
0.8.14,epub_tocscope = 'default'
0.8.14,Fix unsupported image types using the Pillow.
0.8.14,epub_fix_images = False
0.8.14,Scale large images.
0.8.14,epub_max_image_width = 0
0.8.14,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.14,epub_show_urls = 'inline'
0.8.14,"If false, no index is generated."
0.8.14,epub_use_index = True
0.8.13,"Import numpy here, only when headers are needed"
0.8.13,Add numpy headers to include_dirs
0.8.13,Call original build_ext command
0.8.13,"A little ""fancy"" we select from the flattened array reshape back"
0.8.13,(Fortran format to get indexing right) and take the product to do an and
0.8.13,then convert back to boolean type.
0.8.13,Density sparseness is not well defined if there are no
0.8.13,internal edges (as per the referenced paper). However
0.8.13,MATLAB code from the original authors simply selects the
0.8.13,largest of *all* the edges in the case that there are
0.8.13,"no internal edges, so we do the same here"
0.8.13,"If there are any internal edges, then subselect them out"
0.8.13,If there are no internal edges then we want to take the
0.8.13,"max over all the edges that exist in the MST, so we simply"
0.8.13,do nothing and return all the edges in the MST.
0.8.13,-*- coding: utf-8 -*-
0.8.13,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.13,Steve Astels <sastels@gmail.com>
0.8.13,John Healy <jchealy@gmail.com>
0.8.13,
0.8.13,License: BSD 3 clause
0.8.13,"Treating this case explicitly, instead of letting"
0.8.13,"sklearn.metrics.pairwise_distances handle it,"
0.8.13,enables the usage of numpy.inf in the distance
0.8.13,matrix to indicate missing distance information.
0.8.13,TODO: Check if copying is necessary
0.8.13,raise TypeError('Sparse distance matrices not yet supported')
0.8.13,Warn if the MST couldn't be constructed around the missing distances
0.8.13,mst_linkage_core does not generate a full minimal spanning tree
0.8.13,If a tree is required then we must build the edges from the information
0.8.13,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.13,Sort edges of the min_spanning_tree by weight
0.8.13,Convert edge list into standard hierarchical clustering format
0.8.13,Compute sparse mutual reachability graph
0.8.13,Compute the minimum spanning tree for the sparse graph
0.8.13,Convert the graph to scipy cluster array format
0.8.13,Sort edges of the min_spanning_tree by weight
0.8.13,Convert edge list into standard hierarchical clustering format
0.8.13,The Cython routines used require contiguous arrays
0.8.13,TO DO: Deal with p for minkowski appropriately
0.8.13,Get distance to kth nearest neighbour
0.8.13,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.13,Sort edges of the min_spanning_tree by weight
0.8.13,Convert edge list into standard hierarchical clustering format
0.8.13,The Cython routines used require contiguous arrays
0.8.13,Get distance to kth nearest neighbour
0.8.13,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.13,Sort edges of the min_spanning_tree by weight
0.8.13,Convert edge list into standard hierarchical clustering format
0.8.13,Sort edges of the min_spanning_tree by weight
0.8.13,Convert edge list into standard hierarchical clustering format
0.8.13,Sort edges of the min_spanning_tree by weight
0.8.13,Convert edge list into standard hierarchical clustering format
0.8.13,Checks input and converts to an nd-array where possible
0.8.13,"Only non-sparse, precomputed distance matrices are handled here"
0.8.13,and thereby allowed to contain numpy.inf for missing distances
0.8.13,Python 2 and 3 compliant string_type checking
0.8.13,We can't do much with sparse matrices ...
0.8.13,TO DO: Need heuristic to decide when to go to boruvka;
0.8.13,still debugging for now
0.8.13,TO DO: Need heuristic to decide when to go to boruvka;
0.8.13,still debugging for now
0.8.13,Inherits from sklearn
0.8.13,Handle sparse precomputed distance matrices separately
0.8.13,"Only non-sparse, precomputed distance matrices are allowed"
0.8.13,to have numpy.inf values indicating missing distances
0.8.13,"prediction data only applies to the persistent model, so remove"
0.8.13,it from the keyword args we pass on the the function
0.8.13,-*- coding: utf-8 -*-
0.8.13,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.13,
0.8.13,License: BSD 3 clause
0.8.13,"Return the only cluster, the root"
0.8.13,We want to get the x and y coordinates for the start of each cluster
0.8.13,"Initialize the leaves, since we know where they go, the iterate"
0.8.13,"through everything from the leaves back, setting coords as we go"
0.8.13,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.13,bottoms and widths for each rectangle. We can go through each cluster
0.8.13,and do this for each in turn.
0.8.13,Ensure we don't try to take log of zero
0.8.13,Finally we need the horizontal lines that occur at cluster splits.
0.8.13,"for xs, ys in zip(plot_data['line_xs'], plot_data['line_ys']):"
0.8.13,"axis.plot(xs, ys, color='black', linewidth=1)"
0.8.13,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.13,Use PCA to get down to 32 dimension
0.8.13,-*- coding: utf-8 -*-
0.8.13,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.13,
0.8.13,License: BSD 3 clause
0.8.13,The Cython routines used require contiguous arrays
0.8.13,The Cython routines used require contiguous arrays
0.8.13,We can't do much with sparse matrices ...
0.8.13,Need heuristic to decide when to go to boruvka;
0.8.13,still debugging for now
0.8.13,Need heuristic to decide when to go to boruvka;
0.8.13,still debugging for now
0.8.13,Support various prediction methods for predicting cluster membership
0.8.13,of new or unseen points. There are several ways to interpret how
0.8.13,"to do this correctly, so we provide several methods for"
0.8.13,the different use cases that may arise.
0.8.13,raw_condensed_tree = condensed_tree.to_numpy()
0.8.13,New point departs with the old
0.8.13,Find appropriate cluster based on lambda of new point
0.8.13,Find appropriate cluster based on lambda of new point
0.8.13,We need to find where in the tree the new point would go
0.8.13,for the purposes of outlier membership approximation
0.8.13,"When no clusters found, return array of 0's"
0.8.13,import pickle
0.8.13,from sklearn.cluster.tests.common import generate_clustered_data
0.8.13,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.13,"number of clusters, ignoring noise if present"
0.8.13,"metric is the function reference, not the string key."
0.8.13,def test_rsl_unavailable_hierarchy():
0.8.13,clusterer = RobustSingleLinkage()
0.8.13,with warnings.catch_warnings(record=True) as w:
0.8.13,tree = clusterer.cluster_hierarchy_
0.8.13,assert len(w) > 0
0.8.13,assert tree is None
0.8.13,"H, y = shuffle(X, y, random_state=7)"
0.8.13,import pickle
0.8.13,from sklearn.cluster.tests.common import generate_clustered_data
0.8.13,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.13,"number of clusters, ignoring noise if present"
0.8.13,"number of clusters, ignoring noise if present"
0.8.13,"H, y = shuffle(X, y, random_state=7)"
0.8.13,"metric is the function reference, not the string key."
0.8.13,def test_hdbscan_unavailable_attributes():
0.8.13,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.13,with warnings.catch_warnings(record=True) as w:
0.8.13,tree = clusterer.condensed_tree_
0.8.13,assert len(w) > 0
0.8.13,assert tree is None
0.8.13,with warnings.catch_warnings(record=True) as w:
0.8.13,tree = clusterer.single_linkage_tree_
0.8.13,assert len(w) > 0
0.8.13,assert tree is None
0.8.13,with warnings.catch_warnings(record=True) as w:
0.8.13,scores = clusterer.outlier_scores_
0.8.13,assert len(w) > 0
0.8.13,assert scores is None
0.8.13,with warnings.catch_warnings(record=True) as w:
0.8.13,tree = clusterer.minimum_spanning_tree_
0.8.13,assert len(w) > 0
0.8.13,assert tree is None
0.8.13,def test_hdbscan_min_span_tree_availability():
0.8.13,clusterer = HDBSCAN().fit(X)
0.8.13,tree = clusterer.minimum_spanning_tree_
0.8.13,assert tree is None
0.8.13,D = distance.squareform(distance.pdist(X))
0.8.13,D /= np.max(D)
0.8.13,HDBSCAN(metric='precomputed').fit(D)
0.8.13,tree = clusterer.minimum_spanning_tree_
0.8.13,assert tree is None
0.8.13,def test_hdbscan_membership_vector():
0.8.13,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.13,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.13,assert_array_almost_equal(
0.8.13,"vector,"
0.8.13,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.13,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.13,assert_array_almost_equal(
0.8.13,"vector,"
0.8.13,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.13,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.13,assert_array_almost_equal(
0.8.13,"vector,"
0.8.13,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.13,
0.8.13,def test_hdbscan_all_points_membership_vectors():
0.8.13,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.13,vects = all_points_membership_vectors(clusterer)
0.8.13,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.13,"2.52734246e-001,"
0.8.13,8.38299608e-002]))
0.8.13,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.13,"8.35882503e-002,"
0.8.13,1.07356406e-001]))
0.8.13,Probably not applicable now #
0.8.13,def test_dbscan_sparse():
0.8.13,def test_dbscan_balltree():
0.8.13,def test_pickle():
0.8.13,def test_dbscan_core_samples_toy():
0.8.13,def test_boundaries():
0.8.13,Generate datasets. We choose the size big enough to see the scalability
0.8.13,"of the algorithms, but not too big to avoid too long running times"
0.8.13,normalize dataset for easier parameter selection
0.8.13,estimate bandwidth for mean shift
0.8.13,connectivity matrix for structured Ward
0.8.13,make connectivity symmetric
0.8.13,create clustering estimators
0.8.13,predict cluster memberships
0.8.13,plot
0.8.13,-*- coding: utf-8 -*-
0.8.13,#############################################################################
0.8.13,Generate sample data
0.8.13,#############################################################################
0.8.13,Compute DBSCAN
0.8.13,"Number of clusters in labels, ignoring noise if present."
0.8.13,#############################################################################
0.8.13,Plot result
0.8.13,Black removed and is used for noise instead.
0.8.13,Black used for noise.
0.8.13,Black used for noise.
0.8.13,-*- coding: utf-8 -*-
0.8.13,
0.8.13,"hdbscan documentation build configuration file, created by"
0.8.13,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.13,
0.8.13,This file is execfile()d with the current directory set to its
0.8.13,containing dir.
0.8.13,
0.8.13,Note that not all possible configuration values are present in this
0.8.13,autogenerated file.
0.8.13,
0.8.13,All configuration values have a default; values that are commented out
0.8.13,serve to show the default.
0.8.13,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.13,add these directories to sys.path here. If the directory is relative to the
0.8.13,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.13,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.13,"sys.path.insert(0, os.path.abspath('../'))"
0.8.13,-- General configuration ------------------------------------------------
0.8.13,"If your documentation needs a minimal Sphinx version, state it here."
0.8.13,needs_sphinx = '1.0'
0.8.13,"Add any Sphinx extension module names here, as strings. They can be"
0.8.13,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.13,ones.
0.8.13,"'sphinx.ext.napoleon',"
0.8.13,'numpy_ext.numpydoc'
0.8.13,napoleon_google_docstring = False
0.8.13,napoleon_numpy_docstring = True
0.8.13,"Add any paths that contain templates here, relative to this directory."
0.8.13,The suffix(es) of source filenames.
0.8.13,You can specify multiple suffix as a list of string:
0.8.13,"source_suffix = ['.rst', '.md']"
0.8.13,The encoding of source files.
0.8.13,source_encoding = 'utf-8-sig'
0.8.13,The master toctree document.
0.8.13,General information about the project.
0.8.13,"The version info for the project you're documenting, acts as replacement for"
0.8.13,"|version| and |release|, also used in various other places throughout the"
0.8.13,built documents.
0.8.13,
0.8.13,The short X.Y version.
0.8.13,"The full version, including alpha/beta/rc tags."
0.8.13,The language for content autogenerated by Sphinx. Refer to documentation
0.8.13,for a list of supported languages.
0.8.13,
0.8.13,This is also used if you do content translation via gettext catalogs.
0.8.13,"Usually you set ""language"" from the command line for these cases."
0.8.13,"There are two options for replacing |today|: either, you set today to some"
0.8.13,"non-false value, then it is used:"
0.8.13,today = ''
0.8.13,"Else, today_fmt is used as the format for a strftime call."
0.8.13,"today_fmt = '%B %d, %Y'"
0.8.13,"List of patterns, relative to source directory, that match files and"
0.8.13,directories to ignore when looking for source files.
0.8.13,The reST default role (used for this markup: `text`) to use for all
0.8.13,documents.
0.8.13,default_role = None
0.8.13,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.13,add_function_parentheses = True
0.8.13,"If true, the current module name will be prepended to all description"
0.8.13,unit titles (such as .. function::).
0.8.13,add_module_names = True
0.8.13,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.13,output. They are ignored by default.
0.8.13,show_authors = False
0.8.13,The name of the Pygments (syntax highlighting) style to use.
0.8.13,A list of ignored prefixes for module index sorting.
0.8.13,modindex_common_prefix = []
0.8.13,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.13,keep_warnings = False
0.8.13,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.13,-- Options for HTML output ----------------------------------------------
0.8.13,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.13,a list of builtin themes.
0.8.13,html_theme = 'alabaster'
0.8.13,Theme options are theme-specific and customize the look and feel of a theme
0.8.13,"further.  For a list of options available for each theme, see the"
0.8.13,documentation.
0.8.13,html_theme_options = {}
0.8.13,"Add any paths that contain custom themes here, relative to this directory."
0.8.13,html_theme_path = []
0.8.13,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.13,"""<project> v<release> documentation""."
0.8.13,html_title = None
0.8.13,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.13,html_short_title = None
0.8.13,The name of an image file (relative to this directory) to place at the top
0.8.13,of the sidebar.
0.8.13,html_logo = None
0.8.13,The name of an image file (within the static path) to use as favicon of the
0.8.13,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.13,pixels large.
0.8.13,html_favicon = None
0.8.13,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.13,"relative to this directory. They are copied after the builtin static files,"
0.8.13,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.13,Add any extra paths that contain custom files (such as robots.txt or
0.8.13,".htaccess) here, relative to this directory. These files are copied"
0.8.13,directly to the root of the documentation.
0.8.13,html_extra_path = []
0.8.13,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.13,using the given strftime format.
0.8.13,"html_last_updated_fmt = '%b %d, %Y'"
0.8.13,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.13,typographically correct entities.
0.8.13,html_use_smartypants = True
0.8.13,"Custom sidebar templates, maps document names to template names."
0.8.13,html_sidebars = {}
0.8.13,"Additional templates that should be rendered to pages, maps page names to"
0.8.13,template names.
0.8.13,html_additional_pages = {}
0.8.13,"If false, no module index is generated."
0.8.13,html_domain_indices = True
0.8.13,"If false, no index is generated."
0.8.13,html_use_index = True
0.8.13,"If true, the index is split into individual pages for each letter."
0.8.13,html_split_index = False
0.8.13,"If true, links to the reST sources are added to the pages."
0.8.13,html_show_sourcelink = True
0.8.13,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.13,html_show_sphinx = True
0.8.13,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.13,html_show_copyright = True
0.8.13,"If true, an OpenSearch description file will be output, and all pages will"
0.8.13,contain a <link> tag referring to it.  The value of this option must be the
0.8.13,base URL from which the finished HTML is served.
0.8.13,html_use_opensearch = ''
0.8.13,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.13,html_file_suffix = None
0.8.13,Language to be used for generating the HTML full-text search index.
0.8.13,Sphinx supports the following languages:
0.8.13,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.13,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.13,html_search_language = 'en'
0.8.13,"A dictionary with options for the search language support, empty by default."
0.8.13,Now only 'ja' uses this config value
0.8.13,html_search_options = {'type': 'default'}
0.8.13,The name of a javascript file (relative to the configuration directory) that
0.8.13,"implements a search results scorer. If empty, the default will be used."
0.8.13,html_search_scorer = 'scorer.js'
0.8.13,Output file base name for HTML help builder.
0.8.13,-- Options for LaTeX output ---------------------------------------------
0.8.13,The paper size ('letterpaper' or 'a4paper').
0.8.13,"'papersize': 'letterpaper',"
0.8.13,"The font size ('10pt', '11pt' or '12pt')."
0.8.13,"'pointsize': '10pt',"
0.8.13,Additional stuff for the LaTeX preamble.
0.8.13,"'preamble': '',"
0.8.13,Latex figure (float) alignment
0.8.13,"'figure_align': 'htbp',"
0.8.13,Grouping the document tree into LaTeX files. List of tuples
0.8.13,"(source start file, target name, title,"
0.8.13,"author, documentclass [howto, manual, or own class])."
0.8.13,The name of an image file (relative to this directory) to place at the top of
0.8.13,the title page.
0.8.13,latex_logo = None
0.8.13,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.13,not chapters.
0.8.13,latex_use_parts = False
0.8.13,"If true, show page references after internal links."
0.8.13,latex_show_pagerefs = False
0.8.13,"If true, show URL addresses after external links."
0.8.13,latex_show_urls = False
0.8.13,Documents to append as an appendix to all manuals.
0.8.13,latex_appendices = []
0.8.13,"If false, no module index is generated."
0.8.13,latex_domain_indices = True
0.8.13,-- Options for manual page output ---------------------------------------
0.8.13,One entry per manual page. List of tuples
0.8.13,"(source start file, name, description, authors, manual section)."
0.8.13,"If true, show URL addresses after external links."
0.8.13,man_show_urls = False
0.8.13,-- Options for Texinfo output -------------------------------------------
0.8.13,Grouping the document tree into Texinfo files. List of tuples
0.8.13,"(source start file, target name, title, author,"
0.8.13,"dir menu entry, description, category)"
0.8.13,Documents to append as an appendix to all manuals.
0.8.13,texinfo_appendices = []
0.8.13,"If false, no module index is generated."
0.8.13,texinfo_domain_indices = True
0.8.13,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.13,texinfo_show_urls = 'footnote'
0.8.13,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.13,texinfo_no_detailmenu = False
0.8.13,-- Options for Epub output ----------------------------------------------
0.8.13,Bibliographic Dublin Core info.
0.8.13,The basename for the epub file. It defaults to the project name.
0.8.13,epub_basename = project
0.8.13,The HTML theme for the epub output. Since the default themes are not
0.8.13,"optimized for small screen space, using the same theme for HTML and epub"
0.8.13,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.13,visual space.
0.8.13,epub_theme = 'epub'
0.8.13,The language of the text. It defaults to the language option
0.8.13,or 'en' if the language is not set.
0.8.13,epub_language = ''
0.8.13,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.13,epub_scheme = ''
0.8.13,The unique identifier of the text. This can be a ISBN number
0.8.13,or the project homepage.
0.8.13,epub_identifier = ''
0.8.13,A unique identification for the text.
0.8.13,epub_uid = ''
0.8.13,A tuple containing the cover image and cover page html template filenames.
0.8.13,epub_cover = ()
0.8.13,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.13,epub_guide = ()
0.8.13,HTML files that should be inserted before the pages created by sphinx.
0.8.13,The format is a list of tuples containing the path and title.
0.8.13,epub_pre_files = []
0.8.13,HTML files that should be inserted after the pages created by sphinx.
0.8.13,The format is a list of tuples containing the path and title.
0.8.13,epub_post_files = []
0.8.13,A list of files that should not be packed into the epub file.
0.8.13,The depth of the table of contents in toc.ncx.
0.8.13,epub_tocdepth = 3
0.8.13,Allow duplicate toc entries.
0.8.13,epub_tocdup = True
0.8.13,Choose between 'default' and 'includehidden'.
0.8.13,epub_tocscope = 'default'
0.8.13,Fix unsupported image types using the Pillow.
0.8.13,epub_fix_images = False
0.8.13,Scale large images.
0.8.13,epub_max_image_width = 0
0.8.13,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.13,epub_show_urls = 'inline'
0.8.13,"If false, no index is generated."
0.8.13,epub_use_index = True
0.8.12,"Import numpy here, only when headers are needed"
0.8.12,Add numpy headers to include_dirs
0.8.12,Call original build_ext command
0.8.12,"A little ""fancy"" we select from the flattened array reshape back"
0.8.12,(Fortran format to get indexing right) and take the product to do an and
0.8.12,then convert back to boolean type.
0.8.12,Density sparseness is not well defined if there are no
0.8.12,internal edges (as per the referenced paper). However
0.8.12,MATLAB code from the original authors simply selects the
0.8.12,largest of *all* the edges in the case that there are
0.8.12,"no internal edges, so we do the same here"
0.8.12,"If there are any internal edges, then subselect them out"
0.8.12,If there are no internal edges then we want to take the
0.8.12,"max over all the edges that exist in the MST, so we simply"
0.8.12,do nothing and return all the edges in the MST.
0.8.12,-*- coding: utf-8 -*-
0.8.12,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.12,Steve Astels <sastels@gmail.com>
0.8.12,John Healy <jchealy@gmail.com>
0.8.12,
0.8.12,License: BSD 3 clause
0.8.12,raise TypeError('Sparse distance matrices not yet supported')
0.8.12,mst_linkage_core does not generate a full minimal spanning tree
0.8.12,If a tree is required then we must build the edges from the information
0.8.12,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.12,Sort edges of the min_spanning_tree by weight
0.8.12,Convert edge list into standard hierarchical clustering format
0.8.12,Compute sparse mutual reachability graph
0.8.12,Compute the minimum spanning tree for the sparse graph
0.8.12,Convert the graph to scipy cluster array format
0.8.12,Sort edges of the min_spanning_tree by weight
0.8.12,Convert edge list into standard hierarchical clustering format
0.8.12,The Cython routines used require contiguous arrays
0.8.12,TO DO: Deal with p for minkowski appropriately
0.8.12,Get distance to kth nearest neighbour
0.8.12,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.12,Sort edges of the min_spanning_tree by weight
0.8.12,Convert edge list into standard hierarchical clustering format
0.8.12,The Cython routines used require contiguous arrays
0.8.12,Get distance to kth nearest neighbour
0.8.12,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.12,Sort edges of the min_spanning_tree by weight
0.8.12,Convert edge list into standard hierarchical clustering format
0.8.12,Sort edges of the min_spanning_tree by weight
0.8.12,Convert edge list into standard hierarchical clustering format
0.8.12,Sort edges of the min_spanning_tree by weight
0.8.12,Convert edge list into standard hierarchical clustering format
0.8.12,Checks input and converts to an nd-array where possible
0.8.12,Python 2 and 3 compliant string_type checking
0.8.12,We can't do much with sparse matrices ...
0.8.12,TO DO: Need heuristic to decide when to go to boruvka;
0.8.12,still debugging for now
0.8.12,TO DO: Need heuristic to decide when to go to boruvka;
0.8.12,still debugging for now
0.8.12,Inherits from sklearn
0.8.12,"prediction data only applies to the persistent model, so remove"
0.8.12,it from the keyword args we pass on the the function
0.8.12,-*- coding: utf-8 -*-
0.8.12,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.12,
0.8.12,License: BSD 3 clause
0.8.12,"Return the only cluster, the root"
0.8.12,We want to get the x and y coordinates for the start of each cluster
0.8.12,"Initialize the leaves, since we know where they go, the iterate"
0.8.12,"through everything from the leaves back, setting coords as we go"
0.8.12,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.12,bottoms and widths for each rectangle. We can go through each cluster
0.8.12,and do this for each in turn.
0.8.12,Ensure we don't try to take log of zero
0.8.12,Finally we need the horizontal lines that occur at cluster splits.
0.8.12,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.12,Use PCA to get down to 32 dimension
0.8.12,-*- coding: utf-8 -*-
0.8.12,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.12,
0.8.12,License: BSD 3 clause
0.8.12,The Cython routines used require contiguous arrays
0.8.12,The Cython routines used require contiguous arrays
0.8.12,We can't do much with sparse matrices ...
0.8.12,Need heuristic to decide when to go to boruvka;
0.8.12,still debugging for now
0.8.12,Need heuristic to decide when to go to boruvka;
0.8.12,still debugging for now
0.8.12,Support various prediction methods for predicting cluster membership
0.8.12,of new or unseen points. There are several ways to interpret how
0.8.12,"to do this correctly, so we provide several methods for"
0.8.12,the different use cases that may arise.
0.8.12,raw_condensed_tree = condensed_tree.to_numpy()
0.8.12,New point departs with the old
0.8.12,Find appropriate cluster based on lambda of new point
0.8.12,Find appropriate cluster based on lambda of new point
0.8.12,We need to find where in the tree the new point would go
0.8.12,for the purposes of outlier membership approximation
0.8.12,"When no clusters found, return array of 0's"
0.8.12,import pickle
0.8.12,from sklearn.cluster.tests.common import generate_clustered_data
0.8.12,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.12,"number of clusters, ignoring noise if present"
0.8.12,"metric is the function reference, not the string key."
0.8.12,def test_rsl_unavailable_hierarchy():
0.8.12,clusterer = RobustSingleLinkage()
0.8.12,with warnings.catch_warnings(record=True) as w:
0.8.12,tree = clusterer.cluster_hierarchy_
0.8.12,assert len(w) > 0
0.8.12,assert tree is None
0.8.12,"H, y = shuffle(X, y, random_state=7)"
0.8.12,import pickle
0.8.12,from sklearn.cluster.tests.common import generate_clustered_data
0.8.12,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.12,"number of clusters, ignoring noise if present"
0.8.12,"number of clusters, ignoring noise if present"
0.8.12,"H, y = shuffle(X, y, random_state=7)"
0.8.12,"metric is the function reference, not the string key."
0.8.12,def test_hdbscan_unavailable_attributes():
0.8.12,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.12,with warnings.catch_warnings(record=True) as w:
0.8.12,tree = clusterer.condensed_tree_
0.8.12,assert len(w) > 0
0.8.12,assert tree is None
0.8.12,with warnings.catch_warnings(record=True) as w:
0.8.12,tree = clusterer.single_linkage_tree_
0.8.12,assert len(w) > 0
0.8.12,assert tree is None
0.8.12,with warnings.catch_warnings(record=True) as w:
0.8.12,scores = clusterer.outlier_scores_
0.8.12,assert len(w) > 0
0.8.12,assert scores is None
0.8.12,with warnings.catch_warnings(record=True) as w:
0.8.12,tree = clusterer.minimum_spanning_tree_
0.8.12,assert len(w) > 0
0.8.12,assert tree is None
0.8.12,def test_hdbscan_min_span_tree_availability():
0.8.12,clusterer = HDBSCAN().fit(X)
0.8.12,tree = clusterer.minimum_spanning_tree_
0.8.12,assert tree is None
0.8.12,D = distance.squareform(distance.pdist(X))
0.8.12,D /= np.max(D)
0.8.12,HDBSCAN(metric='precomputed').fit(D)
0.8.12,tree = clusterer.minimum_spanning_tree_
0.8.12,assert tree is None
0.8.12,def test_hdbscan_membership_vector():
0.8.12,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.12,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.12,assert_array_almost_equal(
0.8.12,"vector,"
0.8.12,"np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.12,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.12,assert_array_almost_equal(
0.8.12,"vector,"
0.8.12,"np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.12,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.12,assert_array_almost_equal(
0.8.12,"vector,"
0.8.12,"np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.12,
0.8.12,def test_hdbscan_all_points_membership_vectors():
0.8.12,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.12,vects = all_points_membership_vectors(clusterer)
0.8.12,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.12,"2.52734246e-001,"
0.8.12,8.38299608e-002]))
0.8.12,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.12,"8.35882503e-002,"
0.8.12,1.07356406e-001]))
0.8.12,Probably not applicable now #
0.8.12,def test_dbscan_sparse():
0.8.12,def test_dbscan_balltree():
0.8.12,def test_pickle():
0.8.12,def test_dbscan_core_samples_toy():
0.8.12,def test_boundaries():
0.8.12,Generate datasets. We choose the size big enough to see the scalability
0.8.12,"of the algorithms, but not too big to avoid too long running times"
0.8.12,normalize dataset for easier parameter selection
0.8.12,estimate bandwidth for mean shift
0.8.12,connectivity matrix for structured Ward
0.8.12,make connectivity symmetric
0.8.12,create clustering estimators
0.8.12,predict cluster memberships
0.8.12,plot
0.8.12,-*- coding: utf-8 -*-
0.8.12,#############################################################################
0.8.12,Generate sample data
0.8.12,#############################################################################
0.8.12,Compute DBSCAN
0.8.12,"Number of clusters in labels, ignoring noise if present."
0.8.12,#############################################################################
0.8.12,Plot result
0.8.12,Black removed and is used for noise instead.
0.8.12,Black used for noise.
0.8.12,Black used for noise.
0.8.12,-*- coding: utf-8 -*-
0.8.12,
0.8.12,"hdbscan documentation build configuration file, created by"
0.8.12,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.12,
0.8.12,This file is execfile()d with the current directory set to its
0.8.12,containing dir.
0.8.12,
0.8.12,Note that not all possible configuration values are present in this
0.8.12,autogenerated file.
0.8.12,
0.8.12,All configuration values have a default; values that are commented out
0.8.12,serve to show the default.
0.8.12,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.12,add these directories to sys.path here. If the directory is relative to the
0.8.12,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.12,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.12,"sys.path.insert(0, os.path.abspath('../'))"
0.8.12,-- General configuration ------------------------------------------------
0.8.12,"If your documentation needs a minimal Sphinx version, state it here."
0.8.12,needs_sphinx = '1.0'
0.8.12,"Add any Sphinx extension module names here, as strings. They can be"
0.8.12,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.12,ones.
0.8.12,"'sphinx.ext.napoleon',"
0.8.12,'numpy_ext.numpydoc'
0.8.12,napoleon_google_docstring = False
0.8.12,napoleon_numpy_docstring = True
0.8.12,"Add any paths that contain templates here, relative to this directory."
0.8.12,The suffix(es) of source filenames.
0.8.12,You can specify multiple suffix as a list of string:
0.8.12,"source_suffix = ['.rst', '.md']"
0.8.12,The encoding of source files.
0.8.12,source_encoding = 'utf-8-sig'
0.8.12,The master toctree document.
0.8.12,General information about the project.
0.8.12,"The version info for the project you're documenting, acts as replacement for"
0.8.12,"|version| and |release|, also used in various other places throughout the"
0.8.12,built documents.
0.8.12,
0.8.12,The short X.Y version.
0.8.12,"The full version, including alpha/beta/rc tags."
0.8.12,The language for content autogenerated by Sphinx. Refer to documentation
0.8.12,for a list of supported languages.
0.8.12,
0.8.12,This is also used if you do content translation via gettext catalogs.
0.8.12,"Usually you set ""language"" from the command line for these cases."
0.8.12,"There are two options for replacing |today|: either, you set today to some"
0.8.12,"non-false value, then it is used:"
0.8.12,today = ''
0.8.12,"Else, today_fmt is used as the format for a strftime call."
0.8.12,"today_fmt = '%B %d, %Y'"
0.8.12,"List of patterns, relative to source directory, that match files and"
0.8.12,directories to ignore when looking for source files.
0.8.12,The reST default role (used for this markup: `text`) to use for all
0.8.12,documents.
0.8.12,default_role = None
0.8.12,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.12,add_function_parentheses = True
0.8.12,"If true, the current module name will be prepended to all description"
0.8.12,unit titles (such as .. function::).
0.8.12,add_module_names = True
0.8.12,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.12,output. They are ignored by default.
0.8.12,show_authors = False
0.8.12,The name of the Pygments (syntax highlighting) style to use.
0.8.12,A list of ignored prefixes for module index sorting.
0.8.12,modindex_common_prefix = []
0.8.12,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.12,keep_warnings = False
0.8.12,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.12,-- Options for HTML output ----------------------------------------------
0.8.12,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.12,a list of builtin themes.
0.8.12,html_theme = 'alabaster'
0.8.12,Theme options are theme-specific and customize the look and feel of a theme
0.8.12,"further.  For a list of options available for each theme, see the"
0.8.12,documentation.
0.8.12,html_theme_options = {}
0.8.12,"Add any paths that contain custom themes here, relative to this directory."
0.8.12,html_theme_path = []
0.8.12,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.12,"""<project> v<release> documentation""."
0.8.12,html_title = None
0.8.12,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.12,html_short_title = None
0.8.12,The name of an image file (relative to this directory) to place at the top
0.8.12,of the sidebar.
0.8.12,html_logo = None
0.8.12,The name of an image file (within the static path) to use as favicon of the
0.8.12,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.12,pixels large.
0.8.12,html_favicon = None
0.8.12,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.12,"relative to this directory. They are copied after the builtin static files,"
0.8.12,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.12,Add any extra paths that contain custom files (such as robots.txt or
0.8.12,".htaccess) here, relative to this directory. These files are copied"
0.8.12,directly to the root of the documentation.
0.8.12,html_extra_path = []
0.8.12,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.12,using the given strftime format.
0.8.12,"html_last_updated_fmt = '%b %d, %Y'"
0.8.12,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.12,typographically correct entities.
0.8.12,html_use_smartypants = True
0.8.12,"Custom sidebar templates, maps document names to template names."
0.8.12,html_sidebars = {}
0.8.12,"Additional templates that should be rendered to pages, maps page names to"
0.8.12,template names.
0.8.12,html_additional_pages = {}
0.8.12,"If false, no module index is generated."
0.8.12,html_domain_indices = True
0.8.12,"If false, no index is generated."
0.8.12,html_use_index = True
0.8.12,"If true, the index is split into individual pages for each letter."
0.8.12,html_split_index = False
0.8.12,"If true, links to the reST sources are added to the pages."
0.8.12,html_show_sourcelink = True
0.8.12,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.12,html_show_sphinx = True
0.8.12,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.12,html_show_copyright = True
0.8.12,"If true, an OpenSearch description file will be output, and all pages will"
0.8.12,contain a <link> tag referring to it.  The value of this option must be the
0.8.12,base URL from which the finished HTML is served.
0.8.12,html_use_opensearch = ''
0.8.12,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.12,html_file_suffix = None
0.8.12,Language to be used for generating the HTML full-text search index.
0.8.12,Sphinx supports the following languages:
0.8.12,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.12,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.12,html_search_language = 'en'
0.8.12,"A dictionary with options for the search language support, empty by default."
0.8.12,Now only 'ja' uses this config value
0.8.12,html_search_options = {'type': 'default'}
0.8.12,The name of a javascript file (relative to the configuration directory) that
0.8.12,"implements a search results scorer. If empty, the default will be used."
0.8.12,html_search_scorer = 'scorer.js'
0.8.12,Output file base name for HTML help builder.
0.8.12,-- Options for LaTeX output ---------------------------------------------
0.8.12,The paper size ('letterpaper' or 'a4paper').
0.8.12,"'papersize': 'letterpaper',"
0.8.12,"The font size ('10pt', '11pt' or '12pt')."
0.8.12,"'pointsize': '10pt',"
0.8.12,Additional stuff for the LaTeX preamble.
0.8.12,"'preamble': '',"
0.8.12,Latex figure (float) alignment
0.8.12,"'figure_align': 'htbp',"
0.8.12,Grouping the document tree into LaTeX files. List of tuples
0.8.12,"(source start file, target name, title,"
0.8.12,"author, documentclass [howto, manual, or own class])."
0.8.12,The name of an image file (relative to this directory) to place at the top of
0.8.12,the title page.
0.8.12,latex_logo = None
0.8.12,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.12,not chapters.
0.8.12,latex_use_parts = False
0.8.12,"If true, show page references after internal links."
0.8.12,latex_show_pagerefs = False
0.8.12,"If true, show URL addresses after external links."
0.8.12,latex_show_urls = False
0.8.12,Documents to append as an appendix to all manuals.
0.8.12,latex_appendices = []
0.8.12,"If false, no module index is generated."
0.8.12,latex_domain_indices = True
0.8.12,-- Options for manual page output ---------------------------------------
0.8.12,One entry per manual page. List of tuples
0.8.12,"(source start file, name, description, authors, manual section)."
0.8.12,"If true, show URL addresses after external links."
0.8.12,man_show_urls = False
0.8.12,-- Options for Texinfo output -------------------------------------------
0.8.12,Grouping the document tree into Texinfo files. List of tuples
0.8.12,"(source start file, target name, title, author,"
0.8.12,"dir menu entry, description, category)"
0.8.12,Documents to append as an appendix to all manuals.
0.8.12,texinfo_appendices = []
0.8.12,"If false, no module index is generated."
0.8.12,texinfo_domain_indices = True
0.8.12,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.12,texinfo_show_urls = 'footnote'
0.8.12,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.12,texinfo_no_detailmenu = False
0.8.12,-- Options for Epub output ----------------------------------------------
0.8.12,Bibliographic Dublin Core info.
0.8.12,The basename for the epub file. It defaults to the project name.
0.8.12,epub_basename = project
0.8.12,The HTML theme for the epub output. Since the default themes are not
0.8.12,"optimized for small screen space, using the same theme for HTML and epub"
0.8.12,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.12,visual space.
0.8.12,epub_theme = 'epub'
0.8.12,The language of the text. It defaults to the language option
0.8.12,or 'en' if the language is not set.
0.8.12,epub_language = ''
0.8.12,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.12,epub_scheme = ''
0.8.12,The unique identifier of the text. This can be a ISBN number
0.8.12,or the project homepage.
0.8.12,epub_identifier = ''
0.8.12,A unique identification for the text.
0.8.12,epub_uid = ''
0.8.12,A tuple containing the cover image and cover page html template filenames.
0.8.12,epub_cover = ()
0.8.12,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.12,epub_guide = ()
0.8.12,HTML files that should be inserted before the pages created by sphinx.
0.8.12,The format is a list of tuples containing the path and title.
0.8.12,epub_pre_files = []
0.8.12,HTML files that should be inserted after the pages created by sphinx.
0.8.12,The format is a list of tuples containing the path and title.
0.8.12,epub_post_files = []
0.8.12,A list of files that should not be packed into the epub file.
0.8.12,The depth of the table of contents in toc.ncx.
0.8.12,epub_tocdepth = 3
0.8.12,Allow duplicate toc entries.
0.8.12,epub_tocdup = True
0.8.12,Choose between 'default' and 'includehidden'.
0.8.12,epub_tocscope = 'default'
0.8.12,Fix unsupported image types using the Pillow.
0.8.12,epub_fix_images = False
0.8.12,Scale large images.
0.8.12,epub_max_image_width = 0
0.8.12,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.12,epub_show_urls = 'inline'
0.8.12,"If false, no index is generated."
0.8.12,epub_use_index = True
0.8.11,"A little ""fancy"" we select from the flattened array reshape back"
0.8.11,(Fortran format to get indexing right) and take the product to do an and
0.8.11,then convert back to boolean type.
0.8.11,Density sparseness is not well defined if there are no
0.8.11,internal edges (as per the referenced paper). However
0.8.11,MATLAB code from the original authors simply selects the
0.8.11,largest of *all* the edges in the case that there are
0.8.11,"no internal edges, so we do the same here"
0.8.11,"If there are any internal edges, then subselect them out"
0.8.11,If there are no internal edges then we want to take the
0.8.11,"max over all the edges that exist in the MST, so we simply"
0.8.11,do nothing and return all the edges in the MST.
0.8.11,-*- coding: utf-8 -*-
0.8.11,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.11,Steve Astels <sastels@gmail.com>
0.8.11,John Healy <jchealy@gmail.com>
0.8.11,
0.8.11,License: BSD 3 clause
0.8.11,raise TypeError('Sparse distance matrices not yet supported')
0.8.11,mst_linkage_core does not generate a full minimal spanning tree
0.8.11,If a tree is required then we must build the edges from the information
0.8.11,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.11,Sort edges of the min_spanning_tree by weight
0.8.11,Convert edge list into standard hierarchical clustering format
0.8.11,Compute sparse mutual reachability graph
0.8.11,Compute the minimum spanning tree for the sparse graph
0.8.11,Convert the graph to scipy cluster array format
0.8.11,Sort edges of the min_spanning_tree by weight
0.8.11,Convert edge list into standard hierarchical clustering format
0.8.11,The Cython routines used require contiguous arrays
0.8.11,TO DO: Deal with p for minkowski appropriately
0.8.11,Get distance to kth nearest neighbour
0.8.11,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.11,Sort edges of the min_spanning_tree by weight
0.8.11,Convert edge list into standard hierarchical clustering format
0.8.11,The Cython routines used require contiguous arrays
0.8.11,Get distance to kth nearest neighbour
0.8.11,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.11,Sort edges of the min_spanning_tree by weight
0.8.11,Convert edge list into standard hierarchical clustering format
0.8.11,Sort edges of the min_spanning_tree by weight
0.8.11,Convert edge list into standard hierarchical clustering format
0.8.11,Sort edges of the min_spanning_tree by weight
0.8.11,Convert edge list into standard hierarchical clustering format
0.8.11,Checks input and converts to an nd-array where possible
0.8.11,Python 2 and 3 compliant string_type checking
0.8.11,We can't do much with sparse matrices ...
0.8.11,TO DO: Need heuristic to decide when to go to boruvka;
0.8.11,still debugging for now
0.8.11,TO DO: Need heuristic to decide when to go to boruvka;
0.8.11,still debugging for now
0.8.11,Inherits from sklearn
0.8.11,"prediction data only applies to the persistent model, so remove"
0.8.11,it from the keyword args we pass on the the function
0.8.11,-*- coding: utf-8 -*-
0.8.11,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.11,
0.8.11,License: BSD 3 clause
0.8.11,We want to get the x and y coordinates for the start of each cluster
0.8.11,"Initialize the leaves, since we know where they go, the iterate"
0.8.11,"through everything from the leaves back, setting coords as we go"
0.8.11,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.11,bottoms and widths for each rectangle. We can go through each cluster
0.8.11,and do this for each in turn.
0.8.11,Ensure we don't try to take log of zero
0.8.11,Finally we need the horizontal lines that occur at cluster splits.
0.8.11,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.11,Use PCA to get down to 32 dimension
0.8.11,-*- coding: utf-8 -*-
0.8.11,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.11,
0.8.11,License: BSD 3 clause
0.8.11,The Cython routines used require contiguous arrays
0.8.11,The Cython routines used require contiguous arrays
0.8.11,We can't do much with sparse matrices ...
0.8.11,Need heuristic to decide when to go to boruvka;
0.8.11,still debugging for now
0.8.11,Need heuristic to decide when to go to boruvka;
0.8.11,still debugging for now
0.8.11,Support various prediction methods for predicting cluster membership
0.8.11,of new or unseen points. There are several ways to interpret how
0.8.11,"to do this correctly, so we provide several methods for"
0.8.11,the different use cases that may arise.
0.8.11,raw_condensed_tree = condensed_tree.to_numpy()
0.8.11,New point departs with the old
0.8.11,Find appropriate cluster based on lambda of new point
0.8.11,Find appropriate cluster based on lambda of new point
0.8.11,We need to find where in the tree the new point would go
0.8.11,for the purposes of outlier membership approximation
0.8.11,import pickle
0.8.11,from sklearn.cluster.tests.common import generate_clustered_data
0.8.11,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.11,"number of clusters, ignoring noise if present"
0.8.11,"metric is the function reference, not the string key."
0.8.11,def test_rsl_unavailable_hierarchy():
0.8.11,clusterer = RobustSingleLinkage()
0.8.11,with warnings.catch_warnings(record=True) as w:
0.8.11,tree = clusterer.cluster_hierarchy_
0.8.11,assert len(w) > 0
0.8.11,assert tree is None
0.8.11,"H, y = shuffle(X, y, random_state=7)"
0.8.11,import pickle
0.8.11,from sklearn.cluster.tests.common import generate_clustered_data
0.8.11,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.11,"number of clusters, ignoring noise if present"
0.8.11,"number of clusters, ignoring noise if present"
0.8.11,"H, y = shuffle(X, y, random_state=7)"
0.8.11,"metric is the function reference, not the string key."
0.8.11,def test_hdbscan_unavailable_attributes():
0.8.11,clusterer = HDBSCAN(gen_min_span_tree=False)
0.8.11,with warnings.catch_warnings(record=True) as w:
0.8.11,tree = clusterer.condensed_tree_
0.8.11,assert len(w) > 0
0.8.11,assert tree is None
0.8.11,with warnings.catch_warnings(record=True) as w:
0.8.11,tree = clusterer.single_linkage_tree_
0.8.11,assert len(w) > 0
0.8.11,assert tree is None
0.8.11,with warnings.catch_warnings(record=True) as w:
0.8.11,scores = clusterer.outlier_scores_
0.8.11,assert len(w) > 0
0.8.11,assert scores is None
0.8.11,with warnings.catch_warnings(record=True) as w:
0.8.11,tree = clusterer.minimum_spanning_tree_
0.8.11,assert len(w) > 0
0.8.11,assert tree is None
0.8.11,def test_hdbscan_min_span_tree_availability():
0.8.11,clusterer = HDBSCAN().fit(X)
0.8.11,tree = clusterer.minimum_spanning_tree_
0.8.11,assert tree is None
0.8.11,D = distance.squareform(distance.pdist(X))
0.8.11,D /= np.max(D)
0.8.11,HDBSCAN(metric='precomputed').fit(D)
0.8.11,tree = clusterer.minimum_spanning_tree_
0.8.11,assert tree is None
0.8.11,def test_hdbscan_membership_vector():
0.8.11,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.11,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.11,"assert_array_almost_equal(vector, np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.11,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.11,"assert_array_almost_equal(vector, np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.11,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.11,"assert_array_almost_equal(vector, np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.11,
0.8.11,def test_hdbscan_all_points_membership_vectors():
0.8.11,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.11,vects = all_points_membership_vectors(clusterer)
0.8.11,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.11,"2.52734246e-001,"
0.8.11,8.38299608e-002]))
0.8.11,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.11,"8.35882503e-002,"
0.8.11,1.07356406e-001]))
0.8.11,Probably not applicable now #
0.8.11,def test_dbscan_sparse():
0.8.11,def test_dbscan_balltree():
0.8.11,def test_pickle():
0.8.11,def test_dbscan_core_samples_toy():
0.8.11,def test_boundaries():
0.8.11,Generate datasets. We choose the size big enough to see the scalability
0.8.11,"of the algorithms, but not too big to avoid too long running times"
0.8.11,normalize dataset for easier parameter selection
0.8.11,estimate bandwidth for mean shift
0.8.11,connectivity matrix for structured Ward
0.8.11,make connectivity symmetric
0.8.11,create clustering estimators
0.8.11,predict cluster memberships
0.8.11,plot
0.8.11,-*- coding: utf-8 -*-
0.8.11,#############################################################################
0.8.11,Generate sample data
0.8.11,#############################################################################
0.8.11,Compute DBSCAN
0.8.11,"Number of clusters in labels, ignoring noise if present."
0.8.11,#############################################################################
0.8.11,Plot result
0.8.11,Black removed and is used for noise instead.
0.8.11,Black used for noise.
0.8.11,Black used for noise.
0.8.11,-*- coding: utf-8 -*-
0.8.11,
0.8.11,"hdbscan documentation build configuration file, created by"
0.8.11,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.11,
0.8.11,This file is execfile()d with the current directory set to its
0.8.11,containing dir.
0.8.11,
0.8.11,Note that not all possible configuration values are present in this
0.8.11,autogenerated file.
0.8.11,
0.8.11,All configuration values have a default; values that are commented out
0.8.11,serve to show the default.
0.8.11,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.11,add these directories to sys.path here. If the directory is relative to the
0.8.11,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.11,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.11,"sys.path.insert(0, os.path.abspath('../'))"
0.8.11,-- General configuration ------------------------------------------------
0.8.11,"If your documentation needs a minimal Sphinx version, state it here."
0.8.11,needs_sphinx = '1.0'
0.8.11,"Add any Sphinx extension module names here, as strings. They can be"
0.8.11,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.11,ones.
0.8.11,"'sphinx.ext.napoleon',"
0.8.11,'numpy_ext.numpydoc'
0.8.11,napoleon_google_docstring = False
0.8.11,napoleon_numpy_docstring = True
0.8.11,"Add any paths that contain templates here, relative to this directory."
0.8.11,The suffix(es) of source filenames.
0.8.11,You can specify multiple suffix as a list of string:
0.8.11,"source_suffix = ['.rst', '.md']"
0.8.11,The encoding of source files.
0.8.11,source_encoding = 'utf-8-sig'
0.8.11,The master toctree document.
0.8.11,General information about the project.
0.8.11,"The version info for the project you're documenting, acts as replacement for"
0.8.11,"|version| and |release|, also used in various other places throughout the"
0.8.11,built documents.
0.8.11,
0.8.11,The short X.Y version.
0.8.11,"The full version, including alpha/beta/rc tags."
0.8.11,The language for content autogenerated by Sphinx. Refer to documentation
0.8.11,for a list of supported languages.
0.8.11,
0.8.11,This is also used if you do content translation via gettext catalogs.
0.8.11,"Usually you set ""language"" from the command line for these cases."
0.8.11,"There are two options for replacing |today|: either, you set today to some"
0.8.11,"non-false value, then it is used:"
0.8.11,today = ''
0.8.11,"Else, today_fmt is used as the format for a strftime call."
0.8.11,"today_fmt = '%B %d, %Y'"
0.8.11,"List of patterns, relative to source directory, that match files and"
0.8.11,directories to ignore when looking for source files.
0.8.11,The reST default role (used for this markup: `text`) to use for all
0.8.11,documents.
0.8.11,default_role = None
0.8.11,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.11,add_function_parentheses = True
0.8.11,"If true, the current module name will be prepended to all description"
0.8.11,unit titles (such as .. function::).
0.8.11,add_module_names = True
0.8.11,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.11,output. They are ignored by default.
0.8.11,show_authors = False
0.8.11,The name of the Pygments (syntax highlighting) style to use.
0.8.11,A list of ignored prefixes for module index sorting.
0.8.11,modindex_common_prefix = []
0.8.11,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.11,keep_warnings = False
0.8.11,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.11,-- Options for HTML output ----------------------------------------------
0.8.11,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.11,a list of builtin themes.
0.8.11,html_theme = 'alabaster'
0.8.11,Theme options are theme-specific and customize the look and feel of a theme
0.8.11,"further.  For a list of options available for each theme, see the"
0.8.11,documentation.
0.8.11,html_theme_options = {}
0.8.11,"Add any paths that contain custom themes here, relative to this directory."
0.8.11,html_theme_path = []
0.8.11,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.11,"""<project> v<release> documentation""."
0.8.11,html_title = None
0.8.11,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.11,html_short_title = None
0.8.11,The name of an image file (relative to this directory) to place at the top
0.8.11,of the sidebar.
0.8.11,html_logo = None
0.8.11,The name of an image file (within the static path) to use as favicon of the
0.8.11,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.11,pixels large.
0.8.11,html_favicon = None
0.8.11,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.11,"relative to this directory. They are copied after the builtin static files,"
0.8.11,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.11,Add any extra paths that contain custom files (such as robots.txt or
0.8.11,".htaccess) here, relative to this directory. These files are copied"
0.8.11,directly to the root of the documentation.
0.8.11,html_extra_path = []
0.8.11,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.11,using the given strftime format.
0.8.11,"html_last_updated_fmt = '%b %d, %Y'"
0.8.11,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.11,typographically correct entities.
0.8.11,html_use_smartypants = True
0.8.11,"Custom sidebar templates, maps document names to template names."
0.8.11,html_sidebars = {}
0.8.11,"Additional templates that should be rendered to pages, maps page names to"
0.8.11,template names.
0.8.11,html_additional_pages = {}
0.8.11,"If false, no module index is generated."
0.8.11,html_domain_indices = True
0.8.11,"If false, no index is generated."
0.8.11,html_use_index = True
0.8.11,"If true, the index is split into individual pages for each letter."
0.8.11,html_split_index = False
0.8.11,"If true, links to the reST sources are added to the pages."
0.8.11,html_show_sourcelink = True
0.8.11,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.11,html_show_sphinx = True
0.8.11,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.11,html_show_copyright = True
0.8.11,"If true, an OpenSearch description file will be output, and all pages will"
0.8.11,contain a <link> tag referring to it.  The value of this option must be the
0.8.11,base URL from which the finished HTML is served.
0.8.11,html_use_opensearch = ''
0.8.11,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.11,html_file_suffix = None
0.8.11,Language to be used for generating the HTML full-text search index.
0.8.11,Sphinx supports the following languages:
0.8.11,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.11,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.11,html_search_language = 'en'
0.8.11,"A dictionary with options for the search language support, empty by default."
0.8.11,Now only 'ja' uses this config value
0.8.11,html_search_options = {'type': 'default'}
0.8.11,The name of a javascript file (relative to the configuration directory) that
0.8.11,"implements a search results scorer. If empty, the default will be used."
0.8.11,html_search_scorer = 'scorer.js'
0.8.11,Output file base name for HTML help builder.
0.8.11,-- Options for LaTeX output ---------------------------------------------
0.8.11,The paper size ('letterpaper' or 'a4paper').
0.8.11,"'papersize': 'letterpaper',"
0.8.11,"The font size ('10pt', '11pt' or '12pt')."
0.8.11,"'pointsize': '10pt',"
0.8.11,Additional stuff for the LaTeX preamble.
0.8.11,"'preamble': '',"
0.8.11,Latex figure (float) alignment
0.8.11,"'figure_align': 'htbp',"
0.8.11,Grouping the document tree into LaTeX files. List of tuples
0.8.11,"(source start file, target name, title,"
0.8.11,"author, documentclass [howto, manual, or own class])."
0.8.11,The name of an image file (relative to this directory) to place at the top of
0.8.11,the title page.
0.8.11,latex_logo = None
0.8.11,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.11,not chapters.
0.8.11,latex_use_parts = False
0.8.11,"If true, show page references after internal links."
0.8.11,latex_show_pagerefs = False
0.8.11,"If true, show URL addresses after external links."
0.8.11,latex_show_urls = False
0.8.11,Documents to append as an appendix to all manuals.
0.8.11,latex_appendices = []
0.8.11,"If false, no module index is generated."
0.8.11,latex_domain_indices = True
0.8.11,-- Options for manual page output ---------------------------------------
0.8.11,One entry per manual page. List of tuples
0.8.11,"(source start file, name, description, authors, manual section)."
0.8.11,"If true, show URL addresses after external links."
0.8.11,man_show_urls = False
0.8.11,-- Options for Texinfo output -------------------------------------------
0.8.11,Grouping the document tree into Texinfo files. List of tuples
0.8.11,"(source start file, target name, title, author,"
0.8.11,"dir menu entry, description, category)"
0.8.11,Documents to append as an appendix to all manuals.
0.8.11,texinfo_appendices = []
0.8.11,"If false, no module index is generated."
0.8.11,texinfo_domain_indices = True
0.8.11,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.11,texinfo_show_urls = 'footnote'
0.8.11,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.11,texinfo_no_detailmenu = False
0.8.11,-- Options for Epub output ----------------------------------------------
0.8.11,Bibliographic Dublin Core info.
0.8.11,The basename for the epub file. It defaults to the project name.
0.8.11,epub_basename = project
0.8.11,The HTML theme for the epub output. Since the default themes are not
0.8.11,"optimized for small screen space, using the same theme for HTML and epub"
0.8.11,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.11,visual space.
0.8.11,epub_theme = 'epub'
0.8.11,The language of the text. It defaults to the language option
0.8.11,or 'en' if the language is not set.
0.8.11,epub_language = ''
0.8.11,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.11,epub_scheme = ''
0.8.11,The unique identifier of the text. This can be a ISBN number
0.8.11,or the project homepage.
0.8.11,epub_identifier = ''
0.8.11,A unique identification for the text.
0.8.11,epub_uid = ''
0.8.11,A tuple containing the cover image and cover page html template filenames.
0.8.11,epub_cover = ()
0.8.11,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.11,epub_guide = ()
0.8.11,HTML files that should be inserted before the pages created by sphinx.
0.8.11,The format is a list of tuples containing the path and title.
0.8.11,epub_pre_files = []
0.8.11,HTML files that should be inserted after the pages created by sphinx.
0.8.11,The format is a list of tuples containing the path and title.
0.8.11,epub_post_files = []
0.8.11,A list of files that should not be packed into the epub file.
0.8.11,The depth of the table of contents in toc.ncx.
0.8.11,epub_tocdepth = 3
0.8.11,Allow duplicate toc entries.
0.8.11,epub_tocdup = True
0.8.11,Choose between 'default' and 'includehidden'.
0.8.11,epub_tocscope = 'default'
0.8.11,Fix unsupported image types using the Pillow.
0.8.11,epub_fix_images = False
0.8.11,Scale large images.
0.8.11,epub_max_image_width = 0
0.8.11,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.11,epub_show_urls = 'inline'
0.8.11,"If false, no index is generated."
0.8.11,epub_use_index = True
0.8.10,"A little ""fancy"" we select from the flattened array reshape back"
0.8.10,(Fortran format to get indexing right) and take the product to do an and
0.8.10,then convert back to boolean type.
0.8.10,Density sparseness is not well defined if there are no
0.8.10,internal edges (as per the referenced paper). However
0.8.10,MATLAB code from the original authors simply selects the
0.8.10,largest of *all* the edges in the case that there are
0.8.10,"no internal edges, so we do the same here"
0.8.10,"If there are any internal edges, then subselect them out"
0.8.10,If there are no internal edges then we want to take the
0.8.10,"max over all the edges that exist in the MST, so we simply"
0.8.10,do nothing and return all the edges in the MST.
0.8.10,-*- coding: utf-8 -*-
0.8.10,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.10,Steve Astels <sastels@gmail.com>
0.8.10,John Healy <jchealy@gmail.com>
0.8.10,
0.8.10,License: BSD 3 clause
0.8.10,Supporting numpy prior to version 1.7 is a little painful ...
0.8.10,Make sure y is an inexact type to avoid bad behavior on abs(MIN_INT).
0.8.10,"This will cause casting of x later. Also, make sure to allow"
0.8.10,"subclasses (e.g., for numpy.ma)."
0.8.10,"Because we're using boolean indexing, x & y must be the same"
0.8.10,"shape. Ideally, we'd just do x, y = broadcast_arrays(x, y)."
0.8.10,"It's in lib.stride_tricks, though, so we can't import it here."
0.8.10,Avoid subtraction with infinite/nan values...
0.8.10,Check for equality of infinite values...
0.8.10,Make NaN == NaN
0.8.10,raise TypeError('Sparse distance matrices not yet supported')
0.8.10,mst_linkage_core does not generate a full minimal spanning tree
0.8.10,If a tree is required then we must build the edges from the information
0.8.10,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.10,Sort edges of the min_spanning_tree by weight
0.8.10,Convert edge list into standard hierarchical clustering format
0.8.10,Compute sparse mutual reachability graph
0.8.10,Compute the minimum spanning tree for the sparse graph
0.8.10,Convert the graph to scipy cluster array format
0.8.10,Sort edges of the min_spanning_tree by weight
0.8.10,Convert edge list into standard hierarchical clustering format
0.8.10,The Cython routines used require contiguous arrays
0.8.10,TO DO: Deal with p for minkowski appropriately
0.8.10,Get distance to kth nearest neighbour
0.8.10,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.10,Sort edges of the min_spanning_tree by weight
0.8.10,Convert edge list into standard hierarchical clustering format
0.8.10,The Cython routines used require contiguous arrays
0.8.10,Get distance to kth nearest neighbour
0.8.10,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.10,Sort edges of the min_spanning_tree by weight
0.8.10,Convert edge list into standard hierarchical clustering format
0.8.10,Sort edges of the min_spanning_tree by weight
0.8.10,Convert edge list into standard hierarchical clustering format
0.8.10,Sort edges of the min_spanning_tree by weight
0.8.10,Convert edge list into standard hierarchical clustering format
0.8.10,Checks input and converts to an nd-array where possible
0.8.10,Python 2 and 3 compliant string_type checking
0.8.10,We can't do much with sparse matrices ...
0.8.10,TO DO: Need heuristic to decide when to go to boruvka;
0.8.10,still debugging for now
0.8.10,TO DO: Need heuristic to decide when to go to boruvka;
0.8.10,still debugging for now
0.8.10,Inherits from sklearn
0.8.10,"prediction data only applies to the persistent model, so remove"
0.8.10,it from the keyword args we pass on the the function
0.8.10,-*- coding: utf-8 -*-
0.8.10,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.10,
0.8.10,License: BSD 3 clause
0.8.10,We want to get the x and y coordinates for the start of each cluster
0.8.10,"Initialize the leaves, since we know where they go, the iterate"
0.8.10,"through everything from the leaves back, setting coords as we go"
0.8.10,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.10,bottoms and widths for each rectangle. We can go through each cluster
0.8.10,and do this for each in turn.
0.8.10,Ensure we don't try to take log of zero
0.8.10,Finally we need the horizontal lines that occur at cluster splits.
0.8.10,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.10,Use PCA to get down to 32 dimension
0.8.10,-*- coding: utf-8 -*-
0.8.10,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.10,
0.8.10,License: BSD 3 clause
0.8.10,The Cython routines used require contiguous arrays
0.8.10,The Cython routines used require contiguous arrays
0.8.10,We can't do much with sparse matrices ...
0.8.10,Need heuristic to decide when to go to boruvka;
0.8.10,still debugging for now
0.8.10,Need heuristic to decide when to go to boruvka;
0.8.10,still debugging for now
0.8.10,Support various prediction methods for predicting cluster membership
0.8.10,of new or unseen points. There are several ways to interpret how
0.8.10,"to do this correctly, so we provide several methods for"
0.8.10,the different use cases that may arise.
0.8.10,raw_condensed_tree = condensed_tree.to_numpy()
0.8.10,New point departs with the old
0.8.10,Find appropriate cluster based on lambda of new point
0.8.10,Find appropriate cluster based on lambda of new point
0.8.10,We need to find where in the tree the new point would go
0.8.10,for the purposes of outlier membership approximation
0.8.10,import pickle
0.8.10,from sklearn.cluster.tests.common import generate_clustered_data
0.8.10,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.10,"number of clusters, ignoring noise if present"
0.8.10,"metric is the function reference, not the string key."
0.8.10,"H, y = shuffle(X, y, random_state=7)"
0.8.10,import pickle
0.8.10,from sklearn.cluster.tests.common import generate_clustered_data
0.8.10,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.10,"number of clusters, ignoring noise if present"
0.8.10,"number of clusters, ignoring noise if present"
0.8.10,"H, y = shuffle(X, y, random_state=7)"
0.8.10,"metric is the function reference, not the string key."
0.8.10,def test_hdbscan_membership_vector():
0.8.10,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.10,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.10,"assert_array_almost_equal(vector, np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.10,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.10,"assert_array_almost_equal(vector, np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.10,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.10,"assert_array_almost_equal(vector, np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.10,
0.8.10,def test_hdbscan_all_points_membership_vectors():
0.8.10,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.10,vects = all_points_membership_vectors(clusterer)
0.8.10,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.10,"2.52734246e-001,"
0.8.10,8.38299608e-002]))
0.8.10,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.10,"8.35882503e-002,"
0.8.10,1.07356406e-001]))
0.8.10,Probably not applicable now #
0.8.10,def test_dbscan_sparse():
0.8.10,def test_dbscan_balltree():
0.8.10,def test_pickle():
0.8.10,def test_dbscan_core_samples_toy():
0.8.10,def test_boundaries():
0.8.10,Generate datasets. We choose the size big enough to see the scalability
0.8.10,"of the algorithms, but not too big to avoid too long running times"
0.8.10,normalize dataset for easier parameter selection
0.8.10,estimate bandwidth for mean shift
0.8.10,connectivity matrix for structured Ward
0.8.10,make connectivity symmetric
0.8.10,create clustering estimators
0.8.10,predict cluster memberships
0.8.10,plot
0.8.10,-*- coding: utf-8 -*-
0.8.10,#############################################################################
0.8.10,Generate sample data
0.8.10,#############################################################################
0.8.10,Compute DBSCAN
0.8.10,"Number of clusters in labels, ignoring noise if present."
0.8.10,#############################################################################
0.8.10,Plot result
0.8.10,Black removed and is used for noise instead.
0.8.10,Black used for noise.
0.8.10,Black used for noise.
0.8.10,-*- coding: utf-8 -*-
0.8.10,
0.8.10,"hdbscan documentation build configuration file, created by"
0.8.10,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.10,
0.8.10,This file is execfile()d with the current directory set to its
0.8.10,containing dir.
0.8.10,
0.8.10,Note that not all possible configuration values are present in this
0.8.10,autogenerated file.
0.8.10,
0.8.10,All configuration values have a default; values that are commented out
0.8.10,serve to show the default.
0.8.10,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.10,add these directories to sys.path here. If the directory is relative to the
0.8.10,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.10,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.10,"sys.path.insert(0, os.path.abspath('../'))"
0.8.10,-- General configuration ------------------------------------------------
0.8.10,"If your documentation needs a minimal Sphinx version, state it here."
0.8.10,needs_sphinx = '1.0'
0.8.10,"Add any Sphinx extension module names here, as strings. They can be"
0.8.10,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.10,ones.
0.8.10,"'sphinx.ext.napoleon',"
0.8.10,'numpy_ext.numpydoc'
0.8.10,napoleon_google_docstring = False
0.8.10,napoleon_numpy_docstring = True
0.8.10,"Add any paths that contain templates here, relative to this directory."
0.8.10,The suffix(es) of source filenames.
0.8.10,You can specify multiple suffix as a list of string:
0.8.10,"source_suffix = ['.rst', '.md']"
0.8.10,The encoding of source files.
0.8.10,source_encoding = 'utf-8-sig'
0.8.10,The master toctree document.
0.8.10,General information about the project.
0.8.10,"The version info for the project you're documenting, acts as replacement for"
0.8.10,"|version| and |release|, also used in various other places throughout the"
0.8.10,built documents.
0.8.10,
0.8.10,The short X.Y version.
0.8.10,"The full version, including alpha/beta/rc tags."
0.8.10,The language for content autogenerated by Sphinx. Refer to documentation
0.8.10,for a list of supported languages.
0.8.10,
0.8.10,This is also used if you do content translation via gettext catalogs.
0.8.10,"Usually you set ""language"" from the command line for these cases."
0.8.10,"There are two options for replacing |today|: either, you set today to some"
0.8.10,"non-false value, then it is used:"
0.8.10,today = ''
0.8.10,"Else, today_fmt is used as the format for a strftime call."
0.8.10,"today_fmt = '%B %d, %Y'"
0.8.10,"List of patterns, relative to source directory, that match files and"
0.8.10,directories to ignore when looking for source files.
0.8.10,The reST default role (used for this markup: `text`) to use for all
0.8.10,documents.
0.8.10,default_role = None
0.8.10,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.10,add_function_parentheses = True
0.8.10,"If true, the current module name will be prepended to all description"
0.8.10,unit titles (such as .. function::).
0.8.10,add_module_names = True
0.8.10,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.10,output. They are ignored by default.
0.8.10,show_authors = False
0.8.10,The name of the Pygments (syntax highlighting) style to use.
0.8.10,A list of ignored prefixes for module index sorting.
0.8.10,modindex_common_prefix = []
0.8.10,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.10,keep_warnings = False
0.8.10,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.10,-- Options for HTML output ----------------------------------------------
0.8.10,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.10,a list of builtin themes.
0.8.10,html_theme = 'alabaster'
0.8.10,Theme options are theme-specific and customize the look and feel of a theme
0.8.10,"further.  For a list of options available for each theme, see the"
0.8.10,documentation.
0.8.10,html_theme_options = {}
0.8.10,"Add any paths that contain custom themes here, relative to this directory."
0.8.10,html_theme_path = []
0.8.10,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.10,"""<project> v<release> documentation""."
0.8.10,html_title = None
0.8.10,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.10,html_short_title = None
0.8.10,The name of an image file (relative to this directory) to place at the top
0.8.10,of the sidebar.
0.8.10,html_logo = None
0.8.10,The name of an image file (within the static path) to use as favicon of the
0.8.10,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.10,pixels large.
0.8.10,html_favicon = None
0.8.10,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.10,"relative to this directory. They are copied after the builtin static files,"
0.8.10,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.10,Add any extra paths that contain custom files (such as robots.txt or
0.8.10,".htaccess) here, relative to this directory. These files are copied"
0.8.10,directly to the root of the documentation.
0.8.10,html_extra_path = []
0.8.10,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.10,using the given strftime format.
0.8.10,"html_last_updated_fmt = '%b %d, %Y'"
0.8.10,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.10,typographically correct entities.
0.8.10,html_use_smartypants = True
0.8.10,"Custom sidebar templates, maps document names to template names."
0.8.10,html_sidebars = {}
0.8.10,"Additional templates that should be rendered to pages, maps page names to"
0.8.10,template names.
0.8.10,html_additional_pages = {}
0.8.10,"If false, no module index is generated."
0.8.10,html_domain_indices = True
0.8.10,"If false, no index is generated."
0.8.10,html_use_index = True
0.8.10,"If true, the index is split into individual pages for each letter."
0.8.10,html_split_index = False
0.8.10,"If true, links to the reST sources are added to the pages."
0.8.10,html_show_sourcelink = True
0.8.10,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.10,html_show_sphinx = True
0.8.10,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.10,html_show_copyright = True
0.8.10,"If true, an OpenSearch description file will be output, and all pages will"
0.8.10,contain a <link> tag referring to it.  The value of this option must be the
0.8.10,base URL from which the finished HTML is served.
0.8.10,html_use_opensearch = ''
0.8.10,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.10,html_file_suffix = None
0.8.10,Language to be used for generating the HTML full-text search index.
0.8.10,Sphinx supports the following languages:
0.8.10,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.10,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.10,html_search_language = 'en'
0.8.10,"A dictionary with options for the search language support, empty by default."
0.8.10,Now only 'ja' uses this config value
0.8.10,html_search_options = {'type': 'default'}
0.8.10,The name of a javascript file (relative to the configuration directory) that
0.8.10,"implements a search results scorer. If empty, the default will be used."
0.8.10,html_search_scorer = 'scorer.js'
0.8.10,Output file base name for HTML help builder.
0.8.10,-- Options for LaTeX output ---------------------------------------------
0.8.10,The paper size ('letterpaper' or 'a4paper').
0.8.10,"'papersize': 'letterpaper',"
0.8.10,"The font size ('10pt', '11pt' or '12pt')."
0.8.10,"'pointsize': '10pt',"
0.8.10,Additional stuff for the LaTeX preamble.
0.8.10,"'preamble': '',"
0.8.10,Latex figure (float) alignment
0.8.10,"'figure_align': 'htbp',"
0.8.10,Grouping the document tree into LaTeX files. List of tuples
0.8.10,"(source start file, target name, title,"
0.8.10,"author, documentclass [howto, manual, or own class])."
0.8.10,The name of an image file (relative to this directory) to place at the top of
0.8.10,the title page.
0.8.10,latex_logo = None
0.8.10,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.10,not chapters.
0.8.10,latex_use_parts = False
0.8.10,"If true, show page references after internal links."
0.8.10,latex_show_pagerefs = False
0.8.10,"If true, show URL addresses after external links."
0.8.10,latex_show_urls = False
0.8.10,Documents to append as an appendix to all manuals.
0.8.10,latex_appendices = []
0.8.10,"If false, no module index is generated."
0.8.10,latex_domain_indices = True
0.8.10,-- Options for manual page output ---------------------------------------
0.8.10,One entry per manual page. List of tuples
0.8.10,"(source start file, name, description, authors, manual section)."
0.8.10,"If true, show URL addresses after external links."
0.8.10,man_show_urls = False
0.8.10,-- Options for Texinfo output -------------------------------------------
0.8.10,Grouping the document tree into Texinfo files. List of tuples
0.8.10,"(source start file, target name, title, author,"
0.8.10,"dir menu entry, description, category)"
0.8.10,Documents to append as an appendix to all manuals.
0.8.10,texinfo_appendices = []
0.8.10,"If false, no module index is generated."
0.8.10,texinfo_domain_indices = True
0.8.10,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.10,texinfo_show_urls = 'footnote'
0.8.10,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.10,texinfo_no_detailmenu = False
0.8.10,-- Options for Epub output ----------------------------------------------
0.8.10,Bibliographic Dublin Core info.
0.8.10,The basename for the epub file. It defaults to the project name.
0.8.10,epub_basename = project
0.8.10,The HTML theme for the epub output. Since the default themes are not
0.8.10,"optimized for small screen space, using the same theme for HTML and epub"
0.8.10,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.10,visual space.
0.8.10,epub_theme = 'epub'
0.8.10,The language of the text. It defaults to the language option
0.8.10,or 'en' if the language is not set.
0.8.10,epub_language = ''
0.8.10,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.10,epub_scheme = ''
0.8.10,The unique identifier of the text. This can be a ISBN number
0.8.10,or the project homepage.
0.8.10,epub_identifier = ''
0.8.10,A unique identification for the text.
0.8.10,epub_uid = ''
0.8.10,A tuple containing the cover image and cover page html template filenames.
0.8.10,epub_cover = ()
0.8.10,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.10,epub_guide = ()
0.8.10,HTML files that should be inserted before the pages created by sphinx.
0.8.10,The format is a list of tuples containing the path and title.
0.8.10,epub_pre_files = []
0.8.10,HTML files that should be inserted after the pages created by sphinx.
0.8.10,The format is a list of tuples containing the path and title.
0.8.10,epub_post_files = []
0.8.10,A list of files that should not be packed into the epub file.
0.8.10,The depth of the table of contents in toc.ncx.
0.8.10,epub_tocdepth = 3
0.8.10,Allow duplicate toc entries.
0.8.10,epub_tocdup = True
0.8.10,Choose between 'default' and 'includehidden'.
0.8.10,epub_tocscope = 'default'
0.8.10,Fix unsupported image types using the Pillow.
0.8.10,epub_fix_images = False
0.8.10,Scale large images.
0.8.10,epub_max_image_width = 0
0.8.10,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.10,epub_show_urls = 'inline'
0.8.10,"If false, no index is generated."
0.8.10,epub_use_index = True
0.8.9,"A little ""fancy"" we select from the flattened array reshape back"
0.8.9,(Fortran format to get indexing right) and take the product to do an and
0.8.9,then convert back to boolean type.
0.8.9,Density sparseness is not well defined if there are no
0.8.9,internal edges (as per the referenced paper). However
0.8.9,MATLAB code from the original authors simply selects the
0.8.9,largest of *all* the edges in the case that there are
0.8.9,"no internal edges, so we do the same here"
0.8.9,"If there are any internal edges, then subselect them out"
0.8.9,If there are no internal edges then we want to take the
0.8.9,"max over all the edges that exist in the MST, so we simply"
0.8.9,do nothing and return all the edges in the MST.
0.8.9,-*- coding: utf-8 -*-
0.8.9,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.9,Steve Astels <sastels@gmail.com>
0.8.9,John Healy <jchealy@gmail.com>
0.8.9,
0.8.9,License: BSD 3 clause
0.8.9,Supporting numpy prior to version 1.7 is a little painful ...
0.8.9,Make sure y is an inexact type to avoid bad behavior on abs(MIN_INT).
0.8.9,"This will cause casting of x later. Also, make sure to allow"
0.8.9,"subclasses (e.g., for numpy.ma)."
0.8.9,"Because we're using boolean indexing, x & y must be the same"
0.8.9,"shape. Ideally, we'd just do x, y = broadcast_arrays(x, y)."
0.8.9,"It's in lib.stride_tricks, though, so we can't import it here."
0.8.9,Avoid subtraction with infinite/nan values...
0.8.9,Check for equality of infinite values...
0.8.9,Make NaN == NaN
0.8.9,raise TypeError('Sparse distance matrices not yet supported')
0.8.9,mst_linkage_core does not generate a full minimal spanning tree
0.8.9,If a tree is required then we must build the edges from the information
0.8.9,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.9,Sort edges of the min_spanning_tree by weight
0.8.9,Convert edge list into standard hierarchical clustering format
0.8.9,Compute sparse mutual reachability graph
0.8.9,Compute the minimum spanning tree for the sparse graph
0.8.9,Convert the graph to scipy cluster array format
0.8.9,Sort edges of the min_spanning_tree by weight
0.8.9,Convert edge list into standard hierarchical clustering format
0.8.9,The Cython routines used require contiguous arrays
0.8.9,TO DO: Deal with p for minkowski appropriately
0.8.9,Get distance to kth nearest neighbour
0.8.9,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.9,Sort edges of the min_spanning_tree by weight
0.8.9,Convert edge list into standard hierarchical clustering format
0.8.9,The Cython routines used require contiguous arrays
0.8.9,Get distance to kth nearest neighbour
0.8.9,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.9,Sort edges of the min_spanning_tree by weight
0.8.9,Convert edge list into standard hierarchical clustering format
0.8.9,Sort edges of the min_spanning_tree by weight
0.8.9,Convert edge list into standard hierarchical clustering format
0.8.9,Sort edges of the min_spanning_tree by weight
0.8.9,Convert edge list into standard hierarchical clustering format
0.8.9,Checks input and converts to an nd-array where possible
0.8.9,Python 2 and 3 compliant string_type checking
0.8.9,We can't do much with sparse matrices ...
0.8.9,TO DO: Need heuristic to decide when to go to boruvka;
0.8.9,still debugging for now
0.8.9,TO DO: Need heuristic to decide when to go to boruvka;
0.8.9,still debugging for now
0.8.9,Inherits from sklearn
0.8.9,"prediction data only applies to the persistent model, so remove"
0.8.9,it from the keyword args we pass on the the function
0.8.9,-*- coding: utf-8 -*-
0.8.9,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.9,
0.8.9,License: BSD 3 clause
0.8.9,We want to get the x and y coordinates for the start of each cluster
0.8.9,"Initialize the leaves, since we know where they go, the iterate"
0.8.9,"through everything from the leaves back, setting coords as we go"
0.8.9,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.9,bottoms and widths for each rectangle. We can go through each cluster
0.8.9,and do this for each in turn.
0.8.9,Ensure we don't try to take log of zero
0.8.9,Finally we need the horizontal lines that occur at cluster splits.
0.8.9,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.9,Use PCA to get down to 32 dimension
0.8.9,-*- coding: utf-8 -*-
0.8.9,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.9,
0.8.9,License: BSD 3 clause
0.8.9,The Cython routines used require contiguous arrays
0.8.9,The Cython routines used require contiguous arrays
0.8.9,We can't do much with sparse matrices ...
0.8.9,Need heuristic to decide when to go to boruvka;
0.8.9,still debugging for now
0.8.9,Need heuristic to decide when to go to boruvka;
0.8.9,still debugging for now
0.8.9,Support various prediction methods for predicting cluster membership
0.8.9,of new or unseen points. There are several ways to interpret how
0.8.9,"to do this correctly, so we provide several methods for"
0.8.9,the different use cases that may arise.
0.8.9,raw_condensed_tree = condensed_tree.to_numpy()
0.8.9,New point departs with the old
0.8.9,Find appropriate cluster based on lambda of new point
0.8.9,Find appropriate cluster based on lambda of new point
0.8.9,We need to find where in the tree the new point would go
0.8.9,for the purposes of outlier membership approximation
0.8.9,import pickle
0.8.9,from sklearn.cluster.tests.common import generate_clustered_data
0.8.9,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.9,"number of clusters, ignoring noise if present"
0.8.9,"metric is the function reference, not the string key."
0.8.9,"H, y = shuffle(X, y, random_state=7)"
0.8.9,import pickle
0.8.9,from sklearn.cluster.tests.common import generate_clustered_data
0.8.9,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.9,"number of clusters, ignoring noise if present"
0.8.9,"number of clusters, ignoring noise if present"
0.8.9,"H, y = shuffle(X, y, random_state=7)"
0.8.9,"metric is the function reference, not the string key."
0.8.9,def test_hdbscan_membership_vector():
0.8.9,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.9,"vector = membership_vector(clusterer, np.array([[-1.5, -1.0]]))"
0.8.9,"assert_array_almost_equal(vector, np.array([[ 0.05705305,  0.05974177,  0.12228153]]))"
0.8.9,"vector = membership_vector(clusterer, np.array([[1.5, -1.0]]))"
0.8.9,"assert_array_almost_equal(vector, np.array([[ 0.09462176,  0.32061556,  0.10112905]]))"
0.8.9,"vector = membership_vector(clusterer, np.array([[0.0, 0.0]]))"
0.8.9,"assert_array_almost_equal(vector, np.array([[ 0.03545607,  0.03363318,  0.04643177]]))"
0.8.9,
0.8.9,def test_hdbscan_all_points_membership_vectors():
0.8.9,clusterer = HDBSCAN(prediction_data=True).fit(X)
0.8.9,vects = all_points_membership_vectors(clusterer)
0.8.9,"assert_array_almost_equal(vects[0], np.array([7.86400992e-002,"
0.8.9,"2.52734246e-001,"
0.8.9,8.38299608e-002]))
0.8.9,"assert_array_almost_equal(vects[-1], np.array([8.09055344e-001,"
0.8.9,"8.35882503e-002,"
0.8.9,1.07356406e-001]))
0.8.9,Probably not applicable now #
0.8.9,def test_dbscan_sparse():
0.8.9,def test_dbscan_balltree():
0.8.9,def test_pickle():
0.8.9,def test_dbscan_core_samples_toy():
0.8.9,def test_boundaries():
0.8.9,Generate datasets. We choose the size big enough to see the scalability
0.8.9,"of the algorithms, but not too big to avoid too long running times"
0.8.9,normalize dataset for easier parameter selection
0.8.9,estimate bandwidth for mean shift
0.8.9,connectivity matrix for structured Ward
0.8.9,make connectivity symmetric
0.8.9,create clustering estimators
0.8.9,predict cluster memberships
0.8.9,plot
0.8.9,-*- coding: utf-8 -*-
0.8.9,#############################################################################
0.8.9,Generate sample data
0.8.9,#############################################################################
0.8.9,Compute DBSCAN
0.8.9,"Number of clusters in labels, ignoring noise if present."
0.8.9,#############################################################################
0.8.9,Plot result
0.8.9,Black removed and is used for noise instead.
0.8.9,Black used for noise.
0.8.9,Black used for noise.
0.8.9,-*- coding: utf-8 -*-
0.8.9,
0.8.9,"hdbscan documentation build configuration file, created by"
0.8.9,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.9,
0.8.9,This file is execfile()d with the current directory set to its
0.8.9,containing dir.
0.8.9,
0.8.9,Note that not all possible configuration values are present in this
0.8.9,autogenerated file.
0.8.9,
0.8.9,All configuration values have a default; values that are commented out
0.8.9,serve to show the default.
0.8.9,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.9,add these directories to sys.path here. If the directory is relative to the
0.8.9,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.9,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.9,"sys.path.insert(0, os.path.abspath('../'))"
0.8.9,-- General configuration ------------------------------------------------
0.8.9,"If your documentation needs a minimal Sphinx version, state it here."
0.8.9,needs_sphinx = '1.0'
0.8.9,"Add any Sphinx extension module names here, as strings. They can be"
0.8.9,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.9,ones.
0.8.9,"'sphinx.ext.napoleon',"
0.8.9,'numpy_ext.numpydoc'
0.8.9,napoleon_google_docstring = False
0.8.9,napoleon_numpy_docstring = True
0.8.9,"Add any paths that contain templates here, relative to this directory."
0.8.9,The suffix(es) of source filenames.
0.8.9,You can specify multiple suffix as a list of string:
0.8.9,"source_suffix = ['.rst', '.md']"
0.8.9,The encoding of source files.
0.8.9,source_encoding = 'utf-8-sig'
0.8.9,The master toctree document.
0.8.9,General information about the project.
0.8.9,"The version info for the project you're documenting, acts as replacement for"
0.8.9,"|version| and |release|, also used in various other places throughout the"
0.8.9,built documents.
0.8.9,
0.8.9,The short X.Y version.
0.8.9,"The full version, including alpha/beta/rc tags."
0.8.9,The language for content autogenerated by Sphinx. Refer to documentation
0.8.9,for a list of supported languages.
0.8.9,
0.8.9,This is also used if you do content translation via gettext catalogs.
0.8.9,"Usually you set ""language"" from the command line for these cases."
0.8.9,"There are two options for replacing |today|: either, you set today to some"
0.8.9,"non-false value, then it is used:"
0.8.9,today = ''
0.8.9,"Else, today_fmt is used as the format for a strftime call."
0.8.9,"today_fmt = '%B %d, %Y'"
0.8.9,"List of patterns, relative to source directory, that match files and"
0.8.9,directories to ignore when looking for source files.
0.8.9,The reST default role (used for this markup: `text`) to use for all
0.8.9,documents.
0.8.9,default_role = None
0.8.9,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.9,add_function_parentheses = True
0.8.9,"If true, the current module name will be prepended to all description"
0.8.9,unit titles (such as .. function::).
0.8.9,add_module_names = True
0.8.9,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.9,output. They are ignored by default.
0.8.9,show_authors = False
0.8.9,The name of the Pygments (syntax highlighting) style to use.
0.8.9,A list of ignored prefixes for module index sorting.
0.8.9,modindex_common_prefix = []
0.8.9,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.9,keep_warnings = False
0.8.9,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.9,-- Options for HTML output ----------------------------------------------
0.8.9,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.9,a list of builtin themes.
0.8.9,html_theme = 'alabaster'
0.8.9,Theme options are theme-specific and customize the look and feel of a theme
0.8.9,"further.  For a list of options available for each theme, see the"
0.8.9,documentation.
0.8.9,html_theme_options = {}
0.8.9,"Add any paths that contain custom themes here, relative to this directory."
0.8.9,html_theme_path = []
0.8.9,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.9,"""<project> v<release> documentation""."
0.8.9,html_title = None
0.8.9,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.9,html_short_title = None
0.8.9,The name of an image file (relative to this directory) to place at the top
0.8.9,of the sidebar.
0.8.9,html_logo = None
0.8.9,The name of an image file (within the static path) to use as favicon of the
0.8.9,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.9,pixels large.
0.8.9,html_favicon = None
0.8.9,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.9,"relative to this directory. They are copied after the builtin static files,"
0.8.9,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.9,Add any extra paths that contain custom files (such as robots.txt or
0.8.9,".htaccess) here, relative to this directory. These files are copied"
0.8.9,directly to the root of the documentation.
0.8.9,html_extra_path = []
0.8.9,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.9,using the given strftime format.
0.8.9,"html_last_updated_fmt = '%b %d, %Y'"
0.8.9,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.9,typographically correct entities.
0.8.9,html_use_smartypants = True
0.8.9,"Custom sidebar templates, maps document names to template names."
0.8.9,html_sidebars = {}
0.8.9,"Additional templates that should be rendered to pages, maps page names to"
0.8.9,template names.
0.8.9,html_additional_pages = {}
0.8.9,"If false, no module index is generated."
0.8.9,html_domain_indices = True
0.8.9,"If false, no index is generated."
0.8.9,html_use_index = True
0.8.9,"If true, the index is split into individual pages for each letter."
0.8.9,html_split_index = False
0.8.9,"If true, links to the reST sources are added to the pages."
0.8.9,html_show_sourcelink = True
0.8.9,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.9,html_show_sphinx = True
0.8.9,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.9,html_show_copyright = True
0.8.9,"If true, an OpenSearch description file will be output, and all pages will"
0.8.9,contain a <link> tag referring to it.  The value of this option must be the
0.8.9,base URL from which the finished HTML is served.
0.8.9,html_use_opensearch = ''
0.8.9,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.9,html_file_suffix = None
0.8.9,Language to be used for generating the HTML full-text search index.
0.8.9,Sphinx supports the following languages:
0.8.9,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.9,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.9,html_search_language = 'en'
0.8.9,"A dictionary with options for the search language support, empty by default."
0.8.9,Now only 'ja' uses this config value
0.8.9,html_search_options = {'type': 'default'}
0.8.9,The name of a javascript file (relative to the configuration directory) that
0.8.9,"implements a search results scorer. If empty, the default will be used."
0.8.9,html_search_scorer = 'scorer.js'
0.8.9,Output file base name for HTML help builder.
0.8.9,-- Options for LaTeX output ---------------------------------------------
0.8.9,The paper size ('letterpaper' or 'a4paper').
0.8.9,"'papersize': 'letterpaper',"
0.8.9,"The font size ('10pt', '11pt' or '12pt')."
0.8.9,"'pointsize': '10pt',"
0.8.9,Additional stuff for the LaTeX preamble.
0.8.9,"'preamble': '',"
0.8.9,Latex figure (float) alignment
0.8.9,"'figure_align': 'htbp',"
0.8.9,Grouping the document tree into LaTeX files. List of tuples
0.8.9,"(source start file, target name, title,"
0.8.9,"author, documentclass [howto, manual, or own class])."
0.8.9,The name of an image file (relative to this directory) to place at the top of
0.8.9,the title page.
0.8.9,latex_logo = None
0.8.9,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.9,not chapters.
0.8.9,latex_use_parts = False
0.8.9,"If true, show page references after internal links."
0.8.9,latex_show_pagerefs = False
0.8.9,"If true, show URL addresses after external links."
0.8.9,latex_show_urls = False
0.8.9,Documents to append as an appendix to all manuals.
0.8.9,latex_appendices = []
0.8.9,"If false, no module index is generated."
0.8.9,latex_domain_indices = True
0.8.9,-- Options for manual page output ---------------------------------------
0.8.9,One entry per manual page. List of tuples
0.8.9,"(source start file, name, description, authors, manual section)."
0.8.9,"If true, show URL addresses after external links."
0.8.9,man_show_urls = False
0.8.9,-- Options for Texinfo output -------------------------------------------
0.8.9,Grouping the document tree into Texinfo files. List of tuples
0.8.9,"(source start file, target name, title, author,"
0.8.9,"dir menu entry, description, category)"
0.8.9,Documents to append as an appendix to all manuals.
0.8.9,texinfo_appendices = []
0.8.9,"If false, no module index is generated."
0.8.9,texinfo_domain_indices = True
0.8.9,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.9,texinfo_show_urls = 'footnote'
0.8.9,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.9,texinfo_no_detailmenu = False
0.8.9,-- Options for Epub output ----------------------------------------------
0.8.9,Bibliographic Dublin Core info.
0.8.9,The basename for the epub file. It defaults to the project name.
0.8.9,epub_basename = project
0.8.9,The HTML theme for the epub output. Since the default themes are not
0.8.9,"optimized for small screen space, using the same theme for HTML and epub"
0.8.9,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.9,visual space.
0.8.9,epub_theme = 'epub'
0.8.9,The language of the text. It defaults to the language option
0.8.9,or 'en' if the language is not set.
0.8.9,epub_language = ''
0.8.9,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.9,epub_scheme = ''
0.8.9,The unique identifier of the text. This can be a ISBN number
0.8.9,or the project homepage.
0.8.9,epub_identifier = ''
0.8.9,A unique identification for the text.
0.8.9,epub_uid = ''
0.8.9,A tuple containing the cover image and cover page html template filenames.
0.8.9,epub_cover = ()
0.8.9,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.9,epub_guide = ()
0.8.9,HTML files that should be inserted before the pages created by sphinx.
0.8.9,The format is a list of tuples containing the path and title.
0.8.9,epub_pre_files = []
0.8.9,HTML files that should be inserted after the pages created by sphinx.
0.8.9,The format is a list of tuples containing the path and title.
0.8.9,epub_post_files = []
0.8.9,A list of files that should not be packed into the epub file.
0.8.9,The depth of the table of contents in toc.ncx.
0.8.9,epub_tocdepth = 3
0.8.9,Allow duplicate toc entries.
0.8.9,epub_tocdup = True
0.8.9,Choose between 'default' and 'includehidden'.
0.8.9,epub_tocscope = 'default'
0.8.9,Fix unsupported image types using the Pillow.
0.8.9,epub_fix_images = False
0.8.9,Scale large images.
0.8.9,epub_max_image_width = 0
0.8.9,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.9,epub_show_urls = 'inline'
0.8.9,"If false, no index is generated."
0.8.9,epub_use_index = True
0.8.8.1,"A little ""fancy"" we select from the flattened array reshape back"
0.8.8.1,(Fortran format to get indexing right) and take the product to do an and
0.8.8.1,then convert back to boolean type.
0.8.8.1,Density sparseness is not well defined if there are no
0.8.8.1,internal edges (as per the referenced paper). However
0.8.8.1,MATLAB code from the original authors simply selects the
0.8.8.1,largest of *all* the edges in the case that there are
0.8.8.1,"no internal edges, so we do the same here"
0.8.8.1,"If there are any internal edges, then subselect them out"
0.8.8.1,If there are no internal edges then we want to take the
0.8.8.1,"max over all the edges that exist in the MST, so we simply"
0.8.8.1,do nothing and return all the edges in the MST.
0.8.8.1,-*- coding: utf-8 -*-
0.8.8.1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.8.1,Steve Astels <sastels@gmail.com>
0.8.8.1,John Healy <jchealy@gmail.com>
0.8.8.1,
0.8.8.1,License: BSD 3 clause
0.8.8.1,Supporting numpy prior to version 1.7 is a little painful ...
0.8.8.1,Make sure y is an inexact type to avoid bad behavior on abs(MIN_INT).
0.8.8.1,"This will cause casting of x later. Also, make sure to allow"
0.8.8.1,"subclasses (e.g., for numpy.ma)."
0.8.8.1,"Because we're using boolean indexing, x & y must be the same"
0.8.8.1,"shape. Ideally, we'd just do x, y = broadcast_arrays(x, y)."
0.8.8.1,"It's in lib.stride_tricks, though, so we can't import it here."
0.8.8.1,Avoid subtraction with infinite/nan values...
0.8.8.1,Check for equality of infinite values...
0.8.8.1,Make NaN == NaN
0.8.8.1,raise TypeError('Sparse distance matrices not yet supported')
0.8.8.1,mst_linkage_core does not generate a full minimal spanning tree
0.8.8.1,If a tree is required then we must build the edges from the information
0.8.8.1,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.8.1,Sort edges of the min_spanning_tree by weight
0.8.8.1,Convert edge list into standard hierarchical clustering format
0.8.8.1,Compute sparse mutual reachability graph
0.8.8.1,Compute the minimum spanning tree for the sparse graph
0.8.8.1,Convert the graph to scipy cluster array format
0.8.8.1,Sort edges of the min_spanning_tree by weight
0.8.8.1,Convert edge list into standard hierarchical clustering format
0.8.8.1,The Cython routines used require contiguous arrays
0.8.8.1,TO DO: Deal with p for minkowski appropriately
0.8.8.1,Get distance to kth nearest neighbour
0.8.8.1,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.8.1,Sort edges of the min_spanning_tree by weight
0.8.8.1,Convert edge list into standard hierarchical clustering format
0.8.8.1,The Cython routines used require contiguous arrays
0.8.8.1,Get distance to kth nearest neighbour
0.8.8.1,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.8.1,Sort edges of the min_spanning_tree by weight
0.8.8.1,Convert edge list into standard hierarchical clustering format
0.8.8.1,Sort edges of the min_spanning_tree by weight
0.8.8.1,Convert edge list into standard hierarchical clustering format
0.8.8.1,Sort edges of the min_spanning_tree by weight
0.8.8.1,Convert edge list into standard hierarchical clustering format
0.8.8.1,Checks input and converts to an nd-array where possible
0.8.8.1,Python 2 and 3 compliant string_type checking
0.8.8.1,We can't do much with sparse matrices ...
0.8.8.1,TO DO: Need heuristic to decide when to go to boruvka;
0.8.8.1,still debugging for now
0.8.8.1,TO DO: Need heuristic to decide when to go to boruvka;
0.8.8.1,still debugging for now
0.8.8.1,Inherits from sklearn
0.8.8.1,"prediction data only applies to the persistent model, so remove"
0.8.8.1,it from the keyword args we pass on the the function
0.8.8.1,-*- coding: utf-8 -*-
0.8.8.1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.8.1,
0.8.8.1,License: BSD 3 clause
0.8.8.1,We want to get the x and y coordinates for the start of each cluster
0.8.8.1,"Initialize the leaves, since we know where they go, the iterate"
0.8.8.1,"through everything from the leaves back, setting coords as we go"
0.8.8.1,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.8.1,bottoms and widths for each rectangle. We can go through each cluster
0.8.8.1,and do this for each in turn.
0.8.8.1,Ensure we don't try to take log of zero
0.8.8.1,Finally we need the horizontal lines that occur at cluster splits.
0.8.8.1,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.8.1,Use PCA to get down to 32 dimension
0.8.8.1,-*- coding: utf-8 -*-
0.8.8.1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.8.1,
0.8.8.1,License: BSD 3 clause
0.8.8.1,The Cython routines used require contiguous arrays
0.8.8.1,The Cython routines used require contiguous arrays
0.8.8.1,We can't do much with sparse matrices ...
0.8.8.1,Need heuristic to decide when to go to boruvka;
0.8.8.1,still debugging for now
0.8.8.1,Need heuristic to decide when to go to boruvka;
0.8.8.1,still debugging for now
0.8.8.1,Support various prediction methods for predicting cluster membership
0.8.8.1,of new or unseen points. There are several ways to interpret how
0.8.8.1,"to do this correctly, so we provide several methods for"
0.8.8.1,the different use cases that may arise.
0.8.8.1,raw_condensed_tree = condensed_tree.to_numpy()
0.8.8.1,New point departs with the old
0.8.8.1,Find appropriate cluster based on lambda of new point
0.8.8.1,Find appropriate cluster based on lambda of new point
0.8.8.1,We need to find where in the tree the new point would go
0.8.8.1,for the purposes of outlier membership approximation
0.8.8.1,import pickle
0.8.8.1,from sklearn.cluster.tests.common import generate_clustered_data
0.8.8.1,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.8.1,"number of clusters, ignoring noise if present"
0.8.8.1,"metric is the function reference, not the string key."
0.8.8.1,"H, y = shuffle(X, y, random_state=7)"
0.8.8.1,import pickle
0.8.8.1,from sklearn.cluster.tests.common import generate_clustered_data
0.8.8.1,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.8.1,"number of clusters, ignoring noise if present"
0.8.8.1,"number of clusters, ignoring noise if present"
0.8.8.1,"H, y = shuffle(X, y, random_state=7)"
0.8.8.1,"metric is the function reference, not the string key."
0.8.8.1,Probably not applicable now #
0.8.8.1,def test_dbscan_sparse():
0.8.8.1,def test_dbscan_balltree():
0.8.8.1,def test_pickle():
0.8.8.1,def test_dbscan_core_samples_toy():
0.8.8.1,def test_boundaries():
0.8.8.1,Generate datasets. We choose the size big enough to see the scalability
0.8.8.1,"of the algorithms, but not too big to avoid too long running times"
0.8.8.1,normalize dataset for easier parameter selection
0.8.8.1,estimate bandwidth for mean shift
0.8.8.1,connectivity matrix for structured Ward
0.8.8.1,make connectivity symmetric
0.8.8.1,create clustering estimators
0.8.8.1,predict cluster memberships
0.8.8.1,plot
0.8.8.1,-*- coding: utf-8 -*-
0.8.8.1,#############################################################################
0.8.8.1,Generate sample data
0.8.8.1,#############################################################################
0.8.8.1,Compute DBSCAN
0.8.8.1,"Number of clusters in labels, ignoring noise if present."
0.8.8.1,#############################################################################
0.8.8.1,Plot result
0.8.8.1,Black removed and is used for noise instead.
0.8.8.1,Black used for noise.
0.8.8.1,Black used for noise.
0.8.8.1,-*- coding: utf-8 -*-
0.8.8.1,
0.8.8.1,"hdbscan documentation build configuration file, created by"
0.8.8.1,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.8.1,
0.8.8.1,This file is execfile()d with the current directory set to its
0.8.8.1,containing dir.
0.8.8.1,
0.8.8.1,Note that not all possible configuration values are present in this
0.8.8.1,autogenerated file.
0.8.8.1,
0.8.8.1,All configuration values have a default; values that are commented out
0.8.8.1,serve to show the default.
0.8.8.1,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.8.1,add these directories to sys.path here. If the directory is relative to the
0.8.8.1,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.8.1,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.8.1,"sys.path.insert(0, os.path.abspath('../'))"
0.8.8.1,-- General configuration ------------------------------------------------
0.8.8.1,"If your documentation needs a minimal Sphinx version, state it here."
0.8.8.1,needs_sphinx = '1.0'
0.8.8.1,"Add any Sphinx extension module names here, as strings. They can be"
0.8.8.1,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.8.1,ones.
0.8.8.1,"'sphinx.ext.napoleon',"
0.8.8.1,'numpy_ext.numpydoc'
0.8.8.1,napoleon_google_docstring = False
0.8.8.1,napoleon_numpy_docstring = True
0.8.8.1,"Add any paths that contain templates here, relative to this directory."
0.8.8.1,The suffix(es) of source filenames.
0.8.8.1,You can specify multiple suffix as a list of string:
0.8.8.1,"source_suffix = ['.rst', '.md']"
0.8.8.1,The encoding of source files.
0.8.8.1,source_encoding = 'utf-8-sig'
0.8.8.1,The master toctree document.
0.8.8.1,General information about the project.
0.8.8.1,"The version info for the project you're documenting, acts as replacement for"
0.8.8.1,"|version| and |release|, also used in various other places throughout the"
0.8.8.1,built documents.
0.8.8.1,
0.8.8.1,The short X.Y version.
0.8.8.1,"The full version, including alpha/beta/rc tags."
0.8.8.1,The language for content autogenerated by Sphinx. Refer to documentation
0.8.8.1,for a list of supported languages.
0.8.8.1,
0.8.8.1,This is also used if you do content translation via gettext catalogs.
0.8.8.1,"Usually you set ""language"" from the command line for these cases."
0.8.8.1,"There are two options for replacing |today|: either, you set today to some"
0.8.8.1,"non-false value, then it is used:"
0.8.8.1,today = ''
0.8.8.1,"Else, today_fmt is used as the format for a strftime call."
0.8.8.1,"today_fmt = '%B %d, %Y'"
0.8.8.1,"List of patterns, relative to source directory, that match files and"
0.8.8.1,directories to ignore when looking for source files.
0.8.8.1,The reST default role (used for this markup: `text`) to use for all
0.8.8.1,documents.
0.8.8.1,default_role = None
0.8.8.1,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.8.1,add_function_parentheses = True
0.8.8.1,"If true, the current module name will be prepended to all description"
0.8.8.1,unit titles (such as .. function::).
0.8.8.1,add_module_names = True
0.8.8.1,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.8.1,output. They are ignored by default.
0.8.8.1,show_authors = False
0.8.8.1,The name of the Pygments (syntax highlighting) style to use.
0.8.8.1,A list of ignored prefixes for module index sorting.
0.8.8.1,modindex_common_prefix = []
0.8.8.1,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.8.1,keep_warnings = False
0.8.8.1,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.8.1,-- Options for HTML output ----------------------------------------------
0.8.8.1,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.8.1,a list of builtin themes.
0.8.8.1,html_theme = 'alabaster'
0.8.8.1,Theme options are theme-specific and customize the look and feel of a theme
0.8.8.1,"further.  For a list of options available for each theme, see the"
0.8.8.1,documentation.
0.8.8.1,html_theme_options = {}
0.8.8.1,"Add any paths that contain custom themes here, relative to this directory."
0.8.8.1,html_theme_path = []
0.8.8.1,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.8.1,"""<project> v<release> documentation""."
0.8.8.1,html_title = None
0.8.8.1,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.8.1,html_short_title = None
0.8.8.1,The name of an image file (relative to this directory) to place at the top
0.8.8.1,of the sidebar.
0.8.8.1,html_logo = None
0.8.8.1,The name of an image file (within the static path) to use as favicon of the
0.8.8.1,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.8.1,pixels large.
0.8.8.1,html_favicon = None
0.8.8.1,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.8.1,"relative to this directory. They are copied after the builtin static files,"
0.8.8.1,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.8.1,Add any extra paths that contain custom files (such as robots.txt or
0.8.8.1,".htaccess) here, relative to this directory. These files are copied"
0.8.8.1,directly to the root of the documentation.
0.8.8.1,html_extra_path = []
0.8.8.1,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.8.1,using the given strftime format.
0.8.8.1,"html_last_updated_fmt = '%b %d, %Y'"
0.8.8.1,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.8.1,typographically correct entities.
0.8.8.1,html_use_smartypants = True
0.8.8.1,"Custom sidebar templates, maps document names to template names."
0.8.8.1,html_sidebars = {}
0.8.8.1,"Additional templates that should be rendered to pages, maps page names to"
0.8.8.1,template names.
0.8.8.1,html_additional_pages = {}
0.8.8.1,"If false, no module index is generated."
0.8.8.1,html_domain_indices = True
0.8.8.1,"If false, no index is generated."
0.8.8.1,html_use_index = True
0.8.8.1,"If true, the index is split into individual pages for each letter."
0.8.8.1,html_split_index = False
0.8.8.1,"If true, links to the reST sources are added to the pages."
0.8.8.1,html_show_sourcelink = True
0.8.8.1,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.8.1,html_show_sphinx = True
0.8.8.1,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.8.1,html_show_copyright = True
0.8.8.1,"If true, an OpenSearch description file will be output, and all pages will"
0.8.8.1,contain a <link> tag referring to it.  The value of this option must be the
0.8.8.1,base URL from which the finished HTML is served.
0.8.8.1,html_use_opensearch = ''
0.8.8.1,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.8.1,html_file_suffix = None
0.8.8.1,Language to be used for generating the HTML full-text search index.
0.8.8.1,Sphinx supports the following languages:
0.8.8.1,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.8.1,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.8.1,html_search_language = 'en'
0.8.8.1,"A dictionary with options for the search language support, empty by default."
0.8.8.1,Now only 'ja' uses this config value
0.8.8.1,html_search_options = {'type': 'default'}
0.8.8.1,The name of a javascript file (relative to the configuration directory) that
0.8.8.1,"implements a search results scorer. If empty, the default will be used."
0.8.8.1,html_search_scorer = 'scorer.js'
0.8.8.1,Output file base name for HTML help builder.
0.8.8.1,-- Options for LaTeX output ---------------------------------------------
0.8.8.1,The paper size ('letterpaper' or 'a4paper').
0.8.8.1,"'papersize': 'letterpaper',"
0.8.8.1,"The font size ('10pt', '11pt' or '12pt')."
0.8.8.1,"'pointsize': '10pt',"
0.8.8.1,Additional stuff for the LaTeX preamble.
0.8.8.1,"'preamble': '',"
0.8.8.1,Latex figure (float) alignment
0.8.8.1,"'figure_align': 'htbp',"
0.8.8.1,Grouping the document tree into LaTeX files. List of tuples
0.8.8.1,"(source start file, target name, title,"
0.8.8.1,"author, documentclass [howto, manual, or own class])."
0.8.8.1,The name of an image file (relative to this directory) to place at the top of
0.8.8.1,the title page.
0.8.8.1,latex_logo = None
0.8.8.1,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.8.1,not chapters.
0.8.8.1,latex_use_parts = False
0.8.8.1,"If true, show page references after internal links."
0.8.8.1,latex_show_pagerefs = False
0.8.8.1,"If true, show URL addresses after external links."
0.8.8.1,latex_show_urls = False
0.8.8.1,Documents to append as an appendix to all manuals.
0.8.8.1,latex_appendices = []
0.8.8.1,"If false, no module index is generated."
0.8.8.1,latex_domain_indices = True
0.8.8.1,-- Options for manual page output ---------------------------------------
0.8.8.1,One entry per manual page. List of tuples
0.8.8.1,"(source start file, name, description, authors, manual section)."
0.8.8.1,"If true, show URL addresses after external links."
0.8.8.1,man_show_urls = False
0.8.8.1,-- Options for Texinfo output -------------------------------------------
0.8.8.1,Grouping the document tree into Texinfo files. List of tuples
0.8.8.1,"(source start file, target name, title, author,"
0.8.8.1,"dir menu entry, description, category)"
0.8.8.1,Documents to append as an appendix to all manuals.
0.8.8.1,texinfo_appendices = []
0.8.8.1,"If false, no module index is generated."
0.8.8.1,texinfo_domain_indices = True
0.8.8.1,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.8.1,texinfo_show_urls = 'footnote'
0.8.8.1,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.8.1,texinfo_no_detailmenu = False
0.8.8.1,-- Options for Epub output ----------------------------------------------
0.8.8.1,Bibliographic Dublin Core info.
0.8.8.1,The basename for the epub file. It defaults to the project name.
0.8.8.1,epub_basename = project
0.8.8.1,The HTML theme for the epub output. Since the default themes are not
0.8.8.1,"optimized for small screen space, using the same theme for HTML and epub"
0.8.8.1,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.8.1,visual space.
0.8.8.1,epub_theme = 'epub'
0.8.8.1,The language of the text. It defaults to the language option
0.8.8.1,or 'en' if the language is not set.
0.8.8.1,epub_language = ''
0.8.8.1,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.8.1,epub_scheme = ''
0.8.8.1,The unique identifier of the text. This can be a ISBN number
0.8.8.1,or the project homepage.
0.8.8.1,epub_identifier = ''
0.8.8.1,A unique identification for the text.
0.8.8.1,epub_uid = ''
0.8.8.1,A tuple containing the cover image and cover page html template filenames.
0.8.8.1,epub_cover = ()
0.8.8.1,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.8.1,epub_guide = ()
0.8.8.1,HTML files that should be inserted before the pages created by sphinx.
0.8.8.1,The format is a list of tuples containing the path and title.
0.8.8.1,epub_pre_files = []
0.8.8.1,HTML files that should be inserted after the pages created by sphinx.
0.8.8.1,The format is a list of tuples containing the path and title.
0.8.8.1,epub_post_files = []
0.8.8.1,A list of files that should not be packed into the epub file.
0.8.8.1,The depth of the table of contents in toc.ncx.
0.8.8.1,epub_tocdepth = 3
0.8.8.1,Allow duplicate toc entries.
0.8.8.1,epub_tocdup = True
0.8.8.1,Choose between 'default' and 'includehidden'.
0.8.8.1,epub_tocscope = 'default'
0.8.8.1,Fix unsupported image types using the Pillow.
0.8.8.1,epub_fix_images = False
0.8.8.1,Scale large images.
0.8.8.1,epub_max_image_width = 0
0.8.8.1,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.8.1,epub_show_urls = 'inline'
0.8.8.1,"If false, no index is generated."
0.8.8.1,epub_use_index = True
0.8.8,"A little ""fancy"" we select from the flattened array reshape back"
0.8.8,(Fortran format to get indexing right) and take the product to do an and
0.8.8,then convert back to boolean type.
0.8.8,Density sparseness is not well defined if there are no
0.8.8,internal edges (as per the referenced paper). However
0.8.8,MATLAB code from the original authors simply selects the
0.8.8,largest of *all* the edges in the case that there are
0.8.8,"no internal edges, so we do the same here"
0.8.8,"If there are any internal edges, then subselect them out"
0.8.8,If there are no internal edges then we want to take the
0.8.8,"max over all the edges that exist in the MST, so we simply"
0.8.8,do nothing and return all the edges in the MST.
0.8.8,-*- coding: utf-8 -*-
0.8.8,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.8,Steve Astels <sastels@gmail.com>
0.8.8,John Healy <jchealy@gmail.com>
0.8.8,
0.8.8,License: BSD 3 clause
0.8.8,Supporting numpy prior to version 1.7 is a little painful ...
0.8.8,Make sure y is an inexact type to avoid bad behavior on abs(MIN_INT).
0.8.8,"This will cause casting of x later. Also, make sure to allow"
0.8.8,"subclasses (e.g., for numpy.ma)."
0.8.8,"Because we're using boolean indexing, x & y must be the same"
0.8.8,"shape. Ideally, we'd just do x, y = broadcast_arrays(x, y)."
0.8.8,"It's in lib.stride_tricks, though, so we can't import it here."
0.8.8,Avoid subtraction with infinite/nan values...
0.8.8,Check for equality of infinite values...
0.8.8,Make NaN == NaN
0.8.8,raise TypeError('Sparse distance matrices not yet supported')
0.8.8,mst_linkage_core does not generate a full minimal spanning tree
0.8.8,If a tree is required then we must build the edges from the information
0.8.8,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.8,Sort edges of the min_spanning_tree by weight
0.8.8,Convert edge list into standard hierarchical clustering format
0.8.8,Compute sparse mutual reachability graph
0.8.8,Compute the minimum spanning tree for the sparse graph
0.8.8,Convert the graph to scipy cluster array format
0.8.8,Sort edges of the min_spanning_tree by weight
0.8.8,Convert edge list into standard hierarchical clustering format
0.8.8,The Cython routines used require contiguous arrays
0.8.8,TO DO: Deal with p for minkowski appropriately
0.8.8,Get distance to kth nearest neighbour
0.8.8,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.8,Sort edges of the min_spanning_tree by weight
0.8.8,Convert edge list into standard hierarchical clustering format
0.8.8,The Cython routines used require contiguous arrays
0.8.8,Get distance to kth nearest neighbour
0.8.8,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.8,Sort edges of the min_spanning_tree by weight
0.8.8,Convert edge list into standard hierarchical clustering format
0.8.8,Sort edges of the min_spanning_tree by weight
0.8.8,Convert edge list into standard hierarchical clustering format
0.8.8,Sort edges of the min_spanning_tree by weight
0.8.8,Convert edge list into standard hierarchical clustering format
0.8.8,Checks input and converts to an nd-array where possible
0.8.8,Python 2 and 3 compliant string_type checking
0.8.8,We can't do much with sparse matrices ...
0.8.8,TO DO: Need heuristic to decide when to go to boruvka;
0.8.8,still debugging for now
0.8.8,TO DO: Need heuristic to decide when to go to boruvka;
0.8.8,still debugging for now
0.8.8,Inherits from sklearn
0.8.8,"prediction data only applies to the persistent model, so remove"
0.8.8,it from the keyword args we pass on the the function
0.8.8,-*- coding: utf-8 -*-
0.8.8,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.8,
0.8.8,License: BSD 3 clause
0.8.8,We want to get the x and y coordinates for the start of each cluster
0.8.8,"Initialize the leaves, since we know where they go, the iterate"
0.8.8,"through everything from the leaves back, setting coords as we go"
0.8.8,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.8,bottoms and widths for each rectangle. We can go through each cluster
0.8.8,and do this for each in turn.
0.8.8,Ensure we don't try to take log of zero
0.8.8,Finally we need the horizontal lines that occur at cluster splits.
0.8.8,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.8,Use PCA to get down to 32 dimension
0.8.8,-*- coding: utf-8 -*-
0.8.8,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.8,
0.8.8,License: BSD 3 clause
0.8.8,The Cython routines used require contiguous arrays
0.8.8,The Cython routines used require contiguous arrays
0.8.8,We can't do much with sparse matrices ...
0.8.8,Need heuristic to decide when to go to boruvka;
0.8.8,still debugging for now
0.8.8,Need heuristic to decide when to go to boruvka;
0.8.8,still debugging for now
0.8.8,Support various prediction methods for predicting cluster membership
0.8.8,of new or unseen points. There are several ways to interpret how
0.8.8,"to do this correctly, so we provide several methods for"
0.8.8,the different use cases that may arise.
0.8.8,raw_condensed_tree = condensed_tree.to_numpy()
0.8.8,New point departs with the old
0.8.8,Find appropriate cluster based on lambda of new point
0.8.8,Find appropriate cluster based on lambda of new point
0.8.8,We need to find where in the tree the new point would go
0.8.8,for the purposes of outlier membership approximation
0.8.8,import pickle
0.8.8,from sklearn.cluster.tests.common import generate_clustered_data
0.8.8,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.8,"number of clusters, ignoring noise if present"
0.8.8,"metric is the function reference, not the string key."
0.8.8,"H, y = shuffle(X, y, random_state=7)"
0.8.8,import pickle
0.8.8,from sklearn.cluster.tests.common import generate_clustered_data
0.8.8,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.8,"number of clusters, ignoring noise if present"
0.8.8,"number of clusters, ignoring noise if present"
0.8.8,"H, y = shuffle(X, y, random_state=7)"
0.8.8,"metric is the function reference, not the string key."
0.8.8,Probably not applicable now #
0.8.8,def test_dbscan_sparse():
0.8.8,def test_dbscan_balltree():
0.8.8,def test_pickle():
0.8.8,def test_dbscan_core_samples_toy():
0.8.8,def test_boundaries():
0.8.8,Generate datasets. We choose the size big enough to see the scalability
0.8.8,"of the algorithms, but not too big to avoid too long running times"
0.8.8,normalize dataset for easier parameter selection
0.8.8,estimate bandwidth for mean shift
0.8.8,connectivity matrix for structured Ward
0.8.8,make connectivity symmetric
0.8.8,create clustering estimators
0.8.8,predict cluster memberships
0.8.8,plot
0.8.8,-*- coding: utf-8 -*-
0.8.8,#############################################################################
0.8.8,Generate sample data
0.8.8,#############################################################################
0.8.8,Compute DBSCAN
0.8.8,"Number of clusters in labels, ignoring noise if present."
0.8.8,#############################################################################
0.8.8,Plot result
0.8.8,Black removed and is used for noise instead.
0.8.8,Black used for noise.
0.8.8,Black used for noise.
0.8.8,-*- coding: utf-8 -*-
0.8.8,
0.8.8,"hdbscan documentation build configuration file, created by"
0.8.8,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.8,
0.8.8,This file is execfile()d with the current directory set to its
0.8.8,containing dir.
0.8.8,
0.8.8,Note that not all possible configuration values are present in this
0.8.8,autogenerated file.
0.8.8,
0.8.8,All configuration values have a default; values that are commented out
0.8.8,serve to show the default.
0.8.8,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.8,add these directories to sys.path here. If the directory is relative to the
0.8.8,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.8,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.8,"sys.path.insert(0, os.path.abspath('../'))"
0.8.8,-- General configuration ------------------------------------------------
0.8.8,"If your documentation needs a minimal Sphinx version, state it here."
0.8.8,needs_sphinx = '1.0'
0.8.8,"Add any Sphinx extension module names here, as strings. They can be"
0.8.8,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.8,ones.
0.8.8,"'sphinx.ext.napoleon',"
0.8.8,'numpy_ext.numpydoc'
0.8.8,napoleon_google_docstring = False
0.8.8,napoleon_numpy_docstring = True
0.8.8,"Add any paths that contain templates here, relative to this directory."
0.8.8,The suffix(es) of source filenames.
0.8.8,You can specify multiple suffix as a list of string:
0.8.8,"source_suffix = ['.rst', '.md']"
0.8.8,The encoding of source files.
0.8.8,source_encoding = 'utf-8-sig'
0.8.8,The master toctree document.
0.8.8,General information about the project.
0.8.8,"The version info for the project you're documenting, acts as replacement for"
0.8.8,"|version| and |release|, also used in various other places throughout the"
0.8.8,built documents.
0.8.8,
0.8.8,The short X.Y version.
0.8.8,"The full version, including alpha/beta/rc tags."
0.8.8,The language for content autogenerated by Sphinx. Refer to documentation
0.8.8,for a list of supported languages.
0.8.8,
0.8.8,This is also used if you do content translation via gettext catalogs.
0.8.8,"Usually you set ""language"" from the command line for these cases."
0.8.8,"There are two options for replacing |today|: either, you set today to some"
0.8.8,"non-false value, then it is used:"
0.8.8,today = ''
0.8.8,"Else, today_fmt is used as the format for a strftime call."
0.8.8,"today_fmt = '%B %d, %Y'"
0.8.8,"List of patterns, relative to source directory, that match files and"
0.8.8,directories to ignore when looking for source files.
0.8.8,The reST default role (used for this markup: `text`) to use for all
0.8.8,documents.
0.8.8,default_role = None
0.8.8,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.8,add_function_parentheses = True
0.8.8,"If true, the current module name will be prepended to all description"
0.8.8,unit titles (such as .. function::).
0.8.8,add_module_names = True
0.8.8,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.8,output. They are ignored by default.
0.8.8,show_authors = False
0.8.8,The name of the Pygments (syntax highlighting) style to use.
0.8.8,A list of ignored prefixes for module index sorting.
0.8.8,modindex_common_prefix = []
0.8.8,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.8,keep_warnings = False
0.8.8,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.8,-- Options for HTML output ----------------------------------------------
0.8.8,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.8,a list of builtin themes.
0.8.8,html_theme = 'alabaster'
0.8.8,Theme options are theme-specific and customize the look and feel of a theme
0.8.8,"further.  For a list of options available for each theme, see the"
0.8.8,documentation.
0.8.8,html_theme_options = {}
0.8.8,"Add any paths that contain custom themes here, relative to this directory."
0.8.8,html_theme_path = []
0.8.8,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.8,"""<project> v<release> documentation""."
0.8.8,html_title = None
0.8.8,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.8,html_short_title = None
0.8.8,The name of an image file (relative to this directory) to place at the top
0.8.8,of the sidebar.
0.8.8,html_logo = None
0.8.8,The name of an image file (within the static path) to use as favicon of the
0.8.8,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.8,pixels large.
0.8.8,html_favicon = None
0.8.8,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.8,"relative to this directory. They are copied after the builtin static files,"
0.8.8,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.8,Add any extra paths that contain custom files (such as robots.txt or
0.8.8,".htaccess) here, relative to this directory. These files are copied"
0.8.8,directly to the root of the documentation.
0.8.8,html_extra_path = []
0.8.8,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.8,using the given strftime format.
0.8.8,"html_last_updated_fmt = '%b %d, %Y'"
0.8.8,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.8,typographically correct entities.
0.8.8,html_use_smartypants = True
0.8.8,"Custom sidebar templates, maps document names to template names."
0.8.8,html_sidebars = {}
0.8.8,"Additional templates that should be rendered to pages, maps page names to"
0.8.8,template names.
0.8.8,html_additional_pages = {}
0.8.8,"If false, no module index is generated."
0.8.8,html_domain_indices = True
0.8.8,"If false, no index is generated."
0.8.8,html_use_index = True
0.8.8,"If true, the index is split into individual pages for each letter."
0.8.8,html_split_index = False
0.8.8,"If true, links to the reST sources are added to the pages."
0.8.8,html_show_sourcelink = True
0.8.8,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.8,html_show_sphinx = True
0.8.8,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.8,html_show_copyright = True
0.8.8,"If true, an OpenSearch description file will be output, and all pages will"
0.8.8,contain a <link> tag referring to it.  The value of this option must be the
0.8.8,base URL from which the finished HTML is served.
0.8.8,html_use_opensearch = ''
0.8.8,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.8,html_file_suffix = None
0.8.8,Language to be used for generating the HTML full-text search index.
0.8.8,Sphinx supports the following languages:
0.8.8,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.8,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.8,html_search_language = 'en'
0.8.8,"A dictionary with options for the search language support, empty by default."
0.8.8,Now only 'ja' uses this config value
0.8.8,html_search_options = {'type': 'default'}
0.8.8,The name of a javascript file (relative to the configuration directory) that
0.8.8,"implements a search results scorer. If empty, the default will be used."
0.8.8,html_search_scorer = 'scorer.js'
0.8.8,Output file base name for HTML help builder.
0.8.8,-- Options for LaTeX output ---------------------------------------------
0.8.8,The paper size ('letterpaper' or 'a4paper').
0.8.8,"'papersize': 'letterpaper',"
0.8.8,"The font size ('10pt', '11pt' or '12pt')."
0.8.8,"'pointsize': '10pt',"
0.8.8,Additional stuff for the LaTeX preamble.
0.8.8,"'preamble': '',"
0.8.8,Latex figure (float) alignment
0.8.8,"'figure_align': 'htbp',"
0.8.8,Grouping the document tree into LaTeX files. List of tuples
0.8.8,"(source start file, target name, title,"
0.8.8,"author, documentclass [howto, manual, or own class])."
0.8.8,The name of an image file (relative to this directory) to place at the top of
0.8.8,the title page.
0.8.8,latex_logo = None
0.8.8,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.8,not chapters.
0.8.8,latex_use_parts = False
0.8.8,"If true, show page references after internal links."
0.8.8,latex_show_pagerefs = False
0.8.8,"If true, show URL addresses after external links."
0.8.8,latex_show_urls = False
0.8.8,Documents to append as an appendix to all manuals.
0.8.8,latex_appendices = []
0.8.8,"If false, no module index is generated."
0.8.8,latex_domain_indices = True
0.8.8,-- Options for manual page output ---------------------------------------
0.8.8,One entry per manual page. List of tuples
0.8.8,"(source start file, name, description, authors, manual section)."
0.8.8,"If true, show URL addresses after external links."
0.8.8,man_show_urls = False
0.8.8,-- Options for Texinfo output -------------------------------------------
0.8.8,Grouping the document tree into Texinfo files. List of tuples
0.8.8,"(source start file, target name, title, author,"
0.8.8,"dir menu entry, description, category)"
0.8.8,Documents to append as an appendix to all manuals.
0.8.8,texinfo_appendices = []
0.8.8,"If false, no module index is generated."
0.8.8,texinfo_domain_indices = True
0.8.8,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.8,texinfo_show_urls = 'footnote'
0.8.8,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.8,texinfo_no_detailmenu = False
0.8.8,-- Options for Epub output ----------------------------------------------
0.8.8,Bibliographic Dublin Core info.
0.8.8,The basename for the epub file. It defaults to the project name.
0.8.8,epub_basename = project
0.8.8,The HTML theme for the epub output. Since the default themes are not
0.8.8,"optimized for small screen space, using the same theme for HTML and epub"
0.8.8,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.8,visual space.
0.8.8,epub_theme = 'epub'
0.8.8,The language of the text. It defaults to the language option
0.8.8,or 'en' if the language is not set.
0.8.8,epub_language = ''
0.8.8,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.8,epub_scheme = ''
0.8.8,The unique identifier of the text. This can be a ISBN number
0.8.8,or the project homepage.
0.8.8,epub_identifier = ''
0.8.8,A unique identification for the text.
0.8.8,epub_uid = ''
0.8.8,A tuple containing the cover image and cover page html template filenames.
0.8.8,epub_cover = ()
0.8.8,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.8,epub_guide = ()
0.8.8,HTML files that should be inserted before the pages created by sphinx.
0.8.8,The format is a list of tuples containing the path and title.
0.8.8,epub_pre_files = []
0.8.8,HTML files that should be inserted after the pages created by sphinx.
0.8.8,The format is a list of tuples containing the path and title.
0.8.8,epub_post_files = []
0.8.8,A list of files that should not be packed into the epub file.
0.8.8,The depth of the table of contents in toc.ncx.
0.8.8,epub_tocdepth = 3
0.8.8,Allow duplicate toc entries.
0.8.8,epub_tocdup = True
0.8.8,Choose between 'default' and 'includehidden'.
0.8.8,epub_tocscope = 'default'
0.8.8,Fix unsupported image types using the Pillow.
0.8.8,epub_fix_images = False
0.8.8,Scale large images.
0.8.8,epub_max_image_width = 0
0.8.8,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.8,epub_show_urls = 'inline'
0.8.8,"If false, no index is generated."
0.8.8,epub_use_index = True
0.8.6,"A little ""fancy"" we select from the flattened array reshape back"
0.8.6,(Fortran format to get indexing right) and take the product to do an and
0.8.6,then convert back to boolean type.
0.8.6,Density sparseness is not well defined if there are no
0.8.6,internal edges (as per the referenced paper). However
0.8.6,MATLAB code from the original authors simply selects the
0.8.6,largest of *all* the edges in the case that there are
0.8.6,"no internal edges, so we do the same here"
0.8.6,"If there are any internal edges, then subselect them out"
0.8.6,If there are no internal edges then we want to take the
0.8.6,"max over all the edges that exist in the MST, so we simply"
0.8.6,do nothing and return all the edges in the MST.
0.8.6,-*- coding: utf-8 -*-
0.8.6,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.6,Steve Astels <sastels@gmail.com>
0.8.6,John Healy <jchealy@gmail.com>
0.8.6,
0.8.6,License: BSD 3 clause
0.8.6,Supporting numpy prior to version 1.7 is a little painful ...
0.8.6,Make sure y is an inexact type to avoid bad behavior on abs(MIN_INT).
0.8.6,"This will cause casting of x later. Also, make sure to allow"
0.8.6,"subclasses (e.g., for numpy.ma)."
0.8.6,"Because we're using boolean indexing, x & y must be the same"
0.8.6,"shape. Ideally, we'd just do x, y = broadcast_arrays(x, y)."
0.8.6,"It's in lib.stride_tricks, though, so we can't import it here."
0.8.6,Avoid subtraction with infinite/nan values...
0.8.6,Check for equality of infinite values...
0.8.6,Make NaN == NaN
0.8.6,raise TypeError('Sparse distance matrices not yet supported')
0.8.6,mst_linkage_core does not generate a full minimal spanning tree
0.8.6,If a tree is required then we must build the edges from the information
0.8.6,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.6,Sort edges of the min_spanning_tree by weight
0.8.6,Convert edge list into standard hierarchical clustering format
0.8.6,Compute sparse mutual reachability graph
0.8.6,Compute the minimum spanning tree for the sparse graph
0.8.6,Convert the graph to scipy cluster array format
0.8.6,Sort edges of the min_spanning_tree by weight
0.8.6,Convert edge list into standard hierarchical clustering format
0.8.6,The Cython routines used require contiguous arrays
0.8.6,TO DO: Deal with p for minkowski appropriately
0.8.6,Get distance to kth nearest neighbour
0.8.6,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.6,Sort edges of the min_spanning_tree by weight
0.8.6,Convert edge list into standard hierarchical clustering format
0.8.6,The Cython routines used require contiguous arrays
0.8.6,Get distance to kth nearest neighbour
0.8.6,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.6,Sort edges of the min_spanning_tree by weight
0.8.6,Convert edge list into standard hierarchical clustering format
0.8.6,Sort edges of the min_spanning_tree by weight
0.8.6,Convert edge list into standard hierarchical clustering format
0.8.6,Sort edges of the min_spanning_tree by weight
0.8.6,Convert edge list into standard hierarchical clustering format
0.8.6,Checks input and converts to an nd-array where possible
0.8.6,Python 2 and 3 compliant string_type checking
0.8.6,We can't do much with sparse matrices ...
0.8.6,TO DO: Need heuristic to decide when to go to boruvka;
0.8.6,still debugging for now
0.8.6,TO DO: Need heuristic to decide when to go to boruvka;
0.8.6,still debugging for now
0.8.6,Inherits from sklearn
0.8.6,-*- coding: utf-8 -*-
0.8.6,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.6,
0.8.6,License: BSD 3 clause
0.8.6,We want to get the x and y coordinates for the start of each cluster
0.8.6,"Initialize the leaves, since we know where they go, the iterate"
0.8.6,"through everything from the leaves back, setting coords as we go"
0.8.6,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.6,bottoms and widths for each rectangle. We can go through each cluster
0.8.6,and do this for each in turn.
0.8.6,Ensure we don't try to take log of zero
0.8.6,Finally we need the horizontal lines that occur at cluster splits.
0.8.6,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.6,Use PCA to get down to 32 dimension
0.8.6,-*- coding: utf-8 -*-
0.8.6,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.6,
0.8.6,License: BSD 3 clause
0.8.6,The Cython routines used require contiguous arrays
0.8.6,The Cython routines used require contiguous arrays
0.8.6,We can't do much with sparse matrices ...
0.8.6,Need heuristic to decide when to go to boruvka;
0.8.6,still debugging for now
0.8.6,Need heuristic to decide when to go to boruvka;
0.8.6,still debugging for now
0.8.6,import pickle
0.8.6,from sklearn.cluster.tests.common import generate_clustered_data
0.8.6,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.6,"number of clusters, ignoring noise if present"
0.8.6,"metric is the function reference, not the string key."
0.8.6,"H, y = shuffle(X, y, random_state=7)"
0.8.6,import pickle
0.8.6,from sklearn.cluster.tests.common import generate_clustered_data
0.8.6,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.6,"number of clusters, ignoring noise if present"
0.8.6,"number of clusters, ignoring noise if present"
0.8.6,"H, y = shuffle(X, y, random_state=7)"
0.8.6,"metric is the function reference, not the string key."
0.8.6,Probably not applicable now #
0.8.6,def test_dbscan_sparse():
0.8.6,def test_dbscan_balltree():
0.8.6,def test_pickle():
0.8.6,def test_dbscan_core_samples_toy():
0.8.6,def test_boundaries():
0.8.6,Generate datasets. We choose the size big enough to see the scalability
0.8.6,"of the algorithms, but not too big to avoid too long running times"
0.8.6,normalize dataset for easier parameter selection
0.8.6,estimate bandwidth for mean shift
0.8.6,connectivity matrix for structured Ward
0.8.6,make connectivity symmetric
0.8.6,create clustering estimators
0.8.6,predict cluster memberships
0.8.6,plot
0.8.6,-*- coding: utf-8 -*-
0.8.6,#############################################################################
0.8.6,Generate sample data
0.8.6,#############################################################################
0.8.6,Compute DBSCAN
0.8.6,"Number of clusters in labels, ignoring noise if present."
0.8.6,#############################################################################
0.8.6,Plot result
0.8.6,Black removed and is used for noise instead.
0.8.6,Black used for noise.
0.8.6,Black used for noise.
0.8.6,-*- coding: utf-8 -*-
0.8.6,
0.8.6,"hdbscan documentation build configuration file, created by"
0.8.6,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.6,
0.8.6,This file is execfile()d with the current directory set to its
0.8.6,containing dir.
0.8.6,
0.8.6,Note that not all possible configuration values are present in this
0.8.6,autogenerated file.
0.8.6,
0.8.6,All configuration values have a default; values that are commented out
0.8.6,serve to show the default.
0.8.6,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.6,add these directories to sys.path here. If the directory is relative to the
0.8.6,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.6,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.6,"sys.path.insert(0, os.path.abspath('../'))"
0.8.6,-- General configuration ------------------------------------------------
0.8.6,"If your documentation needs a minimal Sphinx version, state it here."
0.8.6,needs_sphinx = '1.0'
0.8.6,"Add any Sphinx extension module names here, as strings. They can be"
0.8.6,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.6,ones.
0.8.6,"'sphinx.ext.napoleon',"
0.8.6,'numpy_ext.numpydoc'
0.8.6,napoleon_google_docstring = False
0.8.6,napoleon_numpy_docstring = True
0.8.6,"Add any paths that contain templates here, relative to this directory."
0.8.6,The suffix(es) of source filenames.
0.8.6,You can specify multiple suffix as a list of string:
0.8.6,"source_suffix = ['.rst', '.md']"
0.8.6,The encoding of source files.
0.8.6,source_encoding = 'utf-8-sig'
0.8.6,The master toctree document.
0.8.6,General information about the project.
0.8.6,"The version info for the project you're documenting, acts as replacement for"
0.8.6,"|version| and |release|, also used in various other places throughout the"
0.8.6,built documents.
0.8.6,
0.8.6,The short X.Y version.
0.8.6,"The full version, including alpha/beta/rc tags."
0.8.6,The language for content autogenerated by Sphinx. Refer to documentation
0.8.6,for a list of supported languages.
0.8.6,
0.8.6,This is also used if you do content translation via gettext catalogs.
0.8.6,"Usually you set ""language"" from the command line for these cases."
0.8.6,"There are two options for replacing |today|: either, you set today to some"
0.8.6,"non-false value, then it is used:"
0.8.6,today = ''
0.8.6,"Else, today_fmt is used as the format for a strftime call."
0.8.6,"today_fmt = '%B %d, %Y'"
0.8.6,"List of patterns, relative to source directory, that match files and"
0.8.6,directories to ignore when looking for source files.
0.8.6,The reST default role (used for this markup: `text`) to use for all
0.8.6,documents.
0.8.6,default_role = None
0.8.6,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.6,add_function_parentheses = True
0.8.6,"If true, the current module name will be prepended to all description"
0.8.6,unit titles (such as .. function::).
0.8.6,add_module_names = True
0.8.6,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.6,output. They are ignored by default.
0.8.6,show_authors = False
0.8.6,The name of the Pygments (syntax highlighting) style to use.
0.8.6,A list of ignored prefixes for module index sorting.
0.8.6,modindex_common_prefix = []
0.8.6,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.6,keep_warnings = False
0.8.6,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.6,-- Options for HTML output ----------------------------------------------
0.8.6,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.6,a list of builtin themes.
0.8.6,html_theme = 'alabaster'
0.8.6,Theme options are theme-specific and customize the look and feel of a theme
0.8.6,"further.  For a list of options available for each theme, see the"
0.8.6,documentation.
0.8.6,html_theme_options = {}
0.8.6,"Add any paths that contain custom themes here, relative to this directory."
0.8.6,html_theme_path = []
0.8.6,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.6,"""<project> v<release> documentation""."
0.8.6,html_title = None
0.8.6,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.6,html_short_title = None
0.8.6,The name of an image file (relative to this directory) to place at the top
0.8.6,of the sidebar.
0.8.6,html_logo = None
0.8.6,The name of an image file (within the static path) to use as favicon of the
0.8.6,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.6,pixels large.
0.8.6,html_favicon = None
0.8.6,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.6,"relative to this directory. They are copied after the builtin static files,"
0.8.6,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.6,Add any extra paths that contain custom files (such as robots.txt or
0.8.6,".htaccess) here, relative to this directory. These files are copied"
0.8.6,directly to the root of the documentation.
0.8.6,html_extra_path = []
0.8.6,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.6,using the given strftime format.
0.8.6,"html_last_updated_fmt = '%b %d, %Y'"
0.8.6,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.6,typographically correct entities.
0.8.6,html_use_smartypants = True
0.8.6,"Custom sidebar templates, maps document names to template names."
0.8.6,html_sidebars = {}
0.8.6,"Additional templates that should be rendered to pages, maps page names to"
0.8.6,template names.
0.8.6,html_additional_pages = {}
0.8.6,"If false, no module index is generated."
0.8.6,html_domain_indices = True
0.8.6,"If false, no index is generated."
0.8.6,html_use_index = True
0.8.6,"If true, the index is split into individual pages for each letter."
0.8.6,html_split_index = False
0.8.6,"If true, links to the reST sources are added to the pages."
0.8.6,html_show_sourcelink = True
0.8.6,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.6,html_show_sphinx = True
0.8.6,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.6,html_show_copyright = True
0.8.6,"If true, an OpenSearch description file will be output, and all pages will"
0.8.6,contain a <link> tag referring to it.  The value of this option must be the
0.8.6,base URL from which the finished HTML is served.
0.8.6,html_use_opensearch = ''
0.8.6,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.6,html_file_suffix = None
0.8.6,Language to be used for generating the HTML full-text search index.
0.8.6,Sphinx supports the following languages:
0.8.6,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.6,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.6,html_search_language = 'en'
0.8.6,"A dictionary with options for the search language support, empty by default."
0.8.6,Now only 'ja' uses this config value
0.8.6,html_search_options = {'type': 'default'}
0.8.6,The name of a javascript file (relative to the configuration directory) that
0.8.6,"implements a search results scorer. If empty, the default will be used."
0.8.6,html_search_scorer = 'scorer.js'
0.8.6,Output file base name for HTML help builder.
0.8.6,-- Options for LaTeX output ---------------------------------------------
0.8.6,The paper size ('letterpaper' or 'a4paper').
0.8.6,"'papersize': 'letterpaper',"
0.8.6,"The font size ('10pt', '11pt' or '12pt')."
0.8.6,"'pointsize': '10pt',"
0.8.6,Additional stuff for the LaTeX preamble.
0.8.6,"'preamble': '',"
0.8.6,Latex figure (float) alignment
0.8.6,"'figure_align': 'htbp',"
0.8.6,Grouping the document tree into LaTeX files. List of tuples
0.8.6,"(source start file, target name, title,"
0.8.6,"author, documentclass [howto, manual, or own class])."
0.8.6,The name of an image file (relative to this directory) to place at the top of
0.8.6,the title page.
0.8.6,latex_logo = None
0.8.6,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.6,not chapters.
0.8.6,latex_use_parts = False
0.8.6,"If true, show page references after internal links."
0.8.6,latex_show_pagerefs = False
0.8.6,"If true, show URL addresses after external links."
0.8.6,latex_show_urls = False
0.8.6,Documents to append as an appendix to all manuals.
0.8.6,latex_appendices = []
0.8.6,"If false, no module index is generated."
0.8.6,latex_domain_indices = True
0.8.6,-- Options for manual page output ---------------------------------------
0.8.6,One entry per manual page. List of tuples
0.8.6,"(source start file, name, description, authors, manual section)."
0.8.6,"If true, show URL addresses after external links."
0.8.6,man_show_urls = False
0.8.6,-- Options for Texinfo output -------------------------------------------
0.8.6,Grouping the document tree into Texinfo files. List of tuples
0.8.6,"(source start file, target name, title, author,"
0.8.6,"dir menu entry, description, category)"
0.8.6,Documents to append as an appendix to all manuals.
0.8.6,texinfo_appendices = []
0.8.6,"If false, no module index is generated."
0.8.6,texinfo_domain_indices = True
0.8.6,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.6,texinfo_show_urls = 'footnote'
0.8.6,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.6,texinfo_no_detailmenu = False
0.8.6,-- Options for Epub output ----------------------------------------------
0.8.6,Bibliographic Dublin Core info.
0.8.6,The basename for the epub file. It defaults to the project name.
0.8.6,epub_basename = project
0.8.6,The HTML theme for the epub output. Since the default themes are not
0.8.6,"optimized for small screen space, using the same theme for HTML and epub"
0.8.6,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.6,visual space.
0.8.6,epub_theme = 'epub'
0.8.6,The language of the text. It defaults to the language option
0.8.6,or 'en' if the language is not set.
0.8.6,epub_language = ''
0.8.6,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.6,epub_scheme = ''
0.8.6,The unique identifier of the text. This can be a ISBN number
0.8.6,or the project homepage.
0.8.6,epub_identifier = ''
0.8.6,A unique identification for the text.
0.8.6,epub_uid = ''
0.8.6,A tuple containing the cover image and cover page html template filenames.
0.8.6,epub_cover = ()
0.8.6,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.6,epub_guide = ()
0.8.6,HTML files that should be inserted before the pages created by sphinx.
0.8.6,The format is a list of tuples containing the path and title.
0.8.6,epub_pre_files = []
0.8.6,HTML files that should be inserted after the pages created by sphinx.
0.8.6,The format is a list of tuples containing the path and title.
0.8.6,epub_post_files = []
0.8.6,A list of files that should not be packed into the epub file.
0.8.6,The depth of the table of contents in toc.ncx.
0.8.6,epub_tocdepth = 3
0.8.6,Allow duplicate toc entries.
0.8.6,epub_tocdup = True
0.8.6,Choose between 'default' and 'includehidden'.
0.8.6,epub_tocscope = 'default'
0.8.6,Fix unsupported image types using the Pillow.
0.8.6,epub_fix_images = False
0.8.6,Scale large images.
0.8.6,epub_max_image_width = 0
0.8.6,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.6,epub_show_urls = 'inline'
0.8.6,"If false, no index is generated."
0.8.6,epub_use_index = True
0.8.5,"A little ""fancy"" we select from the flattened array reshape back"
0.8.5,(Fortran format to get indexing right) and take the product to do an and
0.8.5,then convert back to boolean type.
0.8.5,Density sparseness is not well defined if there are no
0.8.5,internal edges (as per the referenced paper). However
0.8.5,MATLAB code from the original authors simply selects the
0.8.5,largest of *all* the edges in the case that there are
0.8.5,"no internal edges, so we do the same here"
0.8.5,"If there are any internal edges, then subselect them out"
0.8.5,If there are no internal edges then we want to take the
0.8.5,"max over all the edges that exist in the MST, so we simply"
0.8.5,do nothing and return all the edges in the MST.
0.8.5,-*- coding: utf-8 -*-
0.8.5,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.5,Steve Astels <sastels@gmail.com>
0.8.5,John Healy <jchealy@gmail.com>
0.8.5,
0.8.5,License: BSD 3 clause
0.8.5,Supporting numpy prior to version 1.7 is a little painful ...
0.8.5,Make sure y is an inexact type to avoid bad behavior on abs(MIN_INT).
0.8.5,"This will cause casting of x later. Also, make sure to allow"
0.8.5,"subclasses (e.g., for numpy.ma)."
0.8.5,"Because we're using boolean indexing, x & y must be the same"
0.8.5,"shape. Ideally, we'd just do x, y = broadcast_arrays(x, y)."
0.8.5,"It's in lib.stride_tricks, though, so we can't import it here."
0.8.5,Avoid subtraction with infinite/nan values...
0.8.5,Check for equality of infinite values...
0.8.5,Make NaN == NaN
0.8.5,raise TypeError('Sparse distance matrices not yet supported')
0.8.5,mst_linkage_core does not generate a full minimal spanning tree
0.8.5,If a tree is required then we must build the edges from the information
0.8.5,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.5,Sort edges of the min_spanning_tree by weight
0.8.5,Convert edge list into standard hierarchical clustering format
0.8.5,Compute sparse mutual reachability graph
0.8.5,Compute the minimum spanning tree for the sparse graph
0.8.5,Convert the graph to scipy cluster array format
0.8.5,Sort edges of the min_spanning_tree by weight
0.8.5,Convert edge list into standard hierarchical clustering format
0.8.5,The Cython routines used require contiguous arrays
0.8.5,TO DO: Deal with p for minkowski appropriately
0.8.5,Get distance to kth nearest neighbour
0.8.5,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.5,Sort edges of the min_spanning_tree by weight
0.8.5,Convert edge list into standard hierarchical clustering format
0.8.5,The Cython routines used require contiguous arrays
0.8.5,Get distance to kth nearest neighbour
0.8.5,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.5,Sort edges of the min_spanning_tree by weight
0.8.5,Convert edge list into standard hierarchical clustering format
0.8.5,Sort edges of the min_spanning_tree by weight
0.8.5,Convert edge list into standard hierarchical clustering format
0.8.5,Sort edges of the min_spanning_tree by weight
0.8.5,Convert edge list into standard hierarchical clustering format
0.8.5,Checks input and converts to an nd-array where possible
0.8.5,Python 2 and 3 compliant string_type checking
0.8.5,We can't do much with sparse matrices ...
0.8.5,TO DO: Need heuristic to decide when to go to boruvka;
0.8.5,still debugging for now
0.8.5,TO DO: Need heuristic to decide when to go to boruvka;
0.8.5,still debugging for now
0.8.5,Inherits from sklearn
0.8.5,-*- coding: utf-8 -*-
0.8.5,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.5,
0.8.5,License: BSD 3 clause
0.8.5,We want to get the x and y coordinates for the start of each cluster
0.8.5,"Initialize the leaves, since we know where they go, the iterate"
0.8.5,"through everything from the leaves back, setting coords as we go"
0.8.5,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.5,bottoms and widths for each rectangle. We can go through each cluster
0.8.5,and do this for each in turn.
0.8.5,Ensure we don't try to take log of zero
0.8.5,Finally we need the horizontal lines that occur at cluster splits.
0.8.5,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.5,Use PCA to get down to 32 dimension
0.8.5,-*- coding: utf-8 -*-
0.8.5,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.5,
0.8.5,License: BSD 3 clause
0.8.5,The Cython routines used require contiguous arrays
0.8.5,The Cython routines used require contiguous arrays
0.8.5,We can't do much with sparse matrices ...
0.8.5,Need heuristic to decide when to go to boruvka;
0.8.5,still debugging for now
0.8.5,Need heuristic to decide when to go to boruvka;
0.8.5,still debugging for now
0.8.5,import pickle
0.8.5,from sklearn.cluster.tests.common import generate_clustered_data
0.8.5,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.5,"number of clusters, ignoring noise if present"
0.8.5,"metric is the function reference, not the string key."
0.8.5,"H, y = shuffle(X, y, random_state=7)"
0.8.5,import pickle
0.8.5,from sklearn.cluster.tests.common import generate_clustered_data
0.8.5,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.5,"number of clusters, ignoring noise if present"
0.8.5,"number of clusters, ignoring noise if present"
0.8.5,"H, y = shuffle(X, y, random_state=7)"
0.8.5,"metric is the function reference, not the string key."
0.8.5,Probably not applicable now #
0.8.5,def test_dbscan_sparse():
0.8.5,def test_dbscan_balltree():
0.8.5,def test_pickle():
0.8.5,def test_dbscan_core_samples_toy():
0.8.5,def test_boundaries():
0.8.5,Generate datasets. We choose the size big enough to see the scalability
0.8.5,"of the algorithms, but not too big to avoid too long running times"
0.8.5,normalize dataset for easier parameter selection
0.8.5,estimate bandwidth for mean shift
0.8.5,connectivity matrix for structured Ward
0.8.5,make connectivity symmetric
0.8.5,create clustering estimators
0.8.5,predict cluster memberships
0.8.5,plot
0.8.5,-*- coding: utf-8 -*-
0.8.5,#############################################################################
0.8.5,Generate sample data
0.8.5,#############################################################################
0.8.5,Compute DBSCAN
0.8.5,"Number of clusters in labels, ignoring noise if present."
0.8.5,#############################################################################
0.8.5,Plot result
0.8.5,Black removed and is used for noise instead.
0.8.5,Black used for noise.
0.8.5,Black used for noise.
0.8.5,-*- coding: utf-8 -*-
0.8.5,
0.8.5,"hdbscan documentation build configuration file, created by"
0.8.5,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.5,
0.8.5,This file is execfile()d with the current directory set to its
0.8.5,containing dir.
0.8.5,
0.8.5,Note that not all possible configuration values are present in this
0.8.5,autogenerated file.
0.8.5,
0.8.5,All configuration values have a default; values that are commented out
0.8.5,serve to show the default.
0.8.5,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.5,add these directories to sys.path here. If the directory is relative to the
0.8.5,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.5,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.5,"sys.path.insert(0, os.path.abspath('../'))"
0.8.5,-- General configuration ------------------------------------------------
0.8.5,"If your documentation needs a minimal Sphinx version, state it here."
0.8.5,needs_sphinx = '1.0'
0.8.5,"Add any Sphinx extension module names here, as strings. They can be"
0.8.5,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.5,ones.
0.8.5,"'sphinx.ext.napoleon',"
0.8.5,'numpy_ext.numpydoc'
0.8.5,napoleon_google_docstring = False
0.8.5,napoleon_numpy_docstring = True
0.8.5,"Add any paths that contain templates here, relative to this directory."
0.8.5,The suffix(es) of source filenames.
0.8.5,You can specify multiple suffix as a list of string:
0.8.5,"source_suffix = ['.rst', '.md']"
0.8.5,The encoding of source files.
0.8.5,source_encoding = 'utf-8-sig'
0.8.5,The master toctree document.
0.8.5,General information about the project.
0.8.5,"The version info for the project you're documenting, acts as replacement for"
0.8.5,"|version| and |release|, also used in various other places throughout the"
0.8.5,built documents.
0.8.5,
0.8.5,The short X.Y version.
0.8.5,"The full version, including alpha/beta/rc tags."
0.8.5,The language for content autogenerated by Sphinx. Refer to documentation
0.8.5,for a list of supported languages.
0.8.5,
0.8.5,This is also used if you do content translation via gettext catalogs.
0.8.5,"Usually you set ""language"" from the command line for these cases."
0.8.5,"There are two options for replacing |today|: either, you set today to some"
0.8.5,"non-false value, then it is used:"
0.8.5,today = ''
0.8.5,"Else, today_fmt is used as the format for a strftime call."
0.8.5,"today_fmt = '%B %d, %Y'"
0.8.5,"List of patterns, relative to source directory, that match files and"
0.8.5,directories to ignore when looking for source files.
0.8.5,The reST default role (used for this markup: `text`) to use for all
0.8.5,documents.
0.8.5,default_role = None
0.8.5,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.5,add_function_parentheses = True
0.8.5,"If true, the current module name will be prepended to all description"
0.8.5,unit titles (such as .. function::).
0.8.5,add_module_names = True
0.8.5,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.5,output. They are ignored by default.
0.8.5,show_authors = False
0.8.5,The name of the Pygments (syntax highlighting) style to use.
0.8.5,A list of ignored prefixes for module index sorting.
0.8.5,modindex_common_prefix = []
0.8.5,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.5,keep_warnings = False
0.8.5,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.5,-- Options for HTML output ----------------------------------------------
0.8.5,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.5,a list of builtin themes.
0.8.5,html_theme = 'alabaster'
0.8.5,Theme options are theme-specific and customize the look and feel of a theme
0.8.5,"further.  For a list of options available for each theme, see the"
0.8.5,documentation.
0.8.5,html_theme_options = {}
0.8.5,"Add any paths that contain custom themes here, relative to this directory."
0.8.5,html_theme_path = []
0.8.5,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.5,"""<project> v<release> documentation""."
0.8.5,html_title = None
0.8.5,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.5,html_short_title = None
0.8.5,The name of an image file (relative to this directory) to place at the top
0.8.5,of the sidebar.
0.8.5,html_logo = None
0.8.5,The name of an image file (within the static path) to use as favicon of the
0.8.5,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.5,pixels large.
0.8.5,html_favicon = None
0.8.5,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.5,"relative to this directory. They are copied after the builtin static files,"
0.8.5,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.5,Add any extra paths that contain custom files (such as robots.txt or
0.8.5,".htaccess) here, relative to this directory. These files are copied"
0.8.5,directly to the root of the documentation.
0.8.5,html_extra_path = []
0.8.5,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.5,using the given strftime format.
0.8.5,"html_last_updated_fmt = '%b %d, %Y'"
0.8.5,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.5,typographically correct entities.
0.8.5,html_use_smartypants = True
0.8.5,"Custom sidebar templates, maps document names to template names."
0.8.5,html_sidebars = {}
0.8.5,"Additional templates that should be rendered to pages, maps page names to"
0.8.5,template names.
0.8.5,html_additional_pages = {}
0.8.5,"If false, no module index is generated."
0.8.5,html_domain_indices = True
0.8.5,"If false, no index is generated."
0.8.5,html_use_index = True
0.8.5,"If true, the index is split into individual pages for each letter."
0.8.5,html_split_index = False
0.8.5,"If true, links to the reST sources are added to the pages."
0.8.5,html_show_sourcelink = True
0.8.5,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.5,html_show_sphinx = True
0.8.5,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.5,html_show_copyright = True
0.8.5,"If true, an OpenSearch description file will be output, and all pages will"
0.8.5,contain a <link> tag referring to it.  The value of this option must be the
0.8.5,base URL from which the finished HTML is served.
0.8.5,html_use_opensearch = ''
0.8.5,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.5,html_file_suffix = None
0.8.5,Language to be used for generating the HTML full-text search index.
0.8.5,Sphinx supports the following languages:
0.8.5,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.5,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.5,html_search_language = 'en'
0.8.5,"A dictionary with options for the search language support, empty by default."
0.8.5,Now only 'ja' uses this config value
0.8.5,html_search_options = {'type': 'default'}
0.8.5,The name of a javascript file (relative to the configuration directory) that
0.8.5,"implements a search results scorer. If empty, the default will be used."
0.8.5,html_search_scorer = 'scorer.js'
0.8.5,Output file base name for HTML help builder.
0.8.5,-- Options for LaTeX output ---------------------------------------------
0.8.5,The paper size ('letterpaper' or 'a4paper').
0.8.5,"'papersize': 'letterpaper',"
0.8.5,"The font size ('10pt', '11pt' or '12pt')."
0.8.5,"'pointsize': '10pt',"
0.8.5,Additional stuff for the LaTeX preamble.
0.8.5,"'preamble': '',"
0.8.5,Latex figure (float) alignment
0.8.5,"'figure_align': 'htbp',"
0.8.5,Grouping the document tree into LaTeX files. List of tuples
0.8.5,"(source start file, target name, title,"
0.8.5,"author, documentclass [howto, manual, or own class])."
0.8.5,The name of an image file (relative to this directory) to place at the top of
0.8.5,the title page.
0.8.5,latex_logo = None
0.8.5,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.5,not chapters.
0.8.5,latex_use_parts = False
0.8.5,"If true, show page references after internal links."
0.8.5,latex_show_pagerefs = False
0.8.5,"If true, show URL addresses after external links."
0.8.5,latex_show_urls = False
0.8.5,Documents to append as an appendix to all manuals.
0.8.5,latex_appendices = []
0.8.5,"If false, no module index is generated."
0.8.5,latex_domain_indices = True
0.8.5,-- Options for manual page output ---------------------------------------
0.8.5,One entry per manual page. List of tuples
0.8.5,"(source start file, name, description, authors, manual section)."
0.8.5,"If true, show URL addresses after external links."
0.8.5,man_show_urls = False
0.8.5,-- Options for Texinfo output -------------------------------------------
0.8.5,Grouping the document tree into Texinfo files. List of tuples
0.8.5,"(source start file, target name, title, author,"
0.8.5,"dir menu entry, description, category)"
0.8.5,Documents to append as an appendix to all manuals.
0.8.5,texinfo_appendices = []
0.8.5,"If false, no module index is generated."
0.8.5,texinfo_domain_indices = True
0.8.5,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.5,texinfo_show_urls = 'footnote'
0.8.5,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.5,texinfo_no_detailmenu = False
0.8.5,-- Options for Epub output ----------------------------------------------
0.8.5,Bibliographic Dublin Core info.
0.8.5,The basename for the epub file. It defaults to the project name.
0.8.5,epub_basename = project
0.8.5,The HTML theme for the epub output. Since the default themes are not
0.8.5,"optimized for small screen space, using the same theme for HTML and epub"
0.8.5,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.5,visual space.
0.8.5,epub_theme = 'epub'
0.8.5,The language of the text. It defaults to the language option
0.8.5,or 'en' if the language is not set.
0.8.5,epub_language = ''
0.8.5,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.5,epub_scheme = ''
0.8.5,The unique identifier of the text. This can be a ISBN number
0.8.5,or the project homepage.
0.8.5,epub_identifier = ''
0.8.5,A unique identification for the text.
0.8.5,epub_uid = ''
0.8.5,A tuple containing the cover image and cover page html template filenames.
0.8.5,epub_cover = ()
0.8.5,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.5,epub_guide = ()
0.8.5,HTML files that should be inserted before the pages created by sphinx.
0.8.5,The format is a list of tuples containing the path and title.
0.8.5,epub_pre_files = []
0.8.5,HTML files that should be inserted after the pages created by sphinx.
0.8.5,The format is a list of tuples containing the path and title.
0.8.5,epub_post_files = []
0.8.5,A list of files that should not be packed into the epub file.
0.8.5,The depth of the table of contents in toc.ncx.
0.8.5,epub_tocdepth = 3
0.8.5,Allow duplicate toc entries.
0.8.5,epub_tocdup = True
0.8.5,Choose between 'default' and 'includehidden'.
0.8.5,epub_tocscope = 'default'
0.8.5,Fix unsupported image types using the Pillow.
0.8.5,epub_fix_images = False
0.8.5,Scale large images.
0.8.5,epub_max_image_width = 0
0.8.5,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.5,epub_show_urls = 'inline'
0.8.5,"If false, no index is generated."
0.8.5,epub_use_index = True
0.8.4,"A little ""fancy"" we select from the flattened array reshape back"
0.8.4,(Fortran format to get indexing right) and take the product to do an and
0.8.4,then convert back to boolean type.
0.8.4,Density sparseness is not well defined if there are no
0.8.4,internal edges (as per the referenced paper). However
0.8.4,MATLAB code from the original authors simply selects the
0.8.4,largest of *all* the edges in the case that there are
0.8.4,"no internal edges, so we do the same here"
0.8.4,"If there are any internal edges, then subselect them out"
0.8.4,If there are no internal edges then we want to take the
0.8.4,"max over all the edges that exist in the MST, so we simply"
0.8.4,do nothing and return all the edges in the MST.
0.8.4,-*- coding: utf-8 -*-
0.8.4,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.4,Steve Astels <sastels@gmail.com>
0.8.4,John Healy <jchealy@gmail.com>
0.8.4,
0.8.4,License: BSD 3 clause
0.8.4,Supporting numpy prior to version 1.7 is a little painful ...
0.8.4,Make sure y is an inexact type to avoid bad behavior on abs(MIN_INT).
0.8.4,"This will cause casting of x later. Also, make sure to allow"
0.8.4,"subclasses (e.g., for numpy.ma)."
0.8.4,"Because we're using boolean indexing, x & y must be the same"
0.8.4,"shape. Ideally, we'd just do x, y = broadcast_arrays(x, y)."
0.8.4,"It's in lib.stride_tricks, though, so we can't import it here."
0.8.4,Avoid subtraction with infinite/nan values...
0.8.4,Check for equality of infinite values...
0.8.4,Make NaN == NaN
0.8.4,raise TypeError('Sparse distance matrices not yet supported')
0.8.4,mst_linkage_core does not generate a full minimal spanning tree
0.8.4,If a tree is required then we must build the edges from the information
0.8.4,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.4,Sort edges of the min_spanning_tree by weight
0.8.4,Convert edge list into standard hierarchical clustering format
0.8.4,Compute sparse mutual reachability graph
0.8.4,Compute the minimum spanning tree for the sparse graph
0.8.4,Convert the graph to scipy cluster array format
0.8.4,Sort edges of the min_spanning_tree by weight
0.8.4,Convert edge list into standard hierarchical clustering format
0.8.4,The Cython routines used require contiguous arrays
0.8.4,TO DO: Deal with p for minkowski appropriately
0.8.4,Get distance to kth nearest neighbour
0.8.4,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.4,Sort edges of the min_spanning_tree by weight
0.8.4,Convert edge list into standard hierarchical clustering format
0.8.4,The Cython routines used require contiguous arrays
0.8.4,Get distance to kth nearest neighbour
0.8.4,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.4,Sort edges of the min_spanning_tree by weight
0.8.4,Convert edge list into standard hierarchical clustering format
0.8.4,Sort edges of the min_spanning_tree by weight
0.8.4,Convert edge list into standard hierarchical clustering format
0.8.4,Sort edges of the min_spanning_tree by weight
0.8.4,Convert edge list into standard hierarchical clustering format
0.8.4,Checks input and converts to an nd-array where possible
0.8.4,Python 2 and 3 compliant string_type checking
0.8.4,We can't do much with sparse matrices ...
0.8.4,TO DO: Need heuristic to decide when to go to boruvka;
0.8.4,still debugging for now
0.8.4,TO DO: Need heuristic to decide when to go to boruvka;
0.8.4,still debugging for now
0.8.4,Inherits from sklearn
0.8.4,-*- coding: utf-8 -*-
0.8.4,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.4,
0.8.4,License: BSD 3 clause
0.8.4,We want to get the x and y coordinates for the start of each cluster
0.8.4,"Initialize the leaves, since we know where they go, the iterate"
0.8.4,"through everything from the leaves back, setting coords as we go"
0.8.4,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.4,bottoms and widths for each rectangle. We can go through each cluster
0.8.4,and do this for each in turn.
0.8.4,Ensure we don't try to take log of zero
0.8.4,Finally we need the horizontal lines that occur at cluster splits.
0.8.4,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.4,Use PCA to get down to 32 dimension
0.8.4,-*- coding: utf-8 -*-
0.8.4,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.4,
0.8.4,License: BSD 3 clause
0.8.4,The Cython routines used require contiguous arrays
0.8.4,The Cython routines used require contiguous arrays
0.8.4,We can't do much with sparse matrices ...
0.8.4,Need heuristic to decide when to go to boruvka;
0.8.4,still debugging for now
0.8.4,Need heuristic to decide when to go to boruvka;
0.8.4,still debugging for now
0.8.4,import pickle
0.8.4,from sklearn.cluster.tests.common import generate_clustered_data
0.8.4,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.4,"number of clusters, ignoring noise if present"
0.8.4,"metric is the function reference, not the string key."
0.8.4,"H, y = shuffle(X, y, random_state=7)"
0.8.4,import pickle
0.8.4,from sklearn.cluster.tests.common import generate_clustered_data
0.8.4,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.4,"number of clusters, ignoring noise if present"
0.8.4,"number of clusters, ignoring noise if present"
0.8.4,"H, y = shuffle(X, y, random_state=7)"
0.8.4,"metric is the function reference, not the string key."
0.8.4,Probably not applicable now #
0.8.4,def test_dbscan_sparse():
0.8.4,def test_dbscan_balltree():
0.8.4,def test_pickle():
0.8.4,def test_dbscan_core_samples_toy():
0.8.4,def test_boundaries():
0.8.4,Generate datasets. We choose the size big enough to see the scalability
0.8.4,"of the algorithms, but not too big to avoid too long running times"
0.8.4,normalize dataset for easier parameter selection
0.8.4,estimate bandwidth for mean shift
0.8.4,connectivity matrix for structured Ward
0.8.4,make connectivity symmetric
0.8.4,create clustering estimators
0.8.4,predict cluster memberships
0.8.4,plot
0.8.4,-*- coding: utf-8 -*-
0.8.4,#############################################################################
0.8.4,Generate sample data
0.8.4,#############################################################################
0.8.4,Compute DBSCAN
0.8.4,"Number of clusters in labels, ignoring noise if present."
0.8.4,#############################################################################
0.8.4,Plot result
0.8.4,Black removed and is used for noise instead.
0.8.4,Black used for noise.
0.8.4,Black used for noise.
0.8.4,-*- coding: utf-8 -*-
0.8.4,
0.8.4,"hdbscan documentation build configuration file, created by"
0.8.4,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.4,
0.8.4,This file is execfile()d with the current directory set to its
0.8.4,containing dir.
0.8.4,
0.8.4,Note that not all possible configuration values are present in this
0.8.4,autogenerated file.
0.8.4,
0.8.4,All configuration values have a default; values that are commented out
0.8.4,serve to show the default.
0.8.4,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.4,add these directories to sys.path here. If the directory is relative to the
0.8.4,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.4,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.4,"sys.path.insert(0, os.path.abspath('../'))"
0.8.4,-- General configuration ------------------------------------------------
0.8.4,"If your documentation needs a minimal Sphinx version, state it here."
0.8.4,needs_sphinx = '1.0'
0.8.4,"Add any Sphinx extension module names here, as strings. They can be"
0.8.4,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.4,ones.
0.8.4,"'sphinx.ext.napoleon',"
0.8.4,'numpy_ext.numpydoc'
0.8.4,napoleon_google_docstring = False
0.8.4,napoleon_numpy_docstring = True
0.8.4,"Add any paths that contain templates here, relative to this directory."
0.8.4,The suffix(es) of source filenames.
0.8.4,You can specify multiple suffix as a list of string:
0.8.4,"source_suffix = ['.rst', '.md']"
0.8.4,The encoding of source files.
0.8.4,source_encoding = 'utf-8-sig'
0.8.4,The master toctree document.
0.8.4,General information about the project.
0.8.4,"The version info for the project you're documenting, acts as replacement for"
0.8.4,"|version| and |release|, also used in various other places throughout the"
0.8.4,built documents.
0.8.4,
0.8.4,The short X.Y version.
0.8.4,"The full version, including alpha/beta/rc tags."
0.8.4,The language for content autogenerated by Sphinx. Refer to documentation
0.8.4,for a list of supported languages.
0.8.4,
0.8.4,This is also used if you do content translation via gettext catalogs.
0.8.4,"Usually you set ""language"" from the command line for these cases."
0.8.4,"There are two options for replacing |today|: either, you set today to some"
0.8.4,"non-false value, then it is used:"
0.8.4,today = ''
0.8.4,"Else, today_fmt is used as the format for a strftime call."
0.8.4,"today_fmt = '%B %d, %Y'"
0.8.4,"List of patterns, relative to source directory, that match files and"
0.8.4,directories to ignore when looking for source files.
0.8.4,The reST default role (used for this markup: `text`) to use for all
0.8.4,documents.
0.8.4,default_role = None
0.8.4,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.4,add_function_parentheses = True
0.8.4,"If true, the current module name will be prepended to all description"
0.8.4,unit titles (such as .. function::).
0.8.4,add_module_names = True
0.8.4,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.4,output. They are ignored by default.
0.8.4,show_authors = False
0.8.4,The name of the Pygments (syntax highlighting) style to use.
0.8.4,A list of ignored prefixes for module index sorting.
0.8.4,modindex_common_prefix = []
0.8.4,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.4,keep_warnings = False
0.8.4,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.4,-- Options for HTML output ----------------------------------------------
0.8.4,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.4,a list of builtin themes.
0.8.4,html_theme = 'alabaster'
0.8.4,Theme options are theme-specific and customize the look and feel of a theme
0.8.4,"further.  For a list of options available for each theme, see the"
0.8.4,documentation.
0.8.4,html_theme_options = {}
0.8.4,"Add any paths that contain custom themes here, relative to this directory."
0.8.4,html_theme_path = []
0.8.4,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.4,"""<project> v<release> documentation""."
0.8.4,html_title = None
0.8.4,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.4,html_short_title = None
0.8.4,The name of an image file (relative to this directory) to place at the top
0.8.4,of the sidebar.
0.8.4,html_logo = None
0.8.4,The name of an image file (within the static path) to use as favicon of the
0.8.4,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.4,pixels large.
0.8.4,html_favicon = None
0.8.4,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.4,"relative to this directory. They are copied after the builtin static files,"
0.8.4,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.4,Add any extra paths that contain custom files (such as robots.txt or
0.8.4,".htaccess) here, relative to this directory. These files are copied"
0.8.4,directly to the root of the documentation.
0.8.4,html_extra_path = []
0.8.4,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.4,using the given strftime format.
0.8.4,"html_last_updated_fmt = '%b %d, %Y'"
0.8.4,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.4,typographically correct entities.
0.8.4,html_use_smartypants = True
0.8.4,"Custom sidebar templates, maps document names to template names."
0.8.4,html_sidebars = {}
0.8.4,"Additional templates that should be rendered to pages, maps page names to"
0.8.4,template names.
0.8.4,html_additional_pages = {}
0.8.4,"If false, no module index is generated."
0.8.4,html_domain_indices = True
0.8.4,"If false, no index is generated."
0.8.4,html_use_index = True
0.8.4,"If true, the index is split into individual pages for each letter."
0.8.4,html_split_index = False
0.8.4,"If true, links to the reST sources are added to the pages."
0.8.4,html_show_sourcelink = True
0.8.4,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.4,html_show_sphinx = True
0.8.4,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.4,html_show_copyright = True
0.8.4,"If true, an OpenSearch description file will be output, and all pages will"
0.8.4,contain a <link> tag referring to it.  The value of this option must be the
0.8.4,base URL from which the finished HTML is served.
0.8.4,html_use_opensearch = ''
0.8.4,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.4,html_file_suffix = None
0.8.4,Language to be used for generating the HTML full-text search index.
0.8.4,Sphinx supports the following languages:
0.8.4,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.4,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.4,html_search_language = 'en'
0.8.4,"A dictionary with options for the search language support, empty by default."
0.8.4,Now only 'ja' uses this config value
0.8.4,html_search_options = {'type': 'default'}
0.8.4,The name of a javascript file (relative to the configuration directory) that
0.8.4,"implements a search results scorer. If empty, the default will be used."
0.8.4,html_search_scorer = 'scorer.js'
0.8.4,Output file base name for HTML help builder.
0.8.4,-- Options for LaTeX output ---------------------------------------------
0.8.4,The paper size ('letterpaper' or 'a4paper').
0.8.4,"'papersize': 'letterpaper',"
0.8.4,"The font size ('10pt', '11pt' or '12pt')."
0.8.4,"'pointsize': '10pt',"
0.8.4,Additional stuff for the LaTeX preamble.
0.8.4,"'preamble': '',"
0.8.4,Latex figure (float) alignment
0.8.4,"'figure_align': 'htbp',"
0.8.4,Grouping the document tree into LaTeX files. List of tuples
0.8.4,"(source start file, target name, title,"
0.8.4,"author, documentclass [howto, manual, or own class])."
0.8.4,The name of an image file (relative to this directory) to place at the top of
0.8.4,the title page.
0.8.4,latex_logo = None
0.8.4,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.4,not chapters.
0.8.4,latex_use_parts = False
0.8.4,"If true, show page references after internal links."
0.8.4,latex_show_pagerefs = False
0.8.4,"If true, show URL addresses after external links."
0.8.4,latex_show_urls = False
0.8.4,Documents to append as an appendix to all manuals.
0.8.4,latex_appendices = []
0.8.4,"If false, no module index is generated."
0.8.4,latex_domain_indices = True
0.8.4,-- Options for manual page output ---------------------------------------
0.8.4,One entry per manual page. List of tuples
0.8.4,"(source start file, name, description, authors, manual section)."
0.8.4,"If true, show URL addresses after external links."
0.8.4,man_show_urls = False
0.8.4,-- Options for Texinfo output -------------------------------------------
0.8.4,Grouping the document tree into Texinfo files. List of tuples
0.8.4,"(source start file, target name, title, author,"
0.8.4,"dir menu entry, description, category)"
0.8.4,Documents to append as an appendix to all manuals.
0.8.4,texinfo_appendices = []
0.8.4,"If false, no module index is generated."
0.8.4,texinfo_domain_indices = True
0.8.4,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.4,texinfo_show_urls = 'footnote'
0.8.4,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.4,texinfo_no_detailmenu = False
0.8.4,-- Options for Epub output ----------------------------------------------
0.8.4,Bibliographic Dublin Core info.
0.8.4,The basename for the epub file. It defaults to the project name.
0.8.4,epub_basename = project
0.8.4,The HTML theme for the epub output. Since the default themes are not
0.8.4,"optimized for small screen space, using the same theme for HTML and epub"
0.8.4,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.4,visual space.
0.8.4,epub_theme = 'epub'
0.8.4,The language of the text. It defaults to the language option
0.8.4,or 'en' if the language is not set.
0.8.4,epub_language = ''
0.8.4,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.4,epub_scheme = ''
0.8.4,The unique identifier of the text. This can be a ISBN number
0.8.4,or the project homepage.
0.8.4,epub_identifier = ''
0.8.4,A unique identification for the text.
0.8.4,epub_uid = ''
0.8.4,A tuple containing the cover image and cover page html template filenames.
0.8.4,epub_cover = ()
0.8.4,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.4,epub_guide = ()
0.8.4,HTML files that should be inserted before the pages created by sphinx.
0.8.4,The format is a list of tuples containing the path and title.
0.8.4,epub_pre_files = []
0.8.4,HTML files that should be inserted after the pages created by sphinx.
0.8.4,The format is a list of tuples containing the path and title.
0.8.4,epub_post_files = []
0.8.4,A list of files that should not be packed into the epub file.
0.8.4,The depth of the table of contents in toc.ncx.
0.8.4,epub_tocdepth = 3
0.8.4,Allow duplicate toc entries.
0.8.4,epub_tocdup = True
0.8.4,Choose between 'default' and 'includehidden'.
0.8.4,epub_tocscope = 'default'
0.8.4,Fix unsupported image types using the Pillow.
0.8.4,epub_fix_images = False
0.8.4,Scale large images.
0.8.4,epub_max_image_width = 0
0.8.4,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.4,epub_show_urls = 'inline'
0.8.4,"If false, no index is generated."
0.8.4,epub_use_index = True
0.8.3,-*- coding: utf-8 -*-
0.8.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.3,Steve Astels <sastels@gmail.com>
0.8.3,John Healy <jchealy@gmail.com>
0.8.3,
0.8.3,License: BSD 3 clause
0.8.3,Supporting numpy prior to version 1.7 is a little painful ...
0.8.3,Make sure y is an inexact type to avoid bad behavior on abs(MIN_INT).
0.8.3,"This will cause casting of x later. Also, make sure to allow"
0.8.3,"subclasses (e.g., for numpy.ma)."
0.8.3,"Because we're using boolean indexing, x & y must be the same"
0.8.3,"shape. Ideally, we'd just do x, y = broadcast_arrays(x, y)."
0.8.3,"It's in lib.stride_tricks, though, so we can't import it here."
0.8.3,Avoid subtraction with infinite/nan values...
0.8.3,Check for equality of infinite values...
0.8.3,Make NaN == NaN
0.8.3,raise TypeError('Sparse distance matrices not yet supported')
0.8.3,mst_linkage_core does not generate a full minimal spanning tree
0.8.3,If a tree is required then we must build the edges from the information
0.8.3,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.3,Sort edges of the min_spanning_tree by weight
0.8.3,Convert edge list into standard hierarchical clustering format
0.8.3,Compute sparse mutual reachability graph
0.8.3,Compute the minimum spanning tree for the sparse graph
0.8.3,Convert the graph to scipy cluster array format
0.8.3,Sort edges of the min_spanning_tree by weight
0.8.3,Convert edge list into standard hierarchical clustering format
0.8.3,The Cython routines used require contiguous arrays
0.8.3,TO DO: Deal with p for minkowski appropriately
0.8.3,Get distance to kth nearest neighbour
0.8.3,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.3,Sort edges of the min_spanning_tree by weight
0.8.3,Convert edge list into standard hierarchical clustering format
0.8.3,The Cython routines used require contiguous arrays
0.8.3,Get distance to kth nearest neighbour
0.8.3,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.3,Sort edges of the min_spanning_tree by weight
0.8.3,Convert edge list into standard hierarchical clustering format
0.8.3,Sort edges of the min_spanning_tree by weight
0.8.3,Convert edge list into standard hierarchical clustering format
0.8.3,Sort edges of the min_spanning_tree by weight
0.8.3,Convert edge list into standard hierarchical clustering format
0.8.3,Checks input and converts to an nd-array where possible
0.8.3,Python 2 and 3 compliant string_type checking
0.8.3,We can't do much with sparse matrices ...
0.8.3,TO DO: Need heuristic to decide when to go to boruvka;
0.8.3,still debugging for now
0.8.3,TO DO: Need heuristic to decide when to go to boruvka;
0.8.3,still debugging for now
0.8.3,Inherits from sklearn
0.8.3,-*- coding: utf-8 -*-
0.8.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.3,
0.8.3,License: BSD 3 clause
0.8.3,We want to get the x and y coordinates for the start of each cluster
0.8.3,"Initialize the leaves, since we know where they go, the iterate"
0.8.3,"through everything from the leaves back, setting coords as we go"
0.8.3,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.3,bottoms and widths for each rectangle. We can go through each cluster
0.8.3,and do this for each in turn.
0.8.3,Ensure we don't try to take log of zero
0.8.3,Finally we need the horizontal lines that occur at cluster splits.
0.8.3,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.3,Use PCA to get down to 32 dimension
0.8.3,-*- coding: utf-8 -*-
0.8.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.3,
0.8.3,License: BSD 3 clause
0.8.3,The Cython routines used require contiguous arrays
0.8.3,The Cython routines used require contiguous arrays
0.8.3,We can't do much with sparse matrices ...
0.8.3,Need heuristic to decide when to go to boruvka;
0.8.3,still debugging for now
0.8.3,Need heuristic to decide when to go to boruvka;
0.8.3,still debugging for now
0.8.3,import pickle
0.8.3,from sklearn.cluster.tests.common import generate_clustered_data
0.8.3,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.3,"number of clusters, ignoring noise if present"
0.8.3,"metric is the function reference, not the string key."
0.8.3,"H, y = shuffle(X, y, random_state=7)"
0.8.3,import pickle
0.8.3,from sklearn.cluster.tests.common import generate_clustered_data
0.8.3,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.3,"number of clusters, ignoring noise if present"
0.8.3,"number of clusters, ignoring noise if present"
0.8.3,"H, y = shuffle(X, y, random_state=7)"
0.8.3,"metric is the function reference, not the string key."
0.8.3,Probably not applicable now #
0.8.3,def test_dbscan_sparse():
0.8.3,def test_dbscan_balltree():
0.8.3,def test_pickle():
0.8.3,def test_dbscan_core_samples_toy():
0.8.3,def test_boundaries():
0.8.3,Generate datasets. We choose the size big enough to see the scalability
0.8.3,"of the algorithms, but not too big to avoid too long running times"
0.8.3,normalize dataset for easier parameter selection
0.8.3,estimate bandwidth for mean shift
0.8.3,connectivity matrix for structured Ward
0.8.3,make connectivity symmetric
0.8.3,create clustering estimators
0.8.3,predict cluster memberships
0.8.3,plot
0.8.3,-*- coding: utf-8 -*-
0.8.3,#############################################################################
0.8.3,Generate sample data
0.8.3,#############################################################################
0.8.3,Compute DBSCAN
0.8.3,"Number of clusters in labels, ignoring noise if present."
0.8.3,#############################################################################
0.8.3,Plot result
0.8.3,Black removed and is used for noise instead.
0.8.3,Black used for noise.
0.8.3,Black used for noise.
0.8.3,-*- coding: utf-8 -*-
0.8.3,
0.8.3,"hdbscan documentation build configuration file, created by"
0.8.3,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.3,
0.8.3,This file is execfile()d with the current directory set to its
0.8.3,containing dir.
0.8.3,
0.8.3,Note that not all possible configuration values are present in this
0.8.3,autogenerated file.
0.8.3,
0.8.3,All configuration values have a default; values that are commented out
0.8.3,serve to show the default.
0.8.3,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.3,add these directories to sys.path here. If the directory is relative to the
0.8.3,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.3,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.3,"sys.path.insert(0, os.path.abspath('../'))"
0.8.3,-- General configuration ------------------------------------------------
0.8.3,"If your documentation needs a minimal Sphinx version, state it here."
0.8.3,needs_sphinx = '1.0'
0.8.3,"Add any Sphinx extension module names here, as strings. They can be"
0.8.3,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.3,ones.
0.8.3,"'sphinx.ext.napoleon',"
0.8.3,'numpy_ext.numpydoc'
0.8.3,napoleon_google_docstring = False
0.8.3,napoleon_numpy_docstring = True
0.8.3,"Add any paths that contain templates here, relative to this directory."
0.8.3,The suffix(es) of source filenames.
0.8.3,You can specify multiple suffix as a list of string:
0.8.3,"source_suffix = ['.rst', '.md']"
0.8.3,The encoding of source files.
0.8.3,source_encoding = 'utf-8-sig'
0.8.3,The master toctree document.
0.8.3,General information about the project.
0.8.3,"The version info for the project you're documenting, acts as replacement for"
0.8.3,"|version| and |release|, also used in various other places throughout the"
0.8.3,built documents.
0.8.3,
0.8.3,The short X.Y version.
0.8.3,"The full version, including alpha/beta/rc tags."
0.8.3,The language for content autogenerated by Sphinx. Refer to documentation
0.8.3,for a list of supported languages.
0.8.3,
0.8.3,This is also used if you do content translation via gettext catalogs.
0.8.3,"Usually you set ""language"" from the command line for these cases."
0.8.3,"There are two options for replacing |today|: either, you set today to some"
0.8.3,"non-false value, then it is used:"
0.8.3,today = ''
0.8.3,"Else, today_fmt is used as the format for a strftime call."
0.8.3,"today_fmt = '%B %d, %Y'"
0.8.3,"List of patterns, relative to source directory, that match files and"
0.8.3,directories to ignore when looking for source files.
0.8.3,The reST default role (used for this markup: `text`) to use for all
0.8.3,documents.
0.8.3,default_role = None
0.8.3,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.3,add_function_parentheses = True
0.8.3,"If true, the current module name will be prepended to all description"
0.8.3,unit titles (such as .. function::).
0.8.3,add_module_names = True
0.8.3,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.3,output. They are ignored by default.
0.8.3,show_authors = False
0.8.3,The name of the Pygments (syntax highlighting) style to use.
0.8.3,A list of ignored prefixes for module index sorting.
0.8.3,modindex_common_prefix = []
0.8.3,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.3,keep_warnings = False
0.8.3,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.3,-- Options for HTML output ----------------------------------------------
0.8.3,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.3,a list of builtin themes.
0.8.3,html_theme = 'alabaster'
0.8.3,Theme options are theme-specific and customize the look and feel of a theme
0.8.3,"further.  For a list of options available for each theme, see the"
0.8.3,documentation.
0.8.3,html_theme_options = {}
0.8.3,"Add any paths that contain custom themes here, relative to this directory."
0.8.3,html_theme_path = []
0.8.3,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.3,"""<project> v<release> documentation""."
0.8.3,html_title = None
0.8.3,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.3,html_short_title = None
0.8.3,The name of an image file (relative to this directory) to place at the top
0.8.3,of the sidebar.
0.8.3,html_logo = None
0.8.3,The name of an image file (within the static path) to use as favicon of the
0.8.3,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.3,pixels large.
0.8.3,html_favicon = None
0.8.3,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.3,"relative to this directory. They are copied after the builtin static files,"
0.8.3,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.3,Add any extra paths that contain custom files (such as robots.txt or
0.8.3,".htaccess) here, relative to this directory. These files are copied"
0.8.3,directly to the root of the documentation.
0.8.3,html_extra_path = []
0.8.3,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.3,using the given strftime format.
0.8.3,"html_last_updated_fmt = '%b %d, %Y'"
0.8.3,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.3,typographically correct entities.
0.8.3,html_use_smartypants = True
0.8.3,"Custom sidebar templates, maps document names to template names."
0.8.3,html_sidebars = {}
0.8.3,"Additional templates that should be rendered to pages, maps page names to"
0.8.3,template names.
0.8.3,html_additional_pages = {}
0.8.3,"If false, no module index is generated."
0.8.3,html_domain_indices = True
0.8.3,"If false, no index is generated."
0.8.3,html_use_index = True
0.8.3,"If true, the index is split into individual pages for each letter."
0.8.3,html_split_index = False
0.8.3,"If true, links to the reST sources are added to the pages."
0.8.3,html_show_sourcelink = True
0.8.3,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.3,html_show_sphinx = True
0.8.3,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.3,html_show_copyright = True
0.8.3,"If true, an OpenSearch description file will be output, and all pages will"
0.8.3,contain a <link> tag referring to it.  The value of this option must be the
0.8.3,base URL from which the finished HTML is served.
0.8.3,html_use_opensearch = ''
0.8.3,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.3,html_file_suffix = None
0.8.3,Language to be used for generating the HTML full-text search index.
0.8.3,Sphinx supports the following languages:
0.8.3,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.3,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.3,html_search_language = 'en'
0.8.3,"A dictionary with options for the search language support, empty by default."
0.8.3,Now only 'ja' uses this config value
0.8.3,html_search_options = {'type': 'default'}
0.8.3,The name of a javascript file (relative to the configuration directory) that
0.8.3,"implements a search results scorer. If empty, the default will be used."
0.8.3,html_search_scorer = 'scorer.js'
0.8.3,Output file base name for HTML help builder.
0.8.3,-- Options for LaTeX output ---------------------------------------------
0.8.3,The paper size ('letterpaper' or 'a4paper').
0.8.3,"'papersize': 'letterpaper',"
0.8.3,"The font size ('10pt', '11pt' or '12pt')."
0.8.3,"'pointsize': '10pt',"
0.8.3,Additional stuff for the LaTeX preamble.
0.8.3,"'preamble': '',"
0.8.3,Latex figure (float) alignment
0.8.3,"'figure_align': 'htbp',"
0.8.3,Grouping the document tree into LaTeX files. List of tuples
0.8.3,"(source start file, target name, title,"
0.8.3,"author, documentclass [howto, manual, or own class])."
0.8.3,The name of an image file (relative to this directory) to place at the top of
0.8.3,the title page.
0.8.3,latex_logo = None
0.8.3,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.3,not chapters.
0.8.3,latex_use_parts = False
0.8.3,"If true, show page references after internal links."
0.8.3,latex_show_pagerefs = False
0.8.3,"If true, show URL addresses after external links."
0.8.3,latex_show_urls = False
0.8.3,Documents to append as an appendix to all manuals.
0.8.3,latex_appendices = []
0.8.3,"If false, no module index is generated."
0.8.3,latex_domain_indices = True
0.8.3,-- Options for manual page output ---------------------------------------
0.8.3,One entry per manual page. List of tuples
0.8.3,"(source start file, name, description, authors, manual section)."
0.8.3,"If true, show URL addresses after external links."
0.8.3,man_show_urls = False
0.8.3,-- Options for Texinfo output -------------------------------------------
0.8.3,Grouping the document tree into Texinfo files. List of tuples
0.8.3,"(source start file, target name, title, author,"
0.8.3,"dir menu entry, description, category)"
0.8.3,Documents to append as an appendix to all manuals.
0.8.3,texinfo_appendices = []
0.8.3,"If false, no module index is generated."
0.8.3,texinfo_domain_indices = True
0.8.3,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.3,texinfo_show_urls = 'footnote'
0.8.3,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.3,texinfo_no_detailmenu = False
0.8.3,-- Options for Epub output ----------------------------------------------
0.8.3,Bibliographic Dublin Core info.
0.8.3,The basename for the epub file. It defaults to the project name.
0.8.3,epub_basename = project
0.8.3,The HTML theme for the epub output. Since the default themes are not
0.8.3,"optimized for small screen space, using the same theme for HTML and epub"
0.8.3,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.3,visual space.
0.8.3,epub_theme = 'epub'
0.8.3,The language of the text. It defaults to the language option
0.8.3,or 'en' if the language is not set.
0.8.3,epub_language = ''
0.8.3,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.3,epub_scheme = ''
0.8.3,The unique identifier of the text. This can be a ISBN number
0.8.3,or the project homepage.
0.8.3,epub_identifier = ''
0.8.3,A unique identification for the text.
0.8.3,epub_uid = ''
0.8.3,A tuple containing the cover image and cover page html template filenames.
0.8.3,epub_cover = ()
0.8.3,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.3,epub_guide = ()
0.8.3,HTML files that should be inserted before the pages created by sphinx.
0.8.3,The format is a list of tuples containing the path and title.
0.8.3,epub_pre_files = []
0.8.3,HTML files that should be inserted after the pages created by sphinx.
0.8.3,The format is a list of tuples containing the path and title.
0.8.3,epub_post_files = []
0.8.3,A list of files that should not be packed into the epub file.
0.8.3,The depth of the table of contents in toc.ncx.
0.8.3,epub_tocdepth = 3
0.8.3,Allow duplicate toc entries.
0.8.3,epub_tocdup = True
0.8.3,Choose between 'default' and 'includehidden'.
0.8.3,epub_tocscope = 'default'
0.8.3,Fix unsupported image types using the Pillow.
0.8.3,epub_fix_images = False
0.8.3,Scale large images.
0.8.3,epub_max_image_width = 0
0.8.3,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.3,epub_show_urls = 'inline'
0.8.3,"If false, no index is generated."
0.8.3,epub_use_index = True
0.8.2,-*- coding: utf-8 -*-
0.8.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.2,Steve Astels <sastels@gmail.com>
0.8.2,John Healy <jchealy@gmail.com>
0.8.2,
0.8.2,License: BSD 3 clause
0.8.2,Supporting numpy prior to version 1.7 is a little painful ...
0.8.2,Make sure y is an inexact type to avoid bad behavior on abs(MIN_INT).
0.8.2,"This will cause casting of x later. Also, make sure to allow subclasses"
0.8.2,"(e.g., for numpy.ma)."
0.8.2,"Because we're using boolean indexing, x & y must be the same shape."
0.8.2,"Ideally, we'd just do x, y = broadcast_arrays(x, y). It's in"
0.8.2,"lib.stride_tricks, though, so we can't import it here."
0.8.2,Avoid subtraction with infinite/nan values...
0.8.2,Check for equality of infinite values...
0.8.2,Make NaN == NaN
0.8.2,raise TypeError('Sparse distance matrices not yet supported')
0.8.2,mst_linkage_core does not generate a full minimal spanning tree
0.8.2,If a tree is required then we must build the edges from the information
0.8.2,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.2,Sort edges of the min_spanning_tree by weight
0.8.2,Convert edge list into standard hierarchical clustering format
0.8.2,Compute sparse mutual reachability graph
0.8.2,Compute the minimum spanning tree for the sparse graph
0.8.2,Convert the graph to scipy cluster array format
0.8.2,Sort edges of the min_spanning_tree by weight
0.8.2,Convert edge list into standard hierarchical clustering format
0.8.2,The Cython routines used require contiguous arrays
0.8.2,TO DO: Deal with p for minkowski appropriately
0.8.2,Get distance to kth nearest neighbour
0.8.2,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.2,Sort edges of the min_spanning_tree by weight
0.8.2,Convert edge list into standard hierarchical clustering format
0.8.2,The Cython routines used require contiguous arrays
0.8.2,Get distance to kth nearest neighbour
0.8.2,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.2,Sort edges of the min_spanning_tree by weight
0.8.2,Convert edge list into standard hierarchical clustering format
0.8.2,Sort edges of the min_spanning_tree by weight
0.8.2,Convert edge list into standard hierarchical clustering format
0.8.2,Sort edges of the min_spanning_tree by weight
0.8.2,Convert edge list into standard hierarchical clustering format
0.8.2,Checks input and converts to an nd-array where possible
0.8.2,Python 2 and 3 compliant string_type checking
0.8.2,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.8.2,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.8.2,Inherits from sklearn
0.8.2,-*- coding: utf-8 -*-
0.8.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.2,
0.8.2,License: BSD 3 clause
0.8.2,We want to get the x and y coordinates for the start of each cluster
0.8.2,"Initialize the leaves, since we know where they go, the iterate"
0.8.2,"through everything from the leaves back, setting coords as we go"
0.8.2,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.2,bottoms and widths for each rectangle. We can go through each cluster
0.8.2,and do this for each in turn.
0.8.2,Ensure we don't try to take log of zero
0.8.2,Finally we need the horizontal lines that occur at cluster splits.
0.8.2,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.2,Use PCA to get down to 32 dimension
0.8.2,-*- coding: utf-8 -*-
0.8.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.2,
0.8.2,License: BSD 3 clause
0.8.2,The Cython routines used require contiguous arrays
0.8.2,The Cython routines used require contiguous arrays
0.8.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.8.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.8.2,import pickle
0.8.2,from sklearn.cluster.tests.common import generate_clustered_data
0.8.2,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.2,"number of clusters, ignoring noise if present"
0.8.2,"metric is the function reference, not the string key."
0.8.2,"H, y = shuffle(X, y, random_state=7)"
0.8.2,import pickle
0.8.2,from sklearn.cluster.tests.common import generate_clustered_data
0.8.2,"X = generate_clustered_data(n_clusters=n_clusters, n_samples_per_cluster=50)"
0.8.2,"number of clusters, ignoring noise if present"
0.8.2,"number of clusters, ignoring noise if present"
0.8.2,"H, y = shuffle(X, y, random_state=7)"
0.8.2,"metric is the function reference, not the string key."
0.8.2,## Probably not applicable now #########################
0.8.2,def test_dbscan_sparse():
0.8.2,def test_dbscan_balltree():
0.8.2,def test_pickle():
0.8.2,def test_dbscan_core_samples_toy():
0.8.2,def test_boundaries():
0.8.2,Generate datasets. We choose the size big enough to see the scalability
0.8.2,"of the algorithms, but not too big to avoid too long running times"
0.8.2,normalize dataset for easier parameter selection
0.8.2,estimate bandwidth for mean shift
0.8.2,connectivity matrix for structured Ward
0.8.2,make connectivity symmetric
0.8.2,create clustering estimators
0.8.2,predict cluster memberships
0.8.2,plot
0.8.2,-*- coding: utf-8 -*-
0.8.2,#############################################################################
0.8.2,Generate sample data
0.8.2,#############################################################################
0.8.2,Compute DBSCAN
0.8.2,"Number of clusters in labels, ignoring noise if present."
0.8.2,#############################################################################
0.8.2,Plot result
0.8.2,Black removed and is used for noise instead.
0.8.2,Black used for noise.
0.8.2,Black used for noise.
0.8.2,-*- coding: utf-8 -*-
0.8.2,
0.8.2,"hdbscan documentation build configuration file, created by"
0.8.2,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.2,
0.8.2,This file is execfile()d with the current directory set to its
0.8.2,containing dir.
0.8.2,
0.8.2,Note that not all possible configuration values are present in this
0.8.2,autogenerated file.
0.8.2,
0.8.2,All configuration values have a default; values that are commented out
0.8.2,serve to show the default.
0.8.2,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.2,add these directories to sys.path here. If the directory is relative to the
0.8.2,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.2,"## We now install the package in a virtualenv to build docs, so this is not needed"
0.8.2,"sys.path.insert(0, os.path.abspath('../'))"
0.8.2,-- General configuration ------------------------------------------------
0.8.2,"If your documentation needs a minimal Sphinx version, state it here."
0.8.2,needs_sphinx = '1.0'
0.8.2,"Add any Sphinx extension module names here, as strings. They can be"
0.8.2,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.2,ones.
0.8.2,"'sphinx.ext.napoleon',"
0.8.2,'numpy_ext.numpydoc'
0.8.2,napoleon_google_docstring = False
0.8.2,napoleon_numpy_docstring = True
0.8.2,"Add any paths that contain templates here, relative to this directory."
0.8.2,The suffix(es) of source filenames.
0.8.2,You can specify multiple suffix as a list of string:
0.8.2,"source_suffix = ['.rst', '.md']"
0.8.2,The encoding of source files.
0.8.2,source_encoding = 'utf-8-sig'
0.8.2,The master toctree document.
0.8.2,General information about the project.
0.8.2,"The version info for the project you're documenting, acts as replacement for"
0.8.2,"|version| and |release|, also used in various other places throughout the"
0.8.2,built documents.
0.8.2,
0.8.2,The short X.Y version.
0.8.2,"The full version, including alpha/beta/rc tags."
0.8.2,The language for content autogenerated by Sphinx. Refer to documentation
0.8.2,for a list of supported languages.
0.8.2,
0.8.2,This is also used if you do content translation via gettext catalogs.
0.8.2,"Usually you set ""language"" from the command line for these cases."
0.8.2,"There are two options for replacing |today|: either, you set today to some"
0.8.2,"non-false value, then it is used:"
0.8.2,today = ''
0.8.2,"Else, today_fmt is used as the format for a strftime call."
0.8.2,"today_fmt = '%B %d, %Y'"
0.8.2,"List of patterns, relative to source directory, that match files and"
0.8.2,directories to ignore when looking for source files.
0.8.2,The reST default role (used for this markup: `text`) to use for all
0.8.2,documents.
0.8.2,default_role = None
0.8.2,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.2,add_function_parentheses = True
0.8.2,"If true, the current module name will be prepended to all description"
0.8.2,unit titles (such as .. function::).
0.8.2,add_module_names = True
0.8.2,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.2,output. They are ignored by default.
0.8.2,show_authors = False
0.8.2,The name of the Pygments (syntax highlighting) style to use.
0.8.2,A list of ignored prefixes for module index sorting.
0.8.2,modindex_common_prefix = []
0.8.2,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.2,keep_warnings = False
0.8.2,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.2,-- Options for HTML output ----------------------------------------------
0.8.2,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.2,a list of builtin themes.
0.8.2,html_theme = 'alabaster'
0.8.2,Theme options are theme-specific and customize the look and feel of a theme
0.8.2,"further.  For a list of options available for each theme, see the"
0.8.2,documentation.
0.8.2,html_theme_options = {}
0.8.2,"Add any paths that contain custom themes here, relative to this directory."
0.8.2,html_theme_path = []
0.8.2,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.2,"""<project> v<release> documentation""."
0.8.2,html_title = None
0.8.2,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.2,html_short_title = None
0.8.2,The name of an image file (relative to this directory) to place at the top
0.8.2,of the sidebar.
0.8.2,html_logo = None
0.8.2,The name of an image file (within the static path) to use as favicon of the
0.8.2,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.2,pixels large.
0.8.2,html_favicon = None
0.8.2,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.2,"relative to this directory. They are copied after the builtin static files,"
0.8.2,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.2,Add any extra paths that contain custom files (such as robots.txt or
0.8.2,".htaccess) here, relative to this directory. These files are copied"
0.8.2,directly to the root of the documentation.
0.8.2,html_extra_path = []
0.8.2,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.2,using the given strftime format.
0.8.2,"html_last_updated_fmt = '%b %d, %Y'"
0.8.2,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.2,typographically correct entities.
0.8.2,html_use_smartypants = True
0.8.2,"Custom sidebar templates, maps document names to template names."
0.8.2,html_sidebars = {}
0.8.2,"Additional templates that should be rendered to pages, maps page names to"
0.8.2,template names.
0.8.2,html_additional_pages = {}
0.8.2,"If false, no module index is generated."
0.8.2,html_domain_indices = True
0.8.2,"If false, no index is generated."
0.8.2,html_use_index = True
0.8.2,"If true, the index is split into individual pages for each letter."
0.8.2,html_split_index = False
0.8.2,"If true, links to the reST sources are added to the pages."
0.8.2,html_show_sourcelink = True
0.8.2,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.2,html_show_sphinx = True
0.8.2,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.2,html_show_copyright = True
0.8.2,"If true, an OpenSearch description file will be output, and all pages will"
0.8.2,contain a <link> tag referring to it.  The value of this option must be the
0.8.2,base URL from which the finished HTML is served.
0.8.2,html_use_opensearch = ''
0.8.2,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.2,html_file_suffix = None
0.8.2,Language to be used for generating the HTML full-text search index.
0.8.2,Sphinx supports the following languages:
0.8.2,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.2,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.2,html_search_language = 'en'
0.8.2,"A dictionary with options for the search language support, empty by default."
0.8.2,Now only 'ja' uses this config value
0.8.2,html_search_options = {'type': 'default'}
0.8.2,The name of a javascript file (relative to the configuration directory) that
0.8.2,"implements a search results scorer. If empty, the default will be used."
0.8.2,html_search_scorer = 'scorer.js'
0.8.2,Output file base name for HTML help builder.
0.8.2,-- Options for LaTeX output ---------------------------------------------
0.8.2,The paper size ('letterpaper' or 'a4paper').
0.8.2,"'papersize': 'letterpaper',"
0.8.2,"The font size ('10pt', '11pt' or '12pt')."
0.8.2,"'pointsize': '10pt',"
0.8.2,Additional stuff for the LaTeX preamble.
0.8.2,"'preamble': '',"
0.8.2,Latex figure (float) alignment
0.8.2,"'figure_align': 'htbp',"
0.8.2,Grouping the document tree into LaTeX files. List of tuples
0.8.2,"(source start file, target name, title,"
0.8.2,"author, documentclass [howto, manual, or own class])."
0.8.2,The name of an image file (relative to this directory) to place at the top of
0.8.2,the title page.
0.8.2,latex_logo = None
0.8.2,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.2,not chapters.
0.8.2,latex_use_parts = False
0.8.2,"If true, show page references after internal links."
0.8.2,latex_show_pagerefs = False
0.8.2,"If true, show URL addresses after external links."
0.8.2,latex_show_urls = False
0.8.2,Documents to append as an appendix to all manuals.
0.8.2,latex_appendices = []
0.8.2,"If false, no module index is generated."
0.8.2,latex_domain_indices = True
0.8.2,-- Options for manual page output ---------------------------------------
0.8.2,One entry per manual page. List of tuples
0.8.2,"(source start file, name, description, authors, manual section)."
0.8.2,"If true, show URL addresses after external links."
0.8.2,man_show_urls = False
0.8.2,-- Options for Texinfo output -------------------------------------------
0.8.2,Grouping the document tree into Texinfo files. List of tuples
0.8.2,"(source start file, target name, title, author,"
0.8.2,"dir menu entry, description, category)"
0.8.2,Documents to append as an appendix to all manuals.
0.8.2,texinfo_appendices = []
0.8.2,"If false, no module index is generated."
0.8.2,texinfo_domain_indices = True
0.8.2,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.2,texinfo_show_urls = 'footnote'
0.8.2,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.2,texinfo_no_detailmenu = False
0.8.2,-- Options for Epub output ----------------------------------------------
0.8.2,Bibliographic Dublin Core info.
0.8.2,The basename for the epub file. It defaults to the project name.
0.8.2,epub_basename = project
0.8.2,The HTML theme for the epub output. Since the default themes are not
0.8.2,"optimized for small screen space, using the same theme for HTML and epub"
0.8.2,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.2,visual space.
0.8.2,epub_theme = 'epub'
0.8.2,The language of the text. It defaults to the language option
0.8.2,or 'en' if the language is not set.
0.8.2,epub_language = ''
0.8.2,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.2,epub_scheme = ''
0.8.2,The unique identifier of the text. This can be a ISBN number
0.8.2,or the project homepage.
0.8.2,epub_identifier = ''
0.8.2,A unique identification for the text.
0.8.2,epub_uid = ''
0.8.2,A tuple containing the cover image and cover page html template filenames.
0.8.2,epub_cover = ()
0.8.2,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.2,epub_guide = ()
0.8.2,HTML files that should be inserted before the pages created by sphinx.
0.8.2,The format is a list of tuples containing the path and title.
0.8.2,epub_pre_files = []
0.8.2,HTML files that should be inserted after the pages created by sphinx.
0.8.2,The format is a list of tuples containing the path and title.
0.8.2,epub_post_files = []
0.8.2,A list of files that should not be packed into the epub file.
0.8.2,The depth of the table of contents in toc.ncx.
0.8.2,epub_tocdepth = 3
0.8.2,Allow duplicate toc entries.
0.8.2,epub_tocdup = True
0.8.2,Choose between 'default' and 'includehidden'.
0.8.2,epub_tocscope = 'default'
0.8.2,Fix unsupported image types using the Pillow.
0.8.2,epub_fix_images = False
0.8.2,Scale large images.
0.8.2,epub_max_image_width = 0
0.8.2,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.2,epub_show_urls = 'inline'
0.8.2,"If false, no index is generated."
0.8.2,epub_use_index = True
0.8.1,-*- coding: utf-8 -*-
0.8.1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.1,Steve Astels <sastels@gmail.com>
0.8.1,John Healy <jchealy@gmail.com>
0.8.1,
0.8.1,License: BSD 3 clause
0.8.1,Try and work around older sklearn api
0.8.1,raise TypeError('Sparse distance matrices not yet supported')
0.8.1,mst_linkage_core does not generate a full minimal spanning tree
0.8.1,If a tree is required then we must build the edges from the information
0.8.1,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8.1,Sort edges of the min_spanning_tree by weight
0.8.1,Convert edge list into standard hierarchical clustering format
0.8.1,Compute sparse mutual reachability graph
0.8.1,Compute the minimum spanning tree for the sparse graph
0.8.1,Convert the graph to scipy cluster array format
0.8.1,Sort edges of the min_spanning_tree by weight
0.8.1,Convert edge list into standard hierarchical clustering format
0.8.1,The Cython routines used require contiguous arrays
0.8.1,TO DO: Deal with p for minkowski appropriately
0.8.1,Get distance to kth nearest neighbour
0.8.1,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.1,Sort edges of the min_spanning_tree by weight
0.8.1,Convert edge list into standard hierarchical clustering format
0.8.1,The Cython routines used require contiguous arrays
0.8.1,Get distance to kth nearest neighbour
0.8.1,Mutual reachability distance is implicit in mst_linkage_core_vector
0.8.1,Sort edges of the min_spanning_tree by weight
0.8.1,Convert edge list into standard hierarchical clustering format
0.8.1,Sort edges of the min_spanning_tree by weight
0.8.1,Convert edge list into standard hierarchical clustering format
0.8.1,Sort edges of the min_spanning_tree by weight
0.8.1,Convert edge list into standard hierarchical clustering format
0.8.1,Checks input and converts to an nd-array where possible
0.8.1,Python 2 and 3 compliant string_type checking
0.8.1,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.8.1,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.8.1,Inherits from sklearn
0.8.1,-*- coding: utf-8 -*-
0.8.1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.1,
0.8.1,License: BSD 3 clause
0.8.1,We want to get the x and y coordinates for the start of each cluster
0.8.1,"Initialize the leaves, since we know where they go, the iterate"
0.8.1,"through everything from the leaves back, setting coords as we go"
0.8.1,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8.1,bottoms and widths for each rectangle. We can go through each cluster
0.8.1,and do this for each in turn.
0.8.1,Finally we need the horizontal lines that occur at cluster splits.
0.8.1,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8.1,Use PCA to get down to 32 dimension
0.8.1,-*- coding: utf-8 -*-
0.8.1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8.1,
0.8.1,License: BSD 3 clause
0.8.1,Need heuristic to decide when to go to boruvka; still debugging for now
0.8.1,Need heuristic to decide when to go to boruvka; still debugging for now
0.8.1,import pickle
0.8.1,"number of clusters, ignoring noise if present"
0.8.1,"assert_equal(n_clusters_1, n_clusters)"
0.8.1,"assert_equal(n_clusters_2, n_clusters)"
0.8.1,"assert_equal(n_clusters_1, n_clusters)"
0.8.1,"assert_equal(n_clusters_2, n_clusters)"
0.8.1,"metric is the function reference, not the string key."
0.8.1,"assert_equal(n_clusters_1, n_clusters)"
0.8.1,"assert_equal(n_clusters_2, n_clusters)"
0.8.1,import pickle
0.8.1,"number of clusters, ignoring noise if present"
0.8.1,"number of clusters, ignoring noise if present"
0.8.1,"metric is the function reference, not the string key."
0.8.1,## Probably not applicable now #########################
0.8.1,def test_dbscan_sparse():
0.8.1,def test_dbscan_balltree():
0.8.1,def test_pickle():
0.8.1,def test_dbscan_core_samples_toy():
0.8.1,def test_boundaries():
0.8.1,Generate datasets. We choose the size big enough to see the scalability
0.8.1,"of the algorithms, but not too big to avoid too long running times"
0.8.1,normalize dataset for easier parameter selection
0.8.1,estimate bandwidth for mean shift
0.8.1,connectivity matrix for structured Ward
0.8.1,make connectivity symmetric
0.8.1,create clustering estimators
0.8.1,predict cluster memberships
0.8.1,plot
0.8.1,-*- coding: utf-8 -*-
0.8.1,#############################################################################
0.8.1,Generate sample data
0.8.1,#############################################################################
0.8.1,Compute DBSCAN
0.8.1,"Number of clusters in labels, ignoring noise if present."
0.8.1,#############################################################################
0.8.1,Plot result
0.8.1,Black removed and is used for noise instead.
0.8.1,Black used for noise.
0.8.1,Black used for noise.
0.8.1,-*- coding: utf-8 -*-
0.8.1,
0.8.1,"hdbscan documentation build configuration file, created by"
0.8.1,sphinx-quickstart on Sat May 28 10:34:44 2016.
0.8.1,
0.8.1,This file is execfile()d with the current directory set to its
0.8.1,containing dir.
0.8.1,
0.8.1,Note that not all possible configuration values are present in this
0.8.1,autogenerated file.
0.8.1,
0.8.1,All configuration values have a default; values that are commented out
0.8.1,serve to show the default.
0.8.1,"If extensions (or modules to document with autodoc) are in another directory,"
0.8.1,add these directories to sys.path here. If the directory is relative to the
0.8.1,"documentation root, use os.path.abspath to make it absolute, like shown here."
0.8.1,-- General configuration ------------------------------------------------
0.8.1,"If your documentation needs a minimal Sphinx version, state it here."
0.8.1,needs_sphinx = '1.0'
0.8.1,"Add any Sphinx extension module names here, as strings. They can be"
0.8.1,extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
0.8.1,ones.
0.8.1,'sphinx.ext.napoleon'
0.8.1,'numpy_ext.numpydoc'
0.8.1,napoleon_google_docstring = False
0.8.1,napoleon_numpy_docstring = True
0.8.1,"Add any paths that contain templates here, relative to this directory."
0.8.1,The suffix(es) of source filenames.
0.8.1,You can specify multiple suffix as a list of string:
0.8.1,"source_suffix = ['.rst', '.md']"
0.8.1,The encoding of source files.
0.8.1,source_encoding = 'utf-8-sig'
0.8.1,The master toctree document.
0.8.1,General information about the project.
0.8.1,"The version info for the project you're documenting, acts as replacement for"
0.8.1,"|version| and |release|, also used in various other places throughout the"
0.8.1,built documents.
0.8.1,
0.8.1,The short X.Y version.
0.8.1,"The full version, including alpha/beta/rc tags."
0.8.1,The language for content autogenerated by Sphinx. Refer to documentation
0.8.1,for a list of supported languages.
0.8.1,
0.8.1,This is also used if you do content translation via gettext catalogs.
0.8.1,"Usually you set ""language"" from the command line for these cases."
0.8.1,"There are two options for replacing |today|: either, you set today to some"
0.8.1,"non-false value, then it is used:"
0.8.1,today = ''
0.8.1,"Else, today_fmt is used as the format for a strftime call."
0.8.1,"today_fmt = '%B %d, %Y'"
0.8.1,"List of patterns, relative to source directory, that match files and"
0.8.1,directories to ignore when looking for source files.
0.8.1,The reST default role (used for this markup: `text`) to use for all
0.8.1,documents.
0.8.1,default_role = None
0.8.1,"If true, '()' will be appended to :func: etc. cross-reference text."
0.8.1,add_function_parentheses = True
0.8.1,"If true, the current module name will be prepended to all description"
0.8.1,unit titles (such as .. function::).
0.8.1,add_module_names = True
0.8.1,"If true, sectionauthor and moduleauthor directives will be shown in the"
0.8.1,output. They are ignored by default.
0.8.1,show_authors = False
0.8.1,The name of the Pygments (syntax highlighting) style to use.
0.8.1,A list of ignored prefixes for module index sorting.
0.8.1,modindex_common_prefix = []
0.8.1,"If true, keep warnings as ""system message"" paragraphs in the built documents."
0.8.1,keep_warnings = False
0.8.1,"If true, `todo` and `todoList` produce output, else they produce nothing."
0.8.1,-- Options for HTML output ----------------------------------------------
0.8.1,The theme to use for HTML and HTML Help pages.  See the documentation for
0.8.1,a list of builtin themes.
0.8.1,html_theme = 'alabaster'
0.8.1,Theme options are theme-specific and customize the look and feel of a theme
0.8.1,"further.  For a list of options available for each theme, see the"
0.8.1,documentation.
0.8.1,html_theme_options = {}
0.8.1,"Add any paths that contain custom themes here, relative to this directory."
0.8.1,html_theme_path = []
0.8.1,"The name for this set of Sphinx documents.  If None, it defaults to"
0.8.1,"""<project> v<release> documentation""."
0.8.1,html_title = None
0.8.1,A shorter title for the navigation bar.  Default is the same as html_title.
0.8.1,html_short_title = None
0.8.1,The name of an image file (relative to this directory) to place at the top
0.8.1,of the sidebar.
0.8.1,html_logo = None
0.8.1,The name of an image file (within the static path) to use as favicon of the
0.8.1,docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
0.8.1,pixels large.
0.8.1,html_favicon = None
0.8.1,"Add any paths that contain custom static files (such as style sheets) here,"
0.8.1,"relative to this directory. They are copied after the builtin static files,"
0.8.1,"so a file named ""default.css"" will overwrite the builtin ""default.css""."
0.8.1,Add any extra paths that contain custom files (such as robots.txt or
0.8.1,".htaccess) here, relative to this directory. These files are copied"
0.8.1,directly to the root of the documentation.
0.8.1,html_extra_path = []
0.8.1,"If not '', a 'Last updated on:' timestamp is inserted at every page bottom,"
0.8.1,using the given strftime format.
0.8.1,"html_last_updated_fmt = '%b %d, %Y'"
0.8.1,"If true, SmartyPants will be used to convert quotes and dashes to"
0.8.1,typographically correct entities.
0.8.1,html_use_smartypants = True
0.8.1,"Custom sidebar templates, maps document names to template names."
0.8.1,html_sidebars = {}
0.8.1,"Additional templates that should be rendered to pages, maps page names to"
0.8.1,template names.
0.8.1,html_additional_pages = {}
0.8.1,"If false, no module index is generated."
0.8.1,html_domain_indices = True
0.8.1,"If false, no index is generated."
0.8.1,html_use_index = True
0.8.1,"If true, the index is split into individual pages for each letter."
0.8.1,html_split_index = False
0.8.1,"If true, links to the reST sources are added to the pages."
0.8.1,html_show_sourcelink = True
0.8.1,"If true, ""Created using Sphinx"" is shown in the HTML footer. Default is True."
0.8.1,html_show_sphinx = True
0.8.1,"If true, ""(C) Copyright ..."" is shown in the HTML footer. Default is True."
0.8.1,html_show_copyright = True
0.8.1,"If true, an OpenSearch description file will be output, and all pages will"
0.8.1,contain a <link> tag referring to it.  The value of this option must be the
0.8.1,base URL from which the finished HTML is served.
0.8.1,html_use_opensearch = ''
0.8.1,"This is the file name suffix for HTML files (e.g. "".xhtml"")."
0.8.1,html_file_suffix = None
0.8.1,Language to be used for generating the HTML full-text search index.
0.8.1,Sphinx supports the following languages:
0.8.1,"'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'"
0.8.1,"'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'"
0.8.1,html_search_language = 'en'
0.8.1,"A dictionary with options for the search language support, empty by default."
0.8.1,Now only 'ja' uses this config value
0.8.1,html_search_options = {'type': 'default'}
0.8.1,The name of a javascript file (relative to the configuration directory) that
0.8.1,"implements a search results scorer. If empty, the default will be used."
0.8.1,html_search_scorer = 'scorer.js'
0.8.1,Output file base name for HTML help builder.
0.8.1,-- Options for LaTeX output ---------------------------------------------
0.8.1,The paper size ('letterpaper' or 'a4paper').
0.8.1,"'papersize': 'letterpaper',"
0.8.1,"The font size ('10pt', '11pt' or '12pt')."
0.8.1,"'pointsize': '10pt',"
0.8.1,Additional stuff for the LaTeX preamble.
0.8.1,"'preamble': '',"
0.8.1,Latex figure (float) alignment
0.8.1,"'figure_align': 'htbp',"
0.8.1,Grouping the document tree into LaTeX files. List of tuples
0.8.1,"(source start file, target name, title,"
0.8.1,"author, documentclass [howto, manual, or own class])."
0.8.1,The name of an image file (relative to this directory) to place at the top of
0.8.1,the title page.
0.8.1,latex_logo = None
0.8.1,"For ""manual"" documents, if this is true, then toplevel headings are parts,"
0.8.1,not chapters.
0.8.1,latex_use_parts = False
0.8.1,"If true, show page references after internal links."
0.8.1,latex_show_pagerefs = False
0.8.1,"If true, show URL addresses after external links."
0.8.1,latex_show_urls = False
0.8.1,Documents to append as an appendix to all manuals.
0.8.1,latex_appendices = []
0.8.1,"If false, no module index is generated."
0.8.1,latex_domain_indices = True
0.8.1,-- Options for manual page output ---------------------------------------
0.8.1,One entry per manual page. List of tuples
0.8.1,"(source start file, name, description, authors, manual section)."
0.8.1,"If true, show URL addresses after external links."
0.8.1,man_show_urls = False
0.8.1,-- Options for Texinfo output -------------------------------------------
0.8.1,Grouping the document tree into Texinfo files. List of tuples
0.8.1,"(source start file, target name, title, author,"
0.8.1,"dir menu entry, description, category)"
0.8.1,Documents to append as an appendix to all manuals.
0.8.1,texinfo_appendices = []
0.8.1,"If false, no module index is generated."
0.8.1,texinfo_domain_indices = True
0.8.1,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.1,texinfo_show_urls = 'footnote'
0.8.1,"If true, do not generate a @detailmenu in the ""Top"" node's menu."
0.8.1,texinfo_no_detailmenu = False
0.8.1,-- Options for Epub output ----------------------------------------------
0.8.1,Bibliographic Dublin Core info.
0.8.1,The basename for the epub file. It defaults to the project name.
0.8.1,epub_basename = project
0.8.1,The HTML theme for the epub output. Since the default themes are not
0.8.1,"optimized for small screen space, using the same theme for HTML and epub"
0.8.1,"output is usually not wise. This defaults to 'epub', a theme designed to save"
0.8.1,visual space.
0.8.1,epub_theme = 'epub'
0.8.1,The language of the text. It defaults to the language option
0.8.1,or 'en' if the language is not set.
0.8.1,epub_language = ''
0.8.1,The scheme of the identifier. Typical schemes are ISBN or URL.
0.8.1,epub_scheme = ''
0.8.1,The unique identifier of the text. This can be a ISBN number
0.8.1,or the project homepage.
0.8.1,epub_identifier = ''
0.8.1,A unique identification for the text.
0.8.1,epub_uid = ''
0.8.1,A tuple containing the cover image and cover page html template filenames.
0.8.1,epub_cover = ()
0.8.1,"A sequence of (type, uri, title) tuples for the guide element of content.opf."
0.8.1,epub_guide = ()
0.8.1,HTML files that should be inserted before the pages created by sphinx.
0.8.1,The format is a list of tuples containing the path and title.
0.8.1,epub_pre_files = []
0.8.1,HTML files that should be inserted after the pages created by sphinx.
0.8.1,The format is a list of tuples containing the path and title.
0.8.1,epub_post_files = []
0.8.1,A list of files that should not be packed into the epub file.
0.8.1,The depth of the table of contents in toc.ncx.
0.8.1,epub_tocdepth = 3
0.8.1,Allow duplicate toc entries.
0.8.1,epub_tocdup = True
0.8.1,Choose between 'default' and 'includehidden'.
0.8.1,epub_tocscope = 'default'
0.8.1,Fix unsupported image types using the Pillow.
0.8.1,epub_fix_images = False
0.8.1,Scale large images.
0.8.1,epub_max_image_width = 0
0.8.1,"How to display URL addresses: 'footnote', 'no', or 'inline'."
0.8.1,epub_show_urls = 'inline'
0.8.1,"If false, no index is generated."
0.8.1,epub_use_index = True
0.8,-*- coding: utf-8 -*-
0.8,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8,Steve Astels <sastels@gmail.com>
0.8,John Healy <jchealy@gmail.com>
0.8,
0.8,License: BSD 3 clause
0.8,Try and work around older sklearn api
0.8,mst_linkage_core does not generate a full minimal spanning tree
0.8,If a tree is required then we must build the edges from the information
0.8,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.8,Sort edges of the min_spanning_tree by weight
0.8,Convert edge list into standard hierarchical clustering format
0.8,The Cython routines used require contiguous arrays
0.8,TO DO: Deal with p for minkowski appropriately
0.8,Get distance to kth nearest neighbour
0.8,Mutual reachability distance is implicite in mst_linkage_core_vector
0.8,Sort edges of the min_spanning_tree by weight
0.8,Convert edge list into standard hierarchical clustering format
0.8,The Cython routines used require contiguous arrays
0.8,Get distance to kth nearest neighbour
0.8,Mutual reachability distance is implicite in mst_linkage_core_vector
0.8,Sort edges of the min_spanning_tree by weight
0.8,Convert edge list into standard hierarchical clustering format
0.8,Sort edges of the min_spanning_tree by weight
0.8,Convert edge list into standard hierarchical clustering format
0.8,Sort edges of the min_spanning_tree by weight
0.8,Convert edge list into standard hierarchical clustering format
0.8,Checks input and converts to an nd-array where possible
0.8,Python 2 and 3 compliant string_type checking
0.8,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.8,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.8,Inherits from sklearn
0.8,-*- coding: utf-8 -*-
0.8,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8,
0.8,License: BSD 3 clause
0.8,We want to get the x and y coordinates for the start of each cluster
0.8,"Initialize the leaves, since we know where they go, the iterate"
0.8,"through everything from the leaves back, setting coords as we go"
0.8,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.8,bottoms and widths for each rectangle. We can go through each cluster
0.8,and do this for each in turn.
0.8,Finally we need the horizontal lines that occur at cluster splits.
0.8,Get a 2D projection; if we have a lot of dimensions use PCA first
0.8,Use PCA to get down to 32 dimension
0.8,-*- coding: utf-8 -*-
0.8,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.8,
0.8,License: BSD 3 clause
0.8,Need heuristic to decide when to go to boruvka; still debugging for now
0.8,Need heuristic to decide when to go to boruvka; still debugging for now
0.8,import pickle
0.8,"number of clusters, ignoring noise if present"
0.8,"assert_equal(n_clusters_1, n_clusters)"
0.8,"assert_equal(n_clusters_2, n_clusters)"
0.8,"assert_equal(n_clusters_1, n_clusters)"
0.8,"assert_equal(n_clusters_2, n_clusters)"
0.8,"metric is the function reference, not the string key."
0.8,"assert_equal(n_clusters_1, n_clusters)"
0.8,"assert_equal(n_clusters_2, n_clusters)"
0.8,import pickle
0.8,"number of clusters, ignoring noise if present"
0.8,"metric is the function reference, not the string key."
0.8,## Probably not applicable now #########################
0.8,def test_dbscan_sparse():
0.8,def test_dbscan_balltree():
0.8,def test_pickle():
0.8,def test_dbscan_core_samples_toy():
0.8,def test_boundaries():
0.8,Generate datasets. We choose the size big enough to see the scalability
0.8,"of the algorithms, but not too big to avoid too long running times"
0.8,normalize dataset for easier parameter selection
0.8,estimate bandwidth for mean shift
0.8,connectivity matrix for structured Ward
0.8,make connectivity symmetric
0.8,create clustering estimators
0.8,predict cluster memberships
0.8,plot
0.8,-*- coding: utf-8 -*-
0.8,#############################################################################
0.8,Generate sample data
0.8,#############################################################################
0.8,Compute DBSCAN
0.8,"Number of clusters in labels, ignoring noise if present."
0.8,#############################################################################
0.8,Plot result
0.8,Black removed and is used for noise instead.
0.8,Black used for noise.
0.8,Black used for noise.
0.7.3,-*- coding: utf-8 -*-
0.7.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7.3,Steve Astels <sastels@gmail.com>
0.7.3,John Healy <jchealy@gmail.com>
0.7.3,
0.7.3,License: BSD 3 clause
0.7.3,Try and work around older sklearn api
0.7.3,mst_linkage_core does not generate a full minimal spanning tree
0.7.3,If a tree is required then we must build the edges from the information
0.7.3,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.7.3,Sort edges of the min_spanning_tree by weight
0.7.3,Convert edge list into standard hierarchical clustering format
0.7.3,The Cython routines used require contiguous arrays
0.7.3,TO DO: Deal with p for minkowski appropriately
0.7.3,Get distance to kth nearest neighbour
0.7.3,Mutual reachability distance is implicite in mst_linkage_core_cdist
0.7.3,Sort edges of the min_spanning_tree by weight
0.7.3,Convert edge list into standard hierarchical clustering format
0.7.3,The Cython routines used require contiguous arrays
0.7.3,Get distance to kth nearest neighbour
0.7.3,Mutual reachability distance is implicite in mst_linkage_core_cdist
0.7.3,Sort edges of the min_spanning_tree by weight
0.7.3,Convert edge list into standard hierarchical clustering format
0.7.3,Sort edges of the min_spanning_tree by weight
0.7.3,Convert edge list into standard hierarchical clustering format
0.7.3,Sort edges of the min_spanning_tree by weight
0.7.3,Convert edge list into standard hierarchical clustering format
0.7.3,Checks input and converts to an nd-array where possible
0.7.3,Python 2 and 3 compliant string_type checking
0.7.3,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.7.3,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.7.3,Inherits from sklearn
0.7.3,-*- coding: utf-8 -*-
0.7.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7.3,
0.7.3,License: BSD 3 clause
0.7.3,We want to get the x and y coordinates for the start of each cluster
0.7.3,"Initialize the leaves, since we know where they go, the iterate"
0.7.3,"through everything from the leaves back, setting coords as we go"
0.7.3,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.7.3,bottoms and widths for each rectangle. We can go through each cluster
0.7.3,and do this for each in turn.
0.7.3,Finally we need the horizontal lines that occur at cluster splits.
0.7.3,Get a 2D projection; if we have a lot of dimensions use PCA first
0.7.3,Use PCA to get down to 32 dimension
0.7.3,-*- coding: utf-8 -*-
0.7.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7.3,
0.7.3,License: BSD 3 clause
0.7.3,Need heuristic to decide when to go to boruvka; still debugging for now
0.7.3,Need heuristic to decide when to go to boruvka; still debugging for now
0.7.3,import pickle
0.7.3,"number of clusters, ignoring noise if present"
0.7.3,"assert_equal(n_clusters_1, n_clusters)"
0.7.3,"assert_equal(n_clusters_2, n_clusters)"
0.7.3,"assert_equal(n_clusters_1, n_clusters)"
0.7.3,"assert_equal(n_clusters_2, n_clusters)"
0.7.3,"metric is the function reference, not the string key."
0.7.3,"assert_equal(n_clusters_1, n_clusters)"
0.7.3,"assert_equal(n_clusters_2, n_clusters)"
0.7.3,import pickle
0.7.3,"number of clusters, ignoring noise if present"
0.7.3,"metric is the function reference, not the string key."
0.7.3,## Probably not applicable now #########################
0.7.3,def test_dbscan_sparse():
0.7.3,def test_dbscan_balltree():
0.7.3,def test_pickle():
0.7.3,def test_dbscan_core_samples_toy():
0.7.3,def test_boundaries():
0.7.3,Generate datasets. We choose the size big enough to see the scalability
0.7.3,"of the algorithms, but not too big to avoid too long running times"
0.7.3,normalize dataset for easier parameter selection
0.7.3,estimate bandwidth for mean shift
0.7.3,connectivity matrix for structured Ward
0.7.3,make connectivity symmetric
0.7.3,create clustering estimators
0.7.3,predict cluster memberships
0.7.3,plot
0.7.3,-*- coding: utf-8 -*-
0.7.3,#############################################################################
0.7.3,Generate sample data
0.7.3,#############################################################################
0.7.3,Compute DBSCAN
0.7.3,"Number of clusters in labels, ignoring noise if present."
0.7.3,#############################################################################
0.7.3,Plot result
0.7.3,Black removed and is used for noise instead.
0.7.3,Black used for noise.
0.7.3,Black used for noise.
0.7.2,-*- coding: utf-8 -*-
0.7.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7.2,Steve Astels <sastels@gmail.com>
0.7.2,John Healy <jchealy@gmail.com>
0.7.2,
0.7.2,License: BSD 3 clause
0.7.2,Try and work around older sklearn api
0.7.2,mst_linkage_core does not generate a full minimal spanning tree
0.7.2,If a tree is required then we must build the edges from the information
0.7.2,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.7.2,Sort edges of the min_spanning_tree by weight
0.7.2,Convert edge list into standard hierarchical clustering format
0.7.2,TO DO: Deal with p for minkowski appropriately
0.7.2,Get distance to kth nearest neighbour
0.7.2,Mutual reachability distance is implicite in mst_linkage_core_cdist
0.7.2,Sort edges of the min_spanning_tree by weight
0.7.2,Convert edge list into standard hierarchical clustering format
0.7.2,Get distance to kth nearest neighbour
0.7.2,Mutual reachability distance is implicite in mst_linkage_core_cdist
0.7.2,Sort edges of the min_spanning_tree by weight
0.7.2,Convert edge list into standard hierarchical clustering format
0.7.2,Sort edges of the min_spanning_tree by weight
0.7.2,Convert edge list into standard hierarchical clustering format
0.7.2,Sort edges of the min_spanning_tree by weight
0.7.2,Convert edge list into standard hierarchical clustering format
0.7.2,Checks input and converts to an nd-array where possible
0.7.2,Python 2 and 3 compliant string_type checking
0.7.2,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.7.2,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.7.2,Inherits from sklearn
0.7.2,-*- coding: utf-8 -*-
0.7.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7.2,
0.7.2,License: BSD 3 clause
0.7.2,We want to get the x and y coordinates for the start of each cluster
0.7.2,"Initialize the leaves, since we know where they go, the iterate"
0.7.2,"through everything from the leaves back, setting coords as we go"
0.7.2,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.7.2,bottoms and widths for each rectangle. We can go through each cluster
0.7.2,and do this for each in turn.
0.7.2,Finally we need the horizontal lines that occur at cluster splits.
0.7.2,Get a 2D projection; if we have a lot of dimensions use PCA first
0.7.2,Use PCA to get down to 32 dimension
0.7.2,-*- coding: utf-8 -*-
0.7.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7.2,
0.7.2,License: BSD 3 clause
0.7.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.7.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.7.2,import pickle
0.7.2,"number of clusters, ignoring noise if present"
0.7.2,"metric is the function reference, not the string key."
0.7.2,## Probably not applicable now #########################
0.7.2,def test_dbscan_sparse():
0.7.2,def test_dbscan_balltree():
0.7.2,def test_pickle():
0.7.2,def test_dbscan_core_samples_toy():
0.7.2,def test_boundaries():
0.7.2,Generate datasets. We choose the size big enough to see the scalability
0.7.2,"of the algorithms, but not too big to avoid too long running times"
0.7.2,normalize dataset for easier parameter selection
0.7.2,estimate bandwidth for mean shift
0.7.2,connectivity matrix for structured Ward
0.7.2,make connectivity symmetric
0.7.2,create clustering estimators
0.7.2,predict cluster memberships
0.7.2,plot
0.7.2,-*- coding: utf-8 -*-
0.7.2,#############################################################################
0.7.2,Generate sample data
0.7.2,#############################################################################
0.7.2,Compute DBSCAN
0.7.2,"Number of clusters in labels, ignoring noise if present."
0.7.2,#############################################################################
0.7.2,Plot result
0.7.2,Black removed and is used for noise instead.
0.7.2,Black used for noise.
0.7.2,Black used for noise.
0.7.1,-*- coding: utf-8 -*-
0.7.1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7.1,Steve Astels <sastels@gmail.com>
0.7.1,John Healy <jchealy@gmail.com>
0.7.1,
0.7.1,License: BSD 3 clause
0.7.1,Try and work around older sklearn api
0.7.1,mst_linkage_core does not generate a full minimal spanning tree
0.7.1,If a tree is required then we must build the edges from the information
0.7.1,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.7.1,Sort edges of the min_spanning_tree by weight
0.7.1,Convert edge list into standard hierarchical clustering format
0.7.1,TO DO: Deal with p for minkowski appropriately
0.7.1,Get distance to kth nearest neighbour
0.7.1,Mutual reachability distance is implicite in mst_linkage_core_cdist
0.7.1,Sort edges of the min_spanning_tree by weight
0.7.1,Convert edge list into standard hierarchical clustering format
0.7.1,Get distance to kth nearest neighbour
0.7.1,Mutual reachability distance is implicite in mst_linkage_core_cdist
0.7.1,Sort edges of the min_spanning_tree by weight
0.7.1,Convert edge list into standard hierarchical clustering format
0.7.1,Sort edges of the min_spanning_tree by weight
0.7.1,Convert edge list into standard hierarchical clustering format
0.7.1,Sort edges of the min_spanning_tree by weight
0.7.1,Convert edge list into standard hierarchical clustering format
0.7.1,Checks input and converts to an nd-array where possible
0.7.1,Python 2 and 3 compliant string_type checking
0.7.1,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.7.1,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.7.1,Inherits from sklearn
0.7.1,-*- coding: utf-8 -*-
0.7.1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7.1,
0.7.1,License: BSD 3 clause
0.7.1,We want to get the x and y coordinates for the start of each cluster
0.7.1,"Initialize the leaves, since we know where they go, the iterate"
0.7.1,"through everything from the leaves back, setting coords as we go"
0.7.1,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.7.1,bottoms and widths for each rectangle. We can go through each cluster
0.7.1,and do this for each in turn.
0.7.1,Finally we need the horizontal lines that occur at cluster splits.
0.7.1,Get a 2D projection; if we have a lot of dimensions use PCA first
0.7.1,Use PCA to get down to 32 dimension
0.7.1,-*- coding: utf-8 -*-
0.7.1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7.1,
0.7.1,License: BSD 3 clause
0.7.1,Need heuristic to decide when to go to boruvka; still debugging for now
0.7.1,Need heuristic to decide when to go to boruvka; still debugging for now
0.7.1,import pickle
0.7.1,"number of clusters, ignoring noise if present"
0.7.1,"metric is the function reference, not the string key."
0.7.1,## Probably not applicable now #########################
0.7.1,def test_dbscan_sparse():
0.7.1,def test_dbscan_balltree():
0.7.1,def test_pickle():
0.7.1,def test_dbscan_core_samples_toy():
0.7.1,def test_boundaries():
0.7.1,Generate datasets. We choose the size big enough to see the scalability
0.7.1,"of the algorithms, but not too big to avoid too long running times"
0.7.1,normalize dataset for easier parameter selection
0.7.1,estimate bandwidth for mean shift
0.7.1,connectivity matrix for structured Ward
0.7.1,make connectivity symmetric
0.7.1,create clustering estimators
0.7.1,predict cluster memberships
0.7.1,plot
0.7.1,-*- coding: utf-8 -*-
0.7.1,#############################################################################
0.7.1,Generate sample data
0.7.1,#############################################################################
0.7.1,Compute DBSCAN
0.7.1,"Number of clusters in labels, ignoring noise if present."
0.7.1,#############################################################################
0.7.1,Plot result
0.7.1,Black removed and is used for noise instead.
0.7.1,Black used for noise.
0.7.1,Black used for noise.
0.7,-*- coding: utf-8 -*-
0.7,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7,Steve Astels <sastels@gmail.com>
0.7,John Healy <jchealy@gmail.com>
0.7,
0.7,License: BSD 3 clause
0.7,Try and work around older sklearn api
0.7,mst_linkage_core does not generate a full minimal spanning tree
0.7,If a tree is required then we must build the edges from the information
0.7,returned by mst_linkage_core (i.e. just the order of points to be merged)
0.7,Sort edges of the min_spanning_tree by weight
0.7,Convert edge list into standard hierarchical clustering format
0.7,TO DO: Deal with p for minkowski appropriately
0.7,Get distance to kth nearest neighbour
0.7,Mutual reachability distance is implicite in mst_linkage_core_cdist
0.7,Sort edges of the min_spanning_tree by weight
0.7,Convert edge list into standard hierarchical clustering format
0.7,Get distance to kth nearest neighbour
0.7,Mutual reachability distance is implicite in mst_linkage_core_cdist
0.7,Sort edges of the min_spanning_tree by weight
0.7,Convert edge list into standard hierarchical clustering format
0.7,Sort edges of the min_spanning_tree by weight
0.7,Convert edge list into standard hierarchical clustering format
0.7,Sort edges of the min_spanning_tree by weight
0.7,Convert edge list into standard hierarchical clustering format
0.7,Checks input and converts to an nd-array where possible
0.7,Python 2 and 3 compliant string_type checking
0.7,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.7,TO DO: Need heuristic to decide when to go to boruvka; still debugging for now
0.7,Inherits from sklearn
0.7,-*- coding: utf-8 -*-
0.7,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7,
0.7,License: BSD 3 clause
0.7,We want to get the x and y coordinates for the start of each cluster
0.7,"Initialize the leaves, since we know where they go, the iterate"
0.7,"through everything from the leaves back, setting coords as we go"
0.7,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.7,bottoms and widths for each rectangle. We can go through each cluster
0.7,and do this for each in turn.
0.7,Finally we need the horizontal lines that occur at cluster splits.
0.7,Get a 2D projection; if we have a lot of dimensions use PCA first
0.7,Use PCA to get down to 32 dimension
0.7,-*- coding: utf-8 -*-
0.7,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.7,
0.7,License: BSD 3 clause
0.7,Need heuristic to decide when to go to boruvka; still debugging for now
0.7,Need heuristic to decide when to go to boruvka; still debugging for now
0.7,import pickle
0.7,"number of clusters, ignoring noise if present"
0.7,"metric is the function reference, not the string key."
0.7,## Probably not applicable now #########################
0.7,def test_dbscan_sparse():
0.7,def test_dbscan_balltree():
0.7,def test_pickle():
0.7,def test_dbscan_core_samples_toy():
0.7,def test_boundaries():
0.7,Generate datasets. We choose the size big enough to see the scalability
0.7,"of the algorithms, but not too big to avoid too long running times"
0.7,normalize dataset for easier parameter selection
0.7,estimate bandwidth for mean shift
0.7,connectivity matrix for structured Ward
0.7,make connectivity symmetric
0.7,create clustering estimators
0.7,predict cluster memberships
0.7,plot
0.7,-*- coding: utf-8 -*-
0.7,#############################################################################
0.7,Generate sample data
0.7,#############################################################################
0.7,Compute DBSCAN
0.7,"Number of clusters in labels, ignoring noise if present."
0.7,#############################################################################
0.7,Plot result
0.7,Black removed and is used for noise instead.
0.7,Black used for noise.
0.7,Black used for noise.
0.6.4,-*- coding: utf-8 -*-
0.6.4,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6.4,Steve Astels <sastels@gmail.com>
0.6.4,John Healy <jchealy@gmail.com>
0.6.4,
0.6.4,License: BSD 3 clause
0.6.4,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.4,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.4,-*- coding: utf-8 -*-
0.6.4,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6.4,
0.6.4,License: BSD 3 clause
0.6.4,We want to get the x and y coordinates for the start of each cluster
0.6.4,"Initialize the leaves, since we know where they go, the iterate"
0.6.4,"through everything from the leaves back, setting coords as we go"
0.6.4,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.6.4,bottoms and widths for each rectangle. We can go through each cluster
0.6.4,and do this for each in turn.
0.6.4,Finally we need the horizontal lines that occur at cluster splits.
0.6.4,Get a 2D projection; if we have a lot of dimensions use PCA first
0.6.4,Use PCA to get down to 32 dimension
0.6.4,-*- coding: utf-8 -*-
0.6.4,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6.4,
0.6.4,License: BSD 3 clause
0.6.4,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.4,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.4,import pickle
0.6.4,"number of clusters, ignoring noise if present"
0.6.4,"metric is the function reference, not the string key."
0.6.4,## Probably not applicable now #########################
0.6.4,def test_dbscan_sparse():
0.6.4,def test_dbscan_balltree():
0.6.4,def test_pickle():
0.6.4,def test_dbscan_core_samples_toy():
0.6.4,def test_boundaries():
0.6.4,Generate datasets. We choose the size big enough to see the scalability
0.6.4,"of the algorithms, but not too big to avoid too long running times"
0.6.4,normalize dataset for easier parameter selection
0.6.4,estimate bandwidth for mean shift
0.6.4,connectivity matrix for structured Ward
0.6.4,make connectivity symmetric
0.6.4,create clustering estimators
0.6.4,predict cluster memberships
0.6.4,plot
0.6.4,-*- coding: utf-8 -*-
0.6.4,#############################################################################
0.6.4,Generate sample data
0.6.4,#############################################################################
0.6.4,Compute DBSCAN
0.6.4,"Number of clusters in labels, ignoring noise if present."
0.6.4,#############################################################################
0.6.4,Plot result
0.6.4,Black removed and is used for noise instead.
0.6.4,Black used for noise.
0.6.4,Black used for noise.
0.6.3,-*- coding: utf-8 -*-
0.6.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6.3,Steve Astels <sastels@gmail.com>
0.6.3,John Healy <jchealy@gmail.com>
0.6.3,
0.6.3,License: BSD 3 clause
0.6.3,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.3,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.3,-*- coding: utf-8 -*-
0.6.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6.3,
0.6.3,License: BSD 3 clause
0.6.3,We want to get the x and y coordinates for the start of each cluster
0.6.3,"Initialize the leaves, since we know where they go, the iterate"
0.6.3,"through everything from the leaves back, setting coords as we go"
0.6.3,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.6.3,bottoms and widths for each rectangle. We can go through each cluster
0.6.3,and do this for each in turn.
0.6.3,Finally we need the horizontal lines that occur at cluster splits.
0.6.3,Get a 2D projection; if we have a lot of dimensions use PCA first
0.6.3,Use PCA to get down to 32 dimension
0.6.3,-*- coding: utf-8 -*-
0.6.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6.3,
0.6.3,License: BSD 3 clause
0.6.3,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.3,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.3,import pickle
0.6.3,"number of clusters, ignoring noise if present"
0.6.3,"metric is the function reference, not the string key."
0.6.3,## Probably not applicable now #########################
0.6.3,def test_dbscan_sparse():
0.6.3,def test_dbscan_balltree():
0.6.3,def test_pickle():
0.6.3,def test_dbscan_core_samples_toy():
0.6.3,def test_boundaries():
0.6.3,Generate datasets. We choose the size big enough to see the scalability
0.6.3,"of the algorithms, but not too big to avoid too long running times"
0.6.3,normalize dataset for easier parameter selection
0.6.3,estimate bandwidth for mean shift
0.6.3,connectivity matrix for structured Ward
0.6.3,make connectivity symmetric
0.6.3,create clustering estimators
0.6.3,predict cluster memberships
0.6.3,plot
0.6.3,-*- coding: utf-8 -*-
0.6.3,#############################################################################
0.6.3,Generate sample data
0.6.3,#############################################################################
0.6.3,Compute DBSCAN
0.6.3,"Number of clusters in labels, ignoring noise if present."
0.6.3,#############################################################################
0.6.3,Plot result
0.6.3,Black removed and is used for noise instead.
0.6.3,Black used for noise.
0.6.3,Black used for noise.
0.6.2,-*- coding: utf-8 -*-
0.6.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6.2,Steve Astels <sastels@gmail.com>
0.6.2,John Healy <jchealy@gmail.com>
0.6.2,
0.6.2,License: BSD 3 clause
0.6.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.2,-*- coding: utf-8 -*-
0.6.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6.2,
0.6.2,License: BSD 3 clause
0.6.2,We want to get the x and y coordinates for the start of each cluster
0.6.2,"Initialize the leaves, since we know where they go, the iterate"
0.6.2,"through everything from the leaves back, setting coords as we go"
0.6.2,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.6.2,bottoms and widths for each rectangle. We can go through each cluster
0.6.2,and do this for each in turn.
0.6.2,Finally we need the horizontal lines that occur at cluster splits.
0.6.2,Get a 2D projection; if we have a lot of dimensions use PCA first
0.6.2,Use PCA to get down to 32 dimension
0.6.2,-*- coding: utf-8 -*-
0.6.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6.2,
0.6.2,License: BSD 3 clause
0.6.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.6.2,import pickle
0.6.2,"number of clusters, ignoring noise if present"
0.6.2,"metric is the function reference, not the string key."
0.6.2,## Probably not applicable now #########################
0.6.2,def test_dbscan_sparse():
0.6.2,def test_dbscan_balltree():
0.6.2,def test_pickle():
0.6.2,def test_dbscan_core_samples_toy():
0.6.2,def test_boundaries():
0.6.2,Generate datasets. We choose the size big enough to see the scalability
0.6.2,"of the algorithms, but not too big to avoid too long running times"
0.6.2,normalize dataset for easier parameter selection
0.6.2,estimate bandwidth for mean shift
0.6.2,connectivity matrix for structured Ward
0.6.2,make connectivity symmetric
0.6.2,create clustering estimators
0.6.2,predict cluster memberships
0.6.2,plot
0.6.2,-*- coding: utf-8 -*-
0.6.2,#############################################################################
0.6.2,Generate sample data
0.6.2,#############################################################################
0.6.2,Compute DBSCAN
0.6.2,"Number of clusters in labels, ignoring noise if present."
0.6.2,#############################################################################
0.6.2,Plot result
0.6.2,Black removed and is used for noise instead.
0.6.2,Black used for noise.
0.6.2,Black used for noise.
0.6,-*- coding: utf-8 -*-
0.6,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6,Steve Astels <sastels@gmail.com>
0.6,John Healy <jchealy@gmail.com>
0.6,
0.6,License: BSD 3 clause
0.6,Need heuristic to decide when to go to boruvka; still debugging for now
0.6,Need heuristic to decide when to go to boruvka; still debugging for now
0.6,-*- coding: utf-8 -*-
0.6,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6,
0.6,License: BSD 3 clause
0.6,We want to get the x and y coordinates for the start of each cluster
0.6,"Initialize the leaves, since we know where they go, the iterate"
0.6,"through everything from the leaves back, setting coords as we go"
0.6,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.6,bottoms and widths for each rectangle. We can go through each cluster
0.6,and do this for each in turn.
0.6,Finally we need the horizontal lines that occur at cluster splits.
0.6,Get a 2D projection; if we have a lot of dimensions use PCA first
0.6,Use PCA to get down to 32 dimension
0.6,-*- coding: utf-8 -*-
0.6,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.6,
0.6,License: BSD 3 clause
0.6,Need heuristic to decide when to go to boruvka; still debugging for now
0.6,Need heuristic to decide when to go to boruvka; still debugging for now
0.6,import pickle
0.6,"number of clusters, ignoring noise if present"
0.6,"metric is the function reference, not the string key."
0.6,## Probably not applicable now #########################
0.6,def test_dbscan_sparse():
0.6,def test_dbscan_balltree():
0.6,def test_pickle():
0.6,def test_dbscan_core_samples_toy():
0.6,def test_boundaries():
0.6,Generate datasets. We choose the size big enough to see the scalability
0.6,"of the algorithms, but not too big to avoid too long running times"
0.6,normalize dataset for easier parameter selection
0.6,estimate bandwidth for mean shift
0.6,connectivity matrix for structured Ward
0.6,make connectivity symmetric
0.6,create clustering estimators
0.6,predict cluster memberships
0.6,plot
0.6,-*- coding: utf-8 -*-
0.6,#############################################################################
0.6,Generate sample data
0.6,#############################################################################
0.6,Compute DBSCAN
0.6,"Number of clusters in labels, ignoring noise if present."
0.6,#############################################################################
0.6,Plot result
0.6,Black removed and is used for noise instead.
0.6,Black used for noise.
0.6,Black used for noise.
0.5,-*- coding: utf-8 -*-
0.5,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.5,Steve Astels <sastels@gmail.com>
0.5,John Healy <jchealy@gmail.com>
0.5,
0.5,License: BSD 3 clause
0.5,"kdtree_pdist_mutual_reachability,"
0.5,"balltree_pdist_mutual_reachability,"
0.5,"kdtree_mutual_reachability,"
0.5,balltree_mutual_reachability
0.5,Need heuristic to decide when to go to boruvka; still debugging for now
0.5,Need heuristic to decide when to go to boruvka; still debugging for now
0.5,-*- coding: utf-8 -*-
0.5,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.5,
0.5,License: BSD 3 clause
0.5,We want to get the x and y coordinates for the start of each cluster
0.5,"Initialize the leaves, since we know where they go, the iterate"
0.5,"through everything from the leaves back, setting coords as we go"
0.5,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.5,bottoms and widths for each rectangle. We can go through each cluster
0.5,and do this for each in turn.
0.5,Finally we need the horizontal lines that occur at cluster splits.
0.5,If the cluster was formed prior to the cut and is large enough
0.5,If the cluster had not been merged before the cut
0.5,Generate labels for each data point
0.5,Get a 2D projection; if we have a lot of dimensions use PCA first
0.5,Use PCA to get down to 32 dimension
0.5,-*- coding: utf-8 -*-
0.5,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.5,
0.5,License: BSD 3 clause
0.5,Need heuristic to decide when to go to boruvka; still debugging for now
0.5,Need heuristic to decide when to go to boruvka; still debugging for now
0.5,import pickle
0.5,"number of clusters, ignoring noise if present"
0.5,"metric is the function reference, not the string key."
0.5,## Probably not applicable now #########################
0.5,def test_dbscan_sparse():
0.5,def test_dbscan_balltree():
0.5,def test_pickle():
0.5,def test_dbscan_core_samples_toy():
0.5,def test_boundaries():
0.5,Generate datasets. We choose the size big enough to see the scalability
0.5,"of the algorithms, but not too big to avoid too long running times"
0.5,normalize dataset for easier parameter selection
0.5,estimate bandwidth for mean shift
0.5,connectivity matrix for structured Ward
0.5,make connectivity symmetric
0.5,create clustering estimators
0.5,predict cluster memberships
0.5,plot
0.5,-*- coding: utf-8 -*-
0.5,#############################################################################
0.5,Generate sample data
0.5,#############################################################################
0.5,Compute DBSCAN
0.5,"Number of clusters in labels, ignoring noise if present."
0.5,#############################################################################
0.5,Plot result
0.5,Black removed and is used for noise instead.
0.5,Black used for noise.
0.5,Black used for noise.
0.4.2,-*- coding: utf-8 -*-
0.4.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.4.2,Steve Astels <sastels@gmail.com>
0.4.2,John Healy <jchealy@gmail.com>
0.4.2,
0.4.2,License: BSD 3 clause
0.4.2,"kdtree_pdist_mutual_reachability,"
0.4.2,"balltree_pdist_mutual_reachability,"
0.4.2,"kdtree_mutual_reachability,"
0.4.2,balltree_mutual_reachability
0.4.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.4.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.4.2,-*- coding: utf-8 -*-
0.4.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.4.2,
0.4.2,License: BSD 3 clause
0.4.2,We want to get the x and y coordinates for the start of each cluster
0.4.2,"Initialize the leaves, since we know where they go, the iterate"
0.4.2,"through everything from the leaves back, setting coords as we go"
0.4.2,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.4.2,bottoms and widths for each rectangle. We can go through each cluster
0.4.2,and do this for each in turn.
0.4.2,Finally we need the horizontal lines that occur at cluster splits.
0.4.2,If the cluster was formed prior to the cut and is large enough
0.4.2,If the cluster had not been merged before the cut
0.4.2,Generate labels for each data point
0.4.2,Get a 2D projection; if we have a lot of dimensions use PCA first
0.4.2,Use PCA to get down to 32 dimension
0.4.2,-*- coding: utf-8 -*-
0.4.2,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.4.2,
0.4.2,License: BSD 3 clause
0.4.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.4.2,Need heuristic to decide when to go to boruvka; still debugging for now
0.4.2,import pickle
0.4.2,"number of clusters, ignoring noise if present"
0.4.2,"metric is the function reference, not the string key."
0.4.2,## Probably not applicable now #########################
0.4.2,def test_dbscan_sparse():
0.4.2,def test_dbscan_balltree():
0.4.2,def test_pickle():
0.4.2,def test_dbscan_core_samples_toy():
0.4.2,def test_boundaries():
0.4.2,Generate datasets. We choose the size big enough to see the scalability
0.4.2,"of the algorithms, but not too big to avoid too long running times"
0.4.2,normalize dataset for easier parameter selection
0.4.2,estimate bandwidth for mean shift
0.4.2,connectivity matrix for structured Ward
0.4.2,make connectivity symmetric
0.4.2,create clustering estimators
0.4.2,predict cluster memberships
0.4.2,plot
0.4.2,-*- coding: utf-8 -*-
0.4.2,#############################################################################
0.4.2,Generate sample data
0.4.2,#############################################################################
0.4.2,Compute DBSCAN
0.4.2,"Number of clusters in labels, ignoring noise if present."
0.4.2,#############################################################################
0.4.2,Plot result
0.4.2,Black removed and is used for noise instead.
0.4.2,Black used for noise.
0.4.2,Black used for noise.
0.4,-*- coding: utf-8 -*-
0.4,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.4,Steve Astels <sastels@gmail.com>
0.4,John Healy <jchealy@gmail.com>
0.4,
0.4,License: BSD 3 clause
0.4,"kdtree_pdist_mutual_reachability,"
0.4,"balltree_pdist_mutual_reachability,"
0.4,"kdtree_mutual_reachability,"
0.4,balltree_mutual_reachability
0.4,Need heuristic to decide when to go to boruvka; still debugging for now
0.4,Need heuristic to decide when to go to boruvka; still debugging for now
0.4,-*- coding: utf-8 -*-
0.4,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.4,
0.4,License: BSD 3 clause
0.4,We want to get the x and y coordinates for the start of each cluster
0.4,"Initialize the leaves, since we know where they go, the iterate"
0.4,"through everything from the leaves back, setting coords as we go"
0.4,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.4,bottoms and widths for each rectangle. We can go through each cluster
0.4,and do this for each in turn.
0.4,Finally we need the horizontal lines that occur at cluster splits.
0.4,If the cluster was formed prior to the cut and is large enough
0.4,If the cluster had not been merged before the cut
0.4,Generate labels for each data point
0.4,Get a 2D projection; if we have a lot of dimensions use PCA first
0.4,Use PCA to get down to 32 dimension
0.4,-*- coding: utf-8 -*-
0.4,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.4,
0.4,License: BSD 3 clause
0.4,Need heuristic to decide when to go to boruvka; still debugging for now
0.4,Need heuristic to decide when to go to boruvka; still debugging for now
0.4,import pickle
0.4,"number of clusters, ignoring noise if present"
0.4,"metric is the function reference, not the string key."
0.4,## Probably not applicable now #########################
0.4,def test_dbscan_sparse():
0.4,def test_dbscan_balltree():
0.4,def test_pickle():
0.4,def test_dbscan_core_samples_toy():
0.4,def test_boundaries():
0.4,Generate datasets. We choose the size big enough to see the scalability
0.4,"of the algorithms, but not too big to avoid too long running times"
0.4,normalize dataset for easier parameter selection
0.4,estimate bandwidth for mean shift
0.4,connectivity matrix for structured Ward
0.4,make connectivity symmetric
0.4,create clustering estimators
0.4,predict cluster memberships
0.4,plot
0.4,-*- coding: utf-8 -*-
0.4,#############################################################################
0.4,Generate sample data
0.4,#############################################################################
0.4,Compute DBSCAN
0.4,"Number of clusters in labels, ignoring noise if present."
0.4,#############################################################################
0.4,Plot result
0.4,Black removed and is used for noise instead.
0.4,Black used for noise.
0.4,Black used for noise.
0.3,-*- coding: utf-8 -*-
0.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.3,Steve Astels <sastels@gmail.com>
0.3,John Healy <jchealy@gmail.com>
0.3,
0.3,License: BSD 3 clause
0.3,-*- coding: utf-8 -*-
0.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.3,
0.3,License: BSD 3 clause
0.3,We want to get the x and y coordinates for the start of each cluster
0.3,"Initialize the leaves, since we know where they go, the iterate"
0.3,"through everything from the leaves back, setting coords as we go"
0.3,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.3,bottoms and widths for each rectangle. We can go through each cluster
0.3,and do this for each in turn.
0.3,Finally we need the horizontal lines that occur at cluster splits.
0.3,If the cluster was formed prior to the cut and is large enough
0.3,If the cluster had not been merged before the cut
0.3,Generate labels for each data point
0.3,Get a 2D projection; if we have a lot of dimensions use PCA first
0.3,Use PCA to get down to 32 dimension
0.3,-*- coding: utf-8 -*-
0.3,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.3,
0.3,License: BSD 3 clause
0.3,import pickle
0.3,"number of clusters, ignoring noise if present"
0.3,"metric is the function reference, not the string key."
0.3,## Probably not applicable now #########################
0.3,def test_dbscan_sparse():
0.3,def test_dbscan_balltree():
0.3,def test_pickle():
0.3,def test_dbscan_core_samples_toy():
0.3,def test_boundaries():
0.3,Generate datasets. We choose the size big enough to see the scalability
0.3,"of the algorithms, but not too big to avoid too long running times"
0.3,normalize dataset for easier parameter selection
0.3,estimate bandwidth for mean shift
0.3,connectivity matrix for structured Ward
0.3,make connectivity symmetric
0.3,create clustering estimators
0.3,predict cluster memberships
0.3,plot
0.3,-*- coding: utf-8 -*-
0.3,#############################################################################
0.3,Generate sample data
0.3,#############################################################################
0.3,Compute DBSCAN
0.3,"Number of clusters in labels, ignoring noise if present."
0.3,#############################################################################
0.3,Plot result
0.3,Black removed and is used for noise instead.
0.3,Black used for noise.
0.3,Black used for noise.
0.1,-*- coding: utf-8 -*-
0.1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.1,Steve Astels <sastels@gmail.com>
0.1,John Healy <jchealy@gmail.com>
0.1,
0.1,License: BSD 3 clause
0.1,-*- coding: utf-8 -*-
0.1,Author: Leland McInnes <leland.mcinnes@gmail.com>
0.1,
0.1,License: BSD 3 clause
0.1,We want to get the x and y coordinates for the start of each cluster
0.1,"Initialize the leaves, since we know where they go, the iterate"
0.1,"through everything from the leaves back, setting coords as we go"
0.1,"We use bars to plot the 'icicles', so we need to generate centers, tops,"
0.1,bottoms and widths for each rectangle. We can go through each cluster
0.1,and do this for each in turn.
0.1,Finally we need the horizontal lines that occur at cluster splits.
0.1,Get a 2D projection; if we have a lot of dimensions use PCA first
0.1,Use PCA to get down to 32 dimension
0.1,import pickle
0.1,"number of clusters, ignoring noise if present"
0.1,"metric is the function reference, not the string key."
0.1,## Probably not applicable now #########################
0.1,def test_dbscan_sparse():
0.1,def test_dbscan_balltree():
0.1,def test_pickle():
0.1,def test_dbscan_core_samples_toy():
0.1,def test_boundaries():
0.1,Generate datasets. We choose the size big enough to see the scalability
0.1,"of the algorithms, but not too big to avoid too long running times"
0.1,normalize dataset for easier parameter selection
0.1,estimate bandwidth for mean shift
0.1,connectivity matrix for structured Ward
0.1,make connectivity symmetric
0.1,create clustering estimators
0.1,predict cluster memberships
0.1,plot
0.1,-*- coding: utf-8 -*-
0.1,#############################################################################
0.1,Generate sample data
0.1,#############################################################################
0.1,Compute DBSCAN
0.1,"Number of clusters in labels, ignoring noise if present."
0.1,#############################################################################
0.1,Plot result
0.1,Black removed and is used for noise instead.
0.1,Black used for noise.
0.1,Black used for noise.
